/*! For license information please see yasp.js.LICENSE.txt */
!function(){function e(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={exports:{}};return r[t].call(o.exports,o,o.exports,e),o.exports}var t,r={73647:function(e,t,r){"use strict";r.d(t,{H:function(){return n.H}});var n=r(1806)},72052:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{H:function(){return m}});var d=r(88261),p=r(9057),y={},v=function(e){function t(e){var n;if(i(this,t),h(l(n=r.call(this)),"aborted",void 0),h(l(n),"reason",void 0),h(l(n),"_onabort",d.Z),e!==y)throw new TypeError("Illegal constructor.");return n.aborted=!1,n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var r=c(t);return a(t,[{key:"onabort",get:function(){return this._onabort},set:function(e){var t=this._onabort;t&&this.removeEventListener("abort",t),this._onabort=e,this.addEventListener("abort",e)}},{key:"throwIfAborted",value:function(){throw this.reason}}]),t}(p.Z),m=function(){function e(){i(this,e),h(this,"_signal",void 0),this._signal=new v(y)}return a(e,[{key:"signal",get:function(){return this._signal}},{key:"abort",value:function(e){var t=this.signal;t.aborted||(t.aborted=!0,t.reason=e,t.dispatchEvent(new Event("abort")))}}]),e}()},1806:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,{H:function(){return u}});var i=r(86673),o=r(72052),a="object"===("undefined"===typeof self?"undefined":n(self))?self:window,u=Boolean((0,i.Y)((function(){return new a.AbortController})))?a.AbortController:o.H},58633:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{f:function(){return s}});r(61330);var o=r(81524),a=r.n(o),u=r(84626),c=a().ru.yandex.videoplayer.multiplatform,s=function(){function e(t){var r=this,n=t.defaultEstimateValue,o=t.halfLife;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"fetchers",[]),i(this,"activeSources",new Set),i(this,"defaultEstimate",{value:NaN,source:"default"}),i(this,"mpBandwidthEstimator",void 0),i(this,"handleFetcherProgress",(function(e){var t=e.time,n=e.size;r.mpBandwidthEstimator.sample(t,n)})),i(this,"destroy",(function(){r.fetchers.forEach((function(e){e.off("Progress",r.handleFetcherProgress)})),r.fetchers.length=0})),n&&(this.defaultEstimate.value=n),this.mpBandwidthEstimator=new c.estimate.BandwidthEstimator(this.defaultEstimate.value,new c.estimate.BandwidthEstimatorParams(o?new c.estimate.HalfLife(o.slow,o.fast):null))}var t,r,o;return t=e,o=[{key:"obtain",value:function(t){return e.instance||(e.instance=new e(t)),e.instance}},{key:"unsafeReset",value:function(){var t;null===(t=e.instance)||void 0===t||t.destroy(),e.instance=void 0}}],(r=[{key:"addActiveSource",value:function(e){this.activeSources.add(e)}},{key:"removeActiveSource",value:function(e){this.activeSources.delete(e)}},{key:"getActiveSourcesCount",value:function(){return this.activeSources.size}},{key:"getBandwidthEstimate",value:function(){if((0,u.RW)("yasp_fair_bandwidth")){var e=this.getActiveSourcesCount();return{value:this.mpBandwidthEstimator.getBandwidthEstimate()/Math.max(e,1),source:this.mpBandwidthEstimator.hasGoodEstimate()?"ewma":this.defaultEstimate.source}}return{value:this.mpBandwidthEstimator.getBandwidthEstimate(),source:this.mpBandwidthEstimator.hasGoodEstimate()?"ewma":this.defaultEstimate.source}}},{key:"appendFetcher",value:function(e){e.on("Progress",this.handleFetcherProgress),this.fetchers.push(e)}},{key:"removeFetcher",value:function(e){e.off("Progress",this.handleFetcherProgress);for(var t=0;t<this.fetchers.length;t++)this.fetchers[t]===e&&(this.fetchers.splice(t,1),t--)}},{key:"setDefaultEstimate",value:function(e){this.defaultEstimate=e,this.mpBandwidthEstimator.setDefaultEstimate(e.value)}},{key:"getDebugInfo",value:function(){var e=this.getBandwidthEstimate();return{fetchersCount:this.fetchers.length,defaultEstimate:this.defaultEstimate,estimate:e.value,source:e.source}}}])&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();i(s,"instance",void 0);a().ru.yandex.videoplayer.multiplatform},74626:function(e,t,r){"use strict";r.d(t,{h:function(){return n.h}});var n=r(4535)},4535:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,n,i){var a=t&&t.prototype instanceof o?t:o,u=Object.create(a.prototype),c=new d(i||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return y()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var c=l(u,n);if(c){if(c===S)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=r(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===S)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,n,c),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function o(){}function a(){}function u(){}function c(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function s(e,t){var i;this._invoke=function(o,a){function u(){return new t((function(i,u){!function i(o,a,u,c){var s=r(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&b.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}(o,a,i,u)}))}return i=i?i.then(u,u):u()}}function l(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,l(e,t),"throw"===t.method))return S;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,S;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,S):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,S)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[E];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(b.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}i=function(){return v};var v={},m=Object.prototype,b=m.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},E=w.iterator||"@@iterator",_=w.asyncIterator||"@@asyncIterator",O=w.toStringTag||"@@toStringTag";try{e({},"")}catch(P){e=function(e,t,r){return e[t]=r}}v.wrap=t;var S={},k={};e(k,E,(function(){return this}));var T=Object.getPrototypeOf,R=T&&T(T(p([])));R&&R!==m&&b.call(R,E)&&(k=R);var x=u.prototype=o.prototype=Object.create(k);return a.prototype=u,e(x,"constructor",u),e(u,"constructor",a),a.displayName=e(u,O,"GeneratorFunction"),v.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},v.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,e(t,O,"GeneratorFunction")),t.prototype=Object.create(x),t},v.awrap=function(e){return{__await:e}},c(s.prototype),e(s.prototype,_,(function(){return this})),v.AsyncIterator=s,v.async=function(e,r,n,i,o){void 0===o&&(o=g);var a=new s(t(e,r,n,i),o);return v.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},c(x),e(x,O,"Generator"),e(x,E,(function(){return this})),e(x,"toString",(function(){return"[object Generator]"})),v.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},v.values=p,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=b.call(i,"catchLoc"),u=b.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&b.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,S):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),S},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),h(r),S}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;h(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:p(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),S}},v}function o(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):g.resolve(c).then(n,i)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(){return(c="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=s(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{h:function(){return b}});var v=r(54588),m=r(25780),g=r(72573),b=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.y;return a(this,t),y(d(e=b.call(this)),"destroyed",!1),y(d(e),"closing",!1),y(d(e),"closed",!1),y(d(e),"paused",!0),y(d(e),"flushing",!1),y(d(e),"concatBuffer",void 0),y(d(e),"buffer",[]),y(d(e),"flushBuffer",(function(){if(!e.flushing){e.flushing=!0;for(var t=0;!e.paused&&t<e.buffer.length;)e.emit("Data",e.buffer[t]),t++;e.buffer.splice(0,t),e.flushing=!1,t>0&&0===e.buffer.length&&e.emit("Drain")}})),e.on("Resume",e.flushBuffer),e.once("Destroy",(function(){e.destroyed=!0})),e.concatBuffer=r,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(t,e);var r,n,s,h,v,b=f(t);return r=t,(n=[{key:"isClosing",value:function(){return this.closing&&!this.destroyed}},{key:"isClosed",value:function(){return this.closed&&!this.destroyed}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"asWritable",value:function(){return this}},{key:"asReadable",value:function(){return this}},{key:"write",value:function(e){if(this.destroyed)throw new Error("Unexpected write after destroy");if(this.closing)throw new Error("Unexpected write after close");return this.buffer.push(e),this.buffer=this.concatBuffer(this.buffer),this.flushBuffer(),!this.paused&&0===this.buffer.length}},{key:"read",value:(h=i().mark((function e(){var t=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}throw new Error("Unexpected read after destroy");case 2:if(!this.closed){e.next=4;break}return e.abrupt("return",g.resolve({value:void 0,done:!0}));case 4:return e.abrupt("return",new g((function(e,r){var n=function(){r(new Error("Unexpected destroy while read"))},i=function(){e({value:void 0,done:!0})};t.once("Data",(function(r){t.pause(),e({value:r,done:!1}),t.off("Destroy",n),t.off("Close",i)})),t.once("Destroy",n),t.once("Close",i),t.resume()})));case 5:case"end":return e.stop()}}),e,this)})),v=function(){var e=this,t=arguments;return new g((function(r,n){function i(e){o(u,r,n,i,a,"next",e)}function a(e){o(u,r,n,i,a,"throw",e)}var u=h.apply(e,t);i(void 0)}))},function(){return v.apply(this,arguments)})},{key:"pipe",value:function(e){this.on("Data",(function(t){t&&e.write(t)})),this.once("Close",(function(){e.close()})),this.resume()}},{key:"pause",value:function(){this.paused=!0,this.emit("Pause")}},{key:"resume",value:function(){this.paused=!1,this.emit("Resume")}},{key:"destroy",value:function(){this.buffer=[],c(p(t.prototype),"destroy",this).call(this)}},{key:"close",value:function(){var e=this;this.closing||(this.closing=!0,this.buffer.length>0?this.once("Drain",(function(){e.closed=!0,e.emit("Close")})):(this.closed=!0,this.emit("Close")))}}])&&u(r.prototype,n),s&&u(r,s),Object.defineProperty(r,"prototype",{writable:!1}),t}(v.M)},85470:function(e,t,r){"use strict";r.d(t,{EZ:function(){return n.EZ},Fv:function(){return n.Fv},HZ:function(){return n.HZ},M9:function(){return n.M9},VY:function(){return n.VY},gk:function(){return n.gk},mX:function(){return n.mX},u0:function(){return n.u0},yd:function(){return n.yd},zK:function(){return n.zK}});var n=r(49779)},27804:function(e,t,r){"use strict";r.d(t,{F:function(){return n}});var n=["","-webkit-","-ms-","-moz-","-o-"]},26853:function(e,t,r){"use strict";r.d(t,{t:function(){return n}});var n=["Googlebot","YandexBot","AhrefsBot","spider","Bot","HeadlessChrome"]},53333:function(e,t,r){"use strict";r.d(t,{w:function(){return n}});var n=["Robotics"]},66634:function(e,t,r){"use strict";var n=r(26853),i=r(53333);new RegExp("(".concat(n.t.join("|"),")"),"i"),new RegExp("(".concat(i.w.join("|"),")"),"i")},70083:function(e,t,r){"use strict";r.d(t,{N:function(){return o}});var n=r(17422),i=r.n(n),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=i()(e);return"boolean"===typeof t?-1:t}},91020:function(e,t,r){"use strict";r(82520)},54989:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return/Apple/.test(e.navigator.vendor)&&(0,i.H)(e)}r.d(t,{B:function(){return n}});var i=r(82520)},55260:function(e,t,r){"use strict";r.d(t,{M:function(){return i}});var n=r(2428),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,n.i)(e);return t.includes("CrKey")}},46630:function(e,t,r){"use strict";r.d(t,{B:function(){return i}});var n=r(70083),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return(0,n.N)(e)>11}},10949:function(e,t,r){"use strict";r.d(t,{g:function(){return n}});var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return/firefox/.test(e.navigator.userAgent.toLowerCase())}},47035:function(e,t,r){"use strict";r(11547)},22905:function(e,t,r){"use strict";r.d(t,{E:function(){return i}});var n=r(70083),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return-1!==(0,n.N)(e)}},30852:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.navigator.userAgent.toLowerCase();return/ipad|iphone|ipod/.test(t)&&!e.MSStream&&!i(e)}r.d(t,{P:function(){return n}});var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return e.navigator.userAgent.indexOf("UCBrowser")>-1}},55687:function(e,t,r){"use strict";function n(e,t){if(!(0,i.m)(e.matchMedia))return!1;var r=e.matchMedia(t);return(0,o.K)(r)&&Boolean(r.matches)}r.d(t,{y:function(){return n}});var i=r(53159),o=r(76101)},48265:function(e,t,r){"use strict";r.d(t,{B:function(){return i}});var n=r(2428),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,n.i)(e).toLowerCase();if(t.indexOf("android")>-1)return!1;var r=t.replace(/\(.+?\)/gi,"").split(" ").map((function(e){return e.trim().split("/")[0]})).filter((function(e){return e&&"mobile"!==e}));return 4===r.length&&"mozilla"===r[0]&&"applewebkit"===r[1]&&"version"===r[2]&&"safari"===r[3]}},63416:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return(0,a.B)(e)||(0,o.P)(e)||(0,i.B)(e)}r.d(t,{z:function(){return n}});var i=r(54989),o=r(30852),a=r(48265)},91003:function(e,t,r){"use strict";r.d(t,{y:function(){return i}});var n=r(2428),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,n.i)(e);return t.includes("Tizen")}},57354:function(e,t,r){"use strict";function n(e){var t=e.DocumentTouch;return Boolean(t)&&e.document instanceof t}r.d(t,{p:function(){return n}})},38303:function(e,t,r){"use strict";function n(e){return"ontouchstart"in e}r.d(t,{H:function(){return n}})},49015:function(e,t,r){"use strict";function n(e){return function(e){return Boolean(e.PointerEvent)}(e)&&function(e){var t=e.navigator||{},r=t.msMaxTouchPoints,n=t.maxTouchPoints;return r||n||0}(e)>0&&!(0,i.B)(e)}r.d(t,{H:function(){return n}});var i=r(46630)},82520:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return(0,a.H)(e)||(0,u.g)(e)||(0,c.n)(e)||(0,i.p)(e)||(0,o.H)(e)}r.d(t,{H:function(){return n}});var i=r(57354),o=r(38303),a=r(49015),u=r(11026),c=r(66878)},11026:function(e,t,r){"use strict";function n(e){return(0,o.y)(e,a)}r.d(t,{g:function(){return n}});var i=r(27804),o=r(55687),a=i.F.map((function(e){return"(".concat(e,"any-pointer:coarse)")})).join(",")},66878:function(e,t,r){"use strict";function n(e){return(0,i.y)(e,o)}r.d(t,{n:function(){return n}});var i=r(55687),o=r(27804).F.map((function(e){return"(".concat(e,"touch-enabled)")})).join(",")},77297:function(e,t,r){"use strict";r.d(t,{F:function(){return i}});var n=r(2428),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,n.i)(e);return t.includes("VIDAA")||t.includes("Hisense")}},52438:function(e,t,r){"use strict";r.d(t,{V:function(){return i}});var n=r(2428),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,n.i)(e);return t.includes("Web0S")}},94706:function(e,t,r){"use strict";r.d(t,{m:function(){return n}});var n=function(e){return e.devicePixelRatio||e.screen.deviceXDPI&&e.screen.deviceXDPI/e.screen.logicalXDPI||1}},96900:function(e,t,r){"use strict";r.d(t,{u:function(){return f}});var n=r(91003),i=r(52438),o=r(77297),a=r(94706),u=r(55664),c=r(31983),s=r(28573),l=r(72573),f=function(e){return(0,n.y)()?(0,u.P)(e):(0,i.V)()?(0,s.s)(e):(0,o.F)()?l.resolve((0,c.w)(e)):l.resolve((0,a.m)(e))}},55664:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,n,i){var a=t&&t.prototype instanceof o?t:o,u=Object.create(a.prototype),c=new p(i||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var c=f(u,n);if(c){if(c===S)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=r(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===S)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,n,c),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function o(){}function a(){}function u(){}function c(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function l(e,t){var i;this._invoke=function(o,a){function u(){return new t((function(i,u){!function i(o,a,u,c){var s=r(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&b.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}(o,a,i,u)}))}return i=i?i.then(u,u):u()}}function f(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,f(e,t),"throw"===t.method))return S;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,S;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,S):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,S)}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function y(e){if(e){var t=e[E];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(b.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:v}}function v(){return{value:void 0,done:!0}}i=function(){return m};var m={},g=Object.prototype,b=g.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},E=w.iterator||"@@iterator",_=w.asyncIterator||"@@asyncIterator",O=w.toStringTag||"@@toStringTag";try{e({},"")}catch(P){e=function(e,t,r){return e[t]=r}}m.wrap=t;var S={},k={};e(k,E,(function(){return this}));var T=Object.getPrototypeOf,R=T&&T(T(y([])));R&&R!==g&&b.call(R,E)&&(k=R);var x=u.prototype=o.prototype=Object.create(k);return a.prototype=u,e(x,"constructor",u),e(u,"constructor",a),a.displayName=e(u,O,"GeneratorFunction"),m.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},m.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,e(t,O,"GeneratorFunction")),t.prototype=Object.create(x),t},m.awrap=function(e){return{__await:e}},c(l.prototype),e(l.prototype,_,(function(){return this})),m.AsyncIterator=l,m.async=function(e,r,n,i,o){void 0===o&&(o=s);var a=new l(t(e,r,n,i),o);return m.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},c(x),e(x,O,"Generator"),e(x,E,(function(){return this})),e(x,"toString",(function(){return"[object Generator]"})),m.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},m.values=y,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=b.call(i,"catchLoc"),u=b.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&b.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,S):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),S},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),d(r),S}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;d(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:y(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),S}},m}function o(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(l){return void r(l)}u.done?t(c):s.resolve(c).then(n,i)}r.d(t,{P:function(){return l}});var a=r(11547),u=r(12693),c=r(91003),s=r(72573),l=(0,u.I)(function(){var e,t=(e=i().mark((function e(t){var r,n,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,a.m)(t),(0,c.y)()){e.next=3;break}return e.abrupt("return",r);case 3:if(n=t.tizen){e.next=6;break}return e.abrupt("return",r);case 6:return o=t.screen.height,e.prev=7,e.next=10,new s((function(e){n.systeminfo.getPropertyValue("PANEL",(function(t){return e(t.panelHeight)}))}));case 10:if(u=e.sent){e.next=13;break}return e.abrupt("return",r);case 13:return e.abrupt("return",u/o);case 16:return e.prev=16,e.t0=e.catch(7),e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[7,16]])})),function(){var t=this,r=arguments;return new s((function(n,i){function a(e){o(c,n,i,a,u,"next",e)}function u(e){o(c,n,i,a,u,"throw",e)}var c=e.apply(t,r);a(void 0)}))});return function(e){return t.apply(this,arguments)}}())},31983:function(e,t,r){"use strict";r.d(t,{w:function(){return a}});var n=r(11547),i=r(12693),o=r(77297),a=(0,i.I)((function(e){var t=(0,n.m)(e);if(!(0,o.F)())return t;var r=e.Hisense_GetPanelResolution,i=e.Hisense_Get4KSupportState;if(i&&i()&&(t=2),!r)return t;var a=e.screen.height;try{var c=r(),s=u(c).height;return s?s/a:t}catch(l){return t}})),u=function(e){var t=e.split("*");return{height:parseInt(t[1],10),width:parseInt(t[0],10)}}},28573:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,n,i){var a=t&&t.prototype instanceof o?t:o,u=Object.create(a.prototype),c=new p(i||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var c=f(u,n);if(c){if(c===S)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=r(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===S)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,n,c),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function o(){}function a(){}function u(){}function c(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function l(e,t){var i;this._invoke=function(o,a){function u(){return new t((function(i,u){!function i(o,a,u,c){var s=r(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&b.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}(o,a,i,u)}))}return i=i?i.then(u,u):u()}}function f(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,f(e,t),"throw"===t.method))return S;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,S;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,S):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,S)}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function y(e){if(e){var t=e[E];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(b.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:v}}function v(){return{value:void 0,done:!0}}i=function(){return m};var m={},g=Object.prototype,b=g.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},E=w.iterator||"@@iterator",_=w.asyncIterator||"@@asyncIterator",O=w.toStringTag||"@@toStringTag";try{e({},"")}catch(P){e=function(e,t,r){return e[t]=r}}m.wrap=t;var S={},k={};e(k,E,(function(){return this}));var T=Object.getPrototypeOf,R=T&&T(T(y([])));R&&R!==g&&b.call(R,E)&&(k=R);var x=u.prototype=o.prototype=Object.create(k);return a.prototype=u,e(x,"constructor",u),e(u,"constructor",a),a.displayName=e(u,O,"GeneratorFunction"),m.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},m.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,e(t,O,"GeneratorFunction")),t.prototype=Object.create(x),t},m.awrap=function(e){return{__await:e}},c(l.prototype),e(l.prototype,_,(function(){return this})),m.AsyncIterator=l,m.async=function(e,r,n,i,o){void 0===o&&(o=s);var a=new l(t(e,r,n,i),o);return m.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},c(x),e(x,O,"Generator"),e(x,E,(function(){return this})),e(x,"toString",(function(){return"[object Generator]"})),m.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},m.values=y,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=b.call(i,"catchLoc"),u=b.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&b.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,S):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),S},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),d(r),S}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;d(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:y(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),S}},m}function o(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(l){return void r(l)}u.done?t(c):s.resolve(c).then(n,i)}r.d(t,{s:function(){return l}});var a=r(11547),u=r(12693),c=r(52438),s=r(72573),l=(0,u.I)(function(){var e,t=(e=i().mark((function e(t){var r,n,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,a.m)(t),(0,c.V)()){e.next=3;break}return e.abrupt("return",r);case 3:if(n=t.webOS){e.next=6;break}return e.abrupt("return",r);case 6:return o=t.screen.height,e.prev=7,e.next=10,new s((function(e){n.deviceInfo((function(t){return e(t.screenHeight)}))}));case 10:if(u=e.sent){e.next=13;break}return e.abrupt("return",r);case 13:return e.abrupt("return",u/o);case 16:return e.prev=16,e.t0=e.catch(7),e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[7,16]])})),function(){var t=this,r=arguments;return new s((function(n,i){function a(e){o(c,n,i,a,u,"next",e)}function u(e){o(c,n,i,a,u,"throw",e)}var c=e.apply(t,r);a(void 0)}))});return function(e){return t.apply(this,arguments)}}())},11547:function(e,t,r){"use strict";r.d(t,{m:function(){return n.m},u:function(){return i.u}});var n=r(94706),i=r(96900)},2428:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{var t=e.navigator||{};return t.userAgent||""}catch(r){return""}}r.d(t,{i:function(){return n}})},49779:function(e,t,r){"use strict";r.d(t,{EZ:function(){return o.E},Fv:function(){return s.F},HZ:function(){return c.H},M9:function(){return n.M},VY:function(){return l.V},gk:function(){return i.g},mX:function(){return f.m},u0:function(){return f.u},yd:function(){return u.y},zK:function(){return a.z}});r(66634),r(70083),r(91020),r(54989);var n=r(55260),i=(r(46630),r(10949)),o=(r(47035),r(22905)),a=(r(55687),r(63416)),u=r(91003),c=r(82520),s=r(77297),l=r(52438),f=r(11547)},4143:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){var t="function"===typeof Map?new Map:void 0;return(c=function(e){function r(){return s(e,arguments,h(this).constructor)}if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,e)})(e)}function s(e,t,r){return(s=l()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&f(i,r.prototype),i}).apply(null,arguments)}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){var t=e.url,r=e.line,n=e.col,i=e.fileName,o=e.columnNumber,a=e.lineNumber;return"".concat(t||i||"?",":").concat(r||a||"?",":").concat(n||o||"?")}r.d(t,{s:function(){return b}});var y=r(10743),v=r(34843),m=r(55589),g=r(40497),b=function(e){function t(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var a="object"===n(e)?e:{message:String(e||m.J.message)};d(u(r=E.call(this)),"message",void 0),d(u(r),"code",void 0),d(u(r),"category",void 0),d(u(r),"isFatal",void 0),d(u(r),"details",void 0),d(u(r),"stack",void 0),d(u(r),"toString",void 0),d(u(r),"toJSON",void 0),g(u(r),t.prototype),r.message=i.message||a.message||m.J.message,r.code=i.code||a.code||a.id||m.J.code,r.category=i.category||a.category||m.J.category,r.isFatal=Boolean((0,v.d)([i.isFatal,a.isFatal,m.J.isFatal])),r.details=i.details||a.details||m.J.details,Object.defineProperty(u(r),"stack",{enumerable:!0});var c=i.stack||a.stack||p(a),s=c===m.J.stack?r.stack:c;if(s&&s!==m.J.stack)r.stack=s;else if(!r.stack)try{throw new Error(r.message)}catch(l){r.stack=s=l.stack||m.J.stack}return r.toString=function(){return(0,y.Y)(r.toJSON())||"{}"},r.toJSON=function(){return{message:r.message,code:r.code,isFatal:r.isFatal,details:r.details,category:r.category,stack:s}},r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e);var r,c,s,b,w,E=(r=t,c=l(),function(){var e,t=h(r);if(c){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)});return s=t,b&&i(s.prototype,b),w&&i(s,w),Object.defineProperty(s,"prototype",{writable:!1}),s}(c(Error))},55589:function(e,t,r){"use strict";r.d(t,{J:function(){return n}});var n={message:"DEFAULT_ERROR_MESSAGE",code:0,details:"",stack:"?:?:?",isFatal:!0,category:"DEFAULT"}},47134:function(e,t,r){"use strict";var n;r.d(t,{q:function(){return n}}),function(e){e.DEFAULT="DEFAULT",e.MEDIA="MEDIA",e.NETWORK_MEDIA="NETWORK_MEDIA",e.NETWORK_PLAYER="NETWORK_PLAYER",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NO_CODECS="NO_CODECS",e.CANNOT_PLAY="CANNOT_PLAY",e.UNSUPPORTED_ENV="UNSUPPORTED_ENV",e.EXCEPTION="EXCEPTION",e.ADS="ADS",e.CONFIG="CONFIG",e.REGIONAL="REGIONAL",e.DRM="DRM",e.ACCESS="ACCESS",e.BANNED="BANNED"}(n||(n={}))},68992:function(e,t,r){"use strict";function n(e){return e instanceof Error||"Error"===(0,i.M)(e)}r.d(t,{V:function(){return n}});var i=r(7550)},54588:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,{M:function(){return l}});var l=function(e){function t(){return i(this,t),s.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e);var r,n,c,s=u(t);return r=t,(n=[{key:"destroy",value:function(){var e=this;this.emit("Destroy"),this.off("Destroy"),Object.keys(this.handlers).forEach((function(t){e.off(t)})),Object.keys(this.onceHandlers).forEach((function(t){e.off(t)}))}}])&&o(r.prototype,n),c&&o(r,c),Object.defineProperty(r,"prototype",{writable:!1}),t}(r(46667).v)},46667:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{v:function(){return o}});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"handlers",Object.create(null)),i(this,"onceHandlers",Object.create(null)),i(this,"maxEventListeners",10)}var t,r,o;return t=e,(r=[{key:"setMaxListeners",value:function(e){!isFinite(e)||e<=0||(this.maxEventListeners=e)}},{key:"on",value:function(e,t){var r=this.getHandlers(e);this.removeHandler(t,r),r.push(t),this.checkSubscriptions(e)}},{key:"once",value:function(e,t){var r=this.getOnceHandlers(e);this.removeHandler(t,r),r.push(t),this.checkSubscriptions(e)}},{key:"off",value:function(e,t){var r=this.getHandlers(e),n=this.getOnceHandlers(e);if(void 0===t)return r.length=0,void(n.length=0);this.removeHandler(t,r),this.removeHandler(t,n)}},{key:"emit",value:function(e,t){var r=this.getHandlers(e),n=this.getOnceHandlers(e).slice();this.getOnceHandlers(e).length=0,r.slice().concat(n).forEach((function(e){try{e(t)}catch(r){setTimeout((function(){throw r}),0)}}))}},{key:"getHandlers",value:function(e){return void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e]}},{key:"getOnceHandlers",value:function(e){return void 0===this.onceHandlers[e]&&(this.onceHandlers[e]=[]),this.onceHandlers[e]}},{key:"checkSubscriptions",value:function(e){var t=this.getHandlers(e).length+this.getOnceHandlers(e).length;t>this.maxEventListeners&&console.warn("There are ".concat(t," subscriptions on event named ").concat(String(e)))}},{key:"removeHandler",value:function(e,t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}}])&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},84626:function(e,t,r){"use strict";r.d(t,{RW:function(){return n.RW},Vc:function(){return n.Vc},_V:function(){return n._V},jS:function(){return n.jS},qm:function(){return n.qm},r0:function(){return n.r0}});var n=r(65705)},53905:function(e,t,r){"use strict";function n(e){return!(!(0,s.K)(e)||!(0,s.K)(e.flags))&&((0,l.Y)((function(){(0,c.M)(e.flags,(function(e,t){d.flags[t]=String(e)}))})),!0)}function i(e){if(!d.flagsInited)try{d.flagsInited=!0,(0,u.H)(),p.some((function(t){return t(e)}))}finally{Array.isArray(d.onFlagsInit)&&d.onFlagsInit.forEach((function(e){return(0,l.Y)(e)}))}}function o(e){for(var t={},r=e.split(";"),n=0;n<r.length;n++){var i=r[n].split("=");t[i[0]]=i[1]}return t}r.d(t,{V:function(){return i}});var a=r(81031),u=r(8268),c=r(66061),s=r(76101),l=r(86673),f=r(83699),h=r(84608),d=(0,a.r)(),p=[function(e){var t=(0,f.L)();if(!(0,s.K)(t))return!1;var r=t.flags,n=t.slots,i=t.testids;return(0,s.K)(r)&&(0,l.Y)((function(){(0,c.M)(r,(function(e,t){d.flags[t]=String(e)}))})),d.slots=void 0!==n?String(n):void 0,d.testids=Array.isArray(i)?i.join(","):void 0!==i?String(i):void 0,!0},function(e){if(!Array.isArray(e))return!1;var t=(0,h.D)(e),r=t.flags,n=t.testids;return(0,l.Y)((function(){(0,c.M)(r,(function(e,t){d.flags[t]=String(e)}))})),d.slots=void 0,d.testids=n.join(","),!0},function(e){return!(!(0,s.K)(e)||"string"!==typeof e.flags)&&n({flags:o(e.flags)})},n]},24172:function(e,t,r){"use strict";r.d(t,{s:function(){return n}});var n="__UAAS_CONFIG_INLINE__"},11936:function(e,t,r){"use strict";r.d(t,{T:function(){return n}});var n=!1},86107:function(e,t,r){"use strict";function n(){return"string"!==typeof i.testids?[]:i.testids.split(",")}r.d(t,{_:function(){return n}});var i=(0,r(81031).r)()},83699:function(e,t,r){"use strict";function n(){return(0,o.Y)((function(){var e=JSON.parse(a.s);return{flags:e.flags,testids:e.testids,slots:e.slots,vpuid:e.vpuid}}))||void 0}r.d(t,{L:function(){return u}});var i=r(12693),o=r(86673),a=r(24172),u=r(11936).T?n:(0,i.I)(n)},65705:function(e,t,r){"use strict";function n(){return l(),m.flags||{}}function i(e){var t=a(e);if("undefined"===typeof t){var r=v[e];if(p.T&&"undefined"===typeof r)throw new Error("Unexpected default value for string flag ".concat(e));return r}return t}function o(e){return"true"===e||"1"===e||"false"!==e&&"0"!==e&&void 0}function a(e){return l(e),m.flags[e]}function u(e){var t=o(a(e));if("undefined"===typeof t){var r=o(v[e]);if(p.T&&"undefined"===typeof r)throw new Error("Unexpected default value for boolean flag ".concat(e));return r}return t}function c(e){if("undefined"!==typeof e){var t=parseFloat(e);if((0,f.z)(t))return t}}function s(e){var t=c(a(e));if("undefined"===typeof t){var r=c(v[e]);if(p.T&&"undefined"===typeof r)throw new Error("Unexpected default value for numeric flag ".concat(e));return r}return t}function l(e){if(!m.flagsInited){var t=new Error(e?"Unexpected usage of player's flag ".concat(e," before any flag configuration"):"Unexpected usage of player's getFlagsJson before any flag configuration");setTimeout((function(){throw t}))}}r.d(t,{RW:function(){return u},Vc:function(){return h.V},_V:function(){return y._},jS:function(){return s},qm:function(){return n},r0:function(){return i}});var f=r(93966),h=r(53905),d=r(81031),p=r(11936),y=r(86107),v="undefined"!==typeof{disable_multiplatform_interval_task:"false",web_autoplay_as_boolean:"false",web_debug_log_calls:"false",web_debug_log_events:"false",web_debug_log_internals:"false",web_debug_panel:"false",web_disable_seeking_logging:"false",web_experiment_checker_testid:"NaN",web_ignore_render_stalled:"true",web_incorrect_bitrate_cancel_timeout:"false",web_ios_safari_seeking_workaround_timeout:"500",web_multiplatform_fpa_call_process_after_last_response_end:"false",web_multiplatform_fpa_process_interval:"100",web_resolution_rule_aspect_ratio:"true",web_v2_multiplatform_buffer_goal_manager:"false",web_yasp_action_on_timings_collection:"none",web_yasp_buffer_goal_bytes_size:"0",web_yasp_decode_time_batcher:"false",web_yasp_enable_hevc:"false",web_yasp_enable_network_traces:"false",web_yasp_enable_worker:"true",web_yasp_low_memory_cleaning_in_normal_mode:"false",web_yasp_mse_recover_delays:"null",web_yasp_mse_recover_media_error:"false",web_yasp_static_timeout_for_low_latency:"true",web_yasp_target_latency_debug:"-1",web_yasp_time_to_start:"null",web_yasp_use_new_perf_whitelist_logic:"false",yasp_abr_loading_segment:"false",yasp_body_timeout:"1000",yasp_enable_new_timeout:"false",yasp_fair_bandwidth:"false",yasp_headers_timeout:"5000",yasp_no_source_abort_on_fake_seek:"false",yasp_videosegment_expected_load_time_multiplier:"1"}?{disable_multiplatform_interval_task:"false",web_autoplay_as_boolean:"false",web_debug_log_calls:"false",web_debug_log_events:"false",web_debug_log_internals:"false",web_debug_panel:"false",web_disable_seeking_logging:"false",web_experiment_checker_testid:"NaN",web_ignore_render_stalled:"true",web_incorrect_bitrate_cancel_timeout:"false",web_ios_safari_seeking_workaround_timeout:"500",web_multiplatform_fpa_call_process_after_last_response_end:"false",web_multiplatform_fpa_process_interval:"100",web_resolution_rule_aspect_ratio:"true",web_v2_multiplatform_buffer_goal_manager:"false",web_yasp_action_on_timings_collection:"none",web_yasp_buffer_goal_bytes_size:"0",web_yasp_decode_time_batcher:"false",web_yasp_enable_hevc:"false",web_yasp_enable_network_traces:"false",web_yasp_enable_worker:"true",web_yasp_low_memory_cleaning_in_normal_mode:"false",web_yasp_mse_recover_delays:"null",web_yasp_mse_recover_media_error:"false",web_yasp_static_timeout_for_low_latency:"true",web_yasp_target_latency_debug:"-1",web_yasp_time_to_start:"null",web_yasp_use_new_perf_whitelist_logic:"false",yasp_abr_loading_segment:"false",yasp_body_timeout:"1000",yasp_enable_new_timeout:"false",yasp_fair_bandwidth:"false",yasp_headers_timeout:"5000",yasp_no_source_abort_on_fake_seek:"false",yasp_videosegment_expected_load_time_multiplier:"1"}:{},m=(0,d.r)()},84608:function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e){var t={},r=[];return e.forEach((function(e){var i;if((0,a.K)(e)){var o=e.TESTID,u=e.CONTEXT;Array.isArray(o)?o.filter(Boolean).forEach((function(e){r.push(String(e))})):o&&r.push(String(o)),"VDPLTFRM"===e.HANDLER&&(0,a.K)(null===u||void 0===u||null===(i=u.MAIN)||void 0===i?void 0:i.web_player)&&Object.entries(u.MAIN.web_player).forEach((function(e){var r=n(e,2),i=r[0],o=r[1];t[i]=o}))}})),{flags:t,testids:r}}r.d(t,{D:function(){return o}});var a=r(76101)},8268:function(e,t,r){"use strict";function n(){var e,t=null===(e=(0,i.L)())||void 0===e?void 0:e.vpuid;t&&(0,o.ir)(String(t))}r.d(t,{H:function(){return n}});var i=r(83699),o=r(49992)},40813:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return"object"===("undefined"===typeof self?"undefined":n(self))?self:"object"===("undefined"===typeof window?"undefined":n(window))?window:globalThis}r.d(t,{I:function(){return i}})},53878:function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return!1;var r=t?Function.prototype.toString.call(e):e.toString?e.toString():"";return/\[native code\]/.test(r)||/\/\* source code not available \*\//.test(r)}r.d(t,{t:function(){return n}})},36354:function(e,t,r){"use strict";function n(e){return e&&"function"===typeof e.catch&&e.catch((function(e){})),e}r.d(t,{v:function(){return n}})},81031:function(e,t,r){"use strict";r.d(t,{a:function(){return n.a},r:function(){return n.r}});var n=r(95925)},95925:function(e,t,r){"use strict";function n(){return c}function i(e){if(c.flagsInited)return(0,a.Y)(e);c.onFlagsInit||(c.onFlagsInit=[]),c.onFlagsInit.push(e)}r.d(t,{a:function(){return i},r:function(){return n}});var o=r(40813),a=r(86673),u=(0,o.I)();u.Ya||(u.Ya={}),u.Ya.streamPlayer||(u.Ya.streamPlayer={}),u.Ya.streamPlayer.exp||(u.Ya.streamPlayer.exp={});var c=u.Ya.streamPlayer.exp;c.flags||(c.flags={})},87994:function(e,t,r){"use strict";r.d(t,{WL:function(){return n.WL}});var n=r(2683)},81323:function(e,t,r){"use strict";var n;r.d(t,{W:function(){return n}}),function(e){e.fairplay="fairplay",e.playready="playready",e.widevine="widevine",e.clearkey="clearkey",e.none="none"}(n||(n={}))},31969:function(e,t,r){"use strict";var n;r.d(t,{D:function(){return n}}),function(e){e.LIVE="LIVE",e.EVENT="EVENT",e.VOD="VOD"}(n||(n={}))},2683:function(e,t,r){"use strict";r.d(t,{WL:function(){return n.W}});r(48594),r(95079);var n=r(81323)},48594:function(e,t,r){"use strict";var n;!function(e){e.SourceChange="SourceChange",e.StatusChange="StatusChange",e.ErrorChange="ErrorChange",e.CurrentTimeChange="CurrentTimeChange",e.DurationChange="DurationChange",e.UtcStartTimeChange="UtcStartTimeChange",e.VideoTypeChange="VideoTypeChange",e.MutedChange="MutedChange",e.VolumeChange="VolumeChange"}(n||(n={}))},95079:function(e,t,r){"use strict";var n;!function(e){e.idle="idle",e.init="init",e.buffering="buffering",e.play="play",e.pause="pause",e.end="end",e.fatal="fatal",e.broken="broken",e.destroyed="destroyed",e.cancelled="cancelled",e.preparing="preparing",e.finished="finished"}(n||(n={}))},27038:function(e,t,r){"use strict";r.d(t,{M:function(){return n.M}});var n=r(72177)},62404:function(e,t,r){"use strict";r.d(t,{i:function(){return n}});var n=!(0,r(53878).t)(Math.random)||Math.random()===Math.random()},72177:function(e,t,r){"use strict";r.d(t,{M:function(){return o}});var n=r(62404),i=r(82484),o=n.i?i.U:function(){return Math.random()}},82484:function(e,t,r){"use strict";function n(){return((o=16807*o%2147483647)-1)/2147483646}r.d(t,{U:function(){return n}});var i=r(71294),o=(0,i.m6)()*(0,i.no)()%2147483647},19631:function(e,t,r){"use strict";r.d(t,{tO:function(){return n.tO}});var n=r(35634)},35634:function(e,t,r){"use strict";function n(e){return{getItem:function(t){try{return e.getItem(t)}catch(r){return null}},setItem:function(t,r){try{e.setItem(t,r)}catch(n){}},removeItem:function(t){try{e.removeItem(t)}catch(r){}},clear:function(){try{e.clear()}catch(t){}},hasItem:function(t){try{return null!==e.getItem(t)}catch(r){return!1}},get length(){try{return e.length}catch(t){return 0}},key:function(t){try{return e.key(t)}catch(r){return null}}}}r.d(t,{tO:function(){return o}});var i=r(24577),o=n(i.iW);n(i.qr),n(i.iZ)},49892:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,{k:function(){return i}});var i=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n={},(r="data")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,i;return t=e,(r=[{key:"getItem",value:function(e){return this.data[e]||null}},{key:"setItem",value:function(e,t){this.data[e]=t}},{key:"removeItem",value:function(e){delete this.data[e]}},{key:"clear",value:function(){this.data={}}},{key:"length",get:function(){return Object.keys(this.data).length}},{key:"key",value:function(e){var t=Object.keys(this.data);return e>=0&&e<t.length?t[e]:null}}])&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},24577:function(e,t,r){"use strict";function n(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{iW:function(){return f},iZ:function(){return d},qr:function(){return h}});var c=r(49892),s=r(7041),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["local","session","memory"];o(this,e),u(this,"fallbackOrder",void 0),this.fallbackOrder=t}var t,r,i;return t=e,(r=[{key:"getStorage",value:function(){var e,t=n(this.fallbackOrder);try{for(t.s();!(e=t.n()).done;){var r=e.value;if((0,s.G)(r))return this.createStorage(r)}}catch(i){t.e(i)}finally{t.f()}return new c.k}},{key:"createStorage",value:function(e){switch(e){case"local":return window.localStorage;case"session":return window.sessionStorage;case"memory":return new c.k;default:return window.localStorage}}}])&&a(t.prototype,r),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),f=(new l).getStorage(),h=new l(["local","memory"]).getStorage(),d=new l(["session","memory"]).getStorage()},7041:function(e,t,r){"use strict";function n(e){try{return e.setItem("__test_storage__","test"),e.removeItem("__test_storage__"),!0}catch(t){return!1}}function i(e){try{switch(e){case"local":return n(window.localStorage);case"session":return n(window.sessionStorage);case"memory":return!0;default:throw new Error("Unsupported storage type: ".concat(e))}}catch(t){return!1}}r.d(t,{G:function(){return i}})},96418:function(e,t,r){"use strict";r.d(t,{H5:function(){return n.H5},Ny:function(){return n.Ny},WY:function(){return n.WY},_n:function(){return n._n},dy:function(){return n.dy}});var n=r(59379)},16123:function(e,t,r){"use strict";r.d(t,{U:function(){return i}});var n=r(86673),i="undefined"!==typeof fetch&&"undefined"!==typeof ReadableStream&&"undefined"!==typeof(0,n.Y)((function(){return new AbortController}))},3558:function(e,t,r){"use strict";function n(e){try{var t=new XMLHttpRequest;return t.open("GET","https://yandex.ru"),t.responseType=e,t.responseType===e?e:""}catch(r){return""}}r.d(t,{I:function(){return i}});var i=r(16123).U?"arraybuffer":n("moz-chunked-arraybuffer")||n("ms-stream")||"arraybuffer"},27322:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{L:function(){return a}});var o=r(37218),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"readerInited",!1),i(this,"reader",void 0),i(this,"xhr",void 0),this.xhr=t,this.reader=new o.Y((function(){return t.abort()}))}var t,r,a;return t=e,(r=[{key:"throwReaderError",value:function(e){return this.reader.throw(e)}},{key:"getReader",value:function(){return this.initReader(this.xhr),this.reader}},{key:"initReader",value:function(e){var t=this;if(this.readerInited)throw new Error("Unexpected second call StretchBody#initReader()");switch(this.readerInited=!0,e.responseType){case"arraybuffer":e.addEventListener("load",(function(){e.response&&t.reader.write(new Uint8Array(e.response)),t.reader.close()}));break;case"moz-chunked-arraybuffer":e.addEventListener("progress",(function(){t.reader.write(new Uint8Array(e.response))})),e.addEventListener("load",(function(){t.reader.close()}));break;case"ms-stream":e.addEventListener("readystatechange",(function(){if(e.readyState===XMLHttpRequest.LOADING){var r=0,n=new(0,self.MSStreamReader);n.onprogress=function(){n.result.byteLength>r&&(t.reader.write(new Uint8Array(n.result,r)),r=n.result.byteLength)},n.onload=t.reader.close.bind(t.reader),n.readAsArrayBuffer(e.response)}}))}}}])&&n(t.prototype,r),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},37218:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Y:function(){return c}});var o=r(74626),a=r(72573),u={done:!0,value:void 0},c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"dataStream",void 0),i(this,"readRequest",void 0),i(this,"storedError",void 0),i(this,"onCancel",void 0),this.dataStream=new o.h,this.readRequest=null,this.storedError=null,this.onCancel=t}var t,r,c;return t=e,(r=[{key:"read",value:function(){var e=this;return new a((function(t,r){return e.readRequest={resolve:t,reject:r},e.dataStream.isDestroyed()?r(e.storedError||new Error("Unexpected read after stream destroy")):e.dataStream.isClosed()?t(u):(e.dataStream.once("Data",(function(r){e.dataStream.pause(),t({done:!1,value:r})})),void e.dataStream.resume())}))}},{key:"cancel",value:function(){this.dataStream.destroy(),this.onCancel()}},{key:"throw",value:function(e){this.dataStream.isDestroyed()||this.dataStream.isClosing()||(this.storedError=e,this.dataStream.destroy(),this.readRequest&&(this.readRequest.reject(e),this.readRequest=null))}},{key:"write",value:function(e){this.dataStream.isDestroyed()||this.dataStream.write(e)}},{key:"close",value:function(){this.dataStream.close()}}])&&n(t.prototype,r),c&&n(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}()},31704:function(e,t,r){"use strict";function n(e,t){return c(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||a(e,t)||o()}function i(e){return c(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e){if(Array.isArray(e))return e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{K:function(){return p}});var f=r(36354),h=r(45990),d=r(12693),p=function(){function e(t,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"body",void 0),l(this,"status",void 0),l(this,"headers",void 0),l(this,"xhr",void 0),l(this,"isLoaded",!1),l(this,"isTextRequested",!1),l(this,"isArrayBufferRequested",!1),l(this,"textDeferred",new h.B),l(this,"arrayBufferDeferred",new h.B),l(this,"resolveTextOnce",(0,d.I)((function(){if(o.xhr.response instanceof ArrayBuffer){var e=new TextDecoder;o.textDeferred.resolve(e.decode(new Uint8Array(o.xhr.response)))}else o.textDeferred.resolve(o.xhr.response)}))),l(this,"resolveArrayBufferOnce",(0,d.I)((function(){if(o.xhr.response instanceof ArrayBuffer)o.arrayBufferDeferred.resolve(o.xhr.response);else{var e=o.xhr.response,t=new TextEncoder;o.arrayBufferDeferred.resolve(t.encode(e).buffer)}}))),this.xhr=t,this.body=r,this.status=t.status,this.headers=function(e){var t=[];return e.getAllResponseHeaders().trim().split("\r\n").forEach((function(e){var r=i(e.split(":")),n=r[0],o=r.slice(1);t.push([o.join(":"),n])})),{forEach:function(e){t.forEach((function(t){var r=n(t,2),i=r[0],o=r[1];e(i,o)}))}}}(t),t.addEventListener("load",(function(){o.isLoaded=!0,o.isTextRequested&&o.resolveTextOnce(),o.isArrayBufferRequested&&o.resolveArrayBufferOnce()})),t.addEventListener("error",(function(){var e=new Error("Network error occurred");o.textDeferred.reject(e),o.arrayBufferDeferred.reject(e)})),t.addEventListener("abort",(function(){var e=new Error("Stretch request aborted");e.name="AbortError",o.textDeferred.reject(e),o.arrayBufferDeferred.reject(e)})),(0,f.v)(this.textDeferred.promise),(0,f.v)(this.arrayBufferDeferred.promise)}var t,r,o;return t=e,(r=[{key:"text",value:function(){return this.isTextRequested=!0,this.isLoaded&&this.resolveTextOnce(),this.textDeferred.promise}},{key:"arrayBuffer",value:function(){return this.isArrayBufferRequested=!0,this.isLoaded&&this.resolveArrayBufferOnce(),this.arrayBufferDeferred.promise}}])&&s(t.prototype,r),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},59379:function(e,t,r){"use strict";function n(e,t){return t.onprogress?(0,i.d)(e,t):o.U?fetch(e,t):(0,i.d)(e,t)}r.d(t,{H5:function(){return a.H},Ny:function(){return u.N},WY:function(){return c.W},_n:function(){return s.W},dy:function(){return n}});var i=r(15608),o=r(16123),a=r(6162),u=r(98463),c=(r(41144),r(74800)),s=r(18397);r(69359)},41144:function(e,t,r){"use strict";r.d(t,{V:function(){return n}});r(61330);var n=2e3},98463:function(e,t,r){"use strict";function n(e){var t=new a(e).host,r=(0,o.q)(e).lid,n=r?"&lid=".concat(r):"";return"https://".concat(t,"/ping?r=").concat((0,i.ad)(12)).concat(n)}r.d(t,{N:function(){return n}});var i=r(60435),o=r(16373),a=r(67767)},16373:function(e,t,r){"use strict";function n(e){var t={},r=e.split("?")[0];return r?(r.split("/").forEach((function(e){e.startsWith("ysign")&&e.split(",").forEach((function(e){var r=e.indexOf("=");-1!==r&&(t[e.slice(0,r)]=e.slice(r+1))}))})),t):t}r.d(t,{q:function(){return n}})},6162:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,n,i){var a=t&&t.prototype instanceof o?t:o,u=Object.create(a.prototype),c=new p(i||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var c=l(u,n);if(c){if(c===S)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=r(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===S)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,n,c),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function o(){}function a(){}function u(){}function c(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function s(e,t){var i;this._invoke=function(o,a){function u(){return new t((function(i,u){!function i(o,a,u,c){var s=r(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&b.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}(o,a,i,u)}))}return i=i?i.then(u,u):u()}}function l(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,l(e,t),"throw"===t.method))return S;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,S;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,S):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,S)}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function y(e){if(e){var t=e[E];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(b.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:v}}function v(){return{value:void 0,done:!0}}i=function(){return m};var m={},g=Object.prototype,b=g.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},E=w.iterator||"@@iterator",_=w.asyncIterator||"@@asyncIterator",O=w.toStringTag||"@@toStringTag";try{e({},"")}catch(P){e=function(e,t,r){return e[t]=r}}m.wrap=t;var S={},k={};e(k,E,(function(){return this}));var T=Object.getPrototypeOf,R=T&&T(T(y([])));R&&R!==g&&b.call(R,E)&&(k=R);var x=u.prototype=o.prototype=Object.create(k);return a.prototype=u,e(x,"constructor",u),e(u,"constructor",a),a.displayName=e(u,O,"GeneratorFunction"),m.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},m.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,e(t,O,"GeneratorFunction")),t.prototype=Object.create(x),t},m.awrap=function(e){return{__await:e}},c(s.prototype),e(s.prototype,_,(function(){return this})),m.AsyncIterator=s,m.async=function(e,r,n,i,o){void 0===o&&(o=f);var a=new s(t(e,r,n,i),o);return m.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},c(x),e(x,O,"Generator"),e(x,E,(function(){return this})),e(x,"toString",(function(){return"[object Generator]"})),m.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},m.values=y,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=b.call(i,"catchLoc"),u=b.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&b.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,S):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),S},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),d(r),S}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;d(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:y(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),S}},m}function o(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):f.resolve(c).then(n,i)}function a(e){return function(){var t=this,r=arguments;return new f((function(n,i){function a(e){o(c,n,i,a,u,"next",e)}function u(e){o(c,n,i,a,u,"throw",e)}var c=e.apply(t,r);a(void 0)}))}}function u(e){return c.apply(this,arguments)}function c(){return(c=a(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.WY)({method:"GET",url:t,withCredentials:!1,timeout:l.V});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.d(t,{H:function(){return u}});var s=r(96418),l=r(41144),f=r(72573)},69359:function(e,t,r){"use strict";r(72573)},18397:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=e.method,r=e.url,n=e.async,o=void 0===n||n,l=e.data,f=e.responseType,h=void 0===f?"text":f,d=e.onBeforeSend,p=void 0===d?c.Z:d,y=e.onRetry,v=void 0===y?c.Z:y,m=e.checkStatus,g=void 0===m?function(e){return 200===e}:m,b=e.headers,w=void 0===b?{}:b,E=e.xhrConstructor,_=void 0===E?XMLHttpRequest:E,O=e.retries,S=void 0===O?0:O,k=e.timeout,T=void 0===k?0:k,R=e.withCredentials,x=e.onAbort,P=e.onSetup;if(_){var A,L=e.onSuccess?(0,u.I)(e.onSuccess):c.Z,j=e.onError?(0,u.I)(e.onError):c.Z,I=!1,D=0,N=function(e){I=!0,N=c.Z,A=e,M(new Error("Abort request")),"function"===typeof x&&x(e)},M=function(t){if(C.onerror=null,C.onreadystatechange=null,D&&clearTimeout(D),D&&4!==C.readyState||I)try{C.abort()}catch(n){}if(!I)if(S>0){var r=v(t,C);if("boolean"!==typeof r||r||N(),I)return;a(i(i({},e),{},{onSetup:function(e){var t=e.abort;N=function(e){return t(e)},I&&t(A)},retries:S-1}))}else N=c.Z,j(t,C)},C=new _;try{C.open(t,r,o)}catch(F){return void M(F)}if(C.responseType=h,C.withCredentials=Boolean(R),(0,s.M)(w,(function(e,t){try{C.setRequestHeader(t,e)}catch(F){}})),T>0&&isFinite(T)&&(D=window.setTimeout((function(){M(new Error("Request timeout, ".concat(r)))}),T)),C.onerror=M,C.onreadystatechange=function(){if(4===C.readyState){var e=C.status;g(e)?(N=c.Z,clearTimeout(D),L(C)):M(new Error("Invalid request status ".concat(e,", ").concat(r)))}},("function"!==typeof P||(P({abort:function(e){return N(e)}}),!I))&&(p(C,e),!I))try{C.send(l)}catch(F){M(F)}}}r.d(t,{W:function(){return a}});var u=r(12693),c=r(88261),s=r(66061)},74800:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return new c((function(t,r){(0,u.W)(i(i({},e),{},{onSuccess:t,onError:r}))}))}r.d(t,{W:function(){return a}});var u=r(18397),c=r(72573)},15608:function(e,t,r){"use strict";function n(e,t){return new u((function(r,n){var u=t.method,c=void 0===u?"GET":u,s=t.body,l=void 0===s?null:s,f=t.responseType,h=void 0===f?a.I:f,d=t.onprogress,p=new XMLHttpRequest;for(var y in p.open(c,e),t.headers)t.headers.hasOwnProperty(y)&&p.setRequestHeader(y,t.headers[y]);"include"===t.credentials&&(p.withCredentials=!0),p.responseType=h;var v=new o.L(p);p.addEventListener("readystatechange",(function e(){p.readyState===XMLHttpRequest.HEADERS_RECEIVED&&(p.removeEventListener("readystatechange",e),r(new i.K(p,v)))})),"function"===typeof d&&p.addEventListener("progress",d);var m=function(){p.abort();var e=new Error("request aborted");e.name="AbortError",v.throwReaderError(e),n(e)};if(t.signal){if(t.signal.aborted)return void m();t.signal.addEventListener("abort",m)}p.addEventListener("error",(function(){var e=new Error("network error");v.throwReaderError(e),n(e)})),p.send(l)}))}r.d(t,{d:function(){return n}});var i=r(31704),o=r(27322),a=r(3558),u=r(72573)},2705:function(e,t,r){"use strict";function n(e){function t(){if(0!==o.length){var e=o.slice();o.length=0,e.forEach((function(e){var t=e.task,i=e.onPromiseReject;if(u)i(n);else try{t(r)}catch(o){}})),o.length>0&&t()}}var r,n,o=[],a=!1,u=!1;return e.then((function(e){r=e,a=!0,t()})),e.catch((function(e){n=e,u=!0,t()})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Z;if(u)t(n);else if(!a||o.length>0)o.push({task:e,onPromiseReject:t});else try{e(r)}catch(c){}}}r.d(t,{P:function(){return n}});var i=r(88261)},18566:function(e,t,r){"use strict";function n(){function e(){return a.length<o}function t(){if(e()){var t=u.shift();t&&t()}}function r(e){function r(){a.splice(a.indexOf(n),1),t()}var n=e.then(r,r);return a.push(n),e}function n(t){return e()?r(t()):new i((function(e){u.push((function(){e(r(t()))}))}))}var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=[],u=[];return{waitAndLock:n,addLock:r,isFree:e}}r.d(t,{l:function(){return n}});var i=r(72573)},15749:function(e,t,r){"use strict";r.d(t,{X:function(){return n}});r(61330);var n=Math.max(Math.abs(0),0)},9766:function(e,t,r){"use strict";r(61330);var n=r(99444),i=r(15749);Math.max(Math.abs(0),0),n.X.BUFFERING,i.X,Math.max(Math.abs(0),0),Math.max(0,0)},60435:function(e,t,r){"use strict";r.d(t,{$W:function(){return i.$W},ad:function(){return o.a}});var n=r(99444),i=(r(61330),r(1648),r(54360),r(81161),r(8053),r(6055),r(71294),r(7312)),o=(r(16802),r(49992),r(3684),r(70159),r(20348));n.r.Watched10Sec,n.r.Watched20Sec,n.r.Heartbeat30Sec},1648:function(e,t,r){"use strict";r(61330),r(99444)},30786:function(e,t,r){"use strict";r(5274),r(71294)},5274:function(e,t,r){"use strict";r(61330)},54360:function(e,t,r){"use strict";r(61330),r(70627),r(30786),r(9766),r(84729),r(66532)},62058:function(e,t,r){"use strict";r.d(t,{j:function(){return n}});var n=new RegExp("^https?:\\/\\/([^\\/]+\\.)?"+"(".concat(["(an|strm)\\.yandex\\.(ru|net)","yastatic\\.net","strm-ott\\.akamaized\\.net","cdn\\.ngenix\\.net","strm\\.yandex\\.cdnga\\.net","strm-yandex\\.gcdn\\.co","(widevine|playready|fairplay)-proxy\\.ott\\.yandex\\.ru","drm\\.yandex-team\\.ru"].join("|"),")")+"\\/(?!log|perf|jstracer)")},7312:function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw a}}}}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t,r,n,i;return null!==(t=null===(r=e.performance)||void 0===r?void 0:r.timeOrigin)&&void 0!==t?t:null===(n=e.performance)||void 0===n||null===(i=n.timing)||void 0===i?void 0:i.navigationStart}r.d(t,{$W:function(){return y}});r(61330);var l=r(26174),f=r(41682),h=r(71294),d=r(17571),p=r(62058),y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,c(this,"intervalId",void 0),c(this,"contexts",[]),c(this,"allowedUrls",new Map)}var t,r,o;return t=e,(r=[{key:"addAllowedUrl",value:function(e){var t=(0,d.S)(e);return!!t&&(this.allowedUrls.set(e,t),!0)}},{key:"addAllowedUrls",value:function(e){var t,r=i(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.addAllowedUrl(n)}}catch(o){r.e(o)}finally{r.f()}}},{key:"removeAllowedUrl",value:function(e){this.allowedUrls.delete(e)}},{key:"getAllowedUrls",value:function(){return Array.from(this.allowedUrls.keys())}},{key:"clearAllowedUrls",value:function(){this.allowedUrls.clear()}},{key:"attach",value:function(e){var t=this;(0,f.B)(e)&&-1===this.contexts.indexOf(e)&&(0===this.contexts.length&&(this.intervalId=setInterval((function(){return t.flush()}),3e4)),this.contexts.push(e))}},{key:"detach",value:function(e){var t=this.contexts.indexOf(e);-1!==t&&this.contexts.splice(t,1),0===this.contexts.length&&clearInterval(this.intervalId)}},{key:"destroy",value:function(){this.flush(),this.contexts.length=0,clearInterval(this.intervalId),this.clearAllowedUrls()}},{key:"flush",value:function(){var e=this,t=[],r=this.contexts.map(s),o=Math.min.apply(Math,n(r));if(this.contexts.forEach((function(n,i){(function(e){try{var t,r,n=null!==(t=e.performance.getEntriesByType)&&void 0!==t?t:e.performance.webkitGetEntriesByType,i=null!==(r=e.performance.clearResourceTimings)&&void 0!==r?r:e.performance.webkitClearResourceTimings,o=n.call(e.performance,"resource");return i.call(e.performance),o}catch(a){return[]}})(n).forEach((function(n){if(e.config.useOldWhiteListLogic){if(!p.j.test(n.name))return;t.push((0,l.I)(n,r[i],o))}else e.shouldLogResource(n.name)&&t.push((0,l.I)(n,r[i],o))}))})),0!==t.length){var a=(0,h.m6)();(function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:65536,n=new TextEncoder,o=[],a=[],u=0,c=i(e);try{for(c.s();!(t=c.n()).done;){var s=t.value,l=JSON.stringify(s),f=n.encode(l).length,h=u+f;h>r?(o.push(a),a=[s],u=f):(a.push(s),u+=f)}}catch(d){c.e(d)}finally{c.f()}return a.length>0&&o.push(a),o})(t).forEach((function(t,r){setTimeout((function(){e.config.sendLog(t,{perfnow:String(a),navstart:String(o)})}),500*r)}))}}},{key:"shouldLogResource",value:function(t){return!e.SERVICE_ENDPOINTS_REGEX.test(t)&&(!!this.config.ignoreWhiteList||!!e.MEDIA_EXTENSION_REGEX.test(t)||!!this.allowedUrls.size&&this.hasSameBaseUrl(t))}},{key:"hasSameBaseUrl",value:function(e){var t=(0,d.S)(e);if(!t)return!1;for(var r=0,n=Array.from(this.allowedUrls.values());r<n.length;r++){var i=n[r];if(i&&i===t)return!0}return!1}}])&&u(t.prototype,r),o&&u(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();c(y,"SERVICE_ENDPOINTS_REGEX",/\/(log|perf|jstracer)/),c(y,"MEDIA_EXTENSION_REGEX",/\.(m4s|ts|mp4|webm|m3u8|mpd)(\?|$)/)},41682:function(e,t,r){"use strict";function n(e){return e.performance&&((0,i.m)(e.performance.getEntriesByType)||(0,i.m)(e.performance.webkitGetEntriesByType))&&((0,i.m)(e.performance.clearResourceTimings)||(0,i.m)(e.performance.webkitClearResourceTimings))}r.d(t,{B:function(){return n}});var i=r(93671)},26174:function(e,t,r){"use strict";function n(e,t,r){return e&&"number"===typeof e?e+t-r:e}function i(e,t,r){var i=e.duration,o=e.entryType,a=e.name,u=e.startTime,c=e.connectEnd,s=e.connectStart,l=e.decodedBodySize,f=e.domainLookupEnd,h=e.domainLookupStart,d=e.encodedBodySize,p=e.fetchStart,y=e.initiatorType,v=e.nextHopProtocol,m=e.redirectEnd,g=e.redirectStart,b=e.requestStart,w=e.responseEnd,E=e.responseStart,_=e.secureConnectionStart,O=e.transferSize,S=e.workerStart,k=e.serverTiming,T=e.responseStatus,R=e.deliveryType,x=e.renderBlockingStatus,P=e.firstInterimResponseStart;return{duration:i,entryType:o,name:a,encodedBodySize:d,decodedBodySize:l,initiatorType:y,transferSize:O,nextHopProtocol:v,serverTiming:k,responseStatus:T,deliveryType:R,renderBlockingStatus:x,startTime:n(u,t,r),connectEnd:n(c,t,r),connectStart:n(s,t,r),domainLookupEnd:n(f,t,r),domainLookupStart:n(h,t,r),fetchStart:n(p,t,r),redirectEnd:n(m,t,r),redirectStart:n(g,t,r),requestStart:n(b,t,r),responseEnd:n(w,t,r),responseStart:n(E,t,r),secureConnectionStart:n(_,t,r),workerStart:n(S,t,r),firstInterimResponseStart:n(P,t,r)}}r.d(t,{I:function(){return i}})},61798:function(e,t,r){"use strict";r(71294)},11216:function(e,t,r){"use strict";r(61330);var n=r(8053),i=0,o=[0,1,4,5].map((function(e){return i=e+i}));o[o.length-1],n.k.Init},6055:function(e,t,r){"use strict";r(35276)},85962:function(e,t,r){"use strict";r(61330)},81161:function(e,t,r){"use strict";r(61330),r(8053),r(85962),r(11216),r(61798),r(35276),r(6055),r(66532)},8053:function(e,t,r){"use strict";var n;r.d(t,{k:function(){return n}}),function(e){e.Init="Init",e.SetSource="SetSource",e.Seek="Seek",e.VideoTrackChange="VideoTrackChange",e.AudioTrackChange="AudioTrackChange",e.Recover="Recover",e.MediaError="MediaError",e.Offline="Offline",e.Other="Other",e.Render="Render",e.RepresentationsChange="RepresentationsChange",e.LiveEdge="LiveEdge",e.AdStart="AdStart",e.AdOther="AdOther",e.AdBetween="AdBetween",e.AdEnd="AdEnd"}(n||(n={}))},63440:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{p:function(){return u}});r(61330);var o=r(173),a=r(35276),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"lastUpdate",void 0),i(this,"watchedTime",0)}var t,r,u;return t=e,(r=[{key:"calc",value:function(e,t,r){if(void 0!==this.lastUpdate){var n=(e-this.lastUpdate.videoTime)/t,i=(0,o.G)(n,this.lastUpdate.getElapsedTime()/1e3);this.watchedTime=this.watchedTime+i}this.lastUpdate=r?{getElapsedTime:(0,a.u)(),videoTime:e}:void 0}},{key:"get",value:function(){return this.watchedTime}},{key:"restoreLastUpdate",value:function(){this.lastUpdate=void 0}}])&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}()},16802:function(e,t,r){"use strict";r(99444),r(66532),r(63440)},70159:function(e,t,r){"use strict";r(20348)},66532:function(e,t,r){"use strict";var n,i;!function(e){e[e.PLAYING=1]="PLAYING",e[e.NOT_PLAYING=2]="NOT_PLAYING"}(n||(n={})),function(e){e.preroll="preroll",e.midroll="midroll",e.postPauseroll="postPauseroll",e.postroll="postroll",e.inroll="inroll"}(i||(i={}))},99444:function(e,t,r){"use strict";var n,i;r.d(t,{X:function(){return i},r:function(){return n}}),function(e){e.Start="Start",e.Watched4Sec="4SecWatched",e.Watched10Sec="10SecWatched",e.Watched20Sec="20SecWatched",e.Heartbeat30Sec="30SecHeartbeat",e.End="End"}(n||(n={})),function(e){e.PLAY="play",e.PAUSE="pause",e.BUFFERING="buffering",e.END="end"}(i||(i={}))},3684:function(e,t,r){"use strict";r(61330),r(71294)},173:function(e,t,r){"use strict";function n(e,t){var r=e>=0&&e<=t+.5?e:t;return Math.max(0,r)}r.d(t,{G:function(){return n}});r(61330)},20348:function(e,t,r){"use strict";function n(e){for(var t="",r=0;r<e;r++)t+=(16*(0,i.M)()|0).toString(16);return t}r.d(t,{a:function(){return n}});var i=r(27038)},17571:function(e,t,r){"use strict";function n(e){var t=e.match(/^(https?:\/\/[^\/\?#]+)/);return t?t[1]:null}r.d(t,{S:function(){return n}})},84729:function(e,t,r){"use strict"},93671:function(e,t,r){"use strict";function n(e){return"function"===typeof e||"Function"===(0,i.M)(e)}r.d(t,{m:function(){return n}});var i=r(7550)},20290:function(e,t,r){"use strict";function n(){}r.d(t,{Z:function(){return n}})},84780:function(e,t,r){"use strict";function n(e){setTimeout((function(){throw e}),0)}r.d(t,{L:function(){return n}})},71294:function(e,t,r){"use strict";r.d(t,{m6:function(){return n.m6},no:function(){return n.no}});var n=r(46869)},43919:function(e,t,r){"use strict";r.d(t,{M:function(){return o}});var n={}.toString,i=/\[object (\w+)\]/,o=function(e){var t=n.call(e);if(!t)return null;var r=t.match(i);if(!r)return null;var o=r[1];return o||null}},46869:function(e,t,r){"use strict";function n(e){return"function"===typeof e||"Function"===(0,i.M)(e)}r.d(t,{m6:function(){return o},no:function(){return f}});r(61330);var i=r(43919),o=Date&&n(Date.now)?function(){return Date.now()}:function(){return(new Date).getTime()},a="undefined"===typeof window?void 0:window.performance,u=a&&n(a.now),c=a&&a.timing&&a.timing.navigationStart,s=a&&a.timeOrigin?a.timeOrigin:c?a.timing.navigationStart:o(),l=0,f=function(){return u?a.now():(e=o()-s,l=Math.max(e,l));var e}},86673:function(e,t,r){"use strict";function n(e,t){try{return e()}catch(r){"function"===typeof t&&t(r)}}r.d(t,{Y:function(){return n}})},67011:function(e,t,r){"use strict";function n(e){return[].concat.apply([],e)}r.d(t,{j:function(){return n}})},96541:function(e,t,r){"use strict";r.d(t,{h:function(){return n}});var n=function(e,t,r){for(var n=[],i=0;i<e.length;i++){var o=e[i];t.call(r,o,i,e)&&n.push(o)}return n}},47858:function(e,t,r){"use strict";r.d(t,{s:function(){return o}});var n=r(53878),i=[].find,o=(0,n.t)(i)?function(e,t){return i.call(e,t)}:function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(t(n,r,e))return n}}},34843:function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e){return n((0,a.h)(e,(function(e){return void 0!==e})),1)[0]}r.d(t,{d:function(){return o}});var a=r(96541)},29003:function(e,t,r){"use strict";r.d(t,{k:function(){return o}});var n=r(7550),i=(0,r(67636).C)(Array,"isArray"),o=i?function(e){return i.call(Array,e)}:function(e){return"Array"===(0,n.M)(e)}},66169:function(e,t,r){"use strict";function n(e){if(!e)return[];for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t}r.d(t,{w:function(){return n}})},17031:function(e,t,r){"use strict";function n(e){return"undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}r.d(t,{f:function(){return n}})},72391:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r,i){var u=function(e){var t=!1,r=!1,i=!1;return!0===e?t=!0:"object"===n(e)&&(t=Boolean(e.capture),r=Boolean(e.passive),i=Boolean(e.once)),{capture:t,passive:r,once:i}}(i),c=a.FF?u:u.capture,s=u.once&&!a.vE?function(e){l(),r.call(this,e)}:r,l=function(){(0,o.f)(e,t,s,c)};return(0,o.h)(e,t,s,c),l}r.d(t,{O:function(){return i}});var o=r(58653),a=r(70322)},86110:function(e,t,r){"use strict";function n(e){return(0,i.H)(e.tagName)}r.d(t,{m:function(){return n}});var i=r(16187)},45968:function(e,t,r){"use strict";function n(e){return Object.prototype.toString.call(e)===i}r.d(t,{F:function(){return n},u:function(){return i}});var i="[object Window]"},58653:function(e,t,r){"use strict";r.d(t,{f:function(){return a},h:function(){return o}});var n=r(67636),i=r(53159),o=function(e,t,r){(0,i.m)(e.attachEvent)&&e.attachEvent("on"+t,r)},a=function(e,t,r){(0,i.m)(e.detachEvent)&&e.detachEvent("on"+t,r)};(0,n.C)(EventTarget.prototype,"addEventListener")&&(0,n.C)(EventTarget.prototype,"removeEventListener")&&(o=function(e,t,r,i){var o=e&&(0,n.C)(e,"addEventListener");o&&o.call(e,t,r,i)},a=function(e,t,r,i){var o=e&&(0,n.C)(e,"removeEventListener");o&&o.call(e,t,r,i)})},70322:function(e,t,r){"use strict";r.d(t,{FF:function(){return a},vE:function(){return o}});var n=r(88261),i=r(58653),o=!1,a=!1;try{var u=document.createElement("div"),c={};Object.defineProperty(c,"once",{get:function(){return o=!0}}),Object.defineProperty(c,"passive",{get:function(){return!0}}),Object.defineProperty(c,"capture",{get:function(){return a=!0}}),(0,i.h)(u,"click",n.Z,c)}catch(s){}},45990:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{B:function(){return c}});var a=r(88261),u=r(72573),c=i((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"resolve",void 0),o(this,"reject",void 0),o(this,"promise",void 0);var t=a.Z,r=a.Z;this.promise=new u((function(e,n){t=e,r=n})),this.resolve=t,this.reject=r}))},53159:function(e,t,r){"use strict";function n(e){return"function"===typeof e||"Function"===(0,i.M)(e)}r.d(t,{m:function(){return n}});var i=r(7550)},88261:function(e,t,r){"use strict";function n(){}r.d(t,{Z:function(){return n}})},12693:function(e,t,r){"use strict";function n(e){var t=function(){var r;return t=function(){return r},r=e.apply(this,arguments)};return function(){return t.apply(this,arguments)}}r.d(t,{I:function(){return n}})},3569:function(e,t,r){"use strict";function n(e){return new i((function(t){return setTimeout(t,e)}))}r.d(t,{_:function(){return n}});var i=r(72573)},10743:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return e+"/"+t}function o(e){if("string"===typeof e&&(e={message:e}),"object"===n(e)&&null!==e||(e={}),"function"===typeof e.toJSON)try{return{__stringifyError:e.toJSON()}}catch(r){}var t=e;return{__stringifyError:{name:t.name,message:t.message,stack:t.stack}}}function a(e,t,r,n){var o=c(e[t],i(r,t),n);return void 0===o?"null":o}function u(e){return JSON.stringify(e)}function c(e,t,r){switch(n(e)){case"boolean":return e?"true":"false";case"string":return u(e);case"undefined":return;case"bigint":return u(e.toString());case"function":var s="string"===typeof e.name&&e.name.length>0?" "+e.name:"";return u("[Function".concat(s,"]"));case"symbol":return u("[Symbol]");case"number":return isNaN(e)||!isFinite(e)?"null":String(e);case"object":if(null===e)return"null";if((0,p.F)(e))return u(p.u);if((0,d.m)(e))return u("[DOMNode ".concat(e.tagName,"]"));if((0,h.f)(e)){var l=e.constructor.name;return u("[".concat(l||"TypedArray","(").concat(e.byteLength||0,")]"))}var y=r.get(e);return void 0!==y?u("[Circular ".concat(y,"]")):(r.set(e,t),(0,f.k)(e)?function(e,t,r){if(0===e.length)return"[]";for(var n="["+a(e,0,t,r),i=1;i<e.length;i++)n+=","+a(e,i,t,r);return n+"]"}(e,t,r):function(e,t,r){if("function"===typeof e.toJSON){var n;try{n=e.toJSON()}catch(d){n=o(d)}return c(n,i(t,"toJSON"),r)}var a="{",s=!0;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var f=void 0;try{f=e[l]}catch(d){f=o(d)}var h=c(f,i(t,l),r);void 0!==h&&(s?s=!1:a+=",",a+=u(l)+":"+h)}return a+"}"}(e,t,r))}}function s(e){try{return c(e,"~",(t="undefined"!==typeof WeakMap?new WeakMap:void 0,r=[],{set:function(e,n){if(void 0!==t)try{t.set(e,n)}catch(i){r.push({path:n,value:e})}else r.push({path:n,value:e})},get:function(e){var n=(0,l.s)(r,(function(t){return t.value===e}));return void 0!==t&&void 0===n?t.get(e):n?n.path:void 0}}))}catch(n){return JSON.stringify(o(n))}var t,r}r.d(t,{Y:function(){return s}});var l=r(47858),f=r(29003),h=r(17031),d=r(86110),p=r(45968)},85564:function(e,t,r){"use strict";var n;r.d(t,{v:function(){return n}}),function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.PARSE_ERROR=-32700]="PARSE_ERROR",e[e.INVALID_REQUEST=-32600]="INVALID_REQUEST",e[e.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"}(n||(n={}))},8580:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var n=Number.EPSILON||Math.pow(2,-52)},85084:function(e,t,r){"use strict";function n(e,t,r){return e>r?r:e<t?t:e}r.d(t,{u:function(){return n}})},93966:function(e,t,r){"use strict";function n(e){return"number"===typeof e&&isFinite(e)}r.d(t,{z:function(){return n}})},66061:function(e,t,r){"use strict";function n(e,t,r){for(var n in e)(0,i.n)(e,n)&&t.call(r,e[n],n,e)}r.d(t,{M:function(){return n}});var i=r(28203)},11874:function(e,t,r){"use strict";function n(e){return"function"===typeof Object.entries?Object.entries(e):(0,i.Z)(e).map((function(t){return[t,e[t]]}))}r.d(t,{J:function(){return n}});var i=r(44706)},44706:function(e,t,r){"use strict";function n(e){if("function"===typeof Object.keys)return Object.keys(e);var t=[];for(var r in e)(0,i.n)(e,r)&&t.push(r);return t}r.d(t,{Z:function(){return n}});var i=r(28203)},62720:function(e,t,r){"use strict";function n(e){var t=Object.values;if("function"===typeof t)return t(e);var r=[];for(var n in e)(0,i.n)(e,n)&&r.push(e[n]);return r}r.d(t,{z:function(){return n}});var i=r(28203)},28203:function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.d(t,{n:function(){return n}})},76101:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){var t=n(e);return Boolean(e)&&("object"===t||"function"===t)}r.d(t,{K:function(){return i}})},79814:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,n,i){var a=t&&t.prototype instanceof o?t:o,u=Object.create(a.prototype),c=new p(i||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var c=f(u,n);if(c){if(c===S)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=r(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===S)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,n,c),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function o(){}function u(){}function c(){}function s(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function l(e,t){var i;this._invoke=function(o,a){function u(){return new t((function(i,u){!function i(o,a,u,c){var s=r(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&b.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}(o,a,i,u)}))}return i=i?i.then(u,u):u()}}function f(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,f(e,t),"throw"===t.method))return S;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,S;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,S):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,S)}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function y(e){if(e){var t=e[E];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(b.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:v}}function v(){return{value:void 0,done:!0}}i=function(){return m};var m={},g=Object.prototype,b=g.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},E=w.iterator||"@@iterator",_=w.asyncIterator||"@@asyncIterator",O=w.toStringTag||"@@toStringTag";try{e({},"")}catch(P){e=function(e,t,r){return e[t]=r}}m.wrap=t;var S={},k={};e(k,E,(function(){return this}));var T=Object.getPrototypeOf,R=T&&T(T(y([])));R&&R!==g&&b.call(R,E)&&(k=R);var x=c.prototype=o.prototype=Object.create(k);return u.prototype=c,e(x,"constructor",c),e(c,"constructor",u),u.displayName=e(c,O,"GeneratorFunction"),m.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},m.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,e(t,O,"GeneratorFunction")),t.prototype=Object.create(x),t},m.awrap=function(e){return{__await:e}},s(l.prototype),e(l.prototype,_,(function(){return this})),m.AsyncIterator=l,m.async=function(e,r,n,i,o){void 0===o&&(o=a);var u=new l(t(e,r,n,i),o);return m.isGeneratorFunction(r)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},s(x),e(x,O,"Generator"),e(x,E,(function(){return this})),e(x,"toString",(function(){return"[object Generator]"})),m.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},m.values=y,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=b.call(i,"catchLoc"),u=b.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&b.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,S):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),S},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),d(r),S}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;d(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:y(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),S}},m}function o(e,t,r,n,i,o,u){try{var c=e[o](u),s=c.value}catch(l){return void r(l)}c.done?t(s):a.resolve(s).then(n,i)}r.d(t,{_:function(){return u}});var a=r(72573),u=function(){var e,t=(e=i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new a((function(e,i){r&&r.then(e,i),n=window.setTimeout(e,t)}));case 3:return e.prev=3,window.clearTimeout(n),e.finish(3);case 6:case"end":return e.stop()}}),e,null,[[0,,3,6]])})),function(){var t=this,r=arguments;return new a((function(n,i){function a(e){o(c,n,i,a,u,"next",e)}function u(e){o(c,n,i,a,u,"throw",e)}var c=e.apply(t,r);a(void 0)}))});return function(e,r){return t.apply(this,arguments)}}()},17338:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(){return(a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=u(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function u(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{R:function(){return v}});var p=r(65220),y=r(74789),v=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return e===t};return i(this,t),(r=l.call(this)).checkToEqualFunction=n,d(f(r),"value",void 0),r.value=e,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e);var r,n,u,l=s(t);return r=t,(n=[{key:"getValue",value:function(){return this.value}},{key:"subscribeValueCondition",value:function(e,t){return this.add((function(r){e(r)&&(0,y.p)(t,r)}))}},{key:"subscribeValueConditionOnce",value:function(e,t){var r=this.subscribeValueCondition(e,(function(e){r(),(0,y.p)(t,e)}));return r}},{key:"dispatch",value:function(e){this.checkToEqualFunction(this.value,e)||(this.value=e,a(h(t.prototype),"dispatch",this).call(this,e))}}])&&o(r.prototype,n),u&&o(r,u),Object.defineProperty(r,"prototype",{writable:!1}),t}(p.M)},74789:function(e,t,r){"use strict";function n(e,t){(0,i.$)(e)?e.dispatch(t):e(t)}r.d(t,{p:function(){return n}});var i=r(277)},6447:function(e,t,r){"use strict";function n(e,t){e.forEach((function(e){(0,i.p)(e,t)}))}r.d(t,{k:function(){return n}});var i=r(74789)},65220:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{M:function(){return u}});var o=r(6447),a=r(72573),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"on",[]),i(this,"once",[])}var t,r,u;return t=e,(r=[{key:"add",value:function(){for(var e,t=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=this.on).push.apply(e,n),function(){return t.remove.apply(t,n)}}},{key:"addOne",value:function(){for(var e,t=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=this.once).push.apply(e,n),function(){return t.remove.apply(t,n)}}},{key:"promise",value:function(){var e=this;return new a((function(t){return e.addOne(t)}))}},{key:"dispatch",value:function(e){var t=this.once;this.once=[],(0,o.k)(this.on,e),(0,o.k)(t,e)}},{key:"removeAll",value:function(){this.on.length=0,this.once.length=0}},{key:"remove",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.on=this.on.filter((function(e){return t.indexOf(e)<0})),this.once=this.once.filter((function(e){return t.indexOf(e)<0}))}}])&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}()},277:function(e,t,r){"use strict";function n(e){return"function"===typeof e.dispatch}r.d(t,{$:function(){return n}})},30868:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,{x:function(){return u}});var i,o,a,u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,i=[{key:"fromUTF8",value:function(t){if(!t)return"";var r=new Uint8Array(t);239===r[0]&&187===r[1]&&191===r[2]&&(r=r.subarray(3));var n=e.fromCharCode(r),i=escape(n);try{return decodeURIComponent(i)}catch(o){throw new Error("BAD_ENCODING")}}},{key:"fromUTF16",value:function(t,r){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return"";if(!i&&t.byteLength%2!==0)throw new Error("BAD_ENCODING: Data has an incorrect length, must be even");if(t instanceof ArrayBuffer)n=t;else{var o=new Uint8Array(t.byteLength);o.set(new Uint8Array(t)),n=o.buffer}for(var a=Math.floor(t.byteLength/2),u=new Uint16Array(a),c=new DataView(n),s=0;s<a;s++)u[s]=c.getUint16(2*s,r);return e.fromCharCode(u)}},{key:"fromBytesAutoDetect",value:function(t){var r=new Uint8Array(t);if(239===r[0]&&187===r[1]&&191===r[2])return e.fromUTF8(r);if(254===r[0]&&255===r[1])return e.fromUTF16(r.subarray(2),!1);if(255===r[0]&&254===r[1])return e.fromUTF16(r.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||e[t]>=32&&e[t]<=126};if(0===r[0]&&0===r[2])return e.fromUTF16(t,!1);if(0===r[1]&&0===r[3])return e.fromUTF16(t,!0);if(n(r,0)&&n(r,1)&&n(r,2)&&n(r,3))return e.fromUTF8(t);throw new Error("UNABLE_TO_DETECT_ENCODING")}},{key:"toUTF8",value:function(e){for(var t=encodeURIComponent(e),r=unescape(t),n=new Uint8Array(r.length),i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n.buffer}},{key:"toUTF16",value:function(e,t){for(var r=new Uint8Array(2*e.length),n=new DataView(r.buffer),i=0;i<e.length;++i){var o=e.charCodeAt(i);n.setUint16(2*i,o,t)}return r.buffer}},{key:"fromCharCode",value:function(t){if(!e.fromCharCodeImpl)for(var r=function(t){if(function(e){try{var t=new Uint8Array(e);return String.fromCharCode.apply(null,t).length>0}catch(r){return!1}}(t))return e.fromCharCodeImpl=function(e){for(var r="",n=0;n<e.length;n+=t){var i=e.subarray(n,n+t);r+=String.fromCharCode.apply(null,i)}return r},"break"},n=65536;n>0&&"break"!==r(n);n/=2);if(!e.fromCharCodeImpl)throw new Error("Unable to create a fromCharCode method");return e.fromCharCodeImpl(t)}},{key:"resetFromCharCode",value:function(){e.fromCharCodeImpl=null}}],(r=null)&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();a=null,(o="fromCharCodeImpl")in(i=u)?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a},16187:function(e,t,r){"use strict";function n(e){return"string"===typeof e}r.d(t,{H:function(){return n}})},79916:function(e,t,r){"use strict";function n(e){return"number"===typeof e&&e===e}r.d(t,{hj:function(){return n}})},11200:function(e,t,r){"use strict";function n(e){var t=new a(e,location.origin),r=t.pathname||"";"/"!==r.charAt(0)&&(r="/".concat(r));var n=e.indexOf("?"),i=e.indexOf("#");return{originalPath:-1===n&&-1===i?e:-1===n?e.slice(0,i):-1===i?e.slice(0,n):e.slice(0,Math.min(n,i)),href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:t.port,pathname:r,search:t.search,hash:t.hash}}function i(e){return n(e).pathname.split("/").pop()||""}function o(e){var t=i(e).split(".");return t.length>1?t.pop():""}r.d(t,{UO:function(){return i},en:function(){return n},lm:function(){return o}});r(29003);var a=r(67767)},34118:function(e,t,r){"use strict";r.d(t,{UO:function(){return n.UO},en:function(){return n.en},lm:function(){return n.lm}});var n=r(11200);r(57098)},57098:function(e,t,r){"use strict";r(11200),r(67767)},18414:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,{P:function(){return o}});var i=r(30868),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,o=[{key:"concat",value:function(){for(var e=0,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var i=0;i<r.length;++i)e+=r[i].length;for(var o=new Uint8Array(e),a=0,u=0;u<r.length;++u)o.set(r[u],a),a+=r[u].length;return o}},{key:"toHex",value:function(e){for(var t="",r=0;r<e.length;++r){var n=e[r].toString(16);1===n.length&&(n="0"+n),t+=n}return t}},{key:"fromHex",value:function(e){for(var t=new Uint8Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=parseInt(e.substr(r,2),16);return t}},{key:"toBase64",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=i.x.fromCharCode(e),n=btoa(r).replace(/\+/g,"-").replace(/\//g,"_");return t?n:n.replace(/=*$/,"")}},{key:"fromBase64",value:function(e){for(var t=atob(e.replace(/-/g,"+").replace(/_/g,"/")),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}},{key:"equal",value:function(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}}],(r=null)&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},7550:function(e,t,r){"use strict";r.d(t,{M:function(){return o}});var n={}.toString,i=/\[object (\w+)\]/,o=function(e){var t=n.call(e);if(!t)return null;var r=t.match(i);if(!r)return null;var o=r[1];return o||null}},67636:function(e,t,r){"use strict";function n(e,t){var r=e[t];if(!(0,i.t)(r)){var n=r;try{delete e[t];var o=e[t];"function"===typeof o&&(r=o),e[t]=n}catch(a){}}return r}r.d(t,{C:function(){return n}});var i=r(53878)},35276:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.no,t=e();return function(){return Math.max(0,e()-t)}}r.d(t,{u:function(){return n}});var i=r(71294);r(61330)},7487:function(e,t,r){"use strict";r.d(t,{_m:function(){return n._m},dn:function(){return n.dn},ly:function(){return n.ly},xE:function(){return n.xE}});var n=r(92482)},93155:function(e,t,r){"use strict";var n=r(67011),i=r(62720),o=r(27448);(0,n.j)((0,i.z)(o.z))},27448:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{z:function(){return u}});var i,o=r(87994),a=r(80188),u=(n(i={},o.WL.fairplay,[a.D,a.h9,a.oo]),n(i,o.WL.widevine,[a.ly]),n(i,o.WL.playready,[a.xE]),n(i,o.WL.clearkey,[a.dn]),n(i,o.WL.none,[]),i)},39962:function(e,t,r){"use strict";r.d(t,{_:function(){return n}});var n=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]}]},80188:function(e,t,r){"use strict";r.d(t,{D:function(){return i},dn:function(){return c},h9:function(){return o},ly:function(){return n},oo:function(){return a},xE:function(){return u}});var n="com.widevine.alpha",i="com.apple.fairplay",o="com.apple.fps.1_0",a="com.apple.fps.2_0",u="com.microsoft.playready",c="org.w3.clearkey"},92482:function(e,t,r){"use strict";r.d(t,{_m:function(){return n._},dn:function(){return i.dn},ly:function(){return i.ly},xE:function(){return i.xE}});var n=r(39962),i=r(80188);r(18094)},18094:function(e,t,r){"use strict";var n;r(85470),r(93155),r(39962),r(72573);!function(e){e.YandexBrowserLinux="YandexBrowserLinux",e.OldYandexBrowser="OldYandexBrowser",e.WebKitMediaKeys="WebKitMediaKeys",e.requestMediaKeySystemAccess="requestMediaKeySystemAccess",e.MSMediaKeys="MSMediaKeys",e.GenerateKeyRequest="GenerateKeyRequest",e.Constant="Constant",e.NotAvailable="NotAvailable",e.LiteMode="LiteMode"}(n||(n={}))},48446:function(e,t,r){"use strict";function n(e){var t=e.map((function(e){return{start:e.start,end:e.end}})).sort((function(e,t){return e.start-t.start}));if(t.length<=1)return t;var r=[t[0]];return t.slice(1).forEach((function(e,t){var n=r[r.length-1];n.end<e.start?r.push(e):n.end<e.end&&(n.end=e.end)})),r}r.d(t,{l:function(){return n}})},61228:function(e,t,r){"use strict";function n(e,t,r){var n=e.videoWidth,i=e.videoHeight,o=r.width,a=r.height;if(!n||!i)return{width:o,height:a};switch(t){case"none":return{width:n,height:i};case"cover":var u=Math.floor(i*o/n);return u>=a?{width:o,height:u}:{height:a,width:Math.floor(n*a/i)};case"contain":case"scale-down":var c=Math.floor(i*o/n);return c<=a?{width:o,height:c}:{height:a,width:Math.floor(n*a/i)};case"fill":default:return{width:o,height:a}}}r.d(t,{k:function(){return n}});r(61330)},87853:function(e,t,r){"use strict";r.d(t,{S:function(){return n}});r(61330);var n=1544206},36198:function(e,t,r){"use strict";r.d(t,{d4:function(){return n}});r(61330);var n=8e3},25211:function(e,t,r){"use strict";r.d(t,{T:function(){return n}});r(61330);var n=360},14690:function(e,t,r){"use strict";r.d(t,{g:function(){return n}});var n="source_index"},92831:function(e,t,r){"use strict";r.d(t,{T:function(){return n}});var n=["strm.yandex.net","strm.yandex.ru","strm-ott.akamaized.net","media.strm.yandex.net","cdn.ngenix.net","streaming.tst.strm.yandex.net"]},6134:function(e,t,r){"use strict";r.d(t,{A:function(){return n}});var n="auto"},5486:function(e,t,r){"use strict";function n(e){for(var t=[],r=0;r<e.buffered.length;r++)try{t.push({start:e.buffered.start(r),end:e.buffered.end(r)})}catch(n){}return(0,i.l)(t)}r.d(t,{w:function(){return n}});var i=r(48446);r(61330)},80813:function(e,t,r){"use strict";r.d(t,{R:function(){return n}});r(61330);var n=function(e){return null===e?1/0:void 0===e?1280:e}},16594:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.navigator,r=t,n=r.connection,i=void 0===n?{}:n;return Boolean(i.saveData)}r.d(t,{R:function(){return n}})},48866:function(e,t,r){"use strict";r.d(t,{k:function(){return n}});r(19631);var n={width:null,height:null,timestamp:null}},88114:function(e,t,r){"use strict";function n(e){var t=new i(e);return t.searchParams.set(o,String(Date.now())),t.href}r.d(t,{c:function(){return n},j:function(){return o}});var i=r(67767),o="t"},49992:function(e,t,r){"use strict";r.d(t,{ir:function(){return n.ir}});var n=r(36486)},87887:function(e,t,r){"use strict";r.d(t,{v:function(){return n}});var n="vpuid"},40816:function(e,t,r){"use strict";r.d(t,{j:function(){return n}});var n=10},49428:function(e,t,r){"use strict";function n(){for(var e=[],t=0;t<o.j;t++)e.push(a[Math.floor((0,i.M)()*a.length)]);return e.join("")}r.d(t,{L:function(){return n}});var i=r(27038),o=r(40816),a="qwertyuiopasdfghjklzxcvbnm0123456789"},21944:function(e,t,r){"use strict";function n(){return o.tO.getItem(i.v)}r.d(t,{j:function(){return n}});var i=r(87887),o=r(19631)},36486:function(e,t,r){"use strict";r.d(t,{ir:function(){return a.i}});var n,i=r(21944),o=r(49428),a=r(40914),u=null!==(n=(0,i.j)())&&void 0!==n?n:(0,o.L)();(0,a.i)(u)},40914:function(e,t,r){"use strict";function n(e){o.tO.setItem(i.v,e)}r.d(t,{i:function(){return n}});var i=r(87887),o=r(19631)},20629:function(e,t,r){"use strict";r.d(t,{z:function(){return n}});r(61330);var n=30},40115:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{B:function(){return l}});r(61330);var o=r(20629),a=r(81524),u=r.n(a),c=r(84626),s=u().ru.yandex.videoplayer.multiplatform,l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"bufferGoalManager",void 0),i(this,"watchedTimeProvider",new s.v2.providers.impl.WatchedTimeProviderImpl),i(this,"bufferGoalManagerV2",s.v2.bgm.export.BufferGoalManagerFactory.Companion.create(s.v2.bgm.export.BufferGoalManagerConfigBuilder(this.watchedTimeProvider,(function(e){})))),i(this,"constantBufferGoal",null),i(this,"preloadBufferGoal",2),this.bufferGoalManager=new s.bgm.BufferGoalManager(new s.bgm.BufferGoalManagerProps(null,new s.bgm.BufferGoalManagerFlags(new s.flags.DisableDynamicBuffer(!1),new s.flags.LowBufferBeforeStart(!0),new s.flags.DefaultBuffer(o.z)),null))}var t,r,a;return t=e,(r=[{key:"setConstantBufferGoal",value:function(e){this.constantBufferGoal=e}},{key:"setPreloadBufferGoal",value:function(e){this.preloadBufferGoal=e}},{key:"getPreloadBufferGoal",value:function(){return this.preloadBufferGoal}},{key:"getConstantBufferGoal",value:function(){return this.constantBufferGoal}},{key:"getBufferGoal",value:function(e){if(null!==this.constantBufferGoal)return this.constantBufferGoal;if(e.usePreloadBufferGoal)return this.preloadBufferGoal;var t=e.watchedTime,r=void 0===t?0:t,n=e.currentTime,i=void 0===n?0:n;return(0,c.RW)("web_v2_multiplatform_buffer_goal_manager")?(this.watchedTimeProvider.setWatchedTimeMs(1e3*r),this.bufferGoalManagerV2.getBufferGoalMs()/1e3):this.bufferGoalManager.getBufferGoal(new s.bgm.GetBufferGoalProps(new s.bgm.WatchedTime(r),new s.bgm.CurrentTime(i)))}},{key:"setSkippableFragments",value:function(e){(0,c.RW)("web_v2_multiplatform_buffer_goal_manager")||this.bufferGoalManager.setSkippableFragments(e?e.map((function(e){var t=e.startTime,r=e.endTime;return new s.bgm.SkippableFragment(t,r)})):null)}},{key:"getSkippableFragments",value:function(){if(!(0,c.RW)("web_v2_multiplatform_buffer_goal_manager")){var e=this.bufferGoalManager.getSkippableFragments()||void 0;return e&&e.map((function(e){return{startTime:e.startTime,endTime:e.endTime}}))}}}])&&n(t.prototype,r),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},34902:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{r:function(){return u}});var o=r(28557),a=["media-src","connect-src"],u=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"violatedSources",void 0),i(this,"unsubscribeEvent",void 0),i(this,"securityPolicyViolationCallback",(function(e){var t=e.blockedURI,n=e.violatedDirective,i=e.originalPolicy;if(a.includes(n)&&!t.includes("/ping")){var o={blockedURI:t,violatedDirective:n,originalPolicy:i};r.violatedSources.push(o)}})),this.violatedSources=new o.d(50),t.addEventListener("securitypolicyviolation",this.securityPolicyViolationCallback),this.unsubscribeEvent=function(){t.removeEventListener("securitypolicyviolation",r.securityPolicyViolationCallback)}}var t,r,u;return t=e,(r=[{key:"getViolatedSourceBySrc",value:function(e){return this.violatedSources.toArray().find((function(t){var r=t.blockedURI.split("?")[0];return e.split("?")[0].includes(r)}))}},{key:"destroy",value:function(){this.violatedSources.clear(),this.unsubscribeEvent()}}])&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}()},42904:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.SourceBuffer||e.WebKitSourceBuffer;if(!t)return!1;var r=t.prototype&&(0,o.m)(t.prototype.appendBuffer)&&(0,o.m)(t.prototype.remove);return!r}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.ManagedMediaSource||e.MediaSource||e.WebKitMediaSource;return t&&(0,o.m)(t.isTypeSupported)&&!n(e)?t:void 0}r.d(t,{Q:function(){return i}});var o=r(53159)},25767:function(e,t,r){"use strict";r.r(t),r.d(t,{DOWNLOAD_QUEUE_LIMIT:function(){return u},DRM_MAP_FILENAME:function(){return o},FS_PROTOCOL:function(){return n},STORED_CALLS_LIMIT:function(){return a},STORE_BASE_PATH:function(){return i}});var n="fs:",i="streams",o="drm_map.json",a=10,u=3},80349:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.some((function(e){return e.keySystem===o.dn}));return a&&t}r.r(t),r.d(t,{needsManualDecryption:function(){return n}});var i=r(85470),o=r(7487),a=(0,i.zK)(self)},40640:function(e,t,r){"use strict";function n(e){try{return JSON.parse((new TextDecoder).decode(e)).keys.reduce((function(e,t){var r=t.key_id,n=t.key;return r&&n?(e[r]=n,e):e}),{})}catch(t){return null}}r.d(t,{N:function(){return n}})},174:function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){e.children=[{tagName:"BaseURL",attributes:{},children:["".concat(N.FS_PROTOCOL,"//").concat(N.STORE_BASE_PATH,"/")]}].concat(i(e.children.filter((function(e){return"BaseURL"!==e.tagName}))));var r=e.children.find((function(e){return"Period"===e.tagName}));if(t.videoTrackId){var n=null===r||void 0===r?void 0:r.children.find((function(e){return"video/mp4"===e.attributes.mimeType}));n&&(n.children=n.children.filter((function(e){return"SupplementalProperty"===e.tagName||"ContentProtection"===e.tagName||e.attributes.id===t.videoTrackId})))}return t.audioLang&&r&&(r.children=r.children.filter((function(e){return"audio/mp4"!==e.attributes.mimeType||e.attributes.lang===t.audioLang}))),t.textTrack&&r&&(r.children=r.children.filter((function(e){var r;return"text/vtt"!==e.attributes.mimeType||e.attributes.lang===(null===t||void 0===t||null===(r=t.textTrack)||void 0===r?void 0:r.language)}))),e}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M,r=['<?xml version="1.0" encoding="UTF-8"?>'],i=function e(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null!==i&&void 0!==i&&i.tagName){var a="".padStart(4*o,"    "),u=-1!==t.indexOf(i.tagName);a+="<".concat(i.tagName);var c=i.attributes&&Object.entries(i.attributes).map((function(e){var t=n(e,2),r=t[0],i=t[1];return" ".concat(r,'="').concat(i,'"')})).join("");if(c&&(a+="".concat(c)),u)return a+="/>",void r.push(a);a+=">",r.push(a),Array.isArray(i.children)&&1===i.children.length&&"string"===typeof i.children[0]?r.push("".padStart(4*(o+1),"    ")+i.children[0]):i.children.forEach((function(t){e(t,o+1)})),a="".padStart(4*o,"    "),a+="</".concat(i.tagName,">"),r.push(a)}};return i(e),r.push(""),r.join("\n")}function s(e){var t=e.videoTrack,r=e.audioTrack,n=e.textTrack,i=0;return[t,r,n].forEach((function(e){e&&Array.isArray(e.segmentSequences)&&e.segmentSequences.forEach((function(e){i+=e.count}))})),i}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new h(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return y()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===O)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===O)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==l(f)&&g.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return O;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,O;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,O):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,O)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function d(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(g.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}p=function(){return v};var v={},m=Object.prototype,g=m.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",E=b.asyncIterator||"@@asyncIterator",_=b.toStringTag||"@@toStringTag";try{e({},"")}catch(x){e=function(e,t,r){return e[t]=r}}v.wrap=t;var O={},S={};e(S,w,(function(){return this}));var k=Object.getPrototypeOf,T=k&&k(k(d([])));T&&T!==m&&g.call(T,w)&&(S=T);var R=o.prototype=n.prototype=Object.create(S);return i.prototype=o,e(R,"constructor",o),e(o,"constructor",i),i.displayName=e(o,_,"GeneratorFunction"),v.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},v.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,_,"GeneratorFunction")),t.prototype=Object.create(R),t},v.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,E,(function(){return this})),v.AsyncIterator=u,v.async=function(e,r,n,i,o){void 0===o&&(o=F);var a=new u(t(e,r,n,i),o);return v.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(R),e(R,_,"Generator"),e(R,w,(function(){return this})),e(R,"toString",(function(){return"[object Generator]"})),v.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},v.values=d,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),u=g.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&g.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,O):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),O},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),f(r),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;f(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:d(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),O}},v}function y(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):F.resolve(c).then(n,i)}function v(e){return function(){var t=this,r=arguments;return new F((function(n,i){function o(e){y(u,n,i,o,a,"next",e)}function a(e){y(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e){var t,r,n,i=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);i--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new w(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function w(e){function t(e){if(Object(e)!==e)return F.reject(new TypeError(e+" is not an object."));var t=e.done;return F.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(w=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?F.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?F.reject(e):t(r.apply(this.s,arguments))}},new w(e)}function E(e,t){var r={type:"content-type",size:"content-length"},n=[];for(var i in t)n.push([r[i],t[i].toString()]);return{headers:{forEach:function(e){n.forEach((function(t){var r=m(t,2),n=r[0],i=r[1];e(i,n)}))}},body:{getReader:function(){return e.getReader()}},text:function(){return e.text()},status:200,arrayBuffer:function(){return e.arrayBuffer()}}}function _(e,t,r,n){var i=new F((function(e){setTimeout((function(){e({value:void 0,done:!0})}),0)})),o={getReader:function(){return{read:function(){return i}}}};return{abort:e,responsePromise:F.resolve(E(o)),timeoutId:void 0,requestState:t,signal:r,getRtt:n,isSkipFragment:!0,requestOptions:{},requestHeaders:{}}}function O(e,t){return S.apply(this,arguments)}function S(){return(S=v(p().mark((function e(t,r){var n,i,o,a,u,c,s,l,f,h;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:return n=e.sent,e.next=5,n.getDirectoryHandle(N.STORE_BASE_PATH,{create:r});case 5:if(i=e.sent,o=function(e,t){return e.getFileHandle(t.replace(/\//g,"_"),{create:r})},a="",!t.includes("/")){e.next=19;break}return c=t.split("/"),s=m(c,2),l=s[0],f=s[1],e.next=12,i.getDirectoryHandle(l,{create:r});case 12:return h=e.sent,e.next=15,o(h,f);case 15:u=e.sent,a=l,e.next=22;break;case 19:return e.next=21,o(i,t);case 21:u=e.sent;case 22:return e.abrupt("return",{fileHandle:u,contentId:a});case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.r(t),r.d(t,{SourcePersistStore:function(){return H},SourceStoreHandlers:function(){return V},generateEmptyFragment:function(){return _},generateOfflineResponse:function(){return E},getFilePath:function(){return U},getRoot:function(){return G},getStorageFileHandle:function(){return O}});var k,T,R,x,P,A,L,j,I,D,N=r(25767),M=["SupplementalProperty","S","AudioChannelConfiguration","Role"],C=r(54640),F=(r(61330),r(72573)),B=r(67767),U=function(e,t){var r=new B(t,"http://y.com").pathname.split("/").pop()||"";return"".concat(e,"/").concat(r)},G=function(){return navigator.storage.getDirectory()},H={downloadedFragments:{},getAvailableSpace:(I=v(p().mark((function e(){var t,r,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.storage.estimate();case 2:if(t=e.sent,r=t.quota,n=t.usage,void 0!==r&&void 0!==n){e.next=6;break}throw new Error("Unable to obtain free disk space information");case 6:return e.abrupt("return",r-n);case 7:case"end":return e.stop()}}),e)}))),function(){return I.apply(this,arguments)}),listDirContent:(j=v(p().mark((function e(t){var r,n,i,o,a,u,c,s,l,f,h,d;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:return r=e.sent,e.next=5,r.getDirectoryHandle(N.STORE_BASE_PATH);case 5:if(n=e.sent,!t){e.next=12;break}return e.next=9,n.getDirectoryHandle(t);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=n;case 13:i=e.t0,o={files:[],directories:[]},a=!1,u=!1,e.prev=17,s=b(i.entries());case 19:return e.next=21,s.next();case 21:if(!(a=!(l=e.sent).done)){e.next=27;break}f=m(l.value,2),h=f[0],d=f[1],o["file"===d.kind?"files":"directories"].push(h);case 24:a=!1,e.next=19;break;case 27:e.next=33;break;case 29:e.prev=29,e.t1=e.catch(17),u=!0,c=e.t1;case 33:if(e.prev=33,e.prev=34,!a||null==s.return){e.next=38;break}return e.next=38,s.return();case 38:if(e.prev=38,!u){e.next=41;break}throw c;case 41:return e.finish(38);case 42:return e.finish(33);case 43:return e.abrupt("return",o);case 44:case"end":return e.stop()}}),e,null,[[17,29,33,43],[34,,38,42]])}))),function(e){return j.apply(this,arguments)}),createFileWritableStream:(L=v(p().mark((function e(t){var r,n,i,o,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,!0);case 2:return r=e.sent,n=r.fileHandle,i=r.contentId,e.next=7,n.createWritable();case 7:return o=e.sent,a=function(){var e=v(p().mark((function e(){var r,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.endsWith("mp4")&&!t.endsWith("m4s")){e.next=6;break}return H.downloadedFragments[i]=h(h({},H.downloadedFragments[i]),{},d({},t,!0)),r=U(i,"config.json"),n={downloadedFragments:H.downloadedFragments[i]},e.next=6,H.appendToJSON(r,n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",{fileWritableStream:o,onSegmentDone:a});case 10:case"end":return e.stop()}}),e)}))),function(e){return L.apply(this,arguments)}),writeFile:(A=v(p().mark((function e(t,r){var n,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.createFileWritableStream(t);case 2:return n=e.sent,i=n.fileWritableStream,e.next=6,i.write(r);case 6:return e.next=8,i.close();case 8:case"end":return e.stop()}}),e)}))),function(e,t){return A.apply(this,arguments)}),getFile:(P=v(p().mark((function e(t){var r,n,i,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,!1);case 2:return r=e.sent,n=r.fileHandle,e.next=6,n.getFile();case 6:return i=e.sent,o=i.size,e.abrupt("return",{body:i,size:o});case 9:case"end":return e.stop()}}),e)}))),function(e){return P.apply(this,arguments)}),fetchFromFs:(x=v(p().mark((function e(t,r){var n,i,o,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Content id is not defined");case 2:return n=(0,C.J)(r),e.next=5,H.getFile(U(t,r));case 5:return i=e.sent,o=i.body,a=i.size,e.abrupt("return",E("mpd"===n?o:o.stream(),{size:a}));case 9:case"end":return e.stop()}}),e)}))),function(e,t){return x.apply(this,arguments)}),getParsedJSON:(R=v(p().mark((function e(t){var r,n,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.getFile(t);case 2:return r=e.sent,n=r.body,e.next=6,n.text();case 6:return i=e.sent,e.abrupt("return",JSON.parse(i));case 8:case"end":return e.stop()}}),e)}))),function(e){return R.apply(this,arguments)}),appendToJSON:(T=v(p().mark((function e(t,r){var n,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.getParsedJSON(t);case 2:return n=e.sent,i=h(h({},n),r),e.next=6,H.writeFile(t,JSON.stringify(i));case 6:case"end":return e.stop()}}),e)}))),function(e,t){return T.apply(this,arguments)}),removeDirectory:(k=v(p().mark((function e(t){var r,n,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:return r=e.sent,e.next=5,r.getDirectoryHandle(N.STORE_BASE_PATH);case 5:return n=e.sent,i=n.removeEntry(t,{recursive:!0}),delete H.downloadedFragments[t],e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)}))),function(e){return k.apply(this,arguments)})},V={handleStart:(D=v(p().mark((function e(t,r,n,i,o){var a,l,f,h,d,y,v;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:if(!o){e.next=16;break}return n=u(n,o),f=o.videoTrackId?i.getVideoTrack(o.videoTrackId):void 0,h=o.audioLang?i.getAudioTrack(o.audioLang):void 0,d=null!==(l=o.textTrack)&&void 0!==l&&l.language?i.getTextTrack(o.textTrack.language):void 0,a=s({videoTrack:f,audioTrack:h,textTrack:d}),y=[(p={videoTrack:f,audioTrack:h,textTrack:d}).videoTrack,p.audioTrack,p.textTrack].reduce((function(e,t){return e+function(e){return e&&"number"===typeof e.bitrate?(e.endTime-e.startTime)/1e3*e.bitrate/8:0}(t)}),0),e.next=11,H.getAvailableSpace();case 11:if(v=e.sent,!(y>v)){e.next=14;break}throw new Error("Not enough storage space. Required: ".concat(y," bytes, Available: ").concat(v," bytes."));case 14:return e.next=16,H.writeFile(U(r,"config.json"),JSON.stringify({src:t,totalSegments:a,tracks:o}));case 16:return e.next=18,H.writeFile(U(r,"manifest.mpd"),c(n));case 18:case"end":return e.stop()}var p}),e)}))),function(e,t,r,n,i){return D.apply(this,arguments)})}},10005:function(e,t,r){"use strict";function n(e){return void 0===e||"string"!==typeof e?"":function(e){try{var t=new a(e);return t.searchParams.delete(o.g),t.href}catch(r){return e}}(e).replace(/#.+$/,"")}function i(e){try{return new a(e).searchParams.get(o.g)}catch(t){return null}}r.d(t,{Hi:function(){return n},IN:function(){return i}});var o=r(14690),a=r(67767)},79549:function(e,t,r){"use strict";r.d(t,{S:function(){return n}});r(61330);var n=100},24735:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{h:function(){return c}});var a=r(84626),u=r(28557),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;n(this,e),o(this,"timings",null),o(this,"action","none"),o(this,"processInstanceCounter",0);var r=(0,a.r0)("web_yasp_action_on_timings_collection");switch(r){case"log":this.action="log";break;case"save":this.action="save",this.timings=new u.d(t);break;default:this.action="none"}}var t,r,c;return t=e,(r=[{key:"destroy",value:function(){var e;null===(e=this.timings)||void 0===e||e.clear(),this.timings=null}},{key:"handleProcess",value:function(e,t){if("none"!==this.action){var r=t||{},n=r.endTimestamp,i=r.endReason,o=void 0===i?"":i,a=void 0!==n?"end":"start",u="start"===a;switch(this.action){case"log":var c=e.processName,s=e.component,l=e.details,f=e.startTimestamp,h=e.processId,d=l.type,p=l.isInit,y="start"===a?f:n,v=d?"".concat(d," - ").concat(p?"Init Segment":"Segment"):"",m=JSON.stringify(l,null,2);console.log("%c ----- [".concat(y,"] [").concat(s,"] [").concat(c,"] [").concat(h,"] ").concat(v," [").concat(a,"] [").concat(o,"]\n                    details: ").concat(m),"color: #32CD32");break;case"save":var g;u?null===(g=this.timings)||void 0===g||g.push(e):(e.endTimestamp=n,e.endReason=o);break;default:return}}}},{key:"startProcess",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.processInstanceCounter++,o=!1,a={component:t,processName:e,processId:i,startTimestamp:Date.now(),details:n};return this.handleProcess(a),{end:function(e){o||(r.handleProcess(a,{endTimestamp:Date.now(),endReason:e}),o=!0)},isFinished:function(){return o}}}},{key:"extractTimings",value:function(){var e,t;return null!==(e=null===(t=this.timings)||void 0===t?void 0:t.toArray())&&void 0!==e?e:[]}}])&&i(t.prototype,r),c&&i(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}()},52088:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{I:function(){return o},K:function(){return u}});var o,a=r(30868);!function(e){e[e.BIG_ENDIAN=0]="BIG_ENDIAN",e[e.LITTLE_ENDIAN=1]="LITTLE_ENDIAN"}(o||(o={}));var u=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataView=t,i(this,"littleEndian",void 0),i(this,"position",0),this.littleEndian=r===o.LITTLE_ENDIAN}var t,r,u;return t=e,(r=[{key:"getDataView",value:function(){return this.dataView}},{key:"hasMoreData",value:function(){return this.position<this.dataView.byteLength}},{key:"getPosition",value:function(){return this.position}},{key:"getLength",value:function(){return this.dataView.byteLength}},{key:"readUint8",value:function(){try{var e=this.dataView.getUint8(this.position);return this.position+=1,e}catch(t){throw this.throwOutOfBounds()}}},{key:"readUint16",value:function(){try{var e=this.dataView.getUint16(this.position,this.littleEndian);return this.position+=2,e}catch(t){throw this.throwOutOfBounds()}}},{key:"readUint32",value:function(){try{var e=this.dataView.getUint32(this.position,this.littleEndian);return this.position+=4,e}catch(t){throw this.throwOutOfBounds()}}},{key:"readInt32",value:function(){try{var e=this.dataView.getInt32(this.position,this.littleEndian);return this.position+=4,e}catch(t){throw this.throwOutOfBounds()}}},{key:"readUint64",value:function(){var e,t;try{this.littleEndian?(e=this.dataView.getUint32(this.position,!0),t=this.dataView.getUint32(this.position+4,!0)):(t=this.dataView.getUint32(this.position,!1),e=this.dataView.getUint32(this.position+4,!1))}catch(r){throw this.throwOutOfBounds()}if(t>2097151)throw new Error("JS_INTEGER_OVERFLOW");return this.position+=8,t*Math.pow(2,32)+e}},{key:"readBytes",value:function(e){this.position+e>this.dataView.byteLength&&this.throwOutOfBounds();var t=new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+this.position,e);return this.position+=e,t}},{key:"slice",value:function(t,r){var n=this.dataView.byteOffset+t;return new e(new DataView(this.dataView.buffer,n,r),this.littleEndian?o.LITTLE_ENDIAN:o.BIG_ENDIAN)}},{key:"skip",value:function(e){if(this.position+e>this.dataView.byteLength)throw this.throwOutOfBounds();this.position+=e}},{key:"rewind",value:function(e){if(this.position<e)throw this.throwOutOfBounds();this.position-=e}},{key:"seek",value:function(e){if(e<0||e>this.dataView.byteLength)throw this.throwOutOfBounds();this.position=e}},{key:"readTerminatedString",value:function(){for(var e=this.position;this.hasMoreData()&&0!==this.dataView.getUint8(this.position);)this.position+=1;var t=new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+e,this.position-e);return this.position+=1,a.x.fromUTF8(t)}},{key:"throwOutOfBounds",value:function(){return new Error("BUFFER_READ_OUT_OF_BOUNDS")}},{key:"readUUID",value:function(){var t=this.readBytes(16);return(e.byteToHex[t[0]]+e.byteToHex[t[1]]+e.byteToHex[t[2]]+e.byteToHex[t[3]]+"-"+e.byteToHex[t[4]]+e.byteToHex[t[5]]+"-"+e.byteToHex[t[6]]+e.byteToHex[t[7]]+"-"+e.byteToHex[t[8]]+e.byteToHex[t[9]]+"-"+e.byteToHex[t[10]]+e.byteToHex[t[11]]+e.byteToHex[t[12]]+e.byteToHex[t[13]]+e.byteToHex[t[14]]+e.byteToHex[t[15]]).toLowerCase()}},{key:"readString",value:function(e){if(this.position+e>this.getLength())throw new Error("Not enough bytes in buffer");for(var t="",r=0;r<e;r++)t+=String.fromCharCode(this.readUint8());return t}},{key:"readHex16",value:function(){for(var e="",t=0;t<16;t++){var r=this.readUint8().toString(16);e+=1===r.length?"0"+r:r}return e}},{key:"readUint8Array",value:function(e){for(var t=new Uint8Array(e),r=0;r<e;r++)t[r]=this.readUint8();return t}}])&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}();i(u,"byteToHex",Array.from({length:256},(function(e,t){return(t+256).toString(16).substr(1)})))},89737:function(e,t,r){"use strict";r.d(t,{K:function(){return n}});var n=100},11638:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{p:function(){return u}});var o,a=r(52088);!function(e){e[e.BASIC_BOX=0]="BASIC_BOX",e[e.FULL_BOX=1]="FULL_BOX"}(o||(o={}));var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"headers",[]),i(this,"boxDefinitions",[]),i(this,"done",!1)}var t,r,u;return t=e,u=[{key:"children",value:function(e){for(var t=null!==e.flags?12:8;e.reader.hasMoreData()&&!e.parser.done;)e.parser.parseNext(e.start+t,e.reader,e.partialOkay)}},{key:"sampleDescription",value:function(e){for(var t=null!==e.flags?12:8,r=e.reader.readUint32();r>0&&!e.parser.done;r-=1)e.parser.parseNext(e.start+t,e.reader,e.partialOkay)}},{key:"allData",value:function(e){return function(t){var r=t.reader.getLength()-t.reader.getPosition();e(t.reader.readBytes(r))}}},{key:"typeFromString",value:function(e){for(var t=0,r=0;r<e.length;r++)t=t<<8|e.charCodeAt(r);return t}},{key:"typeToString",value:function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}},{key:"headerSize",value:function(e){return 8+(e.has64BitSize?8:0)+(null!==e.flags?4:0)}}],(r=[{key:"box",value:function(t,r){var n=e.typeFromString(t);return this.headers[n]=o.BASIC_BOX,this.boxDefinitions[n]=r,this}},{key:"fullBox",value:function(t,r){var n=e.typeFromString(t);return this.headers[n]=o.FULL_BOX,this.boxDefinitions[n]=r,this}},{key:"stop",value:function(){this.done=!0}},{key:"parse",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e instanceof Uint8Array,o=i&&0!==e.byteOffset;if(o){var u=new Uint8Array(e);t=new a.K(new DataView(u.buffer,u.byteOffset,u.byteLength),a.I.BIG_ENDIAN)}else{var c=i?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(e);t=new a.K(c,a.I.BIG_ENDIAN)}for(this.done=!1;t.hasMoreData()&&!this.done;)this.parseNext(0,t,r,n)}},{key:"parseNext",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=r.getPosition(),u=!1;if(i&&a+8>r.getLength())this.done=!0;else{var c=r.readUint32(),s=r.readUint32();switch(c){case 0:c=r.getLength()-a;break;case 1:if(i&&r.getPosition()+8>r.getLength())return void(this.done=!0);c=r.readUint64(),u=!0}var l=this.boxDefinitions[s];if(l){var f=null,h=null;if(this.headers[s]===o.FULL_BOX){var d=r.readUint32();f=d>>>24,h=16777215&d}var p=a+c,y=!0;if(n&&p>r.getLength()&&(p=r.getLength(),y=!1),i&&p>r.getLength())return void(this.done=!0);var v=p-r.getPosition(),m=r.slice(r.getPosition(),v);r.skip(v);var g={parser:this,partialOkay:n||!1,version:f,flags:h,reader:m,size:c,loadedSize:r.getPosition()-a,start:a+t,isComplete:y,has64BitSize:u,type:e.typeToString(s)};l(g)}else{var b=Math.min(a+c-r.getPosition(),r.getLength()-r.getPosition());r.skip(b)}}}}])&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}()},28557:function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{d:function(){return u}});var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"buffer",[]),a(this,"head",0),a(this,"capacity",void 0),this.capacity=t}var t,r,i;return t=e,(r=[{key:"push",value:function(e){this.capacity&&(this.buffer.length<this.capacity?this.buffer.push(e):this.buffer[this.head]=e,this.head=(this.head+1)%this.capacity)}},{key:"toArray",value:function(){return this.capacity?this.buffer.length<this.capacity?n(this.buffer):[].concat(n(this.buffer.slice(this.head)),n(this.buffer.slice(0,this.head))):[]}},{key:"clear",value:function(){this.buffer=[],this.head=0}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},54187:function(e,t,r){"use strict";function n(e,t){return(0,i.V)(e,t,(function(e,t){return e-t}))}r.d(t,{U:function(){return n}});var i=r(70930)},70930:function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t,r){if(!(e.length<1)){for(var i=n(e,1)[0],o=t(i),a=1;a<e.length;a++){var u=e[a],c=t(u);r(c,o)<0&&(i=u,o=c)}return i}}r.d(t,{V:function(){return o}})},54640:function(e,t,r){"use strict";r.d(t,{J:function(){return i}});var n=r(67767),i=function(e){if(e){var t=(new n(e).pathname.split("/").pop()||"").split(".");return t.length>1?t.pop():void 0}}},69215:function(e,t,r){"use strict";function n(e){var t=(0,i.jS)("web_yasp_target_latency_debug");return-1===t?e:(0,o.z)(t)?t:e}r.d(t,{c:function(){return n}});r(61330);var i=r(84626),o=r(93966)},23631:function(e,t,r){"use strict";function n(){var e=(0,i.r0)("web_yasp_time_to_start");if(e&&"null"!==e){var t=parseFloat(e);return(0,o.z)(t)?t:void 0}}r.d(t,{p:function(){return n}});r(61330);var i=r(84626),o=r(93966)},67251:function(e,t,r){"use strict";function n(e,t){var r=t.details.url;if(!r)return t;var n=e.getViolatedSourceBySrc(r);if(!n)return t;var i=n.originalPolicy,u=n.violatedDirective;return new a.w({code:"YASP_SECURITY_POLICY_VIOLATION",details:{url:r,originalPolicy:i,violatedDirective:u},message:"CSP violation",category:o.q.CONFIG,isFatal:!0})}function i(e){return"YASP_SECURITY_POLICY_VIOLATION"===e.code}r.d(t,{n:function(){return i},t:function(){return n}});var o=r(47134),a=r(10664)},10664:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{w:function(){return h}});var h=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=l.call(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isFatal:!1},e),r),f(s(n),"category",void 0),f(s(n),"toJSON",void 0),n.category=(null===r||void 0===r?void 0:r.category)||e.category,n.toJSON=function(){return{message:n.message,code:n.code,isFatal:n.isFatal,details:n.details,stack:n.stack,category:n.category}},n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e);var r,n,c,l=u(t);return r=t,n&&o(r.prototype,n),c&&o(r,c),Object.defineProperty(r,"prototype",{writable:!1}),r}(r(4143).s)},53096:function(e,t,r){"use strict";r.d(t,{$:function(){return n}});var n=0},35478:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=function(r){c.some((function(t){var n;return null!==(n=(0,u.Y)((function(){return e[r]instanceof t})))&&void 0!==n&&n}))?t.push(e[r]):null!==e[r]&&"object"===i(e[r])&&o(e[r],t)};for(var n in e)r(n);return t}r.d(t,{_:function(){return o}});var a,u=r(86673),c=function(e){if(Array.isArray(e))return n(e)}(a="undefined"!==typeof MediaSourceHandle?[MediaSourceHandle]:[])||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},18772:function(e,t,r){"use strict";function n(e){var t=e.id,r=e.method,n=e.params;return t?{jsonrpc:"2.0",id:t,method:r,params:n}:{jsonrpc:"2.0",method:r,params:n}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){if(!("params"in e))return[];if(Array.isArray(e.params))return e.params;if((0,H.K)(e.params))return e.params;throw new Error("Expect #params to be an array or an object if present in ".concat(JSON.stringify(e)))}function a(e){return u(e)}function u(e){if((0,G.z)(e.id)){if(Math.floor(e.id)!==e.id)throw new Error("Expect #id to be an integer if it's a number in ".concat(JSON.stringify(e)));return e.id}if((0,V.H)(e.id)||null===e.id)return e.id;throw new Error("Expect #id to be an integer, string or null (not recommended) in ".concat(JSON.stringify(e)))}function c(e){if(!("id"in e))throw new Error("Expect #id to present in rpc response ".concat(JSON.stringify(e)));return u(e)}function s(e){if("object"!==i(e.error)||null===e.error)throw new Error("Expect #error to be an object in ".concat(JSON.stringify(e)));var t=e.error;if(!(0,G.z)(t.code))throw new Error("Expect #error#code to be an number in ".concat(JSON.stringify(e)));if(!(0,V.H)(t.message))throw new Error("Expect #error#message to be an string in ".concat(JSON.stringify(e)));return"data"in t?{code:t.code,message:t.message,data:t.data}:{code:t.code,message:t.message}}function l(e){var t=function(e){if(!(0,H.K)(e))throw new Error("Can't parse \"".concat(e,'" as object'));return e}(e);if(!function(e){return"2.0"===e.jsonrpc}(t))throw new Error("Expect ".concat((0,W.Y)((function(){return JSON.stringify(e)}))||e," to be a json-rpc v2 message"));if((0,V.H)(t.method))return function(e){return"id"in e?{jsonrpc:e.jsonrpc,method:e.method,params:o(e),id:a(e)}:{jsonrpc:e.jsonrpc,method:e.method,params:o(e)}}(t);if("result"in t)return function(e){return{jsonrpc:e.jsonrpc,result:e.result,id:c(e)}}(t);if("error"in t)return function(e){return{jsonrpc:e.jsonrpc,error:s(e),id:c(e)}}(t);throw new Error("Expect ".concat((0,W.Y)((function(){return JSON.stringify(e)}))||e," to be a json-rpc v2 message"))}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){if(t&&("object"===f(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){var t="function"===typeof Map?new Map:void 0;return(v=function(e){function r(){return m(e,arguments,w(this).constructor)}if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,e)})(e)}function m(e,t,r){return(m=g()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&b(i,r.prototype),i}).apply(null,arguments)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(){return(S="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=k(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function T(e,t){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){if(t&&("object"===_(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==j(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}I=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Z);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function D(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Z.resolve(c).then(n,i)}function C(e){return function(){var t=this,r=arguments;return new Z((function(n,i){function o(e){M(u,n,i,o,a,"next",e)}function a(e){M(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{A:function(){return ee}});var G=r(93966),H=r(76101),V=r(16187),W=r(86673),Y=r(85564),q=r(40497),z=r.n(q),K=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.v.UNKNOWN_ERROR,i=arguments.length>2?arguments[2]:void 0;return h(this,t),E(y(r=u.call(this,e)),"message",void 0),E(y(r),"stack",void 0),E(y(r),"toJSON",void 0),E(y(r),"code",void 0),z()(y(r),t.prototype),r.message=e,r.code=n,r.stack=null!==i&&void 0!==i?i:r.stack,r.toJSON=function(){return{code:r.code,message:r.message,data:r.stack}},r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e);var r,n,i,o,a,u=(r=t,n=g(),function(){var e,t=w(r);if(n){var i=w(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return p(this,e)});return i=t,(o=[{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}])&&d(i.prototype,o),a&&d(i,a),Object.defineProperty(i,"prototype",{writable:!1}),t}(v(Error)),$=(r(61330),r(54588)),X=r(88261),J=r(72573),Q=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(P(r=a.call(this)),"lastRpcRequestId",1),L(P(r),"waiters",Object.create(null)),L(P(r),"send",void 0),L(P(r),"onRun",void 0),L(P(r),"serialize",void 0),L(P(r),"deserialize",void 0),r.send=e.send,r.onRun=e.onRun,r.serialize=e.serialize,r.deserialize=e.deserialize,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,e);var r,i,o,a=R(t);return r=t,(i=[{key:"destroy",value:function(){for(var e in S(A(t.prototype),"destroy",this).call(this),this.onRun=X.Z,this.waiters)this.waiters[e](new Error("Stop on destroy"))}},{key:"request",value:function(e){var t=e.method,r=e.params,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4,o=this.getUniqueRpcRequestId();return this.sendMessage(n({id:o,method:t,params:r})),this.waitForResponse(o,i,t)}},{key:"sendEvent",value:function(e){var t=e.method,r=e.params;return this.sendMessage(n({method:t,params:r})),J.resolve()}},{key:"getUniqueRpcRequestId",value:function(){return String(this.lastRpcRequestId++)}},{key:"waitForResponse",value:function(e,t,r){var n=this,i=setTimeout((function(){var i=n.waiters[e];void 0!==i&&i(new Error("Timeout fired (".concat(t,"ms) on method ").concat(r," for id=").concat(e,".")))}),t);return new J((function(t,r){n.waiters[e]=function(o,a){return clearTimeout(i),delete n.waiters[e],null!==o?r(o):t(a)}}))}},{key:"sendMessage",value:function(e){this.send(this.serialize(e))}},{key:"handleRpcRequest",value:function(e){var t=this,r=e.id,n=e.method,i=e.params;this.onRun({method:n,params:i},(function(e,n){r&&t.sendMessage(function(e){var t=e.id,r=e.error,n=e.result;return r?{jsonrpc:"2.0",id:t,error:r.toJSON()}:{jsonrpc:"2.0",id:t,result:void 0===n?null:n}}({id:r,error:e,result:n}))}))}},{key:"handleRpcResponse",value:function(e){var t=this.waiters[e.id];void 0!==t?"error"in e?t(new K(e.error.message,e.error.code,"string"===typeof e.error.data?e.error.data:void 0)):t(null,e.result):this.emit("Warn",new Error("Response for missed waiter for id=".concat(JSON.stringify(e.id))))}},{key:"handleMessage",value:function(e){try{var t=l(this.deserialize(e));"result"in t||"error"in t?this.handleRpcResponse(t):"method"in t&&this.handleRpcRequest(t)}catch(r){this.emit("Error",r)}}}])&&O(r.prototype,i),o&&O(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}($.M),Z=r(72573),ee=function(){function e(t){var r=this;F(this,e),U(this,"jsonRpcMessenger",void 0),U(this,"handlers",{}),U(this,"staticHandlers",{});var n=function(){var e=C(I().mark((function e(t,n){var i,o,a,u,c,s,l,f,h,d,p,y,v,m,g;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.method in r.handlers||t.method in r.staticHandlers){e.next=2;break}return e.abrupt("return",n(new K("Unknown method: ".concat(t.method),Y.v.METHOD_NOT_FOUND)));case 2:if(!r.handlers[t.method]){e.next=32;break}i=D(r.handlers[t.method]),e.prev=4,i.s();case 6:if((o=i.n()).done){e.next=24;break}return a=o.value,e.prev=8,e.next=11,a(t.params);case 11:if(u=e.sent,c=u.done,s=u.value,!c){e.next=16;break}return e.abrupt("return",n(null,s));case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(8),l=new K((0,H.K)(e.t0)?e.t0.message:"",Y.v.INTERNAL_ERROR,(0,H.K)(e.t0)?e.t0.stack:""),e.abrupt("return",n(l));case 22:e.next=6;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(4),i.e(e.t1);case 29:return e.prev=29,i.f(),e.finish(29);case 32:if(!r.staticHandlers[t.method]){e.next=66;break}f=!1,h=D(r.staticHandlers[t.method]),e.prev=35,h.s();case 37:if((d=h.n()).done){e.next=54;break}return p=d.value,e.prev=39,e.next=42,p(t.params);case 42:y=e.sent,v=y.done,m=y.value,v&&(f||(f=!0,n(null,m))),e.next=52;break;case 48:return e.prev=48,e.t2=e.catch(39),g=new K((0,H.K)(e.t2)?e.t2.message:"",Y.v.INTERNAL_ERROR,(0,H.K)(e.t2)?e.t2.stack:""),e.abrupt("return",n(g));case 52:e.next=37;break;case 54:e.next=59;break;case 56:e.prev=56,e.t3=e.catch(35),h.e(e.t3);case 59:return e.prev=59,h.f(),e.finish(59);case 62:if(!f){e.next=64;break}return e.abrupt("return");case 64:e.next=66;break;case 66:return e.abrupt("return",n(new K("No handler for existed method: ".concat(t.method),Y.v.INVALID_REQUEST)));case 67:case"end":return e.stop()}}),e,null,[[4,26,29,32],[8,18],[35,56,59,62],[39,48]])})));return function(t,r){return e.apply(this,arguments)}}();this.jsonRpcMessenger=new Q({send:t,onRun:n,serialize:function(e){return e},deserialize:function(e){return e}}),this.jsonRpcMessenger.on("Warn",console.warn),this.jsonRpcMessenger.on("Error",console.error)}var t,r,n;return t=e,(r=[{key:"registerHandler",value:function(e,t){var r;this.handlers[e]=null!==(r=this.handlers[e])&&void 0!==r?r:[],this.handlers[e].push(t)}},{key:"registerStaticHandler",value:function(e,t){var r;this.staticHandlers[e]=null!==(r=this.staticHandlers[e])&&void 0!==r?r:[],this.staticHandlers[e].push(t)}},{key:"removeHandler",value:function(e,t){var r,n=D(["handlers","staticHandlers"]);try{for(n.s();!(r=n.n()).done;){var i=r.value;this[i][e]&&(this[i][e]=void 0===t?[]:this[i][e].filter((function(e){return e!==t})),0===this[i][e].length&&delete this[i][e])}}catch(o){n.e(o)}finally{n.f()}}},{key:"request",value:function(e){var t=e.method,r=e.params;return this.jsonRpcMessenger.request({method:String(t),params:r})}},{key:"sendEvent",value:function(e){var t=e.method,r=e.params;return this.jsonRpcMessenger.sendEvent({method:String(t),params:r})}},{key:"destroy",value:function(){this.jsonRpcMessenger.destroy()}},{key:"handleMessage",value:function(e){this.jsonRpcMessenger.handleMessage(e.data)}}])&&B(t.prototype,r),n&&B(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},58094:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(){return(s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=l(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){if(t&&("object"===a(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t,r){var n;return e.replace(/\$RepresentationID\$/g,t.id).replace(/\$Bandwidth\$/g,String(t.bitrate)).replace(/\$Number\$/g,String(null!==(n=null===r||void 0===r?void 0:r.number)&&void 0!==n?n:"")).replace(/\$Time\$/g,String((0,nl.z)(null===r||void 0===r?void 0:r.originalStart)?r.originalStart:"")).replace(/\$\$/g,"$")}function S(e){return e.replace(/&(amp|quot|apos|lt|gt);/g,(function(e,t){var r;return null!==(r=il[t])&&void 0!==r?r:e}))}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=L(e);if(t){var i=L(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P(this,r)}}function P(e,t){if(t&&("object"===k(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(){return(C="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=F(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function F(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}function B(e,t){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=V(e);if(t){var i=V(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return G(this,r)}}function G(e,t){if(t&&("object"===I(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return H(e)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(){return($="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=X(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function X(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=te(e)););return e}function J(e,t){return(J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=te(e);if(t){var i=te(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Z(this,r)}}function Z(e,t){if(t&&("object"===Y(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ee(e)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oe(e,t){return(oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=se(e);if(t){var i=se(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ue(this,r)}}function ue(e,t){if(t&&("object"===ne(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ce(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e){return function(e){if(Array.isArray(e))return de(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return de(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return de(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ye(){return(ye="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=ve(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function ve(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ee(e)););return e}function me(e,t){return(me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ge(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ee(e);if(t){var i=Ee(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return be(this,r)}}function be(e,t){if(t&&("object"===fe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return we(e)}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oe(e,t){return(0,yl.V)(e,t,(function(e,t){return t-e}))}function Se(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(r),!0).forEach((function(t){xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pe(e,t){return Re(Re({},t),{},{start:e.start,end:t.end})}function Ae(e){return function(e){if(Array.isArray(e))return Le(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Le(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function je(e){var t=[];return e.forEach((function(e){t.push.apply(t,Ae(e))})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe,r=Se(e);r.sort((function(e,t){return e.start-t.start||e.end-t.end}));for(var n=1;n<r.length;n++){var i=r[n],o=r[n-1];o.end>=i.start&&(r.splice(n,1),r[n-1]=t(o,i),n--)}return r}(t)}function Ie(e){return function(e){if(Array.isArray(e))return Ne(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||De(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){if(e){if("string"===typeof e)return Ne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ne(e,t):void 0}}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Me(e){if(0===e.length)return[];var t,r=Math.min.apply(Math,Ie(e.map((function(e){return e.height})))),n={},i=function(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=De(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;n[o.height]||(n[o.height]=[]),n[o.height].push(o)}}catch(u){i.e(u)}finally{i.f()}var a=[];return(0,gl.Z)(n).forEach((function(e){var t=parseInt(e,10),i=n[e];if(t===r)a.push.apply(a,Ie(i));else{var o=i.reduce((function(e,t){return e.bitrate>t.bitrate?e:t}));a.push(o)}})),a.sort((function(e,t){return t.bitrate-e.bitrate}))}function Ce(e,t){if(!e||!t)return!1;var r=e.mimeType===t.mimeType,n=e.codecs,i=t.codecs,o=n===i,a=function(e,t){var r=e.split(".")[0];if(0===t.indexOf(r))return!0;var n=bl[r];return!!n&&n.some((function(e){return 0===t.indexOf(e)}))}(n,i);return o||a&&r}function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||Ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e){return function(e){if(Array.isArray(e))return He(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e,t){if(e){if("string"===typeof e)return He(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?He(e,t):void 0}}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){Ze(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qe(){return(qe="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=ze(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function ze(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qe(e)););return e}function Ke(e,t){return(Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $e(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Qe(e);if(t){var i=Qe(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Xe(this,r)}}function Xe(e,t){if(t&&("object"===Fe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Je(e)}function Je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(e,t){var r=parseInt(e.attributes.timescale||"1",10);if(isNaN(r))throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected SegmentTemplate[timescale]",details:{node:e},category:Xs.q.MEDIA});var n=e.attributes.media;if(!n)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed SegmentTemplate[media]",details:{node:e},category:Xs.q.MEDIA});var i=Math.floor(Math.max(0,parseInt(e.attributes.startNumber||"1",10)));if(!Number.isFinite(i)||!Number.isInteger(i))throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected SegmentTemplate[startNumber]",details:{node:e},category:Xs.q.MEDIA});var o=parseInt(e.attributes.presentationTimeOffset||"0",10),a=o;if(t.presentationTimeOffset=Math.max(a,Number(t.presentationTimeOffset)),isNaN(a))throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected SegmentTemplate[presentationTimeOffset]",details:{node:e},category:Xs.q.MEDIA});var u=e.attributes.availabilityTimeOffset?parseFloat(e.attributes.availabilityTimeOffset):0;t.availabilityTimeOffset=Math.min(t.availabilityTimeOffset,1e3*u);var c=e.children.find((function(e){return"SegmentTimeline"===e.tagName})),s=[],l=Math.max(Math.floor(0)),f=0,h=Math.max(Math.floor(0));if(c){for(var d=c.children.filter((function(e){return"S"===e.tagName})),p=0;p<d.length;p++){var y,v,m=d[p],g=s[s.length-1],b=parseInt(m.attributes.t,10),w=parseInt(m.attributes.d||e.attributes.duration,10);if("string"===typeof m.attributes.t&&isNaN(b))throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected S[t]",details:{node:e},category:Xs.q.MEDIA});if(t.isDynamic)if(t.startPresentationTimeOffset=null!==(v=t.startPresentationTimeOffset)&&void 0!==v?v:b,a=o=o||t.startPresentationTimeOffset||b,isNaN(a))throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected SegmentTemplate[presentationTimeOffset]",details:{node:e},category:Xs.q.MEDIA});var E=b||(g?g.originalValues.time+g.originalValues.duration*g.count:0),_=1e3*b/r||(g?g.time+g.duration*g.count:0),O=1e3*w/r;t.maxSegmentDuration=t.maxSegmentDuration?Math.max(t.maxSegmentDuration,O):O;var k=Math.max(Math.floor(parseInt(m.attributes.r||"0",10)));if(isNaN(O))throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected S[d]",details:{node:e},category:Xs.q.MEDIA});if(isNaN(k))throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected S[r]",details:{node:e},category:Xs.q.MEDIA});var T=k+Math.max(Math.floor(1));l+=T;var R=i+Math.max(Math.floor(l-1)),x=_+O*T;t.maxSegmentEndTime=t.maxSegmentEndTime?Math.max(t.maxSegmentEndTime,x):x,t.minSegmentStartTime=Math.min(null!==(y=t.minSegmentStartTime)&&void 0!==y?y:1/0,_),t.minSegmentStartTime=t.minSegmentStartTime?Math.min(t.minSegmentStartTime,_):_,s.push({endNumber:R,time:_,duration:O,count:T,originalValues:{time:E,duration:w,trackPresentationTimeOffset:o}})}h=i+Math.max(Math.floor(l-1))}else{var P,A;if(null===t.duration&&!t.isDynamic)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Can't compute presentation duration",details:{node:e},category:Xs.q.MEDIA});var L=0,j=1e3*parseInt(e.attributes.duration,10)/r;if(isNaN(j))throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected S[d]",details:{node:e},category:Xs.q.MEDIA});var I=Math.abs(null!==(P=t.duration)&&void 0!==P?P:t.nowWithOffset);if(isFinite(t.segmentAvailabilityDuration)){var D,N=t.nowWithOffset-(null!==(D=t.presentationStartTime)&&void 0!==D?D:0),M=Math.max(N-t.segmentAvailabilityDuration,0),C=Math.ceil(M/j);i+=C,L=C*j,I=Math.max(N-L,0)}l=Math.floor(I/j),f=(h=i+Math.max(Math.floor(l-1),0))*j,t.maxSegmentEndTime=Math.max(t.maxSegmentEndTime||0,f),t.minSegmentStartTime=Math.min(null!==(A=t.minSegmentStartTime)&&void 0!==A?A:1/0,L),t.maxSegmentDuration=Math.max(t.maxSegmentDuration||0,j),s.push({endNumber:h,time:L,duration:j,count:l,originalValues:{time:L,duration:parseInt(e.attributes.duration,10),trackPresentationTimeOffset:o}});var F=t.duration?t.duration-f:0,B=Math.abs(Math.floor(1));F&&s.push({endNumber:h+B,time:f,duration:F,count:B,originalValues:{time:f,duration:F,trackPresentationTimeOffset:o}})}var U=s[s.length-1];return t.maxPresentationTimeOffset=void 0!==t.maxPresentationTimeOffset?Math.max(t.maxPresentationTimeOffset,a):t.maxPresentationTimeOffset,{timescale:r,initialization:e.attributes.initialization?S(e.attributes.initialization):null,media:S(n),startNumber:i,startTime:s[0].time,endNumber:U.endNumber,endTime:U.time+U.duration*U.count,presentationTimeOffset:a,segmentSequences:s}}function tt(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return rt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rt(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function it(e,t){var r=parseInt(e.attributes.timescale||"1",10);if(isNaN(r))throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected SegmentList[timescale]",details:{node:e},category:Xs.q.MEDIA});var n=parseInt(e.attributes.presentationTimeOffset||"0",10),i=n;if(isNaN(i))throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected SegmentList[presentationTimeOffset]",details:{node:e},category:Xs.q.MEDIA});var o=null,a=e.children.find((function(e){return"Initialization"===e.tagName}));if(a){if(!a.attributes.sourceURL)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missing Initialization[sourceURL] in SegmentList",details:{node:e},category:Xs.q.MEDIA});o=S(a.attributes.sourceURL)}var u=e.children.filter((function(e){return"SegmentURL"===e.tagName}));if(0===u.length)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"No SegmentURL found in SegmentList",details:{node:e},category:Xs.q.MEDIA});var c=1e3*parseInt(e.attributes.duration||"0",10)/r,s=e.attributes.startNumber?Math.floor(Math.max(0,parseInt(e.attributes.startNumber,10))):null,l=null!==s&&void 0!==s?s:Math.floor(Math.abs(1+i/c)),f={};if(u.forEach((function(t,r){var n=l+Math.max(Math.floor(r)),i=t.attributes.media;if(!i)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Missing SegmentURL[media] for segment index ".concat(r),details:{node:e},category:Xs.q.MEDIA});f[n]=i})),!c||isNaN(c))throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected SegmentList[duration]",details:{node:e},category:Xs.q.MEDIA});var h,d,p=c*(l-1),y=[];if(t.duration){var v=Math.floor(t.duration/c),m=t.duration-c*v,g=l+Math.floor(Math.abs(v-1)),b=p+c*v;if(y.push({endNumber:g,time:p,duration:c,count:Math.floor(Math.abs(v)),originalValues:{time:p,duration:e.attributes.duration?parseInt(e.attributes.duration,10):0,trackPresentationTimeOffset:n}}),h=g,d=b,m>0){var w=h+Math.abs(Math.floor(1));y.push({endNumber:w,time:b,duration:m,count:Math.floor(Math.abs(1)),originalValues:{time:b,duration:m,trackPresentationTimeOffset:n}}),h=w,d=b+m}}var E=y.reduce((function(e,t){return e+t.count}),0),_=u.length,O=0!==E&&E!==_;if(!t.duration||O){y.length=0;var k=l+Math.floor(Math.abs(_-1)),T=p+c*_;y.push({endNumber:k,time:p,duration:c,count:Math.floor(Math.abs(_)),originalValues:{time:p,duration:e.attributes.duration?parseInt(e.attributes.duration,10):0,trackPresentationTimeOffset:n}}),h=k,d=T}if(void 0===h||void 0===d)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Can not parse endNumber or endTime from SegmentList",details:{node:e},category:Xs.q.MEDIA});return t.maxSegmentDuration=t.maxSegmentDuration?Math.max(t.maxSegmentDuration,c):c,t.minSegmentStartTime=void 0!==t.minSegmentStartTime?Math.min(t.minSegmentStartTime,p):p,t.maxSegmentEndTime=t.maxSegmentEndTime?Math.max(t.maxSegmentEndTime,d):d,t.maxPresentationTimeOffset=void 0!==t.maxPresentationTimeOffset?Math.max(t.maxPresentationTimeOffset,i):i,t.presentationTimeOffset=Math.max(i,Number(t.presentationTimeOffset)),{timescale:r,initialization:o,media:"",startNumber:l,startTime:p,endNumber:h,endTime:d,presentationTimeOffset:i,segmentSequences:y,rawSegmentsUrlMapping:f}}function ot(e,t){var r,n,i=e.attributes.mimeType,o=e.attributes.contentType||(null===i||void 0===i?void 0:i.split("/")[0]);if(!o)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected empty AdaptationSet[contentType] and AdaptationSet[mimeType]",details:{node:e},category:Xs.q.MEDIA});t.maxHeight||(t.maxHeight=(r=e.children,(n=r.find((function(e){var t;return"SupplementalProperty"===e.tagName&&"urn:mpeg:yandex:capping:maxheight"===(null===(t=e.attributes)||void 0===t?void 0:t.schemeIdUri)})))?parseInt(n.attributes.value,10):null));var a=e.children.filter((function(e){return"ContentProtection"===e.tagName})),u=new Ll(t.parser).parse(a),c="true"===e.attributes.segmentAlignment,s=e.children.find((function(e){return"SegmentTemplate"===e.tagName})),l=e.children.find((function(e){return"SegmentList"===e.tagName}));if(s&&l)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected SegmentTemplate and SegmentList in AdaptationSet",details:{node:e},category:Xs.q.MEDIA});return{type:o,segmentAlignment:c,segmentTemplate:s?et(s,t):l?it(l,t):void 0,mimeType:i,contentProtection:u}}function at(e,t,r){var n,i=e.attributes.id;if(!i)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed id on Representation",details:{node:e},category:Xs.q.MEDIA});var o=null!==(n=e.attributes.codecs)&&void 0!==n?n:null,a=parseInt(e.attributes.bandwidth,10);if(isNaN(a)||a<0){if("text"!==r)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Representation[bandwidth]",details:{node:e},category:Xs.q.MEDIA});a=10}var u=e.attributes.mimeType,c=e.children.find((function(e){return"SegmentTemplate"===e.tagName})),s=e.children.find((function(e){return"SegmentList"===e.tagName}));if(c&&s)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected SegmentTemplate and SegmentList in Representation",details:{node:e},category:Xs.q.MEDIA});var l=c?et(c,t):s?it(s,t):void 0,f=e.children.filter((function(e){return"InbandEventStream"===e.tagName}));return"text"!==r&&f.forEach((function(e){return t.emsgSchemeIdUris[r].add(e.attributes.schemeIdUri)})),{id:i,codecs:o,bandwidth:a,segmentTemplate:l,mimeType:u}}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||ct(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){if(e){if("string"===typeof e)return st(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?st(e,t):void 0}}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lt(e){var t,r={},n=e.find((function(e){var t;return"SupplementalProperty"===e.tagName&&"urn:mpeg:yandex:labels:quality"===(null===(t=e.attributes)||void 0===t?void 0:t.schemeIdUri)}));if(!n||null===(t=n.attributes)||void 0===t||!t.value)return r;var i,o=function(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ct(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}(n.attributes.value.split(","));try{for(o.s();!(i=o.n()).done;){var a=i.value.match(/^(\d+x\d+)@\d+:(.+)$/);if(a){var u=ut(a,3),c=u[1],s=u[2];r[c]=s}}}catch(l){o.e(l)}finally{o.f()}return r}function ft(e,t){return"".concat(e,"x").concat(t)}function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){pt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=parseInt(e.attributes.width,10),i=parseInt(e.attributes.height,10),o=Math.max(parseFloat(e.attributes.frameRate),0),a=r[ft(n,i)];if(isNaN(n))throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",details:{node:e},message:"Unexpected Representation[width]",isFatal:!0,category:Xs.q.MEDIA});if(isNaN(i))throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",details:{node:e},message:"Unexpected Representation[height]",isFatal:!0,category:Xs.q.MEDIA});var u=at(e,t,"video"),c=u.codecs;if(!c)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",details:{node:e},message:"Unexpected missed codecs on Representation",isFatal:!0,category:Xs.q.MEDIA});return dt(dt(dt({},u),o?{frameRate:o}:{}),{},{codecs:c,width:n,height:i,qualityLabel:a})}function vt(e,t){return t.bandwidth-e.bandwidth}function mt(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.children.filter((function(e){return"Representation"===e.tagName})),o=[],a=0;a<i.length;a++){var u=i[a];o.push(t(u,r,n))}return o.sort(vt)}function gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(r),!0).forEach((function(t){wt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Et(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(r),!0).forEach((function(t){St(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function St(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kt(e,t){var r=Math.max(parseFloat(e.attributes.audioSamplingRate),0);if(isNaN(r))throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected Representation[audioSamplingRate]",details:{node:e},category:Xs.q.MEDIA});var n=at(e,t,"audio"),i=n.codecs;if(!i)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed codecs on Representation",details:{node:e},category:Xs.q.MEDIA});return Ot(Ot({},n),{},{codecs:i,audioSamplingRate:r})}function Tt(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Rt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rt(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){At(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function At(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lt(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function jt(e,t,r){var n,i,o=t.segmentTemplate,a=t.mimeType,u=Lt(t,Il),c=null!==(n=e.attributes.lang)&&void 0!==n?n:"und",s=null!==(i=e.attributes.label)&&void 0!==i?i:null;if(""===c)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected AdaptationSet[lang]",details:{node:e},category:Xs.q.MEDIA});var l=mt(e,kt,r).map((function(t){var r,n,i=null!==(r=t.segmentTemplate)&&void 0!==r?r:o,u=null!==(n=t.mimeType)&&void 0!==n?n:a;if(!i)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Representation>SegmentTemplate",details:{node:e},category:Xs.q.MEDIA});if(!u)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Representation>mimeType",details:{node:e},category:Xs.q.MEDIA});return Pt(Pt({},t),{},{segmentTemplate:i,mimeType:u})})),f=function(e,t){var r,n=Tt(t.findChildren(e,"AudioChannelConfiguration"));try{for(n.s();!(r=n.n()).done;){var i=r.value,o=i.attributes.schemeIdUri;if(o){var a=i.attributes.value;if(a)switch(o){case"urn:mpeg:dash:outputChannelPositionList:2012":return a.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":var u=parseInt(a,10);if(!u)continue;return u;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":var c=parseInt(a,16);if(!c)continue;for(var s=0;c;)1&c&&++s,c>>=1;return s;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":var l=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],f=parseInt(a,10);if(!f)continue;if(f>0&&f<l.length)return l[f];continue;default:continue}}}}catch(h){n.e(h)}finally{n.f()}}(e,r.parser);return Pt(Pt({},u),{},{lang:c,label:s,representations:l,keyId:void 0,encrypted:t.contentProtection.drmInfos.length>0,channels:f})}function It(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?It(Object(r),!0).forEach((function(t){Nt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mt(e,t){var r=at(e,t,"text"),n=[];return e.children.forEach((function(e){var t=e.tagName,r=e.children;if("BaseURL"===t){var i=r[0];if(!i)return;n.push(S(i))}})),Dt(Dt({},r),{},{baseUrl:n[0]})}function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(r),!0).forEach((function(t){Bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ut(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Gt(e,t){var r=ot(e,t);switch(r.type){case"video":return function(e,t,r){var n=t.segmentTemplate,i=t.mimeType,o=Et(t,jl),a=parseInt(e.attributes.maxWidth,10),u=parseInt(e.attributes.maxHeight,10),c=Math.max(parseFloat(e.attributes.maxFrameRate),0),s=lt(e.children),l=mt(e,yt,r,s).map((function(t){var r,o,a=null!==(r=t.segmentTemplate)&&void 0!==r?r:n,u=null!==(o=t.mimeType)&&void 0!==o?o:i;if(!a)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Representation>SegmentTemplate",details:{node:e},category:Xs.q.MEDIA});if(!u)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Representation>mimeType",details:{node:e},category:Xs.q.MEDIA});return bt(bt({},t),{},{segmentTemplate:a,mimeType:u})}));if(isNaN(a))throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected AdaptationSet[maxWidth]",details:{node:e},category:Xs.q.MEDIA});if(isNaN(u))throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected AdaptationSet[maxHeight]",details:{node:e},category:Xs.q.MEDIA});return bt(bt(bt({},o),c?{maxFrameRate:c}:{}),{},{maxWidth:a,maxHeight:u,representations:l,keyId:void 0,encrypted:t.contentProtection.drmInfos.length>0})}(e,r,t);case"audio":return jt(e,r,t);case"text":return function(e,t,r){var n,i,o,a,u=t.segmentTemplate,c=t.mimeType,s=Ut(t,Dl),l=e.children.filter((function(e){return"Role"===e.tagName})),f=null;l.forEach((function(e){["caption","subtitle"].includes(e.attributes.value)&&(f=e)}));var h=null!==(n=e.attributes.lang)&&void 0!==n?n:"und",d=null!==(i=e.attributes.label)&&void 0!==i?i:null,p=mt(e,Mt,r).map((function(e){return Ft(Ft({},e),{},{segmentTemplate:e.segmentTemplate||u,mimeType:e.mimeType||c})}));return Ft(Ft({},s),{},{role:f?{schemeIdUri:null!==(o=f.attributes.schemeIdUri)&&void 0!==o?o:null,value:null!==(a=f.attributes.value)&&void 0!==a?a:null}:null,lang:h,label:d,representations:p,keyId:void 0,encrypted:t.contentProtection.drmInfos.length>0,segmentAlignment:!1})}(e,r,t);default:throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected AdaptationSet[contentType=".concat(r.type,"]"),details:{node:e},category:Xs.q.MEDIA})}}function Ht(e,t){var r,n,i,o,a,u,c=t.type.charCodeAt(0)-e.type.charCodeAt(0);if(0!==c)return c;switch(t.type){case"video":return t.maxHeight-e.maxHeight||(null!==(r=t.maxFrameRate)&&void 0!==r?r:0)-(null!==(n=e.maxFrameRate)&&void 0!==n?n:0)||(null!==(i=t.mimeType)&&void 0!==i?i:"").localeCompare(null!==(o=e.mimeType)&&void 0!==o?o:"");case"audio":case"text":return(null!==(a=t.mimeType)&&void 0!==a?a:"").localeCompare(null!==(u=e.mimeType)&&void 0!==u?u:"")}return 0}function Vt(e,t){for(var r=e.children.filter((function(e){return"AdaptationSet"===e.tagName})),n=[],i=0;i<r.length;i++){var o=Gt(r[i],t);o&&n.push(o)}return n.sort(Ht)}function Wt(e){if(!e)return null;var t=new RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e);if(!t)return null;var r=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null);return isFinite(r)?1e3*r:null}function Yt(e,t){return t.minPeriodStartTime=Math.min(Wt(e.attributes.start)||0,t.minPeriodStartTime),{adaptationSets:Vt(e,t)}}function qt(e){try{var t=new Nl(e);t.search="";var r=t.pathname.split("/");return r[r.length-1]="",t.pathname=r.join("/"),t.href}catch(n){return""}}function zt(e){if(!e)return null;/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z");var t=Date.parse(e);return isNaN(t)?null:Math.floor(t)}function Kt(e){var t=e.find((function(e){return Cl.includes(e.attributes.schemeIdUri)}));if(!t)return 0;var r=t.attributes.schemeIdUri,n=t.attributes.value;if(Ml.includes(r)){var i=Date.parse(n);return isNaN(i)?0:i-Date.now()}return 0}function $t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jt(e){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Jt(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Qt=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Kl);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function Zt(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Kl.resolve(c).then(n,i)}function er(e){return function(){var t=this,r=arguments;return new Kl((function(n,i){function o(e){Zt(u,n,i,o,a,"next",e)}function a(e){Zt(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(r),!0).forEach((function(t){fr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nr(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function or(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ar(e,t){return(ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ur(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=lr(e);if(t){var i=lr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return cr(this,r)}}function cr(e,t){if(t&&("object"===Jt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sr(e)}function sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lr(e){return(lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,r=e<10?100*Math.pow(2,e):6e4,n=2*Math.random()-1,i=n*t;return r*(1+i)}function dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(r),!0).forEach((function(t){yr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vr(e,t){var r=[];e.adaptationSets.forEach((function(e){e.representations.forEach((function(n){switch(e.type){case"audio":t.obtainTimelineTrack(pr(pr(pr({},n),n.segmentTemplate),{},{bitrate:n.bandwidth,language:e.lang,name:e.label,label:e.label,channels:e.channels,type:"audio"}));break;case"video":r.push(n);break;case"text":t.obtainTimelineTrack(function(e,t,r){var n,i,o,a,u=t.segmentTemplate,c=pr(pr({},t),{},{kind:(null===(n=r.role)||void 0===n?void 0:n.value)||"subtitles",label:r.label,language:r.lang,bitrate:t.bandwidth,type:"text"});if(u)return pr(pr({},c),u);var s=e.getSeekableRange();return pr(pr({},c),{},{media:t.baseUrl,initialization:null,timescale:1,startNumber:Math.ceil(Math.abs(1)),endNumber:Math.ceil(Math.abs(1)),startTime:null!==(i=null===s||void 0===s?void 0:s.start)&&void 0!==i?i:0,endTime:null!==(o=null===s||void 0===s?void 0:s.end)&&void 0!==o?o:0,presentationTimeOffset:0,segmentSequences:[{time:0,duration:null!==(a=e.getDuration())&&void 0!==a?a:0,count:Math.ceil(Math.abs(1)),endNumber:Math.ceil(Math.abs(1)),originalValues:{time:0,duration:e.getDuration(),trackPresentationTimeOffset:0}}]})}(t,n,e))}}))})),t.updateVideoTracks(r),t.sortTracksInTimeline()}function mr(e){if(!e.length)return 1/0;var t=0;return e.forEach((function(e){t+=e.bandwidth})),t/e.length}function gr(e,t){return"".concat(e,"; codecs=").concat(JSON.stringify(t))}function br(e,t){var r=(0,Zl.Q)(self);return!!r&&r.isTypeSupported(gr(t,e))}function wr(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Er(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _r(e){var t,r=[],n=[],i=wr(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;br(o.codecs,o.mimeType)?r.push(o):n.push(o)}}catch(a){i.e(a)}finally{i.f()}return{supported:r,unsupported:n}}function Or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Sr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kr(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Tr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tr(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rr(e){var t,r=new Map,n=kr(e.representations);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=i.height,a=i.bandwidth;r.set(o,a)}}catch(u){n.e(u)}finally{n.f()}return r}function xr(e,t){var r,n=0,i=0,o=0,a=kr(e.keys());try{for(a.s();!(r=a.n()).done;){var u=r.value,c=e.get(u),s=t.get(u);c&&s&&(o++,n+=c,i+=s)}}catch(l){a.e(l)}finally{a.f()}return i/o<n/o?t:e}function Pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ar(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ar(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Lr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lr(Object(r),!0).forEach((function(t){Ir(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ir(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dr(e){var t={audio:[],video:[],text:[]},r={video:!1,audio:!1},n={video:new Set,audio:new Set};e.forEach((function(e){if("video"===e.type){r.video=!0;var i=function(e){var t={},r=0,n=_r(e),i=n.supported,o=n.unsupported;i.forEach((function(e){r=Math.max(r,e.height);var n=e.codecs.split(".")[0];t[n]?t[n].push(e):t[n]=[e]})),(0,wl.J)(t).forEach((function(e){var n=Or(e,2),i=n[0];n[1].some((function(e){return e.height===r}))||delete t[i]}));var a=(0,gl.Z)(t);return a.length?(a.length>1&&a.sort((function(e,r){return mr(t[e])-mr(t[r])})),{selected:t[a[0]],unsupported:o}):{selected:void 0,unsupported:o}}(e.representations),o=i.selected,a=i.unsupported;if(!o)return void a.forEach((function(e){return n.video.add(gr(e.mimeType,e.codecs))}));t[e.type].push(jr(jr({},e),{},{representations:o,maxHeight:o[0].height,maxWidth:o[0].width}))}else if("audio"===e.type){r.audio=!0;var u=function(e){var t={},r=_r(e),n=r.supported,i=r.unsupported;n.forEach((function(e){var r=e.codecs.split(".")[0];t[r]?t[r].push(e):t[r]=[e]}));var o=(0,gl.Z)(t);return o.length?(o.length>1&&o.sort((function(e,r){return mr(t[e])-mr(t[r])})),{selected:t[o[0]],unsupported:i}):{selected:void 0,unsupported:i}}(e.representations),c=u.selected,s=u.unsupported;if(!c)return void s.forEach((function(e){return n.audio.add(gr(e.mimeType,e.codecs))}));t[e.type].push(jr(jr({},e),{},{representations:c}))}else t[e.type].push(e)}));var i=(0,gl.Z)(r).filter((function(e){return r[e]&&!t[e].length}));if(i.length){var o=i.reduce((function(e,t){return e[t]=Array.from(n[t]),e}),{});throw new Qs.w({message:"For some types of adaptation sets, no supported codec was found.",code:"YASP_NO_CODECS",details:o,isFatal:!0,category:Xs.q.NO_CODECS})}return(0,wl.J)(t).reduce((function(e,t){var r=Pr(t,2),n=r[0],i=r[1];if("video"===n){var o=function(e){if(!e.length)return null;if(1===e.length)return e[0];for(var t=0,r=Rr(e[t]),n=1;n<e.length;n++){var i=Rr(e[n]);t=(r=xr(r,i))===i?n:t}return e[t]}(i);o&&e.push(o)}else i.forEach((function(t){return e.push(t)}));return e}),[])}function Nr(e){var t=new rf(e);return t.searchParams.delete(tf.j),t.href}function Mr(e){if(!(0,zs.K)(e))return!1;var t=e;return(0,nf.H)(t.code)&&(0,nf.H)(t.category)&&"boolean"===typeof t.isFatal}function Cr(){return(Cr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Fr(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Ur(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Br(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||Ur(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ur(e,t){if(e){if("string"===typeof e)return Gr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gr(e,t):void 0}}function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Hr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vr(e){return(Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wr(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Vr(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Wr=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=sf);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function Yr(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):sf.resolve(c).then(n,i)}function qr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zr(){return(zr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Kr(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Kr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zr(e)););return e}function $r(e,t){return($r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Zr(e);if(t){var i=Zr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Jr(this,r)}}function Jr(e,t){if(t&&("object"===Vr(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qr(e)}function Qr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zr(e){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function en(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rn(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==tn(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}rn=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=hf);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function nn(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):hf.resolve(c).then(n,i)}function on(e){return function(){var t=this,r=arguments;return new hf((function(n,i){function o(e){nn(u,n,i,o,a,"next",e)}function a(e){nn(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function an(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function un(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cn(e,t){for(var r,n=0,i=0;i<e.length;i++){var o=e[i],a=o.start,u=o.end;if(!(u<t)){if(void 0!==r&&a-r>=.1)break;n+=u-Math.max(a,t),r=u}}return n}function sn(e,t){if(0===t)return e;var r=Math.abs(t);return Math.round(e/r)*r}function ln(e,t){if(0===e.length)return null;for(var r=-1,n=0;n<e.length;n++){var i=e[n],o=i.start,a=i.end,u=1e3*o;if(u<=t&&t<=1e3*a){r=n;break}if(t<u&&u-t<=100){r=n;break}}if(-1===r)return null;var c=e[r],s={start:1e3*c.start,end:1e3*c.end};for(n=r+1;n<e.length;n++){var l=1e3*e[n].start,f=1e3*e[n].end;if(l-s.end>=100)break;s.end=Math.max(s.end,f)}return s}function fn(e){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hn(e){return function(e){if(Array.isArray(e))return dn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return dn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pn(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==fn(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}pn=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=mf);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function yn(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):mf.resolve(c).then(n,i)}function vn(e){return function(){var t=this,r=arguments;return new mf((function(n,i){function o(e){yn(u,n,i,o,a,"next",e)}function a(e){yn(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function mn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(r),!0).forEach((function(t){xn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function En(){return(En="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=_n(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function _n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rn(e)););return e}function On(e,t){return(On=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Sn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Rn(e);if(t){var i=Rn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kn(this,r)}}function kn(e,t){if(t&&("object"===fn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tn(e)}function Tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rn(e){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pn(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;return t?{start:Math.floor(e.start/r)*r,end:Math.floor(e.end/r+1)*r-1}:e}function An(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Ln(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ln(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function In(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(r),!0).forEach((function(t){Nn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mn(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=Cn(e,t,i);if(n){if(o>=r){var a=Cn(e,0,i);return a>0?a:0}return o}var u=o>t;return o>=r&&u?-1:o}function Cn(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t,i=!0;i;)i=!1,e.forEach((function(e){e.forEach((function(e){return e.start<=n&&n<e.end||r&&n<e.start&&e.start-n<=r?(n=e.end,void(i=!0)):void 0}))}));return n}function Fn(e){var t=e.circularBufferingFromConfig,r=e.loop,n=e.isStaticPlaylist,i=e.isLowMemoryMode;return t&&r&&n&&!i}function Bn(e){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(r),!0).forEach((function(t){Qn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Un(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Vn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yn(){return(Yn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=qn(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function qn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jn(e)););return e}function zn(e,t){return(zn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Kn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Jn(e);if(t){var i=Jn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $n(this,r)}}function $n(e,t){if(t&&("object"===Bn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xn(e)}function Xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jn(e){return(Jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ti(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ti(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ri(e){var t=e.split("=").pop();if(!t)return{start:null,end:null};var r=ei(t.split("-"),2),n=r[0],i=r[1],o={start:null,end:null};return""===n||isNaN(Number(n))||(o.start=Number(n)),""===i||isNaN(Number(i))||(o.end=Number(i)),o}function ni(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,r="string"===typeof e?ri(e).start:e.start;return r?r/t!==Math.trunc(r/t)?Math.ceil(r/t):r/t:0}function ii(e,t,r){if(!r)return e;var n="string"===typeof r?ri(r):r;if(!(0,Bf.hj)(n.start)||!(0,Bf.hj)(n.end))return e;var i=t.start-n.start,o=n.end-t.end;return e.slice(i,e.length-o)}function oi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ai(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ui(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ci(e){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function si(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==ci(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}si=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Hf);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function li(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return fi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hi(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Hf.resolve(c).then(n,i)}function di(e){return function(){var t=this,r=arguments;return new Hf((function(n,i){function o(e){hi(u,n,i,o,a,"next",e)}function a(e){hi(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function pi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vi(e,t){return(vi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=wi(e);if(t){var i=wi(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return gi(this,r)}}function gi(e,t){if(t&&("object"===ci(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bi(e)}function bi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wi(e){return(wi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ei(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _i(e){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oi(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==_i(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Oi=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Wf);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function Si(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Wf.resolve(c).then(n,i)}function ki(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ti(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ri(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return xi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pi(e){return-1===e.indexOf("#")?null:(e.split("#").pop().split("&").some((function(e){var r=Ri(e.split("=",2).map(decodeURIComponent),2),n=r[0],i=r[1];return"t"===n&&(t=i,!0)})),function(e){if("string"!==typeof e)return null;try{if(e.match(/^-?\d+(\.\d+)?$/))return Ai(parseFloat(e));if(e.includes("npt:")){var t=e.split("npt:")[1];return Ai(parseFloat(t))}if(e.includes(":")){var r=e.split(":"),n=parseInt(r[0],10)||0,i=parseInt(r[1],10)||0,o=parseFloat(r[2])||0;return Ai(3600*n+60*i+o)}var a=e.match(/^npt:(\d+(\.\d+)?)$/);if(a)return Ai(parseFloat(a[1]))}catch(u){}return null}(t));var t}function Ai(e){return isNaN(e)?null:e}function Li(e){return(Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ji(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ii(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ji(Object(r),!0).forEach((function(t){Hi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ji(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Di(e,t){return(Di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ni(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Fi(e);if(t){var i=Fi(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Mi(this,r)}}function Mi(e,t){if(t&&("object"===Li(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ci(e)}function Ci(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fi(e){return(Fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ui(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gi(e,t,r){return t&&Ui(e.prototype,t),r&&Ui(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wi(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Yi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yi(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Yi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qi(e,t){var r,n={},i=Wi(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;n[o.trackId]||(n[o.trackId]={type:"audio",bitrate:o.bitrate})}}catch(s){i.e(s)}finally{i.f()}var a,u=Wi(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;n[c.trackId]||(n[c.trackId]={type:"video",bitrate:c.bitrate,height:c.height,width:c.width})}}catch(s){u.e(s)}finally{u.f()}return n}function zi(e,t){return e.trace.map((function(e){var r=null;return e.result.map((function(e){return e[t]===r?null:(r=e[t],e[t])})).filter(Boolean).join("-")})).filter(Boolean).join("_")}function Ki(e,t,r){var n=(null===e||void 0===e?void 0:e.length)>0?e:[void 0],i=(null===t||void 0===t?void 0:t.length)>0?t:[void 0],o=(null===r||void 0===r?void 0:r.length)>0?r[0].bitrate:0,a=[];return n.forEach((function(e){i.forEach((function(t,r){(function(e){var t=e.width,r=e.height,n=Math.max(t,r),i=Math.min(t,r);if(n<=0)return 0;for(var o=ih[0],a=0;a<ih.length;a++){var u=ih[a],c=oh[u];if(n>=1.3*Math.floor(16*c/9)||i>=1.3*c)return o;o=u}return ih[ih.length-1]})({width:(null===e||void 0===e?void 0:e.width)||0,height:(null===e||void 0===e?void 0:e.height)||0})>360&&r>0||a.push({video:e,audio:t,bandwidth:((null===e||void 0===e?void 0:e.bitrate)||0)+(((null===t||void 0===t?void 0:t.bitrate)||0)+o)})}))})),a}function $i(e){return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ji(e,t){return(Ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=to(e);if(t){var i=to(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Zi(this,r)}}function Zi(e,t){if(t&&("object"===$i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return eo(e)}function eo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function to(e){return(to=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ro(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function no(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function io(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ao(e,t,r){return t&&oo(e.prototype,t),r&&oo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function uo(e){return["audio","video"].some((function(t){var r=e[t];return r&&null!==r.getWaitingDuration()}))}function co(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function so(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lo(e){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ho(e,t){return(ho=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function po(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=mo(e);if(t){var i=mo(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return yo(this,r)}}function yo(e,t){if(t&&("object"===lo(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vo(e)}function vo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mo(e){return(mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function go(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bo(e){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Eo(e,t){return(Eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ko(e);if(t){var i=ko(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Oo(this,r)}}function Oo(e,t){if(t&&("object"===bo(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return So(e)}function So(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ko(e){return(ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function To(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ro(e){return(Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Po(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ao(e,t){return(Ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Lo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Io(e);if(t){var i=Io(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return jo(this,r)}}function jo(e,t){if(t&&("object"===Ro(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Io(e){return(Io=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Do(){return(Do=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function No(e,t){return Do(e,{currentTime:t.currentTime,duration:t.duration}),e}function Mo(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Co(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Co(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Co(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fo(e,t,r){var n=function(e){return e.filter(Bo)}(e);if(n.length<=1)return e;var i,o=[],a=function(e,t,r){var n=function(e,t,r){var n=function(e,t,r){var n=Uo(e[0].video.width,e[0].video.height),i=function(e,t){var r=t||{},n=r.defaultLongSideResolution,i=r.userCappingResolution,o=0,a=0;i&&i.width&&i.height&&(o=i.width,a=i.height);var u=Math.max(o,a),c=(0,bh.R)(n),s=function(e){var t=e.width,r=void 0===t?1/0:t,n=e.height,i=void 0===n?1/0:n,o=e.dpi,a=void 0===o?1:o;return{cappedWidthResolution:r*a,cappedHeightResolution:i*a}}(e),l=s.cappedWidthResolution,f=s.cappedHeightResolution,h=u||Math.min(c,l),d=u||Math.min(c,f);return{videoMaxWidthResolution:h,videoMaxHeightResolution:d}}(t,r),o=i.videoMaxWidthResolution,a=i.videoMaxHeightResolution,u=Uo(o,a);return n>u?{videoMaxWidthResolutionWithTrueRatio:o,videoMaxHeightResolutionWithTrueRatio:e[0].video.height*(o/e[0].video.width)}:{videoMaxWidthResolutionWithTrueRatio:e[0].video.width*(a/e[0].video.height),videoMaxHeightResolutionWithTrueRatio:a}}(e,t,r),i=n.videoMaxWidthResolutionWithTrueRatio,o=n.videoMaxHeightResolutionWithTrueRatio;return i*o}(e,t,r);return(0,gh.U)(e.slice().reverse(),(function(e){var t=e.video,r=t.width,i=t.height;return Math.abs(n-r*i)}))}(n,t,r),u=Mo(n);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(o.push(c),a===c)break}}catch(s){u.e(s)}finally{u.f()}return o}function Bo(e){return(0,zs.K)(e.video)&&(0,nl.z)(e.video.width)&&(0,nl.z)(e.video.height)}function Uo(e,t){return e/t}function Go(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ho(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ko(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xo(e){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qo(e,t){return(Qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Zo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ra(e);if(t){var i=ra(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ea(this,r)}}function ea(e,t){if(t&&("object"===Xo(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ta(e)}function ta(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ra(e){return(ra=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function na(e){return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ia(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oa(){return(oa="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=aa(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function aa(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=la(e)););return e}function ua(e,t){return(ua=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ca(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=la(e);if(t){var i=la(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return sa(this,r)}}function sa(e,t){if(t&&("object"===na(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function la(e){return(la=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ha(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fa(Object(r),!0).forEach((function(t){da(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function da(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pa(e){return(pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ya(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function va(){return(va="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=ma(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function ma(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_a(e)););return e}function ga(e,t){return(ga=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ba(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_a(e);if(t){var i=_a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return wa(this,r)}}function wa(e,t){if(t&&("object"===pa(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ea(e)}function Ea(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _a(e){return(_a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ka(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ta(e){return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xa(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Ta(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}xa=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Vh);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function Pa(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Vh.resolve(c).then(n,i)}function Aa(e){return function(){var t=this,r=arguments;return new Vh((function(n,i){function o(e){Pa(u,n,i,o,a,"next",e)}function a(e){Pa(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function La(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ja(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ia(e){return(Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Da(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Na(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Na(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Na(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ma(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Ia(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Ma=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Kh);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function Ca(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Kh.resolve(c).then(n,i)}function Fa(e){return function(){var t=this,r=arguments;return new Kh((function(n,i){function o(e){Ca(u,n,i,o,a,"next",e)}function a(e){Ca(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Ba(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ua(){return(Ua="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Ga(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Ga(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qa(e)););return e}function Ha(e,t){return(Ha=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Va(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=qa(e);if(t){var i=qa(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Wa(this,r)}}function Wa(e,t){if(t&&("object"===Ia(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ya(e)}function Ya(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qa(e){return(qa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function za(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ka(e){return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $a(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Ka(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}$a=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Jh);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function Xa(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Jh.resolve(c).then(n,i)}function Ja(e){return function(){var t=this,r=arguments;return new Jh((function(n,i){function o(e){Xa(u,n,i,o,a,"next",e)}function a(e){Xa(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Qa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Za(){return(Za="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=eu(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function eu(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ou(e)););return e}function tu(e,t){return(tu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ru(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ou(e);if(t){var i=ou(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return nu(this,r)}}function nu(e,t){if(t&&("object"===Ka(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return iu(e)}function iu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ou(e){return(ou=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function au(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uu(e){return function(e){if(Array.isArray(e))return cu(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return cu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cu(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function su(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hu(e){return(0,Wl.lm)(e.toLocaleLowerCase())||new td(e,"https://domain.com").searchParams.get("container")||""}function du(e){e.reader.skip(4);var t,r,n=e.reader.readUint32(),i=[];if(0===n)throw new Error("[parseSidx] Invalid timescale.");0===e.version?(t=e.reader.readUint32(),r=e.reader.readUint32()):(t=e.reader.readUint64(),r=e.reader.readUint64()),e.reader.skip(2);var o=e.reader.readUint16();if(0===o)throw new Error("[parseSidx] Invalid reference count.");for(var a=t,u=e.start+e.size+r,c=0;c<o;c++){var s=e.reader.readUint32(),l=(2147483648&s)>>>31,f=2147483647&s,h=e.reader.readUint32();if(e.reader.skip(4),1===l)throw new Error("[parseSidx] Hierarchical SIDXs are not supported.");i.push({type:l,size:f,duration:h,startByte:u,endByte:u+f-1,startTime:a,endTime:a+h}),a+=h,u+=f}return e.parser.stop(),{segmentsInfo:i,timescale:n}}function pu(e){return(pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yu(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==pu(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}yu=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=dd);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function vu(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):dd.resolve(c).then(n,i)}function mu(e){return function(){var t=this,r=arguments;return new dd((function(n,i){function o(e){vu(u,n,i,o,a,"next",e)}function a(e){vu(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function gu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wu(e){return(wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eu(e){return function(e){if(Array.isArray(e))return _u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return _u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ou(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==wu(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Ou=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=yd);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function Su(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):yd.resolve(c).then(n,i)}function ku(e){return function(){var t=this,r=arguments;return new yd((function(n,i){function o(e){Su(u,n,i,o,a,"next",e)}function a(e){Su(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Tu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ru(){return(Ru="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=xu(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function xu(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Iu(e)););return e}function Pu(e,t){return(Pu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Au(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Iu(e);if(t){var i=Iu(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Lu(this,r)}}function Lu(e,t){if(t&&("object"===wu(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ju(e)}function ju(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Iu(e){return(Iu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Du(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nu(e,t,r){if(0===t)return md.resolve();var n=new pf.B;if(r.getIsLowMemoryMode()){if(r.isAttached())return md.resolve();!function(e,t){var r=function(e){e&&t.resolve()},n=function(){t.reject(new Error("Preloading aborted: source destroyed"))},i=function(){e.off("AttachedStateChange",r),e.off("Destroy",n)};e.on("AttachedStateChange",r),e.on("Destroy",n),t.promise.then(i,i)}(r,n)}return function(e,t,r){var n=function(n){var i,o=n.total.reduce((function(e,t){var r=t.start;return e+(t.end-r)}),0),a=(null!==(i=e.getDuration())&&void 0!==i?i:Number.MAX_SAFE_INTEGER)/1e3;o>=Math.min(t,a)&&r.resolve()},i=function(){e.off("BufferedInfoChanged",n),e.off("Destroy",o)},o=function(){r.reject(new Error("Preloading aborted: timeline destroyed"))};e.on("BufferedInfoChanged",n),e.on("Destroy",o),n(e.getBufferedInfo()),r.promise.then(i,i)}(e,t,n),n.promise}function Mu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.timeout,n=void 0===r?1e4:r,i=t.operationName,o=void 0===i?"unknown operation":i,a=!1,u=new gd((function(e,t){setTimeout((function(){var e=new Error("Timeout: ".concat(o," took longer than ").concat(n,"ms"));a=!0,t(e)}),n)})),c=e.catch((function(e){throw(0,of.V)(e)&&!a&&(e.message="".concat(o," failed: ").concat(e.message)),e}));return gd.race([c,u])}function Cu(e){return(Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fu(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Cu(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Fu=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=bd);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function Bu(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):bd.resolve(c).then(n,i)}function Uu(e){return function(){var t=this,r=arguments;return new bd((function(n,i){function o(e){Bu(u,n,i,o,a,"next",e)}function a(e){Bu(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Gu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wu(e){return(Wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yu(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Wu(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Yu=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Od);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function qu(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Od.resolve(c).then(n,i)}function zu(e){return function(){var t=this,r=arguments;return new Od((function(n,i){function o(e){qu(u,n,i,o,a,"next",e)}function a(e){qu(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Ku(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $u(){return($u="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Xu(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Xu(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tc(e)););return e}function Ju(e,t){return(Ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=tc(e);if(t){var i=tc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Zu(this,r)}}function Zu(e,t){if(t&&("object"===Wu(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ec(e)}function ec(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tc(e){return(tc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ic(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ac(e,t,r){return t&&oc(e.prototype,t),r&&oc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function uc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sc(e,t,r){return t&&cc(e.prototype,t),r&&cc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fc(e){return(fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hc(Object(r),!0).forEach((function(t){Oc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pc(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return yc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yc(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function yc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gc(e,t,r){return t&&mc(e.prototype,t),r&&mc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bc(e,t){return(bc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_c(e);if(t){var i=_c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ec(this,r)}}function Ec(e,t){if(t&&("object"===fc(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _c(e){return(_c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sc(e){var t=e.children.every((function(e){return"string"===typeof e})),r=t?e.children.join("\n"):"";return dc(dc({},e),{},{nodeType:t?3:1,textContent:r})}function kc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tc(e){return(Tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rc(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return xc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xc(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function xc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ac(e,t){return(Ac=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Lc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ic(e);if(t){var i=Ic(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return jc(this,r)}}function jc(e,t){if(t&&("object"===Tc(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ic(e){return(Ic=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dc(e){return(Dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mc(e,t){return(Mc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Cc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Uc(e);if(t){var i=Uc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Fc(this,r)}}function Fc(e,t){if(t&&("object"===Dc(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bc(e)}function Bc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uc(e){return(Uc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hc(e){return(Hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yc(e,t){return(Yc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=$c(e);if(t){var i=$c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return zc(this,r)}}function zc(e,t){if(t&&("object"===Hc(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Kc(e)}function Kc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $c(e){return($c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function es(e){return(es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ts(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==es(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}ts=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Gd);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function rs(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Gd.resolve(c).then(n,i)}function ns(e){return function(){var t=this,r=arguments;return new Gd((function(n,i){function o(e){rs(u,n,i,o,a,"next",e)}function a(e){rs(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function is(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function os(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?is(Object(r),!0).forEach((function(t){ps(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):is(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function as(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function us(){return(us="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=cs(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function cs(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ds(e)););return e}function ss(e,t){return(ss=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ls(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ds(e);if(t){var i=ds(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return fs(this,r)}}function fs(e,t){if(t&&("object"===es(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hs(e)}function hs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ds(e){return(ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ps(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ys(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ms(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||bs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gs(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=bs(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function bs(e,t){if(e){if("string"===typeof e)return ws(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ws(e,t):void 0}}function ws(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Es(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Es(Object(r),!0).forEach((function(t){Ss(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Es(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Os(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ss(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ks(e){return(ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ts(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xs(e,t){return(xs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ps(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ls(e);if(t){var i=Ls(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return As(this,r)}}function As(e,t){if(t&&("object"===ks(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ls(e){return(Ls=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function js(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Is(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ds(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ds(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ds(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ns(e){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ms(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Ns(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Ms=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=ap);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function Cs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cs(Object(r),!0).forEach((function(t){Hs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bs(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):ap.resolve(c).then(n,i)}function Us(e){return function(){var t=this,r=arguments;return new ap((function(n,i){function o(e){Bs(u,n,i,o,a,"next",e)}function a(e){Bs(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Gs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vs(e){return(Vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ws(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self;new sp(e).init()}r.d(t,{Z:function(){return lp}});var Ys,qs=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=[],(r="timeRanges")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,i;return t=e,(r=[{key:"length",get:function(){return this.timeRanges.length}},{key:"start",value:function(e){if(this.timeRanges.length<=e)throw new Error("Failed to execute 'start' on 'TimeRanges': The index provided (".concat(e,") is greater than the maximum bound (").concat(this.timeRanges.length,")."));return this.timeRanges[e][0]}},{key:"end",value:function(e){if(this.timeRanges.length<=e)throw new Error("Failed to execute 'end' on 'TimeRanges': The index provided (".concat(e,") is greater than the maximum bound (").concat(this.timeRanges.length,")."));return this.timeRanges[e][1]}},{key:"update",value:function(e){this.timeRanges=e}}])&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),zs=r(76101),Ks=function(){function e(t,r,n,i){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"sourceKey",void 0),o(this,"scopeId",void 0),o(this,"mediaState",void 0),o(this,"worker",void 0),o(this,"buffered",void 0),o(this,"validateAndHandleEvent",(function(e){var t=e.data;(0,zs.K)(t)&&"string"===typeof t.method&&t.scopeId===a.scopeId&&t.sourceKey===a.sourceKey&&a.handleEvent(t.method,t.params)})),this.sourceKey=t,this.scopeId=i,this.mediaState=n,this.buffered=new qs,this.mediaState.buffered=this.buffered,this.worker=r,this.worker.addEventListener("message",this.validateAndHandleEvent)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.worker.removeEventListener("message",this.validateAndHandleEvent)}},{key:"handleEvent",value:function(e,t){switch(e){case"updateBuffering":return this.mediaState.buffering=t,void this.mediaState.emit("BufferingChange",t);case"updateCurrentTime":return void(this.mediaState.currentTime=t);case"updateDuration":return void(this.mediaState.duration=t);case"updateLoop":return void(this.mediaState.loop=t);case"updatePaused":return void(this.mediaState.paused=t);case"updatePlaybackRate":return void(this.mediaState.playbackRate=t);case"updateBuffered":return void this.buffered.update(t)}}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),$s=function(e){function t(){return u(this,t),o.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e);var r,n,i,o=h(t);return r=t,(n=[{key:"handleEvent",value:function(e,r){switch(e){case"updateFrames":return void(this.mediaState.frames=r);case"updateDevicePixelRatio":return void(this.mediaState.devicePixelRatio=r);case"updateVideoSize":return void(this.mediaState.videoSize=r);case"updateContainerSize":return void(this.mediaState.containerSize=r);case"updateWindowSize":return void(this.mediaState.windowSize=r);case"updateObjectFit":return void(this.mediaState.objectFit=r);default:s(p(t.prototype),"handleEvent",this).call(this,e,r)}}}])&&c(r.prototype,n),i&&c(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Ks),Xs=r(47134),Js=r(88261),Qs=r(10664),Zs=r(10005),el=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Js.Z,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Js.Z;m(this,e),this.limit=t,this.onEvent=r,this.onError=n,b(this,"sources",new Map)}var t,r,n;return t=e,n=[{key:"destroySource",value:function(e){null===e||void 0===e||e.destroy()}}],(r=[{key:"setSourceLimit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;this.limit=e,this.sources.size>this.limit&&this.cleanupSources()}},{key:"getSourceCount",value:function(){return this.sources.size}},{key:"getSourceLimit",value:function(){return this.limit}},{key:"takeSource",value:function(e){return this.sources.get((0,Zs.Hi)(e))}},{key:"hasFreeSpace",value:function(e){return e?this.limit>0:Array.from(this.sources.values()).filter((function(e){return e.isAttached()})).length<this.limit}},{key:"putSource",value:function(e,t){var r=(0,Zs.Hi)(e);if(this.sources.delete(r),this.sources.set(r,t),this.sources.size>this.limit){var n=this.cleanupSources(t);n.length&&this.onEvent(n,this.limit)}if(this.sources.size>this.limit){var i=Array.from(this.sources.values()).filter((function(e){return e.isAttached()})).length,o=new Qs.w({code:"YASP_SOURCE_LIMIT_EXCEEDED",details:{limit:this.limit,attachedSources:i,size:this.sources.size},category:Xs.q.MEDIA,isFatal:!1});this.onError(o)}}},{key:"removeSource",value:function(t){var r=(0,Zs.Hi)(t),n=this.sources.get(r);return!!n&&(e.destroySource(n),this.sources.delete(r))}},{key:"getAllSources",value:function(){return Array.from(this.sources.values())}},{key:"cleanupSources",value:function(t){var r=this,n=[];if(this.sources.size<=this.limit)return n;for(var i=[],o=[],a=0,u=Array.from(this.sources.entries());a<u.length;a++){var c=u[a],s=y(c,2),l=(s[0],s[1]);t&&l===t||(l.isAttached()?o.push(c):i.push(c))}for(var f=function(t,i){e.destroySource(i),n.push(t),r.sources.delete(t)},h=0,d=i;h<d.length;h++){var p=y(d[h],2),v=p[0],m=p[1];if(this.sources.size<=this.limit)break;f(v,m)}for(var g=0,b=o;g<b.length;g++){var w=y(b[g],2),E=w[0],_=w[1];if(this.sources.size<=this.limit)break;f(E,_)}return n}}])&&g(t.prototype,r),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),tl=(r(61330),r(46667)),rl=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"defaultEquals",value:function(e,t){return!("number"!==typeof e||"number"!==typeof t||!isNaN(e)||!isNaN(t))||e===t}},{key:"equal",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultEquals;if(t.length!==r.length)return!1;for(var i=0;i<t.length;i++)if(!n(t[i],r[i]))return!1;return!0}},{key:"remove",value:function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)}},{key:"iterableToArray",value:function(e){var t,r=[],n=w(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;r.push(i)}}catch(o){n.e(o)}finally{n.f()}return r}}],(r=null)&&_(t.prototype,r),n&&_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),nl=r(93966),il={amp:"&",quot:'"',apos:"'",lt:"<",gt:">"},ol=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),j(A(r=o.call(this)),"id",void 0),j(A(r),"bitrate",void 0),j(A(r),"language",void 0),j(A(r),"type",void 0),j(A(r),"initialization",void 0),j(A(r),"timescale",void 0),j(A(r),"media",void 0),j(A(r),"mimeType",void 0),j(A(r),"startNumber",void 0),j(A(r),"startTime",void 0),j(A(r),"endNumber",void 0),j(A(r),"endTime",void 0),j(A(r),"presentationTimeOffset",void 0),j(A(r),"segmentSequences",void 0),j(A(r),"rawSegmentsUrlMapping",void 0),j(A(r),"init",null),j(A(r),"segmentRanges",[]),j(A(r),"segments",new Map),r.id=e.id,r.bitrate=e.bitrate,r.language=e.language,r.type=e.type,r.initialization=e.initialization,r.timescale=e.timescale,r.media=e.media,r.mimeType=e.mimeType,r.startNumber=e.startNumber,r.startTime=e.startTime,r.endNumber=e.endNumber,r.endTime=e.endTime,r.presentationTimeOffset=e.presentationTimeOffset,r.segmentSequences=e.segmentSequences,r.rawSegmentsUrlMapping=e.rawSegmentsUrlMapping,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(t,e);var r,n,i,o=x(t);return r=t,(n=[{key:"updateTrack",value:function(e){this.startNumber=e.startNumber,this.startTime=e.startTime,this.endNumber=e.endNumber,this.endTime=e.endTime,this.presentationTimeOffset=e.presentationTimeOffset,this.segmentSequences=e.segmentSequences,this.bitrate=e.bitrate,this.initialization=e.initialization,this.media=e.media,this.rawSegmentsUrlMapping=e.rawSegmentsUrlMapping}},{key:"getFullMimeType",value:function(){return this.mimeType}},{key:"getSegmentPathname",value:function(e){var t,r;if(e.isInitSegment)return O(null!==(r=this.initialization)&&void 0!==r?r:"",this,e);var n=null===(t=this.rawSegmentsUrlMapping)||void 0===t?void 0:t[e.number];return O(n?S(n):this.media,this,e)}},{key:"appendSegment",value:function(e){var t=this;e.isInitSegment?this.init=e:this.segments.set(e.number,e);var r=function(){e.isInitSegment?t.init=null:(t.segments.delete(e.number),t.updateSegmentRanges())};this.updateSegmentRanges(),e.finished||(e.once("Failed",r),e.once("Finish",(function(){t.updateSegmentRanges()})),e.once("Destroy",r))}},{key:"hasSegment",value:function(e){return this.segments.has(e)}},{key:"getInitSegment",value:function(){return this.init}},{key:"getSegment",value:function(e){var t=this;return rl.iterableToArray(this.segments.values()).find((function(r){return void 0!==r&&(r.number===t.endNumber&&e===t.endTime-t.presentationTimeOffset||r.start<=e&&e<r.end)}))||null}},{key:"getBufferedRanges",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null===this.initialization||null!==(e=this.init)&&void 0!==e&&e.finished?t?this.segmentRanges.map((function(e){return{start:e.start,end:e.end}})):this.segmentRanges.filter((function(e){return e.finished})).map((function(e){return{start:e.start,end:e.end}})):[]}},{key:"getSeekableRanges",value:function(){return[{start:this.startTime-this.presentationTimeOffset,end:this.endTime-this.presentationTimeOffset}]}},{key:"getSegmentsDebugInfo",value:function(e){var t=this,r=0,n=0,i=0,o=0;return this.segments.forEach((function(a){e>a.end-t.presentationTimeOffset?(r+=a.loadedRawSize,n+=1):(i+=a.loadedRawSize,o+=1)})),{playedRawSize:r,playedSegmentCount:n,activeRawSize:i,activeSegmentCount:o}}},{key:"getDebugInfo",value:function(){var e;return{id:this.id,bitrate:this.bitrate,language:this.language,type:this.type,initialization:this.initialization,timescale:this.timescale,media:this.media,mimeType:this.mimeType,startNumber:this.startNumber,startTime:this.startTime,endNumber:this.endNumber,endTime:this.endTime,presentationTimeOffset:this.presentationTimeOffset,initSegment:null===(e=this.init)||void 0===e?void 0:e.getDebugInfo(),segmentSequences:this.segmentSequences,seekableRanges:this.getSeekableRanges(),segmentRanges:this.segmentRanges,rawSegmentsUrlMapping:this.rawSegmentsUrlMapping,segments:Array.from(this.segments.entries()).reduce((function(e,t){return e[t[0]]=t[1].getDebugInfo(),e}),{})}}},{key:"updateSegmentRanges",value:function(){var e=this.segmentRanges;this.segmentRanges=[];var t=rl.iterableToArray(this.segments.values()).sort((function(e,t){return e.start-t.start}));if(0!==t.length){for(var r={start:t[0].start,startNumber:t[0].number,end:t[0].end,endNumber:t[0].number,finished:t[0].finished},n=1;n<t.length;n++){var i=t[n];i.finished===r.finished&&i.start===r.end?(r.end=i.end,r.endNumber=i.number):(this.segmentRanges.push(r),r={start:i.start,startNumber:i.number,end:i.end,endNumber:i.number,finished:i.finished})}this.segmentRanges.push(r),this.emit("BufferedInfoChanged")}else 0!==e.length&&this.emit("BufferedInfoChanged")}},{key:"clear",value:function(e,t){return this.clearForParallel(e,t)}},{key:"destroy",value:function(){this.clear(0,Number.MAX_SAFE_INTEGER)}},{key:"clearForParallel",value:function(e,t){var r=this,n=!1;rl.iterableToArray(this.segments.values()).forEach((function(i){i.start>=e&&i.end<=t&&(n=!0,i.destroy(),r.segments.delete(i.number))})),n&&this.updateSegmentRanges()}}])&&T(r.prototype,n),i&&T(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(tl.v),al=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),W(H(r=o.call(this,e)),"type","audio"),W(H(r),"codecs",void 0),W(H(r),"label",void 0),W(H(r),"channels",void 0),r.codecs=e.codecs,r.label=e.name,r.channels=e.channels,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(t,e);var r,n,i,o=U(t);return r=t,(n=[{key:"getFullMimeType",value:function(){return"".concat(this.mimeType,"; codecs=").concat(JSON.stringify(this.codecs))}},{key:"getDebugInfo",value:function(){return N(N({},C(V(t.prototype),"getDebugInfo",this).call(this)),{},{codecs:this.codecs,label:this.label})}}])&&M(r.prototype,n),i&&M(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ol),ul=function(e){function t(e){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),re(ee(r=o.call(this,e)),"height",void 0),re(ee(r),"width",void 0),re(ee(r),"type","video"),re(ee(r),"codecs",void 0),re(ee(r),"frameRate",void 0),re(ee(r),"label",void 0),r.height=e.height,r.width=e.width,r.codecs=e.codecs,r.frameRate=e.frameRate,e.qualityLabel)r.label=e.qualityLabel;else{var n=r.parseMediaAttribute(e.media||e.initialization||"");r.label=n.label||"".concat(r.height,"p")}return r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(t,e);var r,n,i,o=Q(t);return r=t,(n=[{key:"getDebugInfo",value:function(){return z(z({},$(te(t.prototype),"getDebugInfo",this).call(this)),{},{height:this.height,width:this.width,codecs:this.codecs})}},{key:"getFullMimeType",value:function(){return"".concat(this.mimeType,"; codecs=").concat(JSON.stringify(this.codecs))}},{key:"parseMediaAttribute",value:function(e){var t={};return e.split(",").map((function(e){var r=e.split("=");r.length>0&&(t[r[0]]=r[1])})),t}}])&&K(r.prototype,n),i&&K(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ol),cl=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),le(ce(r=o.call(this,e)),"kind",void 0),le(ce(r),"label",void 0),le(ce(r),"type","text"),le(ce(r),"codecs",void 0),r.kind=t.parseKind(e.kind),r.codecs=e.codecs,r.label=e.label||e.language||"Yasp Text Track",r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(t,e);var r,n,i,o=ae(t);return r=t,i=[{key:"parseKind",value:function(e){switch(e){case"subtitle":return"subtitles";default:return e}}}],(n=[{key:"getFullMimeType",value:function(){return this.codecs?"".concat(this.mimeType,"; codecs=").concat(JSON.stringify(this.codecs)):this.mimeType}},{key:"appendInitSegment",value:function(e){this.init=e}}])&&ie(r.prototype,n),i&&ie(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ol),sl=r(74626),ll=r(54588),fl=r(18414),hl=r(84780),dl=r(35276),pl=function(e){function t(e){var r,n=e.start,i=e.end,a=e.number,u=e.isInitSegment,c=e.trackId,s=e.bitrate,l=e.width,f=e.height,h=e.originalStart,d=e.isEncrypted,p=void 0!==d&&d,y=e.startByteWithOffset,v=void 0===y?0:y,m=e.endByteWithOffset,g=void 0===m?0:m;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_e(we(r=o.call(this)),"trackId",void 0),_e(we(r),"isInitSegment",void 0),_e(we(r),"number",void 0),_e(we(r),"start",0),_e(we(r),"end",0),_e(we(r),"duration",0),_e(we(r),"bitrate",void 0),_e(we(r),"originalStart",void 0),_e(we(r),"width",0),_e(we(r),"height",0),_e(we(r),"expectedSize",void 0),_e(we(r),"loadedRawSize",0),_e(we(r),"getLoadingDuration",(function(){return null})),_e(we(r),"getWaitingDuration",(function(){return null})),_e(we(r),"isEncrypted",!1),_e(we(r),"startByteWithOffset",0),_e(we(r),"endByteWithOffset",Number.MAX_SAFE_INTEGER),_e(we(r),"chunks",[]),_e(we(r),"finishedSegment",!1),_e(we(r),"failedSegment",!1),_e(we(r),"destroyed",!1),_e(we(r),"chunkStream",null),_e(we(r),"chunkBuffer",null),r.start=n,r.end=i,r.duration=Math.max(i-n,0),r.number=a,r.bitrate=s,r.expectedSize=s*(r.duration/1e3)/8,r.width=l,r.height=f,r.isInitSegment=u,r.trackId=c,r.originalStart=h,r.loadedRawSize=0,r.isEncrypted=p,r.startByteWithOffset=v,r.endByteWithOffset=g,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}(t,e);var r,n,i,o=ge(t);return r=t,i=[{key:"concatChunks",value:function(e){return e.length<2?e:"string"===typeof e[0]?[e.join("")]:[fl.P.concat.apply(fl.P,he(e))]}}],(n=[{key:"setChunkBuffer",value:function(e){this.chunkBuffer=e}},{key:"waitingStarted",value:function(){this.getWaitingDuration=(0,dl.u)()}},{key:"loadingStarted",value:function(){this.getLoadingDuration=(0,dl.u)()}},{key:"finished",get:function(){return this.finishedSegment}},{key:"failed",get:function(){return this.failedSegment}},{key:"setExpectedSize",value:function(e){isNaN(e)||(this.expectedSize=e)}},{key:"append",value:function(e){var t;if(this.destroyed)throw new Error("Unexpected chunk appended to destroyed segment");this.chunks.push(e),null===(t=this.chunkStream)||void 0===t||t.write(e),this.emit("Update",e)}},{key:"finish",value:function(){var e;this.finishedSegment=!0,null===(e=this.chunkStream)||void 0===e||e.close(),this.chunkStream=null,this.emit("Finish")}},{key:"fail",value:function(){this.failedSegment=!0,this.emit("Failed"),this.chunkStream&&this.chunkStream.destroy()}},{key:"getExpectedTimeToLoad",value:function(){if(null===this.getLoadingDuration)return this.duration;var e=this.getLoadingDuration();return null===e||0===this.loadedRawSize?this.duration:e*(Math.max(this.expectedSize,this.loadedRawSize)/this.loadedRawSize)-e}},{key:"getChunkStream",value:function(){this.chunkStream||(this.chunkStream=new sl.h(t.concatChunks));var e=this.chunkStream;if(this.finished&&this.chunkBuffer){var r=this.chunkBuffer.getFullBuffer();e.write(r)}else this.chunks.forEach((function(t){return null===e||void 0===e?void 0:e.write(t)}));return this.finished&&(0===this.chunks.length&&(0,hl.L)(new Error("Finished empty segment")),e.close(),this.chunkStream=null),e.asReadable()}},{key:"getChunks",value:function(){return this.chunks}},{key:"destroy",value:function(){var e;ye(Ee(t.prototype),"destroy",this).call(this),this.destroyed=!0,null===(e=this.chunkStream)||void 0===e||e.destroy(),this.clear()}},{key:"clear",value:function(){this.chunks.length=0,this.chunkBuffer=null}},{key:"getDebugInfo",value:function(){return{chunksCount:this.chunks.length,chunksSize:this.chunks.reduce((function(e,t){return e+t.length}),0),start:this.start,end:this.end,duration:this.duration,finishedSegment:this.finishedSegment,number:this.number,expectedSize:this.expectedSize,loadingDuration:this.getLoadingDuration?this.getLoadingDuration():null,hasChunkStream:null!==this.chunkStream}}}])&&pe(r.prototype,n),i&&pe(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M),yl=r(70930),vl=r(6134),ml=r(62720),gl=r(44706),bl={avc1:["avc3"],avc3:["avc1"]},wl=r(11874),El=r(69215),_l=r(84626),Ol=r(79549),Sl=r(72573),kl=5*Math.random()*1e3,Tl=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ze(Je(e=o.call(this)),"audio",[]),Ze(Je(e),"text",[]),Ze(Je(e),"video",[]),Ze(Je(e),"bufferedInfoChangedPromise",null),Ze(Je(e),"selectedVideoTrackHeight",void 0),Ze(Je(e),"selectedVideoTracks",[]),Ze(Je(e),"selectedAudioLanguage",void 0),Ze(Je(e),"selectedTextTrack",void 0),Ze(Je(e),"targetLatency",void 0),Ze(Je(e),"isFirstUpdateVideoTracks",!0),Ze(Je(e),"mpd",void 0),Ze(Je(e),"externalPresentationDelay",void 0),Ze(Je(e),"enablePresentationDelayOffset",void 0);var r=(0,El.c)(7);return e.targetLatency=1e3*r,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ke(e,t)}(t,e);var r,n,i,o=$e(t);return r=t,(n=[{key:"checkTrackAvailableToLoad",value:function(e,t){var r;switch(t){case"text":return(null===(r=this.selectedTextTrack)||void 0===r?void 0:r.id)===e;case"video":return 0===this.selectedVideoTracks.length||this.selectedVideoTracks.some((function(t){return e===t.id}));case"audio":if(!this.selectedAudioLanguage)return!0;var n=this.findTrackById(e,t);return(null===n||void 0===n?void 0:n.language)===this.selectedAudioLanguage;default:return!1}}},{key:"setVideoTrack",value:function(e){var t=this.findTrackById(e,"video"),r=t?t.height:void 0;r!==this.selectedVideoTrackHeight&&(this.selectedVideoTrackHeight=r,this.updateSelectedVideoTracks(),this.emit("VideoTrackChange",t?e:"auto"))}},{key:"removeVideoTrack",value:function(e){var t=this.findTrackById(e,"video");if(t){var r=this.video.indexOf(t);this.video.splice(r,1),t.clear(0,1/0);var n,i=this.selectedVideoTrackHeight;void 0!==i&&t.height===i&&(this.updateSelectedVideoTracks(),0===this.selectedVideoTracks.length&&this.setVideoTrack(null===(n=Me(this.video).find((function(e){return e.height<=i})))||void 0===n?void 0:n.id))}}},{key:"updateVideoTracks",value:function(e){var t=this,r=this.getVideoTracksInfo().filter((function(e){return e.id!==vl.A})).map((function(e){return e.height}));e.forEach((function(e){t.obtainTimelineTrack(We(We(We({},e),e.segmentTemplate),{},{bitrate:e.bandwidth,language:"unknown",type:"video"}))}));var n=[];this.video.map((function(e){return e.id})).forEach((function(r){!e.some((function(e){return e.id===r}))&&(t.removeVideoTrack(r),n.push(r))})),this.updateSelectedVideoTracks();var i=[];this.isFirstUpdateVideoTracks&&(this.isFirstUpdateVideoTracks=!1,i.push(this.getAutoVideoTrackInfo())),this.getVideoTracksInfo().filter((function(e){return e.id!==vl.A})).forEach((function(e){r.includes(e.height)||i.push({selected:e.height===t.selectedVideoTrackHeight,width:e.width,height:e.height,bitrate:e.bitrate,label:e.label,language:e.language,frameRate:e.frameRate,id:e.id,kind:"main"})})),(i.length||n.length)&&this.emit("VideoTracksChange",{added:i,removed:n})}},{key:"updateSelectedVideoTracks",value:function(){var e=this;this.selectedVideoTracks=this.selectedVideoTrackHeight?this.video.filter((function(t){return t.height===e.selectedVideoTrackHeight})):Me(this.video)}},{key:"setAudioLanguage",value:function(e){var t=this,r=this.audio.find((function(e){return e.language===t.selectedAudioLanguage})),n=this.audio.find((function(t){return t.language===e}));if(n&&e!==this.selectedAudioLanguage){var i=Ce(r,n);this.selectedAudioLanguage=e,i||this.emit("CodecsChange",n),this.emit("AudioLanguageChange",e)}}},{key:"setTextTrack",value:function(e){var t;if(this.selectedTextTrack&&this.selectedTextTrack.clear(0,1/0),null!==e){var r=this.text.find((function(t){return t.language===e.language}));r&&(null===r||void 0===r?void 0:r.language)!==(null===(t=this.selectedTextTrack)||void 0===t?void 0:t.language)&&(this.selectedTextTrack=r||this.selectedTextTrack,this.emit("TextTrackChange",this.selectedTextTrack))}else this.selectedTextTrack=void 0}},{key:"getVideoTracksInfo",value:function(){var e,t=this;return[this.getAutoVideoTrackInfo()].concat(Ue((e=this.video,(0,ml.z)(e.reduce((function(e,t){return e[t.height]?t.bitrate>e[t.height].bitrate&&(e[t.height]=t):e[t.height]=t,e}),{})).sort((function(e,t){return t.bitrate-e.bitrate}))).map((function(e){return{selected:e.height===t.selectedVideoTrackHeight,width:e.width,height:e.height,bitrate:e.bitrate,label:e.label,language:e.language,frameRate:e.frameRate,id:e.id,kind:"main"}}))))}},{key:"getAutoVideoTrackInfo",value:function(){return{id:vl.A,selected:void 0===this.selectedVideoTrackHeight,kind:"main",language:"unknown",label:""}}},{key:"getAudioTracksInfo",value:function(){var e=this,t={};return this.audio.forEach((function(r){var n=r.language;n&&(t[n]?r.bitrate>t[n].bitrate&&(t[n].bitrate=r.bitrate):t[n]={selected:n===e.selectedAudioLanguage,id:r.id,label:r.label||"",language:n,kind:"main",bitrate:r.bitrate,channels:r.channels})})),(0,ml.z)(t)}},{key:"getTextTracksInfo",value:function(){return this.text.map((function(e){return{id:e.id,language:e.language,label:e.label,kind:e.kind}}))}},{key:"getSegmentsForTracks",value:function(e,t){var r=this;if(null===e)return[];switch(t){case"video":return this.selectedVideoTracks.map((function(t){return r.getSegmentForTrack(e,t)})).filter(Boolean);case"audio":return this.audio.filter((function(e){var t;return e.language===(null!==(t=r.selectedAudioLanguage)&&void 0!==t?t:e.language)})).map((function(t){return r.getSegmentForTrack(e,t)})).filter(Boolean);case"text":return this.text.filter((function(e){var t,n;return e.label===(null===(t=r.selectedTextTrack)||void 0===t?void 0:t.label)||e.language===(null===(n=r.selectedTextTrack)||void 0===n?void 0:n.language)})).map((function(t){return r.getSegmentForTrack(e,t)})).filter(Boolean);default:return[]}}},{key:"getSegmentForTrack",value:function(e,t){var r=t.getSegment(e);if((0,_l.RW)("yasp_abr_loading_segment")&&r)return r;if(t.endTime===e+t.presentationTimeOffset)return this.getLastSegment(t);var n=Math.max(Math.floor(0)),i=0,o=t.segmentSequences.find((function(r,o){i=o;var a=r.time-t.presentationTimeOffset,u=a+r.duration*r.count,c=a<=e&&e<u;return c||(n+=r.count),c}));if(!o)return null;var a=o.time-t.presentationTimeOffset,u=e-a,c=Math.max(0,Math.floor(u/o.duration+1e-4)),s=t.startNumber+(n+c);if(s>t.endNumber)return this.getLastSegment(t);if(i===t.segmentSequences.length-1&&c===o.count-1)return this.getLastSegment(t);var l=Math.max(a+o.duration*c,0),f=s===o.endNumber,h=t.segmentSequences[i+1],d=Math.max(f&&h?h.time-t.presentationTimeOffset:a+o.duration*(c+1),0),p=t.bitrate,y=o.originalValues.time-o.originalValues.trackPresentationTimeOffset+o.originalValues.duration*c;return new pl({start:l,end:d,bitrate:p,trackId:t.id,number:s,originalStart:y,isInitSegment:!1,width:"width"in t?t.width:0,height:"height"in t?t.height:0,isEncrypted:o.isEncrypted,startByteWithOffset:"startByteWithOffset"in o?o.startByteWithOffset:0,endByteWithOffset:"endByteWithOffset"in o?o.endByteWithOffset:Number.MAX_SAFE_INTEGER})}},{key:"clear",value:function(e,t){this.audio.forEach((function(r){return r.clear(e,t)})),this.video.forEach((function(r){return r.clear(e,t)})),this.text.forEach((function(r){return r.clear(e,t)}))}},{key:"getDuration",value:function(){var e,t,r=null!==(e=this.video[0])&&void 0!==e?e:this.audio[0];if(void 0!==r)return null!==(t=this.mpd)&&void 0!==t&&t.isDynamic?1/0:r.endTime-r.startTime}},{key:"getEndTimeForType",value:function(e){var t=this[e];return Math.max.apply(Math,Ue(t.map((function(e){return e.endTime}))).concat([0]))}},{key:"getMimeTypes",value:function(){return{audio:Array.from(new Set(this.audio.map((function(e){return e.getFullMimeType()})))),video:Array.from(new Set(this.video.map((function(e){return e.getFullMimeType()}))))}}},{key:"getBufferedRanges",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.audio,n=this.selectedVideoTracks,i=this.text;return this.selectedAudioLanguage&&(r=r.filter((function(t){return t.language===e.selectedAudioLanguage}))),{audio:r.map((function(e){return e.getBufferedRanges(t)})),video:n.map((function(e){return e.getBufferedRanges(t)})),text:i.map((function(e){return e.getBufferedRanges(t)}))}}},{key:"getSeekableRanges",value:function(){return[this.getSeekableRange()]}},{key:"getSegmentsForTime",value:function(e,t){var r=this,n=[];return("video"===e?this.selectedVideoTracks:"audio"===e?this.audio.filter((function(e){var t;return e.language===(null!==(t=r.selectedAudioLanguage)&&void 0!==t?t:e.language)})):this.text.filter((function(e){return e===r.selectedTextTrack}))).forEach((function(e){var r=e.getSegment(t);r&&n.push({track:e,segment:r})})),n}},{key:"getSegment",value:function(e,t){return Oe(this.getSegmentsForTime(e,t),(function(e){return e.track.bitrate}))||{track:void 0,segment:void 0}}},{key:"getInitialSegment",value:function(e,t){var r=this[e].find((function(e){return e.id===t}));return(null===r||void 0===r?void 0:r.getInitSegment())||void 0}},{key:"obtainTimelineTrack",value:function(e){var t=this,r=this[e.type];"audio"===e.type&&(this.selectedAudioLanguage=this.selectedAudioLanguage||e.language||void 0);var n=r.find((function(t){return t.id===e.id}));if(n)return n.updateTrack(e),n;var i=function(e){switch(e.type){case"audio":return new al(e);case"video":return new ul(e);case"text":return new cl(e);default:throw new Error("Unexpected TimelineTrack#type=".concat(e.type))}}(e);return r.push(i),i.on("BufferedInfoChanged",(function(){return t.emitBufferedInfoChanged()})),"text"===i.type&&i.on("CuesAdded",(function(e){t.emit("CuesAdded",{cues:e,label:i.label})})),i}},{key:"sortTracksInTimeline",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["video","audio","text"];t.forEach((function(t){e.sortTracksInTimelineByType(t)}))}},{key:"sortTracksInTimelineByType",value:function(e){var t=this.getFirstLangsAppearanceInTimeline(e);this[e].sort((function(e,r){return e.language===r.language?r.bitrate-e.bitrate:t.get(e.language)-t.get(r.language)}))}},{key:"getFirstLangsAppearanceInTimeline",value:function(e){var t=new Map;return this[e].forEach((function(e,r){t.has(e.language)||t.set(e.language,r)})),t}},{key:"findTrackById",value:function(e,t){return this[t].find((function(t){return t.id===e}))}},{key:"emitBufferedInfoChanged",value:function(){var e,t=this;this.bufferedInfoChangedPromise=null!==(e=this.bufferedInfoChangedPromise)&&void 0!==e?e:Sl.resolve().then((function(){return t.emit("BufferedInfoChanged",t.getBufferedInfo())})).then((function(){t.bufferedInfoChangedPromise=null}))}},{key:"getBufferedInfo",value:function(){var e,t=this.getBufferedRanges(),r=je(t.video),n=je(t.audio),i=function(e){return e.map((function(e){return{start:e.start/1e3,end:e.end/1e3}}))},o=i(r),a=i(n),u=this.video.length&&!this.audio.length,c=this.audio.length&&!this.video.length;return e=u?o:c?a:i(function(e,t){var r=[],n=0;return e.forEach((function(e){for(var i=e.start,o=e.end,a=n;a<t.length;a++){if(t[a].start>o)return;n=a,t[a].end<i||r.push({start:Math.max(t[a].start,i),end:Math.min(t[a].end,o)})}})),r}(r,n)),{video:o,audio:a,total:e}}},{key:"getLastSegment",value:function(e){var t=e.segmentSequences[e.segmentSequences.length-1];if(!t)return null;var r=Math.max(0,t.time-e.presentationTimeOffset+t.duration*(t.count-1)),n=Math.max(r+t.duration,0),i=e.bitrate,o=t.originalValues.time-t.originalValues.trackPresentationTimeOffset+t.originalValues.duration*(t.count-1);return new pl({start:r,end:n,bitrate:i,trackId:e.id,number:e.endNumber,originalStart:o,isInitSegment:!1,width:"width"in e?e.width:0,height:"height"in e?e.height:0,isEncrypted:t.isEncrypted,startByteWithOffset:"startByteWithOffset"in t?t.startByteWithOffset:0,endByteWithOffset:"endByteWithOffset"in t?t.endByteWithOffset:Number.MAX_SAFE_INTEGER})}},{key:"getDebugInfo",value:function(e){var t,r,n;return{audio:this.audio.map((function(e){return e.getDebugInfo()})),video:this.video.map((function(e){return e.getDebugInfo()})),text:this.text.map((function(e){return e.getDebugInfo()})),selectedVideoTracks:this.selectedVideoTracks.map((function(e){return e.getDebugInfo()})),selectedVideoTrackHeight:null!==(t=this.selectedVideoTrackHeight)&&void 0!==t?t:null,selectedAudioLanguage:null!==(r=this.selectedAudioLanguage)&&void 0!==r?r:null,selectedTextTrack:null!==(n=this.selectedTextTrack)&&void 0!==n?n:null,mpd:this.mpd,externalPresentationDelay:this.externalPresentationDelay,isLive:this.getIsDynamic(),isLowLatency:this.isLowLatencyLive(),segmentDebugInfo:void 0!==e?this.getSegmentsDebugInfo(e):void 0}}},{key:"updateStreamEndTime",value:function(){var e,t=null!==(e=this.video[0])&&void 0!==e?e:this.audio[0];t.endTime&&this.emit("StreamEndTimeUpdate",t.endTime-t.presentationTimeOffset)}},{key:"getTargetLatency",value:function(){return this.targetLatency}},{key:"applyMpd",value:function(e){var t,r,n,i=void 0===this.mpd,o=(null!==(t=this.externalPresentationDelay)&&void 0!==t?t:e.presentationDelay)+(this.enablePresentationDelayOffset?kl:0);this.mpd=We(We({},e),{},{presentationDelay:o}),i&&(this.targetLatency=(r=this.getMaxSegmentDuration(),7e3!==(n=1e3*(0,El.c)(7))?n:Math.min(7e3,3*r))),this.updateStreamEndTime()}},{key:"getIsDynamic",value:function(){var e;return(null===(e=this.mpd)||void 0===e?void 0:e.isDynamic)||!1}},{key:"isLowLatencyLive",value:function(){var e;return this.getIsDynamic()&&0!==(null===(e=this.mpd)||void 0===e?void 0:e.availabilityTimeOffset)}},{key:"getLiveEdge",value:function(){var e;if(null===(e=this.mpd)||void 0===e||!e.isDynamic)return this.getDuration()||0;if(null===this.mpd.presentationStartTime)throw new Error("Cannot compute live edge without presentationStartTime");return Date.now()+this.mpd.clockOffset-this.mpd.maxSegmentDuration-this.mpd.presentationStartTime}},{key:"getMaxSegmentDuration",value:function(){var e;return(null===(e=this.mpd)||void 0===e?void 0:e.maxSegmentDuration)||5e3}},{key:"getSeekableRange",value:function(){return{start:this.getSeekRangeStart(),end:this.getSeekRangeEnd()}}},{key:"getSeekRangeStart",value:function(){var e,t;if(null===(e=this.mpd)||void 0===e||!e.isDynamic)return Ol.S;var r=!isFinite(this.mpd.segmentAvailabilityDuration),n=this.mpd.minSegmentStartTime-(null!==(t=this.mpd.publishTime)&&void 0!==t?t:0);if(r)return Math.max(0,n);var i=this.getLiveEdge()+this.mpd.availabilityTimeOffset-this.mpd.segmentAvailabilityDuration,o=Math.min(i,this.getSeekRangeEnd());return Math.max(n,o)}},{key:"getSeekRangeEnd",value:function(){var e;if(null===(e=this.mpd)||void 0===e||!e.isDynamic)return this.getDuration()||0;var t=this.isLowLatencyLive()?0:this.mpd.presentationDelay,r=this.getLiveEdge()+this.mpd.availabilityTimeOffset-t;if(!this.isLowLatencyLive())return Math.max(0,r);var n=r+this.mpd.presentationStartTime,i=Date.now()+this.mpd.clockOffset,o=Math.min(n,i-this.targetLatency);return Math.max(o-this.mpd.presentationStartTime,0)}},{key:"getUtcStartTime",value:function(){var e,t;return null!==(e=null===(t=this.mpd)||void 0===t?void 0:t.publishTime)&&void 0!==e?e:0}},{key:"setPresentationDelayOptions",value:function(e){var t,r;this.externalPresentationDelay=null!==(t=this.externalPresentationDelay)&&void 0!==t?t:e.delay,this.enablePresentationDelayOffset=null!==(r=this.enablePresentationDelayOffset)&&void 0!==r?r:e.enableOffset}},{key:"getEmsgSchemeIdUris",value:function(){var e;return null===(e=this.mpd)||void 0===e?void 0:e.emsgSchemeIdUris}},{key:"getLastSegmentNumber",value:function(e){var t=this[e][0];return t?t.endNumber:null}},{key:"setTargetLatency",value:function(e){this.targetLatency=e}},{key:"getSegmentsDebugInfo",value:function(e){return{audio:this.getSegmentsDebugInfoByType("audio",e),video:this.getSegmentsDebugInfoByType("video",e)}}},{key:"getSegmentsDebugInfoByType",value:function(e,t){return this[e].reduce((function(e,r){return(0,wl.J)(r.getSegmentsDebugInfo(t)).forEach((function(t){var r=Be(t,2),n=r[0],i=r[1];e[n]+=i})),e}),{playedRawSize:0,playedSegmentCount:0,activeRawSize:0,activeSegmentCount:0})}},{key:"getTotalRawSizeByType",value:function(e){return this[e].reduce((function(e,t){var r=t.getSegmentsDebugInfo(0);return e+r.playedRawSize+r.activeRawSize}),0)}},{key:"getTotalRawSize",value:function(){return this.getTotalRawSizeByType("audio")+this.getTotalRawSizeByType("video")}},{key:"destroy",value:function(){var e=this;qe(Qe(t.prototype),"destroy",this).call(this),["audio","video","text"].forEach((function(t){e[t].forEach((function(e){return e.destroy()}))})),this.audio=[],this.video=[],this.text=[]}},{key:"getVideoTrack",value:function(e){return this.video.find((function(t){return t.id===e}))}},{key:"getAudioTrack",value:function(e){return this.audio.find((function(t){return t.language===e}))}},{key:"getTextTrack",value:function(e){return this.text.find((function(t){return t.language===e}))}}])&&Ye(r.prototype,n),i&&Ye(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M),Rl=r(7487),xl=r(30868),Pl=(new Map).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Rl.ly).set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",Rl.xE).set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95",Rl.xE).set("urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",Rl.dn).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Rl.dn),Al=function(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:null!==t&&void 0!==t?t:[]}},Ll=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parser=t}var t,r,n;return t=e,(r=[{key:"parse",value:function(e){var t,r=this.parseElements(e),n=null,i=[],o=new Set(r.map((function(e){return e.keyId})).filter((function(e){return null!==e})));if(o.size>1)throw new Qs.w({code:"YASP_DASH_CONFLICTING_KEY_IDS",isFatal:!0,message:"Dash manifest has conflicting ids: ".concat(Array.from(o).join(",")),details:{},category:Xs.q.DRM});t=r.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!==e.schemeUri||(n=e.init||n,!1)}));var a=Array.from(o)[0]||null;return t.length&&(i=this.convertElements(n,t,a)),{defaultKeyId:a,defaultInit:n,drmInfos:i}}},{key:"convertElements",value:function(e,t,r){var n,i=[],o=tt(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,u=Pl.get(a.schemeUri);if(u){var c=this.getInitDataFromPro(a),s=null;"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"!==a.schemeUri&&"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b"!==a.schemeUri||(s=this.getClearKeyInitData(a,r));var l=c||s||a.init||e,f=Al(u,l);i.push(f)}}}catch(h){o.e(h)}finally{o.f()}return i}},{key:"parseElements",value:function(e){var t,r=[],n=tt(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=this.parseElement(i);o&&r.push(o)}}catch(a){n.e(a)}finally{n.f()}return r}},{key:"getInitDataFromPro",value:function(e){var t=this.parser.findChildNS(e.node,"urn:microsoft:playready","pro");if(!t)return null;var r=this.parser.getContents(t);if(!r)return null;var n=fl.P.fromBase64(r),i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),o=e.keyId,a=this.createPssh(n,i,o?[o]:[],0);return a?[{initData:a,initDataType:"cenc",keyId:o}]:null}},{key:"createPssh",value:function(e,t,r,n){var i=new Set(r),o=e.length,a=12+t.length+4+o;n>0&&(a+=20);var u=new ArrayBuffer(a),c=new Uint8Array(u),s=new DataView(u),l=0;if(s.setUint32(l,a),l+=4,s.setUint32(l,1886614376),l+=4,n<1?s.setUint32(l,0):s.setUint32(l,16777216),l+=4,c.set(t,l),l+=t.length,n>0){s.setUint32(l,i.size),l+=4;var f,h=tt(i);try{for(h.s();!(f=h.n()).done;){var d=f.value,p=fl.P.fromHex(d);c.set(p,l),l+=p.length}}catch(y){h.e(y)}finally{h.f()}}return s.setUint32(l,o),l+=4,c.set(e,l),(l+=o)===a?fl.P.toBase64(c):null}},{key:"parseElement",value:function(e){var t=this,r=e.attributes.schemeIdUri,n=this.parser.getAttributeNS(e,"urn:mpeg:cenc:2013","default_KID"),i=this.parser.findChildrenNS(e,"urn:mpeg:cenc:2013","pssh").map((function(e){return t.parser.getContents(e)}));if(!r)return null;if(r=r.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new Qs.w({code:"YASP_DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED",isFatal:!0,message:"Representation with multiple keyIds is not supported: (".concat(n,")"),details:{},category:Xs.q.DRM});var o=i.map((function(e){return{initDataType:"cenc",initData:e,keyId:null}}));return{node:e,schemeUri:r,keyId:n,init:o.length>0?o:null}}},{key:"getKeyIdsForClearKey",value:function(e){if(!e)return[];var t=fl.P.fromBase64(e),r=new DataView(t.buffer),n=r.byteOffset,i=r.byteLength,o=0,a=r.getUint32(o);o+=4;var u=r.getUint32(o);if(o+=4,i<a)return[];if(1886614376!==u)return[];var c=r.getUint32(o)>>>24;if(o+=4,0!==c&&1!==c)return[];var s=r.buffer;o+=16;var l=r.getUint32(o);if(o+=4,!l||i<n+o+32*l)return[];for(var f=[],h=0;h<l;h++){var d=new Uint8Array(s,n+o+32*h,32);f.push(xl.x.fromBytesAutoDetect(d))}return f}},{key:"getClearKeyInitData",value:function(e,t){var r,n=null===(r=e.init)||void 0===r?void 0:r[0].initData,i=t||this.getKeyIdsForClearKey(n)[0]||e.keyId;if(!i)return null;var o=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),a=new Uint8Array([]);return[{initData:this.createPssh(a,o,[i],1),initDataType:"cenc",keyId:i}]}}])&&nt(t.prototype,r),n&&nt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),jl=["segmentTemplate","mimeType"],Il=["segmentTemplate","mimeType"],Dl=["segmentTemplate","mimeType"],Nl=r(67767),Ml=["urn:mpeg:dash:utc:direct:2014","urn:mpeg:dash:utc:direct:2012"],Cl=[].concat(Ml),Fl=r(31969),Bl=r(96418),Ul=r(73647),Gl=r(12693),Hl=r(174),Vl=r(25767),Wl=r(34118),Yl=r(86673),ql=r(17338),zl=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Xt(this,"canceled",!1),Xt(this,"signal",new ql.R(void 0)),Xt(this,"once",this.signal.addOne.bind(this.signal)),Xt(this,"dispatch",(0,Gl.I)((function(e){t.canceled||t.signal.dispatch(e)})))}var t,r,n;return t=e,(r=[{key:"getReason",value:function(){return this.signal.getValue()}},{key:"cancel",value:function(){this.canceled=!0}}])&&$t(t.prototype,r),n&&$t(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Kl=r(72573),$l=["headers"],Xl=["headers"],Jl=["abortSignal"],Ql=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ir(this,t),fr(sr(e=o.call(this)),"baseParams",void 0),fr(sr(e),"contentId",void 0),fr(sr(e),"lowLatency",!1),e.baseParams=r,r.contentId&&(e.contentId=r.contentId),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ar(e,t)}(t,e);var r,n,i,o=ur(t);return r=t,(n=[{key:"setIsLL",value:function(e){this.lowLatency=e}},{key:"isLL",value:function(){return this.lowLatency}},{key:"setBaseParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.baseParams=e}},{key:"getRequestOptions",value:function(e){e.headers;var t=nr(e,$l),r=this.baseParams;return r.headers,rr(rr({},nr(r,Xl)),t)}},{key:"getRequestHeaders",value:function(e){return rr(rr({},this.baseParams.headers),e.headers)}},{key:"performRequest",value:function(e,t){var r,n,i=this,o=t.abortSignal,a=nr(t,Jl),u=new Ul.H,c=this.getRequestOptions(a),s=this.getRequestHeaders(a),l=rr(rr({},c),{},{headers:s,signal:u.signal}),f={canceled:!1,timeout:!1,downloadedBytes:0};o.once((function(e){switch(e){case"timeout":f.timeout=!0;break;case"cancel":f.canceled=!0}(0,Yl.Y)((function(){return u.abort()}))}));var h=(0,dl.u)(),d=(0,Wl.en)(e).protocol===Vl.FS_PROTOCOL;if(!d&&this.contentId&&null!==(r=Hl.SourcePersistStore.downloadedFragments)&&void 0!==r&&null!==(n=r[this.contentId])&&void 0!==n&&n[(0,Hl.getFilePath)(this.contentId,e)])return(0,Hl.generateEmptyFragment)(u.abort,f,l.signal,h);var p=(d?Hl.SourcePersistStore.fetchFromFs(this.contentId,e):(0,Bl.dy)(e,l)).catch((function(e){if(f.canceled)throw new Error("Request canceled");if(f.timeout)throw new Error("Request timed out");throw e}));return p.then((function(e){var t={};e.headers.forEach((function(e,r){t[r]=e})),i.emit("RequestTtfb",h())})).catch(Js.Z),{abort:function(e){o.dispatch(e||"cancel")},responsePromise:p,requestState:f,getRtt:h,isSkipFragment:!1,requestOptions:c,requestHeaders:s}}},{key:"parseServerTime",value:function(e,t){if(e.date||e["x-server-time-ms"]){var r=NaN;e["x-server-time-ms"]?r=new Date(parseInt(e["x-server-time-ms"],10)).getTime():e.date&&(r=new Date(e.date).getTime()),isFinite(r)&&this.emit("ServerTimeChange",r+t/2)}}},{key:"fetch",value:function(e,t){var r=this,n=new zl,i=this.performRequest(e,rr(rr({},t),{},{abortSignal:n})),o=i.abort,a=i.responsePromise,u=i.requestState,c=i.getRtt,s=i.requestOptions,l=i.requestHeaders;return{abort:o,response:a.then((function(e){var t={};e.headers.forEach((function(e,r){t[r]=e})),r.parseServerTime(t,c());var i=e.text();return i.finally((function(){n.cancel()})),{status:e.status,headers:t,body:i}})),requestState:u,requestOptions:s,requestHeaders:l}}},{key:"progress",value:function(e,t,r){this.emit("Progress",{time:e,size:t,isLowLatency:r})}},{key:"fetchDataStream",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new sl.h,o=!1,a=new zl;a.once((function(e){o=!0,i.destroy()}));var u,c=this.performRequest(e,rr(rr({},t),{},{abortSignal:a,responseType:n?"arraybuffer":void 0})),s=c.abort,l=c.responsePromise,f=c.requestState,h=c.isSkipFragment,d=c.requestOptions,p=c.requestHeaders,y=h||(0,Wl.en)(e).protocol===Vl.FS_PROTOCOL?void 0:this.contentId,v=y?Hl.SourcePersistStore.createFileWritableStream((0,Hl.getFilePath)(y,e)):void 0;return i.once("Close",(function(){var e;null===(e=v)||void 0===e||e.then((function(e){return e.fileWritableStream.close()})),v=void 0})),i.once("Destroy",(function(){var e;null===(e=v)||void 0===e||e.then((function(e){return e.fileWritableStream.close()})),v=void 0})),(0,_l.RW)("yasp_enable_new_timeout")&&(0,_l.jS)("yasp_headers_timeout")&&(u=setTimeout((function(){s("timeout")}),(0,_l.jS)("yasp_headers_timeout"))),{requestOptions:d,requestHeaders:p,requestState:f,abort:s,response:l.then((function(t){var c;clearTimeout(u);var l=function(){(0,_l.RW)("yasp_enable_new_timeout")&&!n&&(clearTimeout(c),i.isClosed()||i.isClosing()||i.isDestroyed()||(c=setTimeout((function(){s("timeout")}),(0,_l.jS)("yasp_body_timeout"))))};l();var h={};r.on("Destroy",s),t.headers.forEach((function(e,t){h[t]=e}));var d,p=n?{read:(d=er(Qt().mark((function e(){var r;return Qt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.arrayBuffer();case 2:return r=e.sent,e.abrupt("return",{done:!0,value:new Uint8Array(r)});case 4:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})}:t.body.getReader(),m=(0,Gl.I)((function(){a.cancel(),r.off("Destroy",s),r.emit("ResponseEnd")}));return i.once("Destroy",m),i.once("Close",m),r.emit("ResponseStart"),function t(){o||p.read().then((function(r){var n,u,c=r.done,s=r.value;(l(),o)||(void 0!==s&&(f.downloadedBytes+=s.length,y&&(0,Wl.en)(e).protocol!==Vl.FS_PROTOCOL?null===(n=v)||void 0===n||n.then((function(e){return e.fileWritableStream.write(s)})):i.write(s)),c?(a.cancel(),null===(u=v)||void 0===u||u.then((function(e){return(0,e.onSegmentDone)()})),i.close()):t())})).catch((function(e){if("AbortError"!==(null===e||void 0===e?void 0:e.name)&&i.destroy(),"AbortError"!==(null===e||void 0===e?void 0:e.name)&&"network error"!==(null===e||void 0===e?void 0:e.message))throw e}))}(),{status:t.status,headers:h,body:i}}))}}},{key:"getDebugInfo",value:function(){return{baseParams:this.baseParams}}}])&&or(r.prototype,n),i&&or(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M),Zl=r(42904),ef=r(36198),tf=r(88114),rf=r(67767),nf=r(16187),of=r(68992),af=r(75781).parse,uf=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n={},(r="namespaces")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,n;return t=e,n=[{key:"getChildren",value:function(e){return Array.from(e.children).filter((function(e){return!(0,nf.H)(e)}))}},{key:"getElementsByTagName",value:function(e,t){var r=[];return function e(n){n.tagName===t&&r.push(n);var i,o=Fr(n.children);try{for(o.s();!(i=o.n()).done;){var a=i.value;"string"!==typeof a&&e(a)}}catch(u){o.e(u)}finally{o.f()}}(e),r}},{key:"getElementByTagName",value:function(e,t){var r=null;return function e(n){if(null===r)if(n.tagName!==t){var i,o=Fr(n.children);try{for(o.s();!(i=o.n()).done;){var a=i.value;"string"!==typeof a&&e(a)}}catch(u){o.e(u)}finally{o.f()}}else r=n}(e),r}},{key:"setParent",value:function(e){var t=Cr(e,{parent:null});return function e(t){var r,n=Fr(t.children);try{for(n.s();!(r=n.n()).done;){var i=r.value;"string"!==typeof i&&(i.parent=t,e(i))}}catch(o){n.e(o)}finally{n.f()}}(t),t}},{key:"getTextContent",value:function(e){var t="";return function e(r){var n,i=Fr(r.children);try{for(i.s();!(n=i.n()).done;){var o=n.value;"string"===typeof o?t+=o:e(o)}}catch(a){i.e(a)}finally{i.f()}}(e),t}}],(r=[{key:"parse",value:function(e){var t=this,r=af(e),n=Array.isArray(r)?r:[];return n.forEach((function(e){e.attributes&&Object.keys(e.attributes).forEach((function(r){if(r.startsWith("xmlns")){var n=Br(r.split(":"),2)[1];t.namespaces[e.attributes[r]]=n||"__global"}}))})),n}},{key:"getAttributeNS",value:function(e,t,r){var n="".concat(this.namespaces[t],":").concat(r);return n in e.attributes?e.attributes[n]:null}},{key:"getAttributeNSList",value:function(e,t,r){var n,i=Fr(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=this.getAttributeNS(e,o,r);if(a)return a}}catch(u){i.e(u)}finally{i.f()}return null}},{key:"findChildrenNS",value:function(e,t,r){var n=this;return e.children.filter((function(e){var i="".concat(n.namespaces[t],":").concat(r);return"string"!==typeof e&&e.tagName===i}))}},{key:"findChildren",value:function(e,t){return e.children?e.children.filter((function(e){return"string"!==typeof e&&e.tagName===t})):[]}},{key:"getContents",value:function(e){var t;return(0,nf.H)(e)?e:e.children.every(nf.H)&&null!==(t=e.children[0].trim())&&void 0!==t?t:null}},{key:"findChildNS",value:function(e,t,r){var n=this.findChildrenNS(e,t,r);return 1!==n.length?null:n[0]}}])&&Hr(t.prototype,r),n&&Hr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),cf=r(3569),sf=r(72573),lf=r(67767),ff=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),en(Qr(r=u.call(this)),"url",void 0),en(Qr(r),"fetcher",void 0),en(Qr(r),"timeline",void 0),en(Qr(r),"parser",void 0),en(Qr(r),"baseUrlManager",void 0),en(Qr(r),"mpd",null),en(Qr(r),"xml",""),en(Qr(r),"session",""),en(Qr(r),"attempt",0),en(Qr(r),"drmInfos",[]),en(Qr(r),"playlistCapHeight",null),en(Qr(r),"lastUpdateDuration",0),en(Qr(r),"aborted",!1),en(Qr(r),"abortFn",null),en(Qr(r),"startPresentationTimeOffset",null),r.url=e.url,r.timeline=e.timeline,r.parser=new uf,r.baseUrlManager=e.baseUrlManager,e.fetcherFactory?r.fetcher=e.fetcherFactory(e.fetcherParams):r.fetcher=new Ql(e.fetcherParams),r.fetcher.on("ServerTimeChange",(function(e){r.emit("ServerTimeChange",e)})),r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$r(e,t)}(t,e);var r,n,i,o,a,u=Xr(t);return r=t,(n=[{key:"parse",value:function(e){return this.parser.parse(e)}},{key:"isInitiallyLoaded",value:function(){return null!==this.mpd}},{key:"setSourceIndex",value:function(e){if(null!==e){var t=new lf(this.url);t.searchParams.set("source_index",e),this.url=t.href}}},{key:"getMpdXml",value:function(){return this.parse(this.xml)[1]}},{key:"getPlaylistCapHeight",value:function(){return this.playlistCapHeight}},{key:"isDynamicPlaylist",value:function(){var e;return(null===(e=this.mpd)||void 0===e?void 0:e.isDynamic)||!1}},{key:"getMediaType",value:function(){if(this.mpd)return this.mpd.isDynamic?this.mpd.mediaType:Fl.D.VOD}},{key:"getUpdatePeriod",value:function(){var e;return(null===(e=this.mpd)||void 0===e?void 0:e.updatePeriod)||null}},{key:"getLastUpdateDuration",value:function(){return this.lastUpdateDuration}},{key:"setFetcherBaseParams",value:function(e){this.fetcher.setBaseParams(e)}},{key:"apply",value:function(e){var t;this.xml=e;try{var r;t=function(e,t,r){var n,i,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=e.find((function(e){return"MPD"===e.tagName}));if(void 0===u)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed MPD",details:{node:{tagName:"root",attributes:{},children:e}},category:Xs.q.MEDIA});for(var c={periods:[],baseUrls:[],maxHeight:null,isDynamic:"dynamic"===(null===(n=u.attributes)||void 0===n?void 0:n.type),mediaType:Fl.D.LIVE,updatePeriod:5e3,minBufferTime:0,presentationStartTime:null,segmentAvailabilityDuration:1/0,maxSegmentDuration:0,presentationDelay:0,availabilityTimeOffset:0,clockOffset:0,minSegmentStartTime:null,maxSegmentEndTime:null,presentationTimeOffset:0,publishTime:0,minPeriodStartTime:0,locationUrl:null,startPresentationTimeOffset:null},s=u.children.filter((function(e){return"BaseURL"===e.tagName})),l=0;l<s.length;l++){var f=s[l],h=f.children;1===h.length&&c.baseUrls.push(h[0])}c.baseUrls.length||c.baseUrls.push(qt(t)||t);var d=u.children.filter((function(e){return"Period"===e.tagName}));if(void 0===d||0===d.length)throw new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Period",details:{node:u},category:Xs.q.MEDIA});if(c.isDynamic){var p,y,v,m,g;c.minBufferTime=Wt(null===(p=u.attributes)||void 0===p?void 0:p.minBufferTime)||c.minBufferTime,c.updatePeriod=Wt(null===(y=u.attributes)||void 0===y?void 0:y.minimumUpdatePeriod)||c.updatePeriod,c.presentationStartTime=zt(null===(v=u.attributes)||void 0===v?void 0:v.availabilityStartTime),c.segmentAvailabilityDuration=Wt(null===(m=u.attributes)||void 0===m?void 0:m.timeShiftBufferDepth)||c.segmentAvailabilityDuration,c.maxSegmentDuration=Wt(null===(g=u.attributes)||void 0===g?void 0:g.maxSegmentDuration)||c.maxSegmentDuration;var b=Wt(u.attributes.suggestedPresentationDelay),w=Math.max(1e4,1.5*c.minBufferTime);c.presentationDelay=null!==b&&void 0!==b?b:w;var E=u.children.filter((function(e){return"UTCTiming"===e.tagName}));c.clockOffset=Kt(E)}var _,O,k=Wt(null===u||void 0===u?void 0:u.attributes.mediaPresentationDuration),T={maxHeight:null,duration:k,maxPresentationTimeOffset:0,minPeriodStartTime:1/0,segmentAvailabilityDuration:c.segmentAvailabilityDuration,nowWithOffset:Date.now()+c.clockOffset,parser:r,availabilityTimeOffset:1/0,isDynamic:c.isDynamic,emsgSchemeIdUris:{audio:new Set,video:new Set},presentationStartTime:c.presentationStartTime,presentationTimeOffset:c.presentationTimeOffset,startPresentationTimeOffset:a};c.periods.push(Yt(d[0],T)),T.presentationTimeOffset&&(c.segmentAvailabilityDuration=1/0,c.presentationTimeOffset=T.presentationTimeOffset,c.mediaType=Fl.D.EVENT),T.maxSegmentDuration&&T.maxSegmentEndTime&&(c.maxSegmentDuration=Math.max(T.maxSegmentDuration,c.maxSegmentDuration),c.minSegmentStartTime=null!==(_=T.minSegmentStartTime)&&void 0!==_?_:null,c.maxSegmentEndTime=null!==(O=T.maxSegmentEndTime)&&void 0!==O?O:null),c.maxSegmentDuration||(c.maxSegmentDuration=4e3),T.maxHeight&&(c.maxHeight=T.maxHeight),isFinite(T.availabilityTimeOffset)&&(c.availabilityTimeOffset=T.availabilityTimeOffset),c.publishTime=zt(null===(i=u.attributes)||void 0===i?void 0:i.publishTime)||c.publishTime,c.emsgSchemeIdUris=T.emsgSchemeIdUris;var R=u.children.find((function(e){return"Location"===e.tagName}));if(R&&R.children.length&&(c.locationUrl=S(R.children[0])),c.minPeriodStartTime=isFinite(T.minPeriodStartTime)?T.minPeriodStartTime:null!==(o=T.minSegmentStartTime)&&void 0!==o?o:c.minPeriodStartTime,c.isDynamic){var x,P=Date.now()+c.clockOffset,A=c.maxSegmentEndTime?P-(c.maxSegmentEndTime-(null!==(x=T.presentationTimeOffset)&&void 0!==x?x:0)-c.maxSegmentDuration):null;c.presentationStartTime=null!==A&&void 0!==A?A:c.presentationStartTime}if(!T.presentationTimeOffset&&null!==c.presentationStartTime&&void 0!==T.maxPresentationTimeOffset){c.startPresentationTimeOffset=T.startPresentationTimeOffset;var L=c.presentationStartTime;c.presentationStartTime=c.presentationStartTime+(null!==a&&void 0!==a?a:T.maxPresentationTimeOffset),c.publishTime=c.presentationStartTime-L}return c}(this.parse(e),this.url,this.parser,this.startPresentationTimeOffset),this.startPresentationTimeOffset=null!==(r=this.startPresentationTimeOffset)&&void 0!==r?r:t.startPresentationTimeOffset}catch(i){throw(Mr(i)?i:new Qs.w({code:"YASP_PARSE_MANIFEST_ERROR",details:{},message:(0,of.V)(i)?i.message:"Unknown manifest parsing error",isFatal:!0,category:Xs.q.MEDIA})).details.manifest=e,i}this.playlistCapHeight=t.maxHeight,this.baseUrlManager.setBaseUrls(t.baseUrls);var n=t.periods[0];return n.adaptationSets=Dr(n.adaptationSets),this.checkTracksLengthDifference(n.adaptationSets),this.checkDrm(n.adaptationSets),vr(n,this.timeline),this.timeline.applyMpd(t),t}},{key:"checkDrm",value:function(e){var t=e.find((function(e){return e.encrypted}));t&&(this.drmInfos=t.contentProtection.drmInfos,this.mpd||this.emit("DrmInfoReceived",t.contentProtection.drmInfos))}},{key:"setMirrorUrls",value:function(e){}},{key:"getDrmInfos",value:function(){return this.drmInfos}},{key:"getEmsgSchemeIdUris",value:function(){var e;return null===(e=this.mpd)||void 0===e?void 0:e.emsgSchemeIdUris}},{key:"update",value:(o=Wr().mark((function e(){var t,r,n,i,o,a,u,c,s,l,f,h,d,p,y,v,m,g,b,w,E=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.aborted=!1,t=this.session?Nr(this.url):(0,tf.c)(this.url),r=(0,dl.u)(),n={url:t},e.prev=4,i={},this.session&&(i["x-strm-session"]=this.session,i["x-client-timestamp"]=String(Date.now())),o=this.fetcher.fetch(t,{headers:i}),a=o.response,u=o.abort,c=o.requestHeaders,s=o.requestOptions,this.abortFn=u,setTimeout((function(){u("timeout")}),ef.d4),e.next=12,a;case 12:if(l=e.sent,f=l.body,h=l.status,d=l.headers,this.session=d["x-strm-session"],p=h>=200&&h<300||304===h,n.requestHeaders=c,n.responseHeaders=d,n.status=h,n.requestOptions=s,n.url=t,p){e.next=27;break}throw y=this.attempt>=10,0===h?new Qs.w({code:"YASP_FETCH_MANIFEST_HTTP_ERROR",message:"Network Error",details:n,category:Xs.q.NETWORK_MEDIA,isFatal:y}):new Qs.w({code:"YASP_FETCH_MANIFEST_BAD_HTTP_STATUS",message:"Error: ".concat(h),details:n,isFatal:y,category:Xs.q.NETWORK_MEDIA});case 27:return e.next=29,f;case 29:v=e.sent,this.abortFn=null,this.mpd=this.apply(v),this.attempt=0,this.updateManifestUrl(),this.lastUpdateDuration=r(),this.emit("ManifestUpdate"),e.next=57;break;case 38:if(e.prev=38,e.t0=e.catch(4),g=this.attempt>=10,this.abortFn=null,!(0,of.V)(e.t0)){e.next=49;break}if("Request canceled"!==e.t0.message&&"Abort error"!==e.t0.message){e.next=45;break}return e.abrupt("return");case 45:b="Request timed out"===e.t0.message,m=Mr(e.t0)?e.t0:new Qs.w({code:b?"YASP_FETCH_MANIFEST_TIMEOUT":"YASP_FETCH_MANIFEST_HTTP_ERROR",details:b?{url:t}:n,message:e.t0.message,isFatal:g,category:b?Xs.q.NETWORK_TIMEOUT:Xs.q.NETWORK_MEDIA}),e.next=50;break;case 49:m=new Qs.w({code:"YASP_UNKNOWN_ERROR",details:{url:t,error:e.t0},message:"Unknown error. Expect error to be an instance of Error.",isFatal:g,category:Xs.q.NETWORK_MEDIA});case 50:if(this.emit("Error",m),!g&&!m.isFatal){e.next=53;break}return e.abrupt("return");case 53:if(w=(0,cf._)(hr(this.attempt++)),!this.aborted){e.next=56;break}return e.abrupt("return");case 56:return e.abrupt("return",w.then((function(){if(!E.aborted)return E.update()})));case 57:case"end":return e.stop()}}),e,this,[[4,38]])})),a=function(){var e=this,t=arguments;return new sf((function(r,n){function i(e){Yr(u,r,n,i,a,"next",e)}function a(e){Yr(u,r,n,i,a,"throw",e)}var u=o.apply(e,t);i(void 0)}))},function(){return a.apply(this,arguments)})},{key:"abort",value:function(){this.abortFn&&this.abortFn(),this.aborted=!0}},{key:"destroy",value:function(){this.abort(),zr(Zr(t.prototype),"destroy",this).call(this)}},{key:"getDebugInfo",value:function(){return{url:this.url,xml:this.xml,attempt:this.attempt,mpd:this.mpd,playlistCapHeight:this.playlistCapHeight,lastUpdateDuration:this.lastUpdateDuration}}},{key:"checkTracksLengthDifference",value:function(e){if(e.length){var t=new Set,r={};if(e.forEach((function(e){"text"!==e.type&&e.representations.forEach((function(e){r[e.id]=e.segmentTemplate.endTime,t.add(e.segmentTemplate.endTime)}))})),1!==t.size){var n=new Qs.w({code:"YASP_DIFFERENT_TRACKS_LENGTH",details:r,message:"Different track lengths detected",isFatal:!1,category:Xs.q.MEDIA});this.emit("Error",n)}}}},{key:"updateManifestUrl",value:function(){var e,t;this.url=null!==(e=null===(t=this.mpd)||void 0===t?void 0:t.locationUrl)&&void 0!==e?e:this.url}}])&&qr(r.prototype,n),i&&qr(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M),hf=r(72573),df=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manifesto=t,this.getSegmentDuration=r,un(this,"processing",!1),un(this,"promise",null),un(this,"timer",0)}var t,r,n,i,o;return t=e,(r=[{key:"updateInternal",value:(o=on(rn().mark((function e(){var t,r=this;return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.processing=!0,t=function(){if(r.processing){r.processing=!1;var e=r.getUpdatePeriod();e&&(r.timer=self.setTimeout((function(){r.timer=0,r.update()}),e))}},this.promise=this.manifesto.update().then(t).catch(Js.Z).then((function(){r.promise=null})),e.abrupt("return",this.promise);case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"update",value:(i=on(rn().mark((function e(){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.processing){e.next=2;break}return e.abrupt("return",this.promise);case 2:if(this.shouldUpdate()){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.updateInternal();case 6:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"forceUpdate",value:function(){this.disableTimer(),this.updateInternal()}},{key:"disable",value:function(){this.processing=!1,this.disableTimer(),this.manifesto.abort()}},{key:"getDebugInfo",value:function(){return{processing:this.processing}}},{key:"disableTimer",value:function(){self.clearTimeout(this.timer),this.timer=0}},{key:"shouldUpdate",value:function(){return!this.timer&&(!this.manifesto.isInitiallyLoaded()||this.manifesto.isDynamicPlaylist())}},{key:"getUpdatePeriod",value:function(){if(this.manifesto.isDynamicPlaylist()){var e=this.manifesto.getUpdatePeriod(),t=this.manifesto.getLastUpdateDuration();if(e){var r=this.getSegmentDuration(),n=.75*r,i=1.5*r,o=Math.max(n,e-t);return Math.min(o,i)}}}}])&&an(t.prototype,r),n&&an(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),pf=r(45990),yf=function(e,t){return 1.5*e+(t+10)},vf=r(85470),mf=r(72573),gf=Math.random(),bf=((0,vf.VY)(self)||(0,vf.yd)(self)||(0,vf.Fv)(self))&&gf<.1,wf={type:"video",state:"idle",fat:!1,currentTrack:void 0,time:null,previousBufferingTime:null,nextTimeToSet:null,streamIsFinished:!1,lastTrackTimeOffset:null,lastAddedSegmentNumber:null},Ef=["Unexpected read after destroy","Unexpected destroy while read"],_f=function(e){function t(e,r,n,i,o,a){var u,s=o.bufferGoal,l=o.backWatch,f=arguments.length>6&&void 0!==arguments[6]&&arguments[6];bn(this,t),(u=c.call(this)).timeline=e,u.mediaState=r,u.mse=n,u.startProcess=i,u.decodeTimeBatcher=a,u.isLowMemoryMode=f,xn(Tn(u),"destroyed",!1),xn(Tn(u),"bufferGoal",void 0),xn(Tn(u),"backWatch",void 0),xn(Tn(u),"totalBufferCap",void 0),xn(Tn(u),"quotaExceededErrorStates",{}),xn(Tn(u),"streams",{}),xn(Tn(u),"abortCallbacks",{video:null,audio:null}),u.bufferGoal=null!==s&&void 0!==s?s:30,u.backWatch=l,u.totalBufferCap=yf(u.bufferGoal,u.backWatch);var h=e.getMimeTypes(),d=h.video,p=h.audio;return d.length>0&&(u.streams.video=gn(gn({},wf),{},{type:"video"})),p.length>0&&(u.streams.audio=gn(gn({},wf),{},{type:"audio"})),u.mse.on("Open",(function(){return u.run()})),u}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&On(e,t)}(t,e);var r,n,i,o,a,u,c=Sn(t);return r=t,(n=[{key:"abort",value:function(){var e=this;["video","audio"].forEach((function(t){e.abortForType(t)}))}},{key:"abortForType",value:function(e){var t,r;this.destroyed||(null===(t=(r=this.abortCallbacks)[e])||void 0===t||t.call(r),this.resetTime(e))}},{key:"destroy",value:function(){En(Rn(t.prototype),"destroy",this).call(this),this.destroyed=!0}},{key:"run",value:function(){var e=this;this.destroyed||["audio","video"].some((function(t){var r;return"appending"===(null===(r=e.streams[t])||void 0===r?void 0:r.state)}))||(this.streams.video&&this.runForStream(this.streams.video),this.streams.audio&&this.runForStream(this.streams.audio))}},{key:"abortUseless",value:function(e){var t=this;if(!this.destroyed){var r=null!==e&&void 0!==e?e:this.mediaState.currentTime;"open"!==this.mse.getReadyState()||this.mse.isReloading()||null!==r&&["video","audio"].forEach((function(e){var n=t.streams[e];if(void 0!==n){var i=t.mse.getSourceBufferBufferedRange(e);void 0!==i&&!i.some((function(e){return e.start<=r&&r<=e.end}))&&t.abortForType(n.type)}}))}}},{key:"createAbortPromise",value:function(e){var t=this,r=new pf.B;return this.abortCallbacks[e]=function(){r.reject(t.createAbortError())},r.promise}},{key:"createAbortError",value:function(){return new Qs.w({code:"YASP_OPERATION_ABORTED",details:{},isFatal:!1,category:Xs.q.EXCEPTION,message:"AppendStream operation aborted"})}},{key:"resetTime",value:function(e){var t=this.streams[e];t&&(t.lastAddedSegmentNumber=null,this.setTimeToDefault(e))}},{key:"setTimeToDefault",value:function(e){var t=this.streams[e];if(t){var r=function(e){"appending"===t.state?t.nextTimeToSet=e:t.time=e};t.lastAddedSegmentNumber=null;var n=this.mediaState.currentTime;if(null!==n){var i=1e3*n;if(this.isLowMemoryMode){var o=ln(this.mse.getBufferedRangesByType(e),i);r(null!==o?sn(o.end,this.timeline.getMaxSegmentDuration()):i)}else r(i)}else r(null)}}},{key:"reset",value:function(){var e=this;(0,ml.z)(this.streams).forEach((function(t){t&&(e.resetTime(t.type),t.currentTrack=void 0,t.lastTrackTimeOffset=null)})),this.quotaExceededErrorStates={}}},{key:"runForStream",value:function(e){var t=this;if("closed"!==this.mse.getReadyState()&&!this.mse.isReloading()&&"appending"!==e.state){var r=this.mediaState,n=r.currentTime,i=r.buffering,o=r.duration;if(null!==n){var a=this.mse.getSourceBufferBufferedRange(e.type);if(void 0!==a){if("ended"===this.mse.getReadyState()&&a.length&&!(n<=a[0].start))return;i?e.previousBufferingTime!==1e3*n&&(this.setTimeToDefault(e.type),e.nextTimeToSet=null,e.previousBufferingTime=e.time):e.previousBufferingTime=null;var u=cn(a,n),c=o-n;if(c<=u&&(e.streamIsFinished=!0),!(Math.min(this.bufferGoal,c)<=u)&&!this.checkGorgedBuffer(e,a)){var s=this.timeline.getSegment(e.type,e.time),l=s.track,f=s.segment;if(void 0!==l){var h=l.id;if(this.handleTrackPresentationTimeOffset(e,l),h===e.currentTrack){if(void 0!==f&&e.lastAddedSegmentNumber!==f.number){var d=(0,Yl.Y)((function(){return f.getChunkStream()}));if(d){e.nextTimeToSet=f.end;var p=this.startProcess({type:e.type,isInit:!1,number:f.number,id:h});this.appendStream(e,d,f).then((function(){e.time=e.nextTimeToSet,e.streamIsFinished=l.endNumber===f.number&&!t.timeline.getIsDynamic(),(0,ml.z)(t.streams).every((function(e){return Boolean(null===e||void 0===e?void 0:e.streamIsFinished)}))&&t.mse.endOfStream(),t.isLowMemoryMode&&(e.lastAddedSegmentNumber===f.number&&t.emit("SameSegmentsAdded",{type:e.type,size:f.loadedRawSize}),f.destroy()),e.lastAddedSegmentNumber=f.number,p.end()})).catch((function(r){if(p.end(r.message),"YASP_OPERATION_ABORTED"!==r.code)if("YASP_QUOTA_EXCEEDED_ERROR"===r.code){var n=t.quotaExceededErrorStates[e.type]!==f.number;t.quotaExceededErrorStates[e.type]=f.number,t.emit("QuotaExceededError"),n&&t.emit("Error",r)}else t.emit("Error",r)}))}}}else{var y=this.startProcess({type:e.type,isInit:!0,number:null===f||void 0===f?void 0:f.number,id:h});this.appendInitialSegment(e,h).then((function(){return y.end()})).catch((function(e){var r=Mr(e)?e:new Qs.w({code:"YASP_UNKNOWN_ERROR",details:{error:e},isFatal:!1,category:Xs.q.MEDIA,message:"Can not append initial Segment"});y.end(r.message),"YASP_OPERATION_ABORTED"!==r.code&&t.emit("Error",r)})).then((function(){}))}}}}}}}},{key:"handleTrackPresentationTimeOffset",value:function(e,t){var r=this,n=t.presentationTimeOffset,i=e.lastTrackTimeOffset,o=e.type;i!==n&&this.mse.setTimestampOffset(o,n/1e3).then((function(){e.lastTrackTimeOffset=n})).catch((function(e){r.destroyed||(0,hl.L)(e)}))}},{key:"setBufferGoal",value:function(e,t){this.bufferGoal=e,this.backWatch=t,this.totalBufferCap=yf(e,t)}},{key:"checkGorgedBuffer",value:function(e,t){var r=function(e){for(var t=0,r=0;r<e.length;r++){var n=e[r],i=n.start;t+=n.end-i}return t}(t),n=e.fat,i=this.totalBufferCap;return e.fat=r>=i,!!e.fat&&(n||this.emit("FatBuffer",e.type),!0)}},{key:"appendInitialSegment",value:(u=vn(pn().mark((function e(t,r){var n,i;return pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=this.timeline.getInitialSegment(t.type,r))){e.next=3;break}return e.abrupt("return");case 3:return i=n.getChunkStream(),e.next=6,this.appendStream(t,i);case 6:t.currentTrack=r,t.lastAddedSegmentNumber=null,this.run();case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"appendChunk",value:(a=vn(pn().mark((function e(t,r,n){var i;return pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,((0,_l.RW)("web_yasp_decode_time_batcher")||bf)&&(i=(0,dl.u)()),e.next=4,this.mse.appendBuffer(t.type,r);case 4:((0,_l.RW)("web_yasp_decode_time_batcher")||bf)&&i&&(null===n||void 0===n||n.push({time:i()/1e3,size:r.byteLength})),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),Mr(e.t0)?e.t0:new Qs.w({code:"YASP_UNKNOWN_ERROR",details:{error:e.t0},isFatal:!1,category:Xs.q.MEDIA,message:(0,zs.K)(e.t0)?e.t0.message:"Can not append buffer"});case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e,t,r){return a.apply(this,arguments)})},{key:"appendStream",value:(o=vn(pn().mark((function e(t,r,n){var i,o,a,u,c,s,l;return pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state="appending",t.streamIsFinished=!1,i=this.createAbortPromise(t.type),o=[],e.prev=4,e.next=7,mf.race([r.read(),i]);case 7:a=e.sent,u=a.value,c=a.done;case 10:if(c){e.next=25;break}if(!this.destroyed){e.next=13;break}return e.abrupt("return");case 13:if(!u){e.next=16;break}return e.next=16,mf.race([this.appendChunk(t,u,o),i]);case 16:if(!this.destroyed){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,mf.race([r.read(),i]);case 20:s=e.sent,u=s.value,c=s.done,e.next=10;break;case 25:e.next=34;break;case 27:if(e.prev=27,e.t0=e.catch(4),!(0,zs.K)(e.t0)||!Ef.includes(e.t0.message)&&!this.mse.isReloading()){e.next=33;break}throw this.createAbortError();case 33:throw Mr(e.t0)?e.t0:new Qs.w({code:"YASP_UNKNOWN_ERROR",details:{error:e.t0},isFatal:!1,category:Xs.q.MEDIA,message:"Can not append buffer"});case 34:return e.prev=34,((0,_l.RW)("web_yasp_decode_time_batcher")||bf)&&n&&(l=this.decodeTimeBatcher).push.apply(l,hn(o.map((function(e){return e.bitrate=n.bitrate,e.cmaf=1!==o.length,e})))),this.abortCallbacks[t.type]=null,t.state="idle",e.finish(34);case 39:case"end":return e.stop()}}),e,this,[[4,27,34,39]])}))),function(e,t,r){return o.apply(this,arguments)})},{key:"getDebugInfo",value:function(){return{bufferGoal:this.bufferGoal,totalBufferCap:this.totalBufferCap,streams:this.streams,isLowMemoryMode:this.isLowMemoryMode}}}])&&wn(r.prototype,n),i&&wn(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M),Of=r(8580),Sf=r(79814),kf=r(14690),Tf=(0,vf.yd)(self)||(0,vf.VY)(self),Rf=Tf?1e4:5e3,xf=[429,500,502,503,504],Pf={rules:[{statusCodes:[401,403],maxRetries:0},{statusCodes:[404,410],maxRetries:3},{statusCodes:xf,maxRetries:Number.MAX_SAFE_INTEGER}],defaultMaxRetries:10,delaySettings:{baseDelayMs:100,factor:.5,maxDelayMs:6e4}},Af=function(){function e(t){var r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Nn(this,"defaultConfig",void 0),Nn(this,"customConfig",void 0),Nn(this,"defaultMaxRetries",void 0),Nn(this,"delaySettings",void 0),Nn(this,"statusCodeToMaxRetries",void 0),this.defaultConfig=Pf,this.customConfig=t,this.defaultMaxRetries=null!==(r=null===t||void 0===t?void 0:t.defaultMaxRetries)&&void 0!==r?r:Pf.defaultMaxRetries,this.delaySettings=In(In({},Pf.delaySettings),null!==(n=null===t||void 0===t?void 0:t.delaySettings)&&void 0!==n?n:{}),this.statusCodeToMaxRetries=new Map,this.processRules(Pf.rules),null!==t&&void 0!==t&&t.rules&&t.rules.length>0&&this.processRules(t.rules)}var t,r,n;return t=e,(r=[{key:"processRules",value:function(e){if(e){var t,r=An(e);try{for(r.s();!(t=r.n()).done;){var n,i=t.value,o=An(i.statusCodes);try{for(o.s();!(n=o.n()).done;){var a=n.value;this.statusCodeToMaxRetries.set(a,i.maxRetries)}}catch(u){o.e(u)}finally{o.f()}}}catch(u){r.e(u)}finally{r.f()}}}},{key:"getMaxRetriesForStatus",value:function(e){var t;return null!==(t=this.statusCodeToMaxRetries.get(e))&&void 0!==t?t:this.defaultMaxRetries}},{key:"canRetry",value:function(e,t){return t<this.getMaxRetriesForStatus(e)}},{key:"getDefaultMaxRetries",value:function(){return this.defaultMaxRetries}},{key:"calculateDelay",value:function(e){if(!e)return 0;var t=this.delaySettings,r=t.baseDelayMs,n=t.factor,i=t.maxDelayMs;return(e<10?Math.pow(2,e)*r:i)*(1+(2*Math.random()-1)*n)}},{key:"getDebugInfo",value:function(){var e={};return this.statusCodeToMaxRetries.forEach((function(t,r){e[r]=t})),{defaultConfig:this.defaultConfig,customConfig:this.customConfig,statusToMaxRetries:e,defaultMaxRetries:this.defaultMaxRetries,delaySettings:this.delaySettings}}}])&&Dn(t.prototype,r),n&&Dn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Lf=r(67767),jf=r(72573),If=(0,vf.yd)(self)||(0,vf.VY)(self),Df={start:Math.abs(0),end:Math.abs(0),number:Math.max(Math.floor(0)),isInitSegment:!1,bitrate:0,trackId:"unknown",width:0,height:0,originalStart:0},Nf=function(e){function t(e){var r,n=e.timeline,i=e.mediaState,a=e.abr,u=e.segmentFetcher,c=e.bufferGoal,s=e.bandwidthEstimator,l=e.ttfbEstimator,f=e.sourceIndex,h=e.isLowMemoryMode,d=void 0!==h&&h,p=e.getMSEBuffer,y=e.getMseBufferGoal,v=e.retryManager,m=e.baseUrlManager;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qn(Xn(r=o.call(this)),"segmentFetcher",void 0),Qn(Xn(r),"abr",void 0),Qn(Xn(r),"timeline",void 0),Qn(Xn(r),"mediaState",void 0),Qn(Xn(r),"bandwidthEstimator",void 0),Qn(Xn(r),"ttfbEstimator",void 0),Qn(Xn(r),"bufferGoal",void 0),Qn(Xn(r),"baseUrlManager",void 0),Qn(Xn(r),"trackToFetchFailuresCount",new Map),Qn(Xn(r),"isDestroyed",!1),Qn(Xn(r),"inProgress",!1),Qn(Xn(r),"segmentsInProgress",{video:[],audio:[],text:[]}),Qn(Xn(r),"sourceIndex",null),Qn(Xn(r),"isLowMemoryMode",void 0),Qn(Xn(r),"getMSEBuffer",void 0),Qn(Xn(r),"getMseBufferGoal",void 0),Qn(Xn(r),"retryManager",void 0),Qn(Xn(r),"attemptsMap",new Map),Qn(Xn(r),"lastErrorTypeMap",new Map),Qn(Xn(r),"config",{segmentStreaming:!0,circularBuffering:!1}),Qn(Xn(r),"defineTracksMeta",(function(e,t,n){if(!r.canStartDownload(n))return[];var i,o;if(Fn({circularBufferingFromConfig:r.config.circularBuffering,loop:r.mediaState.loop,isStaticPlaylist:!r.timeline.getIsDynamic(),isLowMemoryMode:r.isLowMemoryMode})){var a=r.timeline.getEndTimeForType(n);if(!a)return[];if(-1===(i=Mn(e.effectiveRanges,t,a,!0)))return[];o=i<t?a-t+i:i-t}else{var u=r.mediaState.duration;if(-1===(i=Mn(e.effectiveRanges,t,1e3*u,!1,r.isLowMemoryMode?100:void 0)))return[];o=i-t}if(r.checkIsFullBuffer(o,n,e))return[];var c=r.isLowMemoryMode&&i!==t?sn(i,r.timeline.getMaxSegmentDuration()):i,s=r.timeline.getSegmentsForTracks(c,n);return r.isLowMemoryMode?s.filter((function(e){return e.end>c})):s})),Qn(Xn(r),"bufferGoalBytes",(0,_l.jS)("web_yasp_buffer_goal_bytes_size")),r.timeline=n,r.mediaState=i,r.abr=a,r.segmentFetcher=u,r.bandwidthEstimator=s,r.ttfbEstimator=l,r.bufferGoal=1e3*c,r.sourceIndex=f,r.isLowMemoryMode=d,r.getMSEBuffer=p,r.getMseBufferGoal=y,r.baseUrlManager=m,r.retryManager=v,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zn(e,t)}(t,e);var r,n,i,o=Kn(t);return r=t,i=[{key:"syncSelectedSegments",value:function(e,t){var r=["audio","video","text"],n=Gn({},e);return r.forEach((function(i){var o=e[i];if(o){var a=1/0;r.forEach((function(r){var n,o;if(r!==i){var u=null!==(n=null===(o=e[r])||void 0===o?void 0:o.end)&&void 0!==n?n:0,c=t[r],s=null===c||void 0===c?void 0:c.reduce((function(e,t){var r=t.segment;return Math.max(e,r.end)}),0),l=Math.max(s,u);l&&(a=Math.min(a,l))}})),isFinite(a)&&o.start>=a&&(n[i]=void 0)}})),n}}],(n=[{key:"configure",value:function(e){var t,r;this.config.segmentStreaming=null!==(t=e.segmentStreaming)&&void 0!==t?t:this.config.segmentStreaming,this.config.circularBuffering=null!==(r=e.circularBuffering)&&void 0!==r?r:this.config.circularBuffering}},{key:"abort",value:function(){var e=this;["video","audio","text"].forEach((function(t){e.segmentsInProgress[t].forEach((function(e){return e.abort()}))}))}},{key:"setSourceIndex",value:function(e){this.sourceIndex=e}},{key:"addSourceIndexInUrl",value:function(e){if(!this.sourceIndex)return e;var t=new Lf(e);return t.searchParams.set(kf.g,this.sourceIndex),t.href}},{key:"abortUseless",value:function(){var e=this;["video","audio","text"].forEach((function(t){return e.abortUselessForType(t)}))}},{key:"abortUselessForType",value:function(e){var t=this,r=this.mediaState.currentTime,n=1e3*(null!==r&&void 0!==r?r:-1);this.segmentsInProgress[e]=this.segmentsInProgress[e].filter((function(r){var i=r.abort,o=r.segment,a=r.trackId;if(o.isInitSegment)return!0;var u=o.start<=n&&n<o.end;return!(!t.timeline.checkTrackAvailableToLoad(a,e)||!u)||(i(),!1)}))}},{key:"run",value:function(){var e=this,t=[],r=function(){return!(e.segmentsInProgress.video.length>0||e.segmentsInProgress.audio.length>0||e.segmentsInProgress.text.length>0)};try{r(),this.runInternal(t),r()&&(this.inProgress=!1,this.emit("NoSegmentsInProgress"))}finally{jf.all(t.map((function(e){return e.catch(Js.Z)}))).then((function(){t.length>0&&e.emit("BandwidthEstimateUpdate",e.bandwidthEstimator.getBandwidthEstimate())}))}}},{key:"setVideoState",value:function(e){this.mediaState=e}},{key:"setBufferGoal",value:function(e){this.bufferGoal=1e3*e}},{key:"canStartDownload",value:function(e){if(!this.segmentsInProgress[e].length)return!0;var t=this.segmentsInProgress,r=t.audio,n=t.video,i=t.text,o=this.ttfbEstimator.getMinTtfbEstimate({value:0,source:"default"}),a=r.concat(n,i);return If?0===a.length:a.every((function(e){return e.segment.getExpectedTimeToLoad()<=o.value}))}},{key:"actualizeProgress",value:function(){if((0,_l.RW)("yasp_abr_loading_segment")){var e=Math.max(this.segmentsInProgress.audio.length,this.segmentsInProgress.video.length,this.segmentsInProgress.text.length);if(0!==e){for(var t={video:e,audio:e,text:e},r=0;r<e;r++){var n,i,o,a,u,c,s,l=null===(n=this.segmentsInProgress.audio[r])||void 0===n?void 0:n.segment,f=null===(i=this.segmentsInProgress.video[r])||void 0===i?void 0:i.segment,h=null===(o=this.segmentsInProgress.text[r])||void 0===o?void 0:o.segment,d=this.abr.filterSegments(this.timeline.getSegmentsForTracks(null!==(a=null===l||void 0===l?void 0:l.start)&&void 0!==a?a:null,"audio"),this.timeline.getSegmentsForTracks(null!==(u=null===f||void 0===f?void 0:f.start)&&void 0!==u?u:null,"video"),this.timeline.getSegmentsForTracks(null!==(c=null===h||void 0===h?void 0:h.start)&&void 0!==c?c:null,"text"),this.mediaState);d.audio&&l&&d.audio!==l&&l.getExpectedTimeToLoad()>d.audio.getExpectedTimeToLoad()&&(t.audio=Math.min(t.audio,r)),d.video&&f&&d.video!==f&&f.getExpectedTimeToLoad()>d.video.getExpectedTimeToLoad()*(0,_l.jS)("yasp_videosegment_expected_load_time_multiplier")&&(t.video=Math.min(t.video,r)),(null===h||void 0===h?void 0:h.getExpectedTimeToLoad())>(null===(s=d.text)||void 0===s?void 0:s.getExpectedTimeToLoad())&&(t.text=Math.min(t.text,r))}for(var p=e-1;p>=0;p--)this.segmentsInProgress.audio[p]&&t.audio<=p&&this.segmentsInProgress.audio[p].abort(),this.segmentsInProgress.video[p]&&t.video<=p&&this.segmentsInProgress.video[p].abort(),this.segmentsInProgress.text[p]&&t.text<=p&&this.segmentsInProgress.text[p].abort()}}}},{key:"runInternal",value:function(e){var r,n,i=this,o=this.mediaState,a=o.currentTime,u=o.duration,c=o.buffering,s=o.loop;if(null!==a&&(this.actualizeProgress(),c||!(u<a+.1))){var l=1e3*a,f=this.timeline.getBufferedRanges(!0),h=this.getBuffersInfo(f,l),d=this.defineTracksMeta(h.video,l,"video"),p=this.defineTracksMeta(h.audio,l,"audio"),y=this.defineTracksMeta(h.text,l,"text");if(d.length||p.length||y.length){var v=t.syncSelectedSegments(this.abr.filterSegments(p,d,y,this.mediaState),this.segmentsInProgress),m=void 0!==v.video&&(null===(r=v.video)||void 0===r?void 0:r.height)===(null===(n=d[d.length-1])||void 0===n?void 0:n.height),g=this.baseUrlManager.getBaseUrl();g?(0,wl.J)(v).forEach((function(t){var r=Hn(t,2),n=r[0],o=r[1];if(o){var u=o.trackId,c=i.timeline.findTrackById(u,n);if(c){var h,d,p,y=0;if(Number.isFinite(a)){var v=Fn({circularBufferingFromConfig:i.config.circularBuffering,loop:s,isStaticPlaylist:!i.timeline.getIsDynamic(),isLowMemoryMode:i.isLowMemoryMode}),b=Mn(f[n],l,1e3*i.mediaState.duration,v);-1!==b&&(h=(b-l)/1e3,d=3,p=Math.pow(10,d),y=Math.round((h+Of.I)*p)/p)}if(!c.getInitSegment()&&c.initialization){var w=new pl(Gn(Gn({},Df),{},{isInitSegment:!0})),E={baseUrl:g,pathname:c.getSegmentPathname(w)},_=i.fetchSegment(E,u,n,w,y,m);c.appendSegment(w),e.push(_.catch((function(e){w.fail();var t=Mr(e)?e:new Qs.w({code:"YASP_UNKNOWN_ERROR",details:{error:e,blacklist:i.baseUrlManager.getBlacklist()},isFatal:!0,category:Xs.q.NETWORK_MEDIA});i.emitError(t)})))}if(!c.hasSegment(o.number)){var O=c.getSegmentPathname(o),S={baseUrl:g,pathname:O},k={start:o.start,end:o.end,number:o.number,isInitSegment:!1,bitrate:c.bitrate,trackId:c.id,width:"width"in c?c.width:0,height:"height"in c?c.height:0,originalStart:o.originalStart,duration:o.duration,isEncrypted:!1,startByteWithOffset:0,endByteWithOffset:Number.MAX_SAFE_INTEGER},T={};if(k.isEncrypted=o.isEncrypted,o.endByteWithOffset!==Number.MAX_SAFE_INTEGER&&o.startByteWithOffset){k.startByteWithOffset=o.startByteWithOffset,k.endByteWithOffset=o.endByteWithOffset;var R=Pn({start:o.startByteWithOffset,end:o.endByteWithOffset},o.isEncrypted);T.Range="bytes=".concat(R.start,"-").concat(R.end)}var x=new pl(k),P=i.fetchSegment(S,u,n,x,y,m,T);c.appendSegment(x),e.push(P.catch((function(e){x.fail();var t=Mr(e)?e:new Qs.w({code:"YASP_UNKNOWN_ERROR",details:{error:e,blacklist:i.baseUrlManager.getBlacklist()},isFatal:!0,category:Xs.q.NETWORK_MEDIA});i.emitError(t)})))}}}})):this.emitError(new Qs.w({code:"YASP_NO_BASEURLS",details:{},isFatal:!0,category:Xs.q.MEDIA}))}}}},{key:"emitError",value:function(e){"YASP_OPERATION_ABORTED"!==e.code&&this.emit("Error",e)}},{key:"fetchSegment",value:function(e,t,r,n,i,o){var a=this,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=!1;this.handleInProgressSegment(r,n,t,(function(){c=!n.isInitSegment,a.inProgress||(a.inProgress=!0,a.emit("SegmentInProgress"))}));var s=new jf((function(s,l){var f="".concat(t,"/").concat(n.number),h=a.trackToFetchFailuresCount.get(f)||0,d=new Lf(e.pathname,e.baseUrl);i>=0&&a.config.segmentStreaming&&d.searchParams.append("bufSize",String(i)),u.Range&&d.searchParams.append("seg",String(n.number)),(0,Sf._)(a.retryManager.calculateDelay(h)).then((function(){if(!a.isDestroyed){var i=0;i=(0,_l.RW)("web_yasp_static_timeout_for_low_latency")&&a.timeline.isLowLatencyLive()?1e4:(o?1e4:Rf)+a.ttfbEstimator.getTtfbEstimate({value:1e3,source:"default"}).value,i=Math.max(Rf,i);var p=(0,tf.c)(a.addSourceIndexInUrl(d.toString())),y=a.baseUrlManager.getBlacklist(),v=a.timeline.findTrackById(t,r),m=a.segmentFetcher.fetchChunkStream(p,n,r,v,u),g=m.chunkStream,b=m.promise,w=m.requestState,E=m.abort,_=m.requestHeaders,O=m.requestOptions,S=(0,dl.u)();setTimeout((function(){if(!n.finished&&!n.failed){if((0,_l.RW)("web_incorrect_bitrate_cancel_timeout")){var e=S()/1e3;if(8*w.downloadedBytes/e>n.bitrate)return void a.emitError(new Qs.w({code:"YASP_INCORRECT_BITRATE",details:{url:p,bitrate:n.bitrate},isFatal:!1,category:Xs.q.MEDIA}))}O.timeout=i,E("timeout")}}),i),c?E():a.handleInProgressSegment(r,n,t,E);var k={url:p,requestHeaders:_,requestOptions:O};b.then((function(t){var r=t.status,i=t.headers;if(k.responseHeaders=i,k.status=r,r>=200&&r<300||304===r){g.on("Data",(function(e){(0,Yl.Y)((function(){return n.append(e)}))})),g.on("Close",(function(){n.finish(),s()}));var o=function(){if(w.canceled)return n.fail(),s();if(!n.finished){var t=w.timeout?"YASP_FETCH_SEGMENT_TIMEOUT":"YASP_FETCH_SEGMENT_HTTP_ERROR",r=w.timeout?"Request timed out":"Network Error",i=w.timeout?Xs.q.NETWORK_TIMEOUT:Xs.q.NETWORK_MEDIA;a.baseUrlManager.banUrl(e.baseUrl),l(new Qs.w({code:t,details:Gn(Gn({},k),{},{blacklist:{before:y,after:a.baseUrlManager.getBlacklist()},downloadedBytes:w.timeout?w.downloadedBytes:void 0}),message:r,category:i,isFatal:!1}))}};return g.on("Destroy",o),g.resume(),a.trackToFetchFailuresCount.delete(f),void(g.isDestroyed()&&o())}a.trackToFetchFailuresCount.set(f,h+1);var u=a.retryManager.canRetry(r,h);xf.includes(r)||a.baseUrlManager.banUrl(e.baseUrl),l(0===r?new Qs.w({code:"YASP_FETCH_SEGMENT_HTTP_ERROR",message:"Network Error",details:Gn(Gn({},k),{},{blacklist:{before:y,after:a.baseUrlManager.getBlacklist()}}),category:Xs.q.NETWORK_MEDIA,isFatal:!u}):new Qs.w({code:"YASP_FETCH_SEGMENT_BAD_HTTP_STATUS",message:"Error: ".concat(r),details:Gn(Gn({},k),{},{blacklist:{before:y,after:a.baseUrlManager.getBlacklist()}}),category:Xs.q.NETWORK_MEDIA,isFatal:!u}))})).catch((function(t){if(w.canceled)l(new Qs.w({code:"YASP_OPERATION_ABORTED",details:Gn(Gn({},k),{},{blacklist:{before:y,after:a.baseUrlManager.getBlacklist()}}),message:t.message,category:Xs.q.NETWORK_MEDIA,isFatal:!1}));else{var r="Request timed out"===t.message,n=!r&&h>=a.retryManager.getDefaultMaxRetries();a.trackToFetchFailuresCount.set(f,h+1),a.baseUrlManager.banUrl(e.baseUrl),l(new Qs.w({code:r?"YASP_FETCH_SEGMENT_TIMEOUT":"YASP_FETCH_SEGMENT_HTTP_ERROR",details:Gn(Gn({},k),{},{blacklist:{before:y,after:a.baseUrlManager.getBlacklist()},downloadedBytes:r?w.downloadedBytes:void 0}),message:t.message,category:r?Xs.q.NETWORK_TIMEOUT:Xs.q.NETWORK_MEDIA,isFatal:n}))}}))}}))}));return s}},{key:"handleInProgressSegment",value:function(e,t,r,n){var i=this;if(!t.finished&&!t.failed&&(!(0,_l.RW)("yasp_abr_loading_segment")||!t.isInitSegment)){var o=this.segmentsInProgress[e].find((function(e){return e.segment.number===t.number&&e.trackId===r}))||function(){var o={abort:n,segment:t,trackId:r};i.segmentsInProgress[e].push(o);var a=function r(){i.segmentsInProgress[e]=i.segmentsInProgress[e].filter((function(e){return e!==o})),t.off("Failed",r),t.off("Finish",r),t.off("Destroy",r)};return t.once("Failed",a),t.once("Finish",a),t.once("Destroy",a),o}(),a=o.abort;o.abort=function(){a(),n()}}}},{key:"checkIsFullBuffer",value:function(e,t,r){if(this.bufferGoalBytes>0&&this.timeline.getTotalRawSize()>=this.bufferGoalBytes)return this.emit("OutOfBytesLimit"),!0;if(this.isLowMemoryMode&&"text"!==t){var n=this.timeline.getMaxSegmentDuration(),i=1e3*this.getMseBufferGoal();return null===r.mseRanges?e>=n:e>=Math.min(e+n,i)||0===i}return e>=this.bufferGoal||0===this.bufferGoal}},{key:"getDebugInfo",value:function(){return{isLowMemoryMode:this.isLowMemoryMode,bufferGoal:this.bufferGoal,hostnameBlackList:this.baseUrlManager.getBlacklist(),attemptsMap:Array.from(this.attemptsMap.entries()).reduce((function(e,t){var r=Hn(t,2),n=r[0],i=r[1];return e[n]=i,e}),{}),lastErrorTypeMap:Array.from(this.lastErrorTypeMap.entries()).reduce((function(e,t){var r=Hn(t,2),n=r[0],i=r[1];return e[n]=i,e}),{}),segmentsInProgress:Object.entries(this.segmentsInProgress).reduce((function(e,t){var r=Hn(t,2),n=r[0],i=r[1];return e[n]=i.map((function(e){return e.segment.getDebugInfo()})),e}),{}),sourceIndex:this.sourceIndex,inProgress:this.inProgress}}},{key:"destroy",value:function(){this.isDestroyed=!0,this.abort(),Yn(Jn(t.prototype),"destroy",this).call(this)}},{key:"getBuffersInfo",value:function(e,t){return{video:this.getBufferInfoForType("video",e.video,t),audio:this.getBufferInfoForType("audio",e.audio,t),text:this.getBufferInfoForType("text",e.text,t)}}},{key:"getBufferInfoForType",value:function(e,t,r){var n="text"!==e&&this.isLowMemoryMode?this.getMSEBuffer(e,r):null;return{timelineRanges:t,mseRanges:n,effectiveRanges:null!==n&&void 0!==n?n:t}}}])&&Wn(r.prototype,n),i&&Wn(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M),Mf=function(){function e(t,r,n,i){var o,a,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeline=t,this.videoState=r,this.backWatch=n,this.getBufferGoal=i,u={circularBuffering:!1,isLowMemoryMode:!1},(a="config")in(o=this)?Object.defineProperty(o,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):o[a]=u}var t,r,n;return t=e,(r=[{key:"configure",value:function(e){var t,r;this.config.circularBuffering=null!==(t=e.circularBuffering)&&void 0!==t?t:this.config.circularBuffering,this.config.isLowMemoryMode=null!==(r=e.isLowMemoryMode)&&void 0!==r?r:this.config.isLowMemoryMode}},{key:"getTotalExpectedBufferSize",value:function(){return this.backWatch+this.getBufferGoal()}},{key:"setBackWatch",value:function(e){this.backWatch=e}},{key:"setVideoState",value:function(e){this.videoState=e}},{key:"run",value:function(e){if(null!==this.videoState.currentTime){var t=null!==e&&void 0!==e?e:this.videoState.currentTime,r=this.videoState,n=r.loop,i=r.duration,o=this.config,a=o.circularBuffering,u=o.isLowMemoryMode;if(Fn({circularBufferingFromConfig:a,loop:n,isStaticPlaylist:!this.timeline.getIsDynamic(),isLowMemoryMode:u})){var c=1e3*this.getBufferGoal(),s=1e3*this.backWatch,l=1e3*t,f=c-(1e3*i-l);if(f>0){var h=f,d=Math.max(l-s,f);return void this.timeline.clear(h,d)}}var p=Math.max(1e3*(t-this.backWatch),0),y=1e3*(t+this.getBufferGoal());this.timeline.clear(0,p),this.timeline.clear(y,Number.MAX_SAFE_INTEGER)}}},{key:"onOutOfBytesLimit",value:function(){if(null!==this.videoState.currentTime){var e=this.videoState,t=e.currentTime,r=e.loop,n=e.duration,i=this.config,o=i.circularBuffering,a=i.isLowMemoryMode,u=1e3*t,c=u-5e3;if(Fn({circularBufferingFromConfig:o,loop:r,isStaticPlaylist:!this.timeline.getIsDynamic(),isLowMemoryMode:a})){var s=1e3*n,l=1e3*this.getBufferGoal()-(s-u);if(l>0){var f=l,h=Math.max(c,l);return void this.timeline.clear(f,h)}}this.timeline.clear(0,Math.max(c,0))}}},{key:"getDebugInfo",value:function(){return{backWatch:this.backWatch,bufferGoal:this.getBufferGoal(),loop:this.videoState.loop}}}])&&Zn(t.prototype,r),n&&Zn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Cf=r(11638),Ff=r(54640),Bf=r(79916),Uf=r(85084),Gf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;oi(this,e),ui(this,"buffer",void 0),ui(this,"bufferLength",0),ui(this,"processedLength",0),ui(this,"growthFactor",void 0),ui(this,"expectedSize",void 0),this.growthFactor=r,"number"===typeof t?(this.expectedSize=t,this.buffer=new Uint8Array(this.expectedSize),this.bufferLength=0):(this.buffer=t,this.bufferLength=t.length,this.expectedSize=this.bufferLength)}var t,r,n;return t=e,(r=[{key:"getFullBuffer",value:function(){return this.buffer.subarray(0,this.bufferLength)}},{key:"append",value:function(e){var t=e.length,r=this.bufferLength+t;r>this.buffer.length&&this.resizeBuffer(r),this.buffer.set(e,this.bufferLength),this.bufferLength+=t}},{key:"resizeBuffer",value:function(e){var t=this.buffer.length;for(this.expectedSize&&(t=this.expectedSize);t<e;)t*=this.growthFactor;var r=new Uint8Array(t);r.set(this.buffer,0),this.buffer=r}},{key:"subarray",value:function(e,t){var r=void 0!==t?(0,Uf.u)(t,e,this.bufferLength):t;return this.buffer.subarray(e,r)}},{key:"length",get:function(){return this.bufferLength}},{key:"getUnprocessedData",value:function(e){var t=void 0!==e?this.processedLength+e:this.bufferLength;return this.subarray(this.processedLength,t)}},{key:"markProcessed",value:function(e){this.processedLength+=e}},{key:"getProcessedLength",value:function(){return this.processedLength}},{key:"replaceSubarray",value:function(e,t){return this.buffer.set(t,e),this.buffer.subarray(e,e+t.length)}}])&&ai(t.prototype,r),n&&ai(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Hf=r(72573),Vf=function(e){function t(e,r,n){var i,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return pi(this,t),Ei(bi(i=o.call(this)),"fetcher",void 0),Ei(bi(i),"emsgSchemeIdUris",{audio:new Set,video:new Set}),Ei(bi(i),"decoder",void 0),Ei(bi(i),"startProcess",void 0),Ei(bi(i),"isLowMemoryMode",void 0),Ei(bi(i),"segmentStreaming",!0),i.fetcher=e,i.decoder=r,i.startProcess=n,i.isLowMemoryMode=a,i}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vi(e,t)}(t,e);var r,n,i,o=mi(t);return r=t,(n=[{key:"setSegmentStreaming",value:function(e){this.segmentStreaming=e}},{key:"setKeys",value:function(e){this.decoder.setKeys(e)}},{key:"fetchChunkStream",value:function(e,t,r,n){var i=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};t.waitingStarted();var a=null,u=0,c=this.isLowMemoryMode||!this.segmentStreaming,s={headers:o,onprogress:c?function(e){if(a){var t=e.loaded-u;i.fetcher.progress(a(),t,!1),u=e.loaded,a=(0,dl.u)()}}:void 0},l=this.fetcher.fetchDataStream(e,s,c),f=l.response,h=l.requestState,d=l.abort,p=l.requestHeaders,y=l.requestOptions,v=new sl.h,m=new Hf(function(){var u=di(si().mark((function u(s,l){var h,p,y,m,g,b,w;return si().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return h=(0,dl.u)(),u.prev=1,u.next=4,f;case 4:p=u.sent,c&&(a=(0,dl.u)()),y=(p.headers["content-type"]||"").split(";"),m=li(y,1),g=m[0],b=parseInt(p.headers["content-length"]||"",10),t.setExpectedSize(b),t.loadingStarted(),u.t0=g.trim(),u.next="application/mp4"===u.t0||"text/vtt"===u.t0?13:"audio/mp4"===u.t0||"video/mp4"===u.t0?15:17;break;case 13:return i.processVtt(p.body,v),u.abrupt("break",25);case 15:return i.processMp4({readableStream:p.body,writableStream:v,getStartTime:h,segment:t,type:r,abort:d,track:n,url:e,headers:o,isWholeSegmentFetching:c}),u.abrupt("break",25);case 17:w=(0,Ff.J)(e.toLocaleLowerCase()),u.t1=w,u.next="vtt"===u.t1?21:("m4s"===u.t1||u.t1,23);break;case 21:return i.processVtt(p.body,v),u.abrupt("break",25);case 23:return i.processMp4({readableStream:p.body,writableStream:v,getStartTime:h,segment:t,type:r,abort:d,track:n,url:e,headers:o,isWholeSegmentFetching:c}),u.abrupt("break",25);case 25:s({status:p.status,headers:p.headers}),u.next=32;break;case 28:u.prev=28,u.t2=u.catch(1),v.destroy(),l(u.t2);case 32:case"end":return u.stop()}}),u,null,[[1,28]])})));return function(e,t){return u.apply(this,arguments)}}());return{promise:m,chunkStream:v.asReadable(),requestState:h,abort:d,requestHeaders:p,requestOptions:y}}},{key:"processMp4",value:function(e){var t,r,n,i,o,a=this,u=e.readableStream,c=e.writableStream,s=e.getStartTime,l=e.segment,f=e.type,h=e.abort,d=e.track,p=e.url,y=e.headers,v=e.isWholeSegmentFetching,m=this.startProcess({type:f,number:l.number,isInit:l.isInitSegment,id:d.id}),g=[],b=0,w=0,E=0,_=!0,O=!0,S=0,k=function(){_||0===w||v||(O&&(g.length?(a.filterSpikes(g).forEach((function(e){var t=e.time,r=e.size;a.fetcher.progress(t,r,!0)})),g=[]):a.fetcher.progress(w,E,!0)),w=0,E=0)},T=s,R=0,x=0,P=!1,A=function(e,u){t?t.append(e):(t=new Gf(v?e:l.expectedSize||void 0),l.setChunkBuffer(t),v||t.append(e));var c=t.getUnprocessedData(),s=!1,h=0,d=function(e){h=e.size+e.start,s=!0,x++};if((new Cf.p).box("uuid",(function(e){if(e.isComplete){h=e.size+e.start,s=!0;var t=e.reader.readUUID(),a=e.reader.readUint64();"c4eac1fc-0ad8-4676-9656-69552eb3252f"===t&&_?(r=a,n=Date.now(),i=n,_=!1):"bcfca253-398b-4a5b-9a92-ec8f7d89e61d"===t&&(o=a-r,r=a)}})).box("moov",(function(e){e.isComplete&&(h=e.size+e.start,s=!0,Cf.p.children(e))})).box("mvex",(function(){P=!0})).box("moof",(function(e){e.isComplete&&(E+=e.size)})).box("mdat",(function(e){if(_){if(!e.isComplete)return;d(e)}else{if(O){O=!1,S=e.loadedSize;var t=Date.now(),r=t-i;i=t,r>=o?(w+=r-o,E+=e.loadedSize):o<50&&(w+=r,E+=e.loadedSize)}else{var a=Date.now()-n;w+=a;var u=e.loadedSize-S;S=e.loadedSize;var c=u;if(E+=c,!l.isInitSegment)if(0===a)if(g.length){var s=g[g.length-1];s.size=s.size+c}else b=c;else g.push({time:a,size:c+b}),b=0}n=Date.now(),e.isComplete&&(O=!0,l.isInitSegment||k(),d(e))}})).fullBox("emsg",(function(e){e.isComplete&&(a.parseEMSG(e,l,f),h=e.size+e.start,s=!0)})).parse(c,!0,!0),function(e){if(_&&!v)if(R+=e.length,a.fetcher.isLL()){var t=T();(t>=100||R>=16e3)&&(a.fetcher.progress(t,R),T=(0,dl.u)(),R=0)}else if(R>0){var r=T();a.fetcher.progress(r,R),T=(0,dl.u)(),R=0}}(e),k(),s){a.validateInitSegment(l,f,p,Boolean(x),P);var y=t.getUnprocessedData(h);t.markProcessed(h),u(y)}},L=[];if(l.isEncrypted){var j=new Uint8Array;u.on("Data",(function(e){j=fl.P.concat(j,e)})),u.on("Close",di(si().mark((function e(){var t,r;return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.decoder.decode(j,"audio",l,d,ni(y.Range));case 2:t=e.sent,r=ii(t,{start:l.startByteWithOffset,end:l.endByteWithOffset},y.Range),A(r,(function(e){try{c.write(e)}catch(t){if(t instanceof RangeError)return h(),void a.emit("BufferAllocationError",{error:t,type:"audio"});throw t}})),c.close();case 6:case"end":return e.stop()}}),e)}))))}else u.on("Data",(function(e){l.loadedRawSize+=e.byteLength,A(e,(function(e){if("text"!==f){var r=a.decoder.decode(e,f,l,d).then((function(r){if(r.buffer!==e.buffer){var n=e.byteOffset,i=t.replaceSubarray(n,r);c.write(i)}else c.write(r)})).catch((function(e){if(e instanceof RangeError)return h(),void a.emit("BufferAllocationError",{error:e,type:f});throw e}));L.push(r)}else c.write(e)}))})),u.on("Close",di(si().mark((function e(){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.end(),a.emitSegmentLoaded(f,l,x,d.id),e.prev=2,e.next=5,Hf.all(L);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),c.destroy();case 10:c.close();case 11:case"end":return e.stop()}}),e,null,[[2,7]])}))));u.on("Destroy",di(si().mark((function e(){return si().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hf.all(L).catch(Js.Z);case 2:m.end("not complete"),c.destroy();case 4:case"end":return e.stop()}}),e)})))),u.resume()}},{key:"validateInitSegment",value:function(e,t,r,n,i){if(e.isInitSegment&&"text"!==t)return n?this.emit("Error",new Qs.w({code:"YASP_INVALID_INIT_SEGMENT",message:"Unexpected mdat-box in initialization segment",details:{type:t,url:r},isFatal:!0,category:Xs.q.MEDIA})):i?void 0:this.emit("Error",new Qs.w({code:"YASP_INVALID_INIT_SEGMENT",message:"Expect mvex-box in initialization segment, but not found",details:{type:t,url:r},isFatal:!0,category:Xs.q.MEDIA}))}},{key:"emitSegmentLoaded",value:function(e,t,r,n){"text"===e||t.isInitSegment||this.emit("SegmentLoaded",{type:e,cmaf:r>1,number:t.number,isInit:t.isInitSegment,id:n})}},{key:"processVtt",value:function(e,t){var r=new Uint8Array(0);e.on("Data",(function(e){r=fl.P.concat(r,e)})),e.on("Close",(function(){t.write(r),t.close()})),e.on("Destroy",(function(){t.destroy()})),e.resume()}},{key:"setEmsgSchemeIdUris",value:function(e){this.emsgSchemeIdUris=null!==e&&void 0!==e?e:this.emsgSchemeIdUris}},{key:"parseEMSG",value:function(e,t,r){if("text"!==r){var n=t.start/1e3,i=e.reader.readTerminatedString(),o=e.reader.readTerminatedString(),a=e.reader.readUint32(),u=e.reader.readUint32(),c=e.reader.readUint32(),s=e.reader.readUint32(),l=e.reader.readBytes(e.reader.getLength()-e.reader.getPosition()),f=n+u/a,h=f+c/a,d=t.duration/1e3;if(this.emsgSchemeIdUris[r].has(i))if("urn:mpeg:dash:event:2012"===i)this.emit("ManifestUpdateRequired");else{var p={startTime:f,endTime:h,schemeIdUri:i,value:o,timescale:a,presentationTimeDelta:u,eventDuration:c,id:s,segmentDuration:d,messageData:l};this.emit("EmsgDetected",p)}}}},{key:"filterSpikes",value:function(e){if(e.length<2)return e;e.sort((function(e,t){return e.time-t.time}));var t=e[Math.floor(e.length/4)].time,r=e[Math.floor(e.length*(3/4))].time,n=r+3*(r-t);return e.filter((function(e){return e.time<n}))}}])&&yi(r.prototype,n),i&&yi(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M),Wf=r(72573),Yf=function(){function e(t,r,n,i,o){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mse=t,this.videoState=r,this.startProcess=i,this.timeline=o,Ti(this,"locked",!1),Ti(this,"backWatch",void 0),Ti(this,"isLowMemoryMode",void 0),this.backWatch=n.backWatch,this.isLowMemoryMode=null!==(a=n.isLowMemoryMode)&&void 0!==a&&a}var t,r,n,i,o;return t=e,(r=[{key:"setBackWatch",value:function(e){this.backWatch=e}},{key:"run",value:function(){var e=this;this.locked||(this.locked=!0,this.runInternal().catch(Js.Z).then((function(){e.locked=!1})))}},{key:"runInternal",value:(i=Oi().mark((function e(){var t,r;return Oi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("open"===this.mse.getReadyState()){e.next=2;break}return e.abrupt("return");case 2:if(null!==(t=this.videoState.currentTime)){e.next=5;break}return e.abrupt("return");case 5:if(r=Math.max(this.backWatch,this.timeline.getMaxSegmentDuration()/1e3),!(t<=r)){e.next=8;break}return e.abrupt("return");case 8:return e.abrupt("return",[this.clear(0,t-r)]);case 9:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Wf((function(r,n){function o(e){Si(u,r,n,o,a,"next",e)}function a(e){Si(u,r,n,o,a,"throw",e)}var u=i.apply(e,t);o(void 0)}))},function(){return o.apply(this,arguments)})},{key:"fullClear",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=["video","audio"],n=this.videoState.duration;if(null===t)return Wf.all(r.map((function(t){return e.mse.clearBuffer(t,0,n)})));var i=r.map((function(r){var i=function(){return e.mse.clearBuffer(r,0,n)},o=e.mse.getBufferedRangesByType(r);if((0,_l.RW)("yasp_no_source_abort_on_fake_seek"))return o.some((function(e){return e.start<=t&&e.end>=t}))?Wf.resolve():e.mse.clearBuffer(r,t,n);if((0,_l.RW)("web_yasp_low_memory_cleaning_in_normal_mode")||e.isLowMemoryMode){if(!o.length)return Wf.resolve();var a=o.findIndex((function(e){return e.start<=t+.1&&e.end>=t-.1}));return-1!==a?e.clearRangesExcept(r,o,a):i()}return i()}));return Wf.all(i)}},{key:"clearRangesExcept",value:function(e,t,r){var n=[],i=this.videoState.duration;if(r>0){var o=t[r-1];n.push(this.mse.clearBuffer(e,0,o.end))}if(r<t.length-1){var a=t[r+1];n.push(this.mse.clearBuffer(e,a.start,i))}return Wf.all(n)}},{key:"clear",value:function(e,t){if(!(e>=t)){var r=this.startProcess();return Wf.all([this.mse.clearBuffer("video",e,t),this.mse.clearBuffer("audio",e,t)]).finally((function(){r.end()}))}}},{key:"getDebugInfo",value:function(){return{locked:this.locked,isLowMemoryMode:this.isLowMemoryMode}}}])&&ki(t.prototype,r),n&&ki(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),qf=r(2705),zf=r(71294),Kf=r(81524),$f=r.n(Kf),Xf=$f().ru.yandex.videoplayer.multiplatform,Jf=function(){function e(){Bi(this,e),Hi(this,"getTime",(0,dl.u)())}return Gi(e,[{key:"getDurationMs",value:function(){return this.getTime()}}]),e}(),Qf=function(){function e(){Bi(this,e)}return Gi(e,[{key:"create",value:function(){return new Jf}}]),e}(),Zf=function(){function e(t,r){Bi(this,e),this.task=t,this.time=r,Hi(this,"intervalId",null)}return Gi(e,[{key:"start",value:function(){this.intervalId=setInterval(this.task,this.time)}},{key:"stop",value:function(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}}]),e}(),eh=function(){function e(){Bi(this,e)}return Gi(e,[{key:"create",value:function(e,t){return new Zf(e,t)}}]),e}(),th=function(){function e(t){Bi(this,e),this.fetcher=t,Hi(this,"progressListeners",new Map)}return Gi(e,[{key:"addResponseStartListener",value:function(e){this.fetcher.on("ResponseStart",e)}},{key:"removeResponseStartListener",value:function(e){this.fetcher.off("ResponseStart",e)}},{key:"addResponseEndListener",value:function(e){this.fetcher.on("ResponseEnd",e)}},{key:"removeResponseEndListener",value:function(e){this.fetcher.off("ResponseEnd",e)}},{key:"addProgressListener",value:function(e){var t=function(t){var r=t.time,n=t.size;e(new Xf.fetcher.BandwidthInfo(r,n))};this.progressListeners.set(e,t),this.fetcher.on("Progress",t)}},{key:"removeProgressListener",value:function(e){var t=this.progressListeners.get(e);void 0===t&&(this.progressListeners.delete(e),this.fetcher.off("Progress",t))}}]),e}(),rh=function(e){function t(){var e;if(Bi(this,t),Hi(Ci(e=r.call(this)),"fetcherProgressAccumulator",new Xf.fetcher.FetcherProgressAccumulator(new Qf,new Xf.fetcher.FetcherProgressAccumulatorParams((0,_l.RW)("disable_multiplatform_interval_task")?null:new eh,new Xf.fetcher.FetcherProgressAccumulatorExperimentalFlags(null,(0,_l.jS)("web_multiplatform_fpa_process_interval"),(0,_l.RW)("web_multiplatform_fpa_call_process_after_last_response_end"))))),Hi(Ci(e),"fetchers",new Map),Hi(Ci(e),"bandwidthInfoBatch",[]),(0,_l.RW)("web_yasp_enable_network_traces")&&e.on("Progress",(function(t){e.bandwidthInfoBatch.push(Ii(Ii({},t),{},{clientTimestamp:(0,zf.no)()})),e.bandwidthInfoBatch.length>=30&&(e.emit("NetworkTrace",e.bandwidthInfoBatch),e.bandwidthInfoBatch=[])})),e.fetcherProgressAccumulator.addProgressListener((function(t){var r=t.durationMs,n=t.sizeBytes;e.emit("Progress",{time:r,size:n})})),(0,_l.RW)("disable_multiplatform_interval_task")){var n=setInterval((function(){e.fetcherProgressAccumulator.process()}),100);e.once("Destroy",(function(){clearInterval(n)}))}return e.once("Destroy",(function(){e.fetcherProgressAccumulator.destroy()})),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Di(e,t)}(t,e);var r=Ni(t);return Gi(t,[{key:"appendFetcher",value:function(e){var t=new th(e);this.fetchers.set(e,t),this.fetcherProgressAccumulator.appendFetcher(t)}},{key:"removeFetcher",value:function(e){var t=this.fetchers.get(e);void 0!==t&&(this.fetchers.delete(t),this.fetcherProgressAccumulator.removeFetcher(t))}},{key:"isLL",value:function(){return!1}}]),t}(ll.M),nh=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=void 0,(r="trace")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this.trace=[]}var t,r,n;return t=e,(r=[{key:"getTrace",value:function(){return this.trace}},{key:"addDecision",value:function(e,t,r){var n,i=[],o=Wi(t);try{for(o.s();!(n=o.n()).done;){var a,u,c=n.value,s=null===(a=c.audio)||void 0===a?void 0:a.trackId,l=null===(u=c.video)||void 0===u?void 0:u.trackId;i.push({audio:s,video:l})}}catch(f){o.e(f)}finally{o.f()}return r?this.trace.push({name:e,result:i,input:r}):this.trace.push({name:e,result:i}),this.trace}}])&&Vi(t.prototype,r),n&&Vi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ih=[4320,2880,2160,1440,1080,720,480,360,240,144,0],oh=ih.reduce((function(e,t){return e[t]=t,e}),Object.create(null)),ah=function(e){function t(e){var r,n=e.rules,i=void 0===n?[]:n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ro(eo(r=o.call(this)),"rules",void 0),ro(eo(r),"videoSizes",void 0),ro(eo(r),"abrDecisionsHashCode",{video:"",audio:""}),ro(eo(r),"lastAbrDecisionsLog",null),r.rules=i,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ji(e,t)}(t,e);var r,n,i,o=Qi(t);return r=t,(n=[{key:"setVideoElementSizes",value:function(e){this.videoSizes=e}},{key:"filterSegments",value:function(e,t,r,n){var i,o=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=Ki(t,e,r),c=qi(e,t),s=new nh,l=this.rules.reduce((function(e,t){var r,a=t.filter(e,n,o.videoSizes);if(t.isCappingRule()){var c,l,f,h,d=t.filter(u,n,o.videoSizes),p=d[d.length-1];i?null!==(c=i.video)&&void 0!==c&&c.height&&null!==(l=p.video)&&void 0!==l&&l.height&&(null===(f=i.video)||void 0===f?void 0:f.height)>(null===(h=p.video)||void 0===h?void 0:h.height)&&(i=p):i=p}return"function"===typeof t.getInputData&&(r=t.getInputData()),s.addDecision(t.name,a,r),a}),u.reverse())[0]||u[u.length-1];if(a){var f={tracks:c,trace:s.getTrace()},h=zi(f,"audio"),d=zi(f,"video"),p={video:d||this.abrDecisionsHashCode.video,audio:h||this.abrDecisionsHashCode.audio};this.abrDecisionsHashCode.audio===p.audio&&this.abrDecisionsHashCode.video===p.video||(this.emit("AbrDecisionChange",f),this.abrDecisionsHashCode=p,this.lastAbrDecisionsLog=f)}return i&&this.emit("MaxCapAllowedVideoTrackUpdate",i),{audio:l.audio,video:l.video,text:null===r||void 0===r?void 0:r[0]}}},{key:"getDebugInfo",value:function(){return{rules:this.rules.map((function(e){return e.getDebugInfo()})),abrDecisionsLog:this.lastAbrDecisionsLog}}}])&&Xi(r.prototype,n),i&&Xi(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M),uh=r(58633),ch=$f().ru.yandex.videoplayer.multiplatform,sh=function(){function e(t){io(this,e),this.fetcher=t}return ao(e,[{key:"addRequestTtfbListener",value:function(e){this.fetcher.on("RequestTtfb",e)}},{key:"removeRequestTtfbListener",value:function(e){this.fetcher.off("RequestTtfb",e)}}]),e}(),lh=function(){function e(){io(this,e),no(this,"ttfbEstimator",new ch.estimate.TtfbEstimator),no(this,"fetchers",new Map)}return ao(e,[{key:"appendFetcher",value:function(e){var t=new sh(e);this.fetchers.set(e,t),this.ttfbEstimator.appendFetcher(t)}},{key:"removeFetcher",value:function(e){var t=this.fetchers.get(e);void 0!==t&&(this.fetchers.delete(t),this.ttfbEstimator.removeFetcher(t))}},{key:"getMinTtfbEstimate",value:function(e){var t=this.ttfbEstimator.getMinTtfbEstimate(e);return{value:t.value,source:t.source}}},{key:"getTtfbEstimate",value:function(e){var t=this.ttfbEstimator.getTtfbEstimate(e);return{value:t.value,source:t.source}}},{key:"hasGoodEstimate",value:function(){return this.ttfbEstimator.hasGoodEstimate()}},{key:"getDebugInfo",value:function(){return this.ttfbEstimator.getDebugInfo()}}]),e}(),fh=r(5486),hh=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bandwidthEstimator=t,this.ttfbEstimator=r,this.getRemainingTimeToStart=n,so(this,"name","NetworkParamsRule"),so(this,"inputData",{bandwidth:0,ttfb:0,playbackRate:0,bufferSize:0,remainingTimeToStart:null})}var t,r,n;return t=e,(r=[{key:"filter",value:function(e,t){var r;if(e.length<=1)return e;if((0,_l.RW)("yasp_abr_loading_segment")&&e.some(uo))return e;var n,i,o=this.bandwidthEstimator.getBandwidthEstimate().value,a=null===(r=this.ttfbEstimator)||void 0===r?void 0:r.getTtfbEstimate({value:1e3,source:"default"}).value,u=null===t.currentTime?0:(n=t,i=t.currentTime,cn((0,fh.w)(n),i)),c=this.getRemainingTimeToStart();if(this.inputData.remainingTimeToStart=c,this.inputData.bandwidth=o,this.inputData.ttfb=a,this.inputData.playbackRate=t.playbackRate,this.inputData.bufferSize=u,!(7.5>=u))return e;var s=Math.max(t.playbackRate,1),l=e.filter((function(e){var t,r,n,i,u=Math.max(null!==(t=null===(r=e.video)||void 0===r?void 0:r.duration)&&void 0!==t?t:0,null!==(n=null===(i=e.audio)||void 0===i?void 0:i.duration)&&void 0!==n?n:0)/1e3,l=e.bandwidth*u,f=.75*u/s,h=Math.min(null!==c?c-a/1e3:1/0,f);return o*h>l}));return 0===l.length?[e[0]]:l}},{key:"getInputData",value:function(){return this.inputData}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!1}}])&&co(t.prototype,r),n&&co(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),dh=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),go(vo(e=o.call(this)),"currentTime",void 0),go(vo(e),"duration",void 0),go(vo(e),"buffering",void 0),go(vo(e),"buffered",void 0),go(vo(e),"paused",void 0),go(vo(e),"loop",void 0),go(vo(e),"playbackRate",void 0),e.currentTime=null,e.duration=Math.max(0,0),e.buffering=!0,e.buffered=new qs,e.paused=!0,e.loop=!1,e.playbackRate=1,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ho(e,t)}(t,e);var r,n,i,o=po(t);return r=t,n&&fo(r.prototype,n),i&&fo(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}(ll.M),ph=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),To(So(e=o.call(this)),"videoSize",void 0),To(So(e),"containerSize",void 0),To(So(e),"windowSize",void 0),To(So(e),"devicePixelRatio",void 0),To(So(e),"frames",void 0),To(So(e),"objectFit",void 0),e.videoSize=null,e.containerSize=null,e.windowSize=null,e.devicePixelRatio=1,e.frames={total:Math.max(Math.floor(0)),dropped:Math.max(Math.floor(0))},e.objectFit=null,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eo(e,t)}(t,e);var r,n,i,o=_o(t);return r=t,n&&wo(r.prototype,n),i&&wo(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}(dh),yh=function(e){function t(){return Po(this,t),o.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ao(e,t)}(t,e);var r,n,i,o=Lo(t);return r=t,n&&xo(r.prototype,n),i&&xo(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}(dh),vh=r(48866),mh=Number.MAX_SAFE_INTEGER,gh=r(54187),bh=r(80813),wh=r(61228),Eh=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ho(this,"name","ResolutionRule"),Ho(this,"inputData",{width:0,height:0,dpi:1,defaultQuality:mh,userQuality:vh.k}),Ho(this,"getUserQuality",void 0),Ho(this,"getDefaultQuality",void 0),this.getDefaultQuality=t,this.getUserQuality=r}var t,r,n;return t=e,(r=[{key:"filter",value:function(e,t,r){var n,i,o,a;if(!function(e){return e instanceof ph}(t))return e;var u,c,s,l,f,h,d,p,y={width:0,height:0},v=null!==(n=null===t||void 0===t?void 0:t.videoSize)&&void 0!==n?n:(0,_l.RW)("web_resolution_rule_aspect_ratio")?null!==t&&void 0!==t&&t.windowSize&&null!==(u=e[0])&&void 0!==u&&u.video?(l=t.windowSize,f=e[0].video,h=f.width/f.height,d=l.width,(p=l.width/h)<=l.height?{width:d,height:p}:{width:l.height*h,height:l.height}):null!==(s=null===t||void 0===t?void 0:t.windowSize)&&void 0!==s?s:y:null!==(c=null===t||void 0===t?void 0:t.windowSize)&&void 0!==c?c:y,m=v.width,g=v.height;if(t.containerSize){var b,w={width:t.containerSize.width,height:t.containerSize.height},E=null!==(b=t.objectFit)&&void 0!==b?b:"contain";a=null!==r&&void 0!==r?r:(0,wh.k)({videoWidth:m,videoHeight:g},E,w)}else a=null!==r&&void 0!==r?r:{};return a.dpi=t.devicePixelRatio?t.devicePixelRatio:1,this.inputData.width=null!==(i=a.width)&&void 0!==i?i:null,this.inputData.height=null!==(o=a.height)&&void 0!==o?o:null,this.inputData.dpi=a.dpi,this.inputData.userQuality=this.getUserQuality(),this.inputData.defaultQuality=this.getDefaultQuality(),Fo(e,a,{defaultLongSideResolution:this.inputData.defaultQuality,userCappingResolution:this.inputData.userQuality})}},{key:"getInputData",value:function(){return this.inputData}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!0}}])&&Go(t.prototype,r),n&&Go(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),_h=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n="MaxBandwidthRule",(r="name")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,n;return t=e,(r=[{key:"filter",value:function(e,t){var r=Oe(e.slice(0).reverse(),(function(e){var t;return(null===e||void 0===e||null===(t=e.audio)||void 0===t?void 0:t.bitrate)||0}));return r?[r]:e}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!1}}])&&Vo(t.prototype,r),n&&Vo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Oh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getServerCapHeight=t,Yo(this,"name","ServerRestrictionsRule"),Yo(this,"inputData",{maxHeight:null})}var t,r,n;return t=e,(r=[{key:"filter",value:function(e){if(e.length<=1)return e;var t=this.getServerCapHeight();return this.inputData.maxHeight=t,null===t?e:function(e,t){var r=e.filter(Bo);if(r.length<=1)return e;for(var n=[],i=0;i<r.length;i++)r[i].video.height<=t&&n.push(r[i]);return 0===n.length?[r[0]]:n}(e,t)}},{key:"getInputData",value:function(){return this.inputData}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!0}}])&&Wo(t.prototype,r),n&&Wo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Sh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bandwidthEstimator=t,zo(this,"name","SimpleBandwidthRule"),zo(this,"inputData",{bandwidth:0,playbackRate:0,paused:!1})}var t,r,n;return t=e,(r=[{key:"filter",value:function(e,t){if(e.length<=1)return e;var r=this.bandwidthEstimator.getBandwidthEstimate().value;this.inputData.bandwidth=r,this.inputData.playbackRate=t.playbackRate,this.inputData.paused=t.paused;var n=e.filter((function(e){return!(!(0,_l.RW)("yasp_abr_loading_segment")||!function(e){return!(!e.video&&!e.audio)&&["audio","video"].every((function(t){var r=e[t];return!r||null!==r.getWaitingDuration()}))}(e))||e.bandwidth*Math.max(t.playbackRate,1)<=r}));return 0===n.length?[e[0]]:n}},{key:"getInputData",value:function(){return this.inputData}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!1}}])&&qo(t.prototype,r),n&&qo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),kh=r(16594),Th=r(25211),Rh=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$o(this,"name","SaveDataRule"),$o(this,"inputData",{saveData:(0,kh.R)()})}var t,r,n;return t=e,(r=[{key:"filter",value:function(e){return this.inputData.saveData=(0,kh.R)(),function(e){return(0,kh.R)()?e.filter((function(e){return!(e.video&&e.video.height&&e.video.width)||Math.min(e.video.height,e.video.width)<=Th.T})):e}(e)}},{key:"getInputData",value:function(){return this.inputData}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!0}}])&&Ko(t.prototype,r),n&&Ko(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),xh=r(63440),Ph=function(e){function t(e){var r,n,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=o.call(this)).videoState=e,n=ta(r),a=void 0,(i="watchedTimeCounter")in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,r.watchedTimeCounter=new xh.p,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qo(e,t)}(t,e);var r,n,i,o=Zo(t);return r=t,(n=[{key:"run",value:function(){this.videoState.currentTime&&(this.watchedTimeCounter.calc(this.videoState.currentTime,this.videoState.playbackRate,!0),this.emit("WatchedTimeUpdated",{watchedTime:this.watchedTimeCounter.get()}))}}])&&Jo(r.prototype,n),i&&Jo(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M),Ah=r(40115),Lh=r(20629),jh=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=o.call(this)).timeline=e,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ua(e,t)}(t,e);var r,n,i,o=ca(t);return r=t,(n=[{key:"run",value:function(){this.timeline.getIsDynamic()&&this.update()}},{key:"update",value:function(){var e=this.timeline.getSeekableRange(),t=e.start/1e3,r=e.end/1e3;this.emit("SeekableUpdate",{start:t,end:r})}},{key:"destroy",value:function(){oa(la(t.prototype),"destroy",this).call(this)}}])&&ia(r.prototype,n),i&&ia(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M),Ih=function(e){function t(e){var r,n=e.timeline,i=e.mediaState;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oa(Ea(r=o.call(this)),"timeline",void 0),Oa(Ea(r),"mediaState",void 0),Oa(Ea(r),"history",[]),Oa(Ea(r),"currentBuffering",null),Oa(Ea(r),"currentTargetLatency",void 0),r.timeline=n,r.mediaState=i,i.on("BufferingChange",(function(e){r.setBuffering(e)})),r.currentTargetLatency=r.timeline.getTargetLatency(),r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ga(e,t)}(t,e);var r,n,i,o=ba(t);return r=t,(n=[{key:"destroy",value:function(){va(_a(t.prototype),"destroy",this).call(this),this.mediaState.off("BufferingChange")}},{key:"notifyTargetLatency",value:function(){this.emit("TargetLatencyUpdate",this.currentTargetLatency),this.timeline.setTargetLatency(this.currentTargetLatency)}},{key:"checkIsLiveEdge",value:function(){var e=this.mediaState.currentTime;if(!e)return!1;var t=1e3*e,r=this.checkForType("audio",t);return this.checkForType("video",t)||r}},{key:"checkForType",value:function(e,t){var r=this.timeline.getSegment(e,t).segment;if(!r)return!1;var n=this.timeline.getLastSegmentNumber(e);return!!n&&r.number>=n-2}},{key:"setBuffering",value:function(e){if(e){if(this.currentBuffering||!this.checkIsLiveEdge())return;this.currentBuffering={start:Date.now(),getTime:(0,dl.u)()}}else{var t;if(!this.currentBuffering)return;var r=null===(t=this.currentBuffering)||void 0===t?void 0:t.getTime();this.history.push({start:this.currentBuffering.start,end:this.currentBuffering.start+r,duration:r}),this.currentBuffering=null,this.checkHistory()}}},{key:"getAverageStalledDuration",value:function(){return this.history.reduce((function(e,t){return e+t.duration}),0)/this.history.length}},{key:"checkHistory",value:function(){var e=Date.now();this.history=this.history.filter((function(t){return e-t.end<=2e4})),this.history.length>=2&&(this.currentTargetLatency=this.currentTargetLatency+this.getAverageStalledDuration(),this.notifyTargetLatency(),this.history=[])}}])&&ya(r.prototype,n),i&&ya(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M),Dh=r(23631),Nh=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onChange=t,ka(this,"types",{}),ka(this,"queue",{audio:[],video:[]}),ka(this,"enabledTypes",void 0),this.enabledTypes=(0,gl.Z)(r),this.enabledTypes.forEach((function(e){n.types[e]=!1}))}var t,r,n;return t=e,(r=[{key:"update",value:function(e,t){this.enabledTypes.includes(e)&&(this.queue[e].push(t),this.checkAndUpdate())}},{key:"checkAndUpdate",value:function(){var e=this;if(this.enabledTypes.every((function(t){return e.queue[t].length}))){var t=!1;this.enabledTypes.forEach((function(r){var n=e.queue[r].shift();e.types[r]!==n&&(t=!0,e.types[r]=n)})),t&&this.onChange(this.types)}}},{key:"onSeek",value:function(){var e=this;this.enabledTypes.forEach((function(t){return e.queue[t].length=0}))}}])&&Sa(t.prototype,r),n&&Sa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Mh=r(36354),Ch=r(18566),Fh=(0,vf.VY)(self),Bh=(0,vf.yd)(self),Uh=r(72391),Gh=r(66169),Hh=r(20290),Vh=r(72573);!function(e){e.append="append",e.remove="remove",e.setTimestampOffset="setTimestampOffset",e.changeType="changeType"}(Ys||(Ys={}));var Wh,Yh=[[Ys.remove],[Ys.setTimestampOffset],[Ys.append,Ys.changeType]],qh=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ja(this,"destroyed",!1),ja(this,"mimeType",void 0),ja(this,"sourceBuffer",void 0),ja(this,"mediaSource",void 0),ja(this,"sync",void 0),ja(this,"abortId",void 0),ja(this,"removeId",void 0),ja(this,"queues",void 0),this.mimeType=t,this.mediaSource=r,this.sourceBuffer=this.initSourceBuffer(),this.sync=(0,Ch.l)(),this.abortId=0,this.removeId=0,this.queues=Yh.map((function(e){return[]}))}var t,r,n,i;return t=e,r=[{key:"checkIfPresent",value:function(){var e=this;return(0,Gh.w)(this.mediaSource.sourceBuffers).some((function(t){return e.sourceBuffer===t}))}},{key:"isFree",value:function(){return this.sync.isFree()&&this.queues.every((function(e){return 0===e.length}))}},{key:"lockForExternalOperation",value:function(e){var t=this;return this.sync.waitAndLock((function(){return e()})).then((function(){setTimeout((function(){return t.performNextOperation()}))})).catch(Hh.Z)}},{key:"initSourceBuffer",value:function(){return this.mediaSource.addSourceBuffer(this.mimeType)}},{key:"getNextOperationDescriptor",value:function(){for(var e=0;e<this.queues.length;e++)if(this.queues[e].length>0)return this.queues[e].shift();return null}},{key:"performNextOperation",value:function(){var e=this;if(this.sync.isFree()){var t=this.getNextOperationDescriptor();if(null!==t){var r=t.abortId,n=t.defer,i=t.operation,o=t.type;this.sync.waitAndLock(Aa(xa().mark((function t(){return xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r===e.abortId&&!e.destroyed){t.next=3;break}return n.reject(new Qs.w({code:"YASP_OPERATION_ABORTED",details:{},isFatal:!1,category:Xs.q.EXCEPTION,message:"SourceBuffer ".concat(o," operation aborted before start")})),t.abrupt("return",n.promise);case 3:return t.prev=3,t.next=6,i();case 6:n.resolve(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),n.reject(t.t0);case 12:return t.abrupt("return",n.promise);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})))).catch(Hh.Z).then((function(){setTimeout((function(){return e.performNextOperation()}))}))}}}},{key:"planOperation",value:function(e,t){var r=this.abortId;if(this.destroyed)throw new Error("SourceBuffer operation with type=".concat(e," skipped after destroy"));var n=new pf.B,i=Yh.findIndex((function(t){return t.includes(e)}));if(-1===i)throw new Error("SourceBuffer unknown operation with type=".concat(e));return this.queues[i].push({defer:n,abortId:r,operation:t,type:e}),this.performNextOperation(),n.promise}},{key:"changeType",value:function(e){var t=this;return this.planOperation(Ys.changeType,Aa(xa().mark((function r(){return xa().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.mimeType!==e){r.next=2;break}return r.abrupt("return");case 2:t.sourceBuffer.changeType(e),t.mimeType=e;case 4:case"end":return r.stop()}}),r)}))))}},{key:"append",value:function(e){var t=this,r=this.removeId;return this.planOperation(Ys.append,(function(){return new Vh((function(n,i){if(r===t.removeId){var o=new pf.B,a=new pf.B,u=(0,Uh.O)(t.sourceBuffer,"updateend",(function(){o.resolve(),a.resolve()})),c=(0,Uh.O)(t.sourceBuffer,"error",(function(){a.reject(new Qs.w({code:"YASP_MSE_FAILED_TO_EXECUTE_PROCEDURE",message:"Failed to execute append operation in SourceBuffer",details:{operation:"append"},isFatal:!1,category:Xs.q.EXCEPTION}))})),s=(0,Uh.O)(t.sourceBuffer,"abort",(function(){a.reject(new Qs.w({code:"YASP_OPERATION_ABORTED",details:{},isFatal:!1,category:Xs.q.EXCEPTION,message:"SourceBuffer append operation aborted"}))}));try{t.sourceBuffer.appendBuffer(e)}catch(h){var l=(0,of.V)(h)?h:new Error("Failed to start append operation in SourceBuffer"),f="InvalidStateError"===l.name?"YASP_INVALID_STATE_ERROR":"YASP_QUOTA_EXCEEDED_ERROR";return void i(new Qs.w({code:f,message:l.message,details:{operation:"append",error:l},isFatal:!1,category:Xs.q.EXCEPTION}))}o.promise.then((function(){return a.promise})).catch(i).then(n).then((function(){u(),c(),s()}))}else i(new Qs.w({code:"YASP_OPERATION_ABORTED",details:{},isFatal:!1,category:Xs.q.EXCEPTION,message:"SourceBuffer append operation aborted before start"}))}))}))}},{key:"remove",value:function(e,t){var r=this;return this.planOperation(Ys.remove,(function(){return new Vh((function(n,i){r.removeId++;var o=new pf.B,a=new pf.B,u=(0,Uh.O)(r.sourceBuffer,"updateend",(function(){o.resolve(),a.resolve()})),c=(0,Uh.O)(r.sourceBuffer,"error",(function(){a.reject(new Qs.w({code:"YASP_MSE_FAILED_TO_EXECUTE_PROCEDURE",message:"Failed to execute remove operation in SourceBuffer",details:{operation:"remove"},isFatal:!1,category:Xs.q.EXCEPTION}))})),s=(0,Uh.O)(r.sourceBuffer,"abort",(function(){a.reject(new Qs.w({code:"YASP_OPERATION_ABORTED",details:{},isFatal:!1,category:Xs.q.EXCEPTION,message:"SourceBuffer remove operation aborted"}))}));try{r.sourceBuffer.remove(e,t)}catch(l){return void i(new Qs.w({code:"YASP_MSE_FAILED_TO_START_OPERATION",message:(0,of.V)(l)?l.message:"Failed to start remove operation in SourceBuffer",details:{operation:"remove",error:l},isFatal:!1,category:Xs.q.EXCEPTION}))}o.promise.then((function(){return a.promise})).catch(i).then(n).then((function(){u(),c(),s()}))}))}))}},{key:"setTimestampOffset",value:function(e){var t=this;return this.planOperation(Ys.setTimestampOffset,Aa(xa().mark((function r(){return xa().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e>0&&(e-=.001),t.sourceBuffer.timestampOffset!==-e){r.next=3;break}return r.abrupt("return");case 3:t.sourceBuffer.timestampOffset=-e;case 4:case"end":return r.stop()}}),r)}))))}},{key:"abort",value:function(){this.abortId++}},{key:"getBufferedRange",value:function(){var e,t=this;return null!==(e=(0,Yl.Y)((function(){return(0,fh.w)(t.sourceBuffer)})))&&void 0!==e?e:[]}},{key:"getBufferEnd",value:function(){var e=this.getBufferedRange(),t=e.length;return t?e[t-1].end:null}},{key:"destroy",value:(i=Aa(xa().mark((function e(){var t=this;return xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.abort(),e.abrupt("return",this.sync.waitAndLock(Aa(xa().mark((function e(){return xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.mediaSource.removeSourceBuffer(t.sourceBuffer)}catch(r){}t.destroyed=!0;case 2:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getDebugInfo",value:function(){return{abortId:this.abortId,removeId:this.removeId,mimeType:this.mimeType,locked:!this.sync.isFree(),buffered:this.getBufferedRange(),queues:this.queues.map((function(e){return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ra(Object(r),!0).forEach((function(t){ja(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ra(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}))}))}}}],n=[{key:"isChangeTypeSupported",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return!Fh&&!Bh&&Boolean(e.SourceBuffer)&&Boolean(e.SourceBuffer.prototype)&&Boolean(e.SourceBuffer.prototype.changeType)}(self)}}],r&&La(t.prototype,r),n&&La(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),zh=r(53159),Kh=r(72573),$h=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=h.call(this)).mimeTypes=e,n.sourceBufferExtraFeatures=r,za(Ya(n),"destroyed",!1),za(Ya(n),"mediaSource",void 0),za(Ya(n),"mediaSourceOpenDeferred",new pf.B),za(Ya(n),"sourceBufferEngines",{}),za(Ya(n),"objectUrl",void 0),za(Ya(n),"listeners",[]),za(Ya(n),"reloadingMediaSource",!1),za(Ya(n),"nextDurationToSet",null),(0,Mh.v)(n.mediaSourceOpenDeferred.promise),n.createMediaSource(),n.objectUrl=n.createObjectUrl(),n.once("Destroy",(function(){n.destroyed=!0,n.removeListeners()})),n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ha(e,t)}(t,e);var r,n,i,o,a,u,c,s,l,f,h=Va(t);return r=t,(n=[{key:"createMediaSource",value:function(){var e=this,t=(0,Zl.Q)(self),r=(0,dl.u)(),n=this.mediaSource=new t,i=(0,gl.Z)(this.mimeTypes),o=function(){try{i.forEach((function(t){return e.createSourceBufferEngine(t)}))}catch(t){return e.mediaSourceOpenDeferred.reject(t),void e.destroy()}e.emit("Open",r()),e.mediaSourceOpenDeferred.resolve(),e.revokeObjectUrl()},a=new pf.B,u=i.length,c=0;return n.sourceBuffers.addEventListener("addsourcebuffer",(function(){++c===u&&a.resolve()})),"open"===n.readyState?o():this.addListener(n,"sourceopen",o,{once:!0}),{sourceBufferAddingPromise:a.promise}}},{key:"addListener",value:function(e,t,r,n){e.addEventListener(t,r,n);var i=function(){return e.removeEventListener(t,r)};return this.listeners.push(i),i}},{key:"removeListeners",value:function(){this.listeners.forEach((function(e){return e()})),this.listeners.length=0}},{key:"clearBuffer",value:(f=Fa(Ma().mark((function e(t,r,n){var i;return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}throw new Error("Can not clearBuffer because CoreMediaSourceEngine is destroyed");case 2:if(this.checkType(t)){e.next=4;break}return e.abrupt("return");case 4:if("open"===this.mediaSource.readyState){e.next=7;break}return e.next=7,this.mediaSourceOpenDeferred.promise;case 7:if(!this.reloadingMediaSource){e.next=9;break}return e.abrupt("return");case 9:return i=this.sourceBufferEngines[t],e.next=12,null===i||void 0===i?void 0:i.remove(r,n);case 12:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return f.apply(this,arguments)})},{key:"changeCodec",value:(l=Fa(Ma().mark((function e(t,r){var n,i;return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkType(t)){e.next=2;break}return e.abrupt("return");case 2:if("open"===this.mediaSource.readyState){e.next=5;break}return e.next=5,this.mediaSourceOpenDeferred.promise;case 5:if(this.mimeTypes[t]=r,!qh.isChangeTypeSupported()){e.next=10;break}return n=this.sourceBufferEngines[t],i=this.getMimeTypeWithExtraFeatures(t,r),e.abrupt("return",null===n||void 0===n?void 0:n.changeType(i));case 10:return e.abrupt("return",this.reset());case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"abort",value:function(){this.destroyed||(0,ml.z)(this.sourceBufferEngines).forEach((function(e){null===e||void 0===e||e.abort()}))}},{key:"reset",value:(s=Fa(Ma().mark((function e(){var t,r,n,i;return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.reloadingMediaSource=!0,this.removeListeners(),e.prev=2,e.next=5,this.removeSourceBuffers();case 5:return r=null!==(t=this.nextDurationToSet)&&void 0!==t?t:this.mediaSource.duration,this.mediaSource=null,this.mediaSourceOpenDeferred=new pf.B,(0,Mh.v)(this.mediaSourceOpenDeferred.promise),n=this.createMediaSource(),i=n.sourceBufferAddingPromise,this.objectUrl=this.createObjectUrl(),null!==r&&this.setDuration(r),this.emit("Reset",this.getObjectUrl()),e.next=15,i;case 15:return e.prev=15,this.reloadingMediaSource=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,,15,18]])}))),function(){return s.apply(this,arguments)})},{key:"checkType",value:function(e){return Boolean(this.mimeTypes[e])}},{key:"createObjectUrl",value:function(){return self.URL.createObjectURL(this.mediaSource)||this.mediaSource.handle}},{key:"revokeObjectUrl",value:function(){"string"===typeof this.objectUrl&&self.URL.revokeObjectURL(this.objectUrl)}},{key:"appendBuffer",value:(c=Fa(Ma().mark((function e(t,r){var n;return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}throw new Error("Can not appendBuffer because CoreMediaSourceEngine is destroyed");case 2:if("open"===this.mediaSource.readyState){e.next=5;break}return e.next=5,this.mediaSourceOpenDeferred.promise;case 5:if(!this.reloadingMediaSource){e.next=7;break}throw new Error("Can not appendBuffer because CoreMediaSourceEngine is reloading");case 7:return n=this.sourceBufferEngines[t],e.abrupt("return",null===n||void 0===n?void 0:n.append(r));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"getObjectUrl",value:function(){return this.objectUrl}},{key:"isReloading",value:function(){return this.reloadingMediaSource}},{key:"getReadyState",value:function(){return this.mediaSource.readyState}},{key:"endOfStream",value:function(){if(!this.reloadingMediaSource&&"open"===this.mediaSource.readyState){var e,t=Da(["audio","video"]);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(void 0!==this.sourceBufferEngines[r]&&!this.sourceBufferEngines[r].isFree())return}}catch(n){t.e(n)}finally{t.f()}this.mediaSource.endOfStream()}}},{key:"getSourceBufferBufferedRange",value:function(e){var t;return null===(t=this.sourceBufferEngines[e])||void 0===t?void 0:t.getBufferedRange()}},{key:"setDuration",value:function(e){var t=this;isNaN(e)||(this.nextDurationToSet=e,"open"!==this.mediaSource.readyState?this.mediaSourceOpenDeferred.promise.then((function(){return t.tryToSetDuration()})).catch((function(e){t.destroyed||(0,hl.L)(e)})):this.tryToSetDuration())}},{key:"tryToSetDuration",value:function(){var e=this;if(null!==this.nextDurationToSet)for(var t=["audio","video"],r={audio:new pf.B,video:new pf.B},n=function(){var n,a=o[i],u=e.sourceBufferEngines[a],c=function(){var n=Fa(Ma().mark((function n(){return Ma().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r[a].resolve(),n.next=3,r[t[t.indexOf(a)%t.length]].promise;case 3:null!==e.nextDurationToSet&&(e.mediaSource.duration=e.nextDurationToSet,e.nextDurationToSet=null);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();if(!u)return c(),"continue";var s=null!==(n=u.getBufferEnd())&&void 0!==n?n:e.nextDurationToSet;s>e.nextDurationToSet&&u.remove(e.nextDurationToSet,s),u.lockForExternalOperation(c)},i=0,o=t;i<o.length;i++)n()}},{key:"getDuration",value:function(){return this.mediaSource.duration}},{key:"setLiveSeekableRange",value:(u=Fa(Ma().mark((function e(t,r){return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,zh.m)(this.mediaSource.setLiveSeekableRange)){e.next=2;break}return e.abrupt("return");case 2:if(!this.reloadingMediaSource){e.next=4;break}throw new Error("Can not setLiveSeekableRange because CoreMediaSourceEngine is reloading");case 4:if(!this.destroyed){e.next=6;break}throw new Error("Can not setLiveSeekableRange because CoreMediaSourceEngine is destroyed");case 6:if(!(t<0)){e.next=8;break}throw new Error("Can not setLiveSeekableRange because start value is negative");case 8:if(!(t>r)){e.next=10;break}throw new Error("Can not setLiveSeekableRange because start value is greater then end value");case 10:if("open"===this.mediaSource.readyState){e.next=13;break}return e.next=13,this.mediaSourceOpenDeferred.promise;case 13:this.mediaSource.setLiveSeekableRange(t,r);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"setTimestampOffset",value:(a=Fa(Ma().mark((function e(t,r){var n;return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}throw new Error("Can not setTimestampOffset because CoreMediaSourceEngine is destroyed");case 2:if("open"===this.mediaSource.readyState){e.next=5;break}return e.next=5,this.mediaSourceOpenDeferred.promise;case 5:if(!this.reloadingMediaSource){e.next=7;break}return e.abrupt("return");case 7:return n=this.sourceBufferEngines[t],e.abrupt("return",null===n||void 0===n?void 0:n.setTimestampOffset(r));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"getBufferedRanges",value:function(){return{audio:this.getBufferedRangesByType("audio"),video:this.getBufferedRangesByType("video")}}},{key:"getBufferedRangesByType",value:function(e){var t;return null!==(t=this.getSourceBufferBufferedRange(e))&&void 0!==t?t:[]}},{key:"destroy",value:(o=Fa(Ma().mark((function e(r){return Ma().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}return e.abrupt("return");case 2:Ua(qa(t.prototype),"destroy",this).call(this),this.mediaSourceOpenDeferred.reject(new Error("Can not open media source because CoreMediaSourceEngine is destroyed"));try{this.mediaSource.endOfStream(r)}catch(n){}return e.next=7,this.removeSourceBuffers();case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"removeSourceBuffers",value:function(){var e=this;return this.abort(),Kh.all((0,gl.Z)(this.sourceBufferEngines).map(function(){var t=Fa(Ma().mark((function t(r){return Ma().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.sourceBufferEngines[r].destroy();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),e.destroyed||(0,hl.L)(t.t0);case 8:delete e.sourceBufferEngines[r];case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()))}},{key:"createSourceBufferEngine",value:function(e){if(!this.sourceBufferEngines[e]){var t=this.mimeTypes[e];if(!t)throw new Qs.w({code:"YASP_EMPTY_MIME",details:{},isFatal:!0,category:Xs.q.MEDIA});var r=this.getMimeTypeWithExtraFeatures(e,t);try{this.sourceBufferEngines[e]=new qh(r,this.mediaSource)}catch(n){throw new Qs.w({code:"YASP_CANNOT_CREATE_SOURCE_BUFFER",details:{reason:n.name,mimeType:r},isFatal:!0,category:Xs.q.MEDIA})}}}},{key:"getDebugInfo",value:function(){var e,t,r,n,i,o;return{readyState:this.getReadyState(),audio:null!==(e=null===(t=this.sourceBufferEngines)||void 0===t||null===(r=t.audio)||void 0===r?void 0:r.getDebugInfo())&&void 0!==e?e:null,video:null!==(n=null===(i=this.sourceBufferEngines)||void 0===i||null===(o=i.video)||void 0===o?void 0:o.getDebugInfo())&&void 0!==n?n:null}}},{key:"setExtraFeatures",value:function(e){this.sourceBufferExtraFeatures=e}},{key:"getMimeTypeWithExtraFeatures",value:function(e,t){var r,n=null===(r=this.sourceBufferExtraFeatures)||void 0===r?void 0:r[e];return n?"".concat(t,"; ").concat(n):t}}])&&Ba(r.prototype,n),i&&Ba(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M),Xh=r(92831),Jh=r(72573),Qh=r(67767),Zh=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),au(iu(e=a.call(this)),"blacklist",new Set),au(iu(e),"destroyed",!1),au(iu(e),"checkLoopTimeoutId",void 0),e.startLoop(),e.once("Destroy",(function(){e.destroyed=!0})),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tu(e,t)}(t,e);var r,n,i,o,a=ru(t);return r=t,(n=[{key:"destroy",value:function(){this.stopLoop(),Za(ou(t.prototype),"destroy",this).call(this)}},{key:"getBlacklist",value:function(){return Array.from(this.blacklist)}},{key:"addHostname",value:function(e){var t=new Qh(e).host;Xh.T.indexOf(t)>-1||this.blacklist.has(e)||this.blacklist.add(e)}},{key:"isBlacklisted",value:function(e){return this.blacklist.has(e)}},{key:"checkBlacklistedHosts",value:(o=Ja($a().mark((function e(){var t=this;return $a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jh.all(Array.from(this.blacklist).map(function(){var e=Ja($a().mark((function e(r){return $a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Bl.H5)((0,Bl.Ny)(r));case 3:t.blacklist.delete(r),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"startLoop",value:function(){var e=this;this.destroyed||(this.checkLoopTimeoutId=setTimeout(Ja($a().mark((function t(){return $a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stopLoop(),t.next=3,e.checkBlacklistedHosts();case 3:e.startLoop();case 4:case"end":return t.stop()}}),t)}))),3e4))}},{key:"stopLoop",value:function(){clearTimeout(this.checkLoopTimeoutId)}}])&&Qa(r.prototype,n),i&&Qa(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M),ed=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];su(this,e),fu(this,"hostnameBlacklist",new Zh),fu(this,"permanentlyBannedUrls",new Set),fu(this,"lastNonBlockedBaseUrls",[]),fu(this,"baseUrls",[]),this.baseUrls=uu(t)}var t,r,n;return t=e,(r=[{key:"getBaseUrl",value:function(){var e,t=this,r=this.baseUrls.filter((function(e){return!t.permanentlyBannedUrls.has(e)}));if(r.length){var n=r.filter((function(e){return!t.hostnameBlacklist.isBlacklisted(e)}));return function(e,t){var r=new Map;e.forEach((function(e,t){return r.set(e,t)})),e.sort((function(e,n){var i=t(e,n);return 0!==i?i:Number(r.get(e))-Number(r.get(n))}))}(n,(function(e,r){var n=t.lastNonBlockedBaseUrls.indexOf(e),i=t.lastNonBlockedBaseUrls.indexOf(r);return-1!==n&&-1!==i?n-i:-1!==n&&-1===i?-1:-1===n&&-1!==i?1:0})),this.lastNonBlockedBaseUrls=n,null!==(e=n[0])&&void 0!==e?e:r[0]}}},{key:"getBaseUrls",value:function(){return this.baseUrls}},{key:"addBaseUrls",value:function(e){var t=this,r=e.filter((function(e){return!t.baseUrls.includes(e)}));this.baseUrls=Array.from(new Set([].concat(uu(this.baseUrls),uu(r))))}},{key:"setBaseUrls",value:function(e){this.baseUrls=Array.from(new Set(e))}},{key:"banUrl",value:function(e){this.hostnameBlacklist.addHostname(e)}},{key:"banUrlPermanently",value:function(e){var t=this.baseUrls.find((function(t){return e.includes(t)}));t&&this.permanentlyBannedUrls.add(t)}},{key:"getBlacklist",value:function(){return this.hostnameBlacklist.getBlacklist()}},{key:"getDebugInfo",value:function(){return{baseUrls:this.baseUrls,permanentlyBannedUrls:Array.from(this.permanentlyBannedUrls),blacklist:this.hostnameBlacklist.getBlacklist()}}}])&&lu(t.prototype,r),n&&lu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),td=r(67767),rd=r(67767);!function(e){e[e.KILOBYTE=1024]="KILOBYTE",e[e.MEGABYTE=Math.pow(1024,2)]="MEGABYTE"}(Wh||(Wh={}));var nd,id,od,ad,ud,cd,sd,ld,fd,hd,dd=r(72573),pd=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),bu(this,"destroyed",!1),bu(this,"key",null),bu(this,"keysReceivingDeferred",new pf.B)}var t,r,n,i,o,a;return t=e,r=[{key:"decode",value:(a=mu(yu().mark((function t(r,n,i,o,a){var u;return yu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.checkDestroyed(),this.key){t.next=4;break}return t.next=4,this.keysReceivingDeferred.promise;case 4:if(void 0!==a){t.next=6;break}return t.abrupt("return",r);case 6:return t.next=8,e.decryptData(r,a,this.key);case 8:return u=t.sent,t.abrupt("return",u);case 10:case"end":return t.stop()}}),t,this)}))),function(e,t,r,n,i){return a.apply(this,arguments)})},{key:"setKeys",value:function(e){this.checkDestroyed(),e&&e.hex_key&&(this.key=e.hex_key,this.keysReceivingDeferred.resolve())}},{key:"getKeys",value:function(){return this.checkDestroyed(),this.key}},{key:"destroy",value:function(){this.destroyed=!0}},{key:"checkDestroyed",value:function(){if(this.destroyed)throw new Qs.w({code:"YASP_AES_CTR_DECODER_ERROR",message:"AesCtr decoder is destroyed",details:{},category:Xs.q.MEDIA,isFatal:!1})}}],n=[{key:"decryptData",value:(o=mu(yu().mark((function t(r,n,i){var o,a,u;return yu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.createCounter(n),t.next=3,e.getDecryptionKey(i);case 3:return a=t.sent,t.next=6,self.crypto.subtle.decrypt({name:"AES-CTR",counter:o,length:128},a,r);case 6:return u=t.sent,t.abrupt("return",new Uint8Array(u));case 8:case"end":return t.stop()}}),t)}))),function(e,t,r){return o.apply(this,arguments)})},{key:"createCounter",value:function(e){for(var t=e,r=new Uint8Array(16),n=0;n<16;++n)r[r.length-1-n]=255&t,t>>=8;return r}},{key:"getDecryptionKey",value:(i=mu(yu().mark((function t(r){var n;return yu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,self.crypto.subtle.importKey("raw",e.parseHexString(r),{name:"AES-CTR"},!1,["decrypt"]);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),function(e){return i.apply(this,arguments)})},{key:"parseHexString",value:function(e){var t=e.match(/.{1,2}/g);return new Uint8Array(t.map((function(e){return parseInt(e,16)})))}}],r&&gu(t.prototype,r),n&&gu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),yd=r(72573),vd=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Du(ju(r=l.call(this)),"url",void 0),Du(ju(r),"fetcher",void 0),Du(ju(r),"timeline",void 0),Du(ju(r),"segmentDecoder",void 0),Du(ju(r),"isEncrypted",void 0),Du(ju(r),"parser",void 0),Du(ju(r),"codec",void 0),Du(ju(r),"mimeType","audio/mp4"),Du(ju(r),"baseUrlManager",void 0),Du(ju(r),"retryManager",void 0),Du(ju(r),"attempt",0),Du(ju(r),"aborted",!1),Du(ju(r),"abortFn",null),Du(ju(r),"offset",void 0),Du(ju(r),"ftyp",void 0),Du(ju(r),"moov",void 0),Du(ju(r),"sidx",void 0),Du(ju(r),"segmentsInfo",void 0),Du(ju(r),"timescale",void 0),r.url=e.url,r.timeline=e.timeline,r.parser=new Cf.p,e.fetcherFactory?r.fetcher=e.fetcherFactory(e.fetcherParams):r.fetcher=new Ql(e.fetcherParams),r.segmentDecoder=e.segmentDecoder,r.retryManager=e.retryManager,r.isEncrypted="AES-CTR"===e.segmentDecoder.encryptionType,r.codec=function(e){return new rd(e,"https://domain.com").searchParams.get("codec")||""}(r.url),r.baseUrlManager=e.baseUrlManager,r.baseUrlManager.addBaseUrls([r.url]),r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pu(e,t)}(t,e);var r,n,i,o,a,u,c,s,l=Au(t);return r=t,(n=[{key:"update",value:(s=ku(Ou().mark((function e(){var t,r;return Ou().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.checkCodec())){e.next=3;break}return e.abrupt("return",this.emit("Error",t));case 3:return e.next=5,this.requestOffset();case 5:return this.offset=e.sent,e.next=8,this.requestFtypMoovSidxBoxes();case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:this.ftyp=r.ftyp,this.moov=r.moov,this.sidx=r.sidx.buffer,this.segmentsInfo=r.sidx.segmentsInfo,this.timescale=r.sidx.timescale,this.applySegmentsInfoToTimeline(),this.emit("ManifestUpdate");case 18:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"applySegmentsInfoToTimeline",value:function(){if(this.isInitiallyLoaded()){var e,t,r=(0,Wl.UO)(this.url),n=this.segmentsInfo[this.segmentsInfo.length-1].endTime/this.timescale*1e3,i=(e=this.segmentsInfo,t=this.timescale,Math.round(8*e.reduce((function(e,t){return e+t.size}),0)/e.reduce((function(e,r){return e+r.duration/t}),0))||0),o="".concat(r,"_").concat(n),a=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[],o=0;return e.forEach((function(e,a){var u=e.startTime/r*1e3,c=e.duration/r*1e3;o>u&&(c-=o-u,u=o),i.push({endNumber:Math.max(Math.floor(a+1)),time:u,duration:c,count:Math.max(Math.floor(1)),isEncrypted:n,startByteWithOffset:t+e.startByte,endByteWithOffset:t+e.endByte,originalValues:{time:e.startTime,duration:e.duration,trackPresentationTimeOffset:0,startByte:e.startByte,endByte:e.endByte}}),o=u+c})),i}(this.segmentsInfo,this.offset,this.timescale,this.isEncrypted);this.timeline.obtainTimelineTrack({type:"audio",name:r,codecs:this.codec,id:o,bitrate:i,language:null,initialization:null,timescale:this.timescale,media:"",mimeType:this.mimeType,startNumber:Math.max(Math.floor(1)),startTime:this.segmentsInfo[0].startTime/this.timescale*1e3,endNumber:Math.max(Math.floor(this.segmentsInfo.length)),endTime:n,presentationTimeOffset:0,segmentSequences:a}).appendSegment(this.createInitSegment(o))}}},{key:"createInitSegment",value:function(e){var t=new pl({start:Math.max(Math.floor(0)),end:Math.max(Math.floor(0)),number:Math.max(Math.floor(0)),bitrate:Math.max(Math.floor(0)),width:0,height:0,isInitSegment:!0,trackId:e,originalStart:Math.max(Math.floor(0))});return t.append(fl.P.concat(new Uint8Array(this.ftyp),new Uint8Array(this.moov),new Uint8Array(this.sidx))),t.finish(),t}},{key:"checkCodec",value:function(){return this.codec?br(this.codec,this.mimeType)?null:new Qs.w({message:"Unsupported codec",code:"YASP_NO_CODECS",details:{audio:[this.codec],url:this.url},isFatal:!0,category:Xs.q.NO_CODECS}):new Qs.w({message:"No codecs found in url",code:"YASP_NO_CODECS",details:{url:this.url},isFatal:!0,category:Xs.q.NO_CODECS})}},{key:"isInitiallyLoaded",value:function(){return void 0!==this.offset&&void 0!==this.ftyp&&void 0!==this.moov&&void 0!==this.sidx&&void 0!==this.segmentsInfo&&void 0!==this.timescale}},{key:"setFetcherBaseParams",value:function(e){this.fetcher.setBaseParams(e)}},{key:"setMirrorUrls",value:function(e){this.baseUrlManager.setBaseUrls([this.url].concat(Eu(e)))}},{key:"abort",value:function(){this.abortFn&&this.abortFn(),this.aborted=!0}},{key:"destroy",value:function(){this.abort(),Ru(Iu(t.prototype),"destroy",this).call(this)}},{key:"getDebugInfo",value:function(){return{url:this.url,offset:this.offset,segmentsInfo:this.segmentsInfo,attempt:this.attempt}}},{key:"setSourceIndex",value:function(e){}},{key:"getMediaType",value:function(){return Fl.D.VOD}},{key:"getDrmInfos",value:function(){return[]}},{key:"getEmsgSchemeIdUris",value:function(){}},{key:"getMpdXml",value:function(){}},{key:"getPlaylistCapHeight",value:function(){return null}},{key:"requestFtypMoovSidxBoxes",value:(c=ku(Ou().mark((function e(){var t,r,n,i,o,a,u,c,s=this;return Ou().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.aborted=!1,t=this.baseUrlManager.getBaseUrl()){e.next=4;break}throw new Qs.w({code:"YASP_NO_BASEURLS",details:{},isFatal:!0,category:Xs.q.MEDIA});case 4:return e.prev=4,e.delegateYield(Ou().mark((function e(){var r,n,i,o,a,u,c,l,f,h,d,p,y,v,m,g,b,w,E,_;return Ou().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.offset){e.next=2;break}return e.abrupt("return",{v:void 0});case 2:return r={start:s.offset,end:9*Wh.MEGABYTE-1},n=Pn(r,s.isEncrypted),i=s.fetcher.fetchDataStream(t,{headers:{Range:"bytes=".concat(n.start,"-").concat(n.end)}}),o=i.response,a=i.abort,s.abortFn=a,e.next=8,o;case 8:if(u=e.sent,c=u.body,(l=u.status)>=200&&l<300||304===l){e.next=14;break}throw l;case 14:f={ftyp:new ArrayBuffer(0),moov:new ArrayBuffer(0),sidx:{buffer:new ArrayBuffer(0),segmentsInfo:[],timescale:1}},h=0,d=[],p=!1,e.prev=18;case 19:if(p){e.next=49;break}return e.next=22,c.read();case 22:if(y=e.sent,v=y.value,m=y.done,!v){e.next=45;break}if(d.push(v),h+=v.length,g=fl.P.concat.apply(fl.P,d),!s.isEncrypted){e.next=39;break}if(b={start:n.start,end:n.start+h-1},w=Pn(b),"string"===typeof(E=s.segmentDecoder.getKeys())){e.next=35;break}throw new Error("Decoding key is not a string");case 35:return e.next=37,pd.decryptData(g,ni(w),E);case 37:_=e.sent,g=ii(_,{start:r.start,end:n.start+h-1},w);case 39:if((new Cf.p).fullBox("ftyp",(function(e){f.ftyp=e.reader.getDataView().buffer.slice(e.start,e.start+e.size)})).fullBox("moov",(function(e){f.moov=e.reader.getDataView().buffer.slice(e.start,e.start+e.size)})).fullBox("sidx",(function(e){f.sidx.buffer=e.reader.getDataView().buffer.slice(e.start,e.start+e.size);var t=du(e);f.sidx.segmentsInfo=t.segmentsInfo,f.sidx.timescale=t.timescale})).parse(g,!1,!0),!(f.ftyp.byteLength>0&&f.moov.byteLength>0&&f.sidx.buffer.byteLength>0)){e.next=45;break}return p=!0,s.abortFn(),e.abrupt("break",49);case 45:if(!m){e.next=47;break}return e.abrupt("break",49);case 47:e.next=19;break;case 49:e.next=55;break;case 51:if(e.prev=51,e.t0=e.catch(18),!(0,of.V)(e.t0)||"Request canceled"===e.t0.message||"Abort error"===e.t0.message){e.next=55;break}throw e.t0;case 55:if(s.abortFn=null,s.attempt=0,!p){e.next=61;break}return e.abrupt("return",{v:f});case 61:throw new Qs.w({code:"YASP_PARSE_SIDX_ERROR",details:{url:s.url},message:"Not all boxes were found",isFatal:!0,category:Xs.q.EXCEPTION});case 62:case"end":return e.stop()}}),e,null,[[18,51]])}))(),"t0",6);case 6:if("object"!==wu(r=e.t0)){e.next=9;break}return e.abrupt("return",r.v);case 9:e.next=29;break;case 11:if(e.prev=11,e.t1=e.catch(4),n=(0,Bf.hj)(e.t1),i=n?this.retryManager.canRetry(e.t1,this.attempt):this.attempt<this.retryManager.getDefaultMaxRetries(),n&&xf.includes(e.t1)||this.baseUrlManager.banUrl(t),o=!i,this.abortFn=null,a=this.generateError(e.t1,o)){e.next=21;break}return e.abrupt("return");case 21:if(this.emit("Error",a),!o&&!a.isFatal){e.next=24;break}return e.abrupt("return");case 24:if(u=this.retryManager.calculateDelay(this.attempt++),c=(0,cf._)(u),!this.aborted){e.next=28;break}return e.abrupt("return");case 28:return e.abrupt("return",c.then((function(){if(!s.aborted)return s.requestFtypMoovSidxBoxes()})));case 29:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(){return c.apply(this,arguments)})},{key:"requestOffset",value:(u=ku(Ou().mark((function e(){var t,r,n,i;return Ou().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.requestByteRange({start:0,end:Wh.KILOBYTE-1});case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return");case 6:if(!this.isEncrypted){e.next=13;break}if("string"===typeof(r=this.segmentDecoder.getKeys())){e.next=10;break}throw new Error("Decoding key is not a string");case 10:return e.next=12,pd.decryptData(t,0,r);case 12:t=e.sent;case 13:return n=0,this.parser.box("uuid",(function(e){e.reader.readUUID(),n=e.reader.readUint64()})).parse(t),e.abrupt("return",n);case 18:return e.prev=18,e.t0=e.catch(0),i=(0,of.V)(e.t0)?new Qs.w({code:"YASP_PARSE_OFFSET_ERROR",details:{url:this.url,error:e.t0},message:e.t0.message,isFatal:!0,category:Xs.q.EXCEPTION}):new Qs.w({code:"YASP_UNKNOWN_ERROR",details:{url:this.url,error:e.t0},message:"Unknown error. Expect error to be an instance of Error.",isFatal:!0,category:Xs.q.EXCEPTION}),this.emit("Error",i),e.abrupt("return");case 23:case"end":return e.stop()}}),e,this,[[0,18]])}))),function(){return u.apply(this,arguments)})},{key:"requestByteRange",value:(a=ku(Ou().mark((function e(){var t,r,n,i,o,a,u,c,s,l,f,h,d,p,y=this,v=arguments;return Ou().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.length>0&&void 0!==v[0]?v[0]:{start:null,end:null},this.aborted=!1,r=this.baseUrlManager.getBaseUrl()){e.next=5;break}throw new Qs.w({code:"YASP_NO_BASEURLS",details:{},isFatal:!0,category:Xs.q.MEDIA});case 5:return e.prev=5,n=(0,Bf.hj)(t.start)?this.fetcher.fetchDataStream(r,{headers:{Range:"bytes=".concat(t.start,"-").concat((0,Bf.hj)(t.end)?t.end:"")}}):this.fetcher.fetchDataStream(r),i=n.response,o=n.abort,this.abortFn=o,e.next=10,i;case 10:if(a=e.sent,u=a.body,(c=a.status)>=200&&c<300||304===c){e.next=16;break}throw c;case 16:return this.attempt=0,this.abortFn=null,e.next=20,this.readDataStream(u);case 20:return e.abrupt("return",e.sent);case 23:if(e.prev=23,e.t0=e.catch(5),s=(0,Bf.hj)(e.t0),l=s?this.retryManager.canRetry(e.t0,this.attempt):this.attempt<this.retryManager.getDefaultMaxRetries(),s&&xf.includes(e.t0)||this.baseUrlManager.banUrl(r),f=!l,this.abortFn=null,h=this.generateError(e.t0,f)){e.next=33;break}return e.abrupt("return");case 33:if(this.emit("Error",h),!f&&!h.isFatal){e.next=36;break}return e.abrupt("return");case 36:if(d=this.retryManager.calculateDelay(this.attempt++),p=(0,cf._)(d),!this.aborted){e.next=40;break}return e.abrupt("return");case 40:return e.abrupt("return",p.then((function(){if(!y.aborted)return y.requestByteRange(t)})));case 41:case"end":return e.stop()}}),e,this,[[5,23]])}))),function(){return a.apply(this,arguments)})},{key:"generateError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Mr(e))return e;if((0,Bf.hj)(e)){var r=e;return 0===r?new Qs.w({code:"YASP_FETCH_RANGE_HTTP_ERROR",message:"Network Error",details:{url:this.url},category:Xs.q.NETWORK_MEDIA,isFatal:t}):new Qs.w({code:"YASP_FETCH_RANGE_BAD_HTTP_STATUS",message:"Error: ".concat(r),details:{status:r,url:this.url},isFatal:t,category:Xs.q.NETWORK_MEDIA})}return(0,of.V)(e)?"Request canceled"===e.message||"Abort error"===e.message?null:new Qs.w({code:"Request timed out"===e.message?"YASP_FETCH_RANGE_TIMEOUT":"YASP_FETCH_RANGE_HTTP_ERROR",details:{url:this.url},message:e.message,isFatal:t,category:"Request timed out"===e.message?Xs.q.NETWORK_TIMEOUT:Xs.q.NETWORK_MEDIA}):new Qs.w({code:"YASP_UNKNOWN_ERROR",details:{url:this.url,error:e},message:"Unknown error. Expect error to be an instance of Error.",isFatal:t,category:Xs.q.NETWORK_MEDIA})}},{key:"readDataStream",value:(o=ku(Ou().mark((function e(t){var r,n,i,o,a;return Ou().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=new Uint8Array,n=!1;case 3:if(n){e.next=13;break}return e.next=6,t.read();case 6:i=e.sent,o=i.value,a=i.done,n=a,o&&(r=fl.P.concat(r,o)),e.next=3;break;case 13:return e.abrupt("return",r);case 16:return e.prev=16,e.t0=e.catch(0),this.emit("Error",new Qs.w({code:"YASP_PARSE_ERROR_EXCEPTION",message:"Data stream reading exception",details:{error:e.t0,errorString:e.t0 instanceof Error?e.t0.message:"Data stream reading exception"},category:Xs.q.EXCEPTION,isFatal:!0})),e.abrupt("return");case 20:case"end":return e.stop()}}),e,this,[[0,16]])}))),function(e){return o.apply(this,arguments)})}])&&Tu(r.prototype,n),i&&Tu(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M),md=r(72573),gd=r(72573),bd=r(72573),wd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Js.Z,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Js.Z;Gu(this,e),Vu(this,"decoder",null),Vu(this,"_encryptionType",null),Vu(this,"loadDecoderDeferred",null),Vu(this,"onWaitForKey",void 0),Vu(this,"onError",void 0),this.onWaitForKey=t,this.onError=r}var t,n,i,o,a,u;return t=e,(n=[{key:"encryptionType",get:function(){return this._encryptionType},set:function(e){this._encryptionType=e}},{key:"setKeys",value:function(e){var t=this,r=function(){t.decoder&&t.decoder.setKeys(e)};this.loadDecoderDeferred?this.loadDecoderDeferred.promise.then(r):r()}},{key:"getKeys",value:function(){var e;return(null===(e=this.decoder)||void 0===e?void 0:e.getKeys())||null}},{key:"decode",value:(u=Uu(Fu().mark((function e(t,r,n,i,o){return Fu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadDecoderDeferred){e.next=3;break}return e.next=3,this.loadDecoderDeferred.promise;case 3:if(this.decoder){e.next=5;break}return e.abrupt("return",t);case 5:return e.abrupt("return",this.decoder.decode(t,r,n,i,o));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,i){return u.apply(this,arguments)})},{key:"setEncryptionType",value:(a=Uu(Fu().mark((function e(t){var r,n,i,o;return Fu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.encryptionType){e.next=2;break}return e.abrupt("return",null===(i=this.loadDecoderDeferred)||void 0===i?void 0:i.promise);case 2:return null===(r=this.decoder)||void 0===r||r.destroy(),null===(n=this.loadDecoderDeferred)||void 0===n||n.reject(new Error("Encryption type changed")),o=new pf.B,this.loadDecoder(t,o),e.abrupt("return",o.promise);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"destroy",value:function(){var e;this.encryptionType=null,null===(e=this.decoder)||void 0===e||e.destroy(),this.decoder=null,this.loadDecoderDeferred=null}},{key:"loadDecoder",value:(o=Uu(Fu().mark((function e(t,n){var i,o,a;return Fu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadDecoderDeferred=n,this.encryptionType=t,e.t0=t,e.next="AES-CBC"===e.t0?5:"AES-CTR"===e.t0?20:23;break;case 5:return e.prev=5,e.next=8,Mu(r.e(869).then(r.bind(r,76992)),{operationName:"AesCbc",timeout:5e3});case 8:i=e.sent,o=i.AesCbc,this.decoder=new o(this.onWaitForKey),n.resolve(),e.next=19;break;case 14:e.prev=14,e.t1=e.catch(5),a=new Qs.w({message:(0,of.V)(e.t1)?e.t1.message:"Failed to import AesCbc",code:"YASP_FAILED_TO_LOAD_SEGMENT_DECODER",details:{},isFatal:!0,category:Xs.q.NETWORK_PLAYER}),n.reject(a),this.onError(a);case 19:return e.abrupt("break",25);case 20:return this.decoder=new pd,n.resolve(),e.abrupt("break",25);case 23:return n.reject(new Error("Unknown encryption type: ".concat(t))),e.abrupt("break",25);case 25:case"end":return e.stop()}}),e,this,[[5,14]])}))),function(e,t){return o.apply(this,arguments)})}])&&Hu(t.prototype,n),i&&Hu(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ed=r(80349),_d=r(40640),Od=r(72573),Sd=["Unexpected read after destroy","Unexpected destroy while read"],kd=function(e){function t(e,r,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=u.call(this)).timeline=e,i.mediaState=r,i.textEngine=n,rc(ec(i),"destroyed",!1),rc(ec(i),"stream",{state:"idle",currentTrack:void 0,time:null,nextTimeToSet:null,lastAddedSegmentNumber:null}),rc(ec(i),"abortCallback",null),rc(ec(i),"operationCounter",0),i}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ju(e,t)}(t,e);var r,n,i,o,a,u=Qu(t);return r=t,(n=[{key:"destroy",value:function(){$u(tc(t.prototype),"destroy",this).call(this),this.destroyed=!0}},{key:"abort",value:function(e){var t;this.operationCounter++,null===(t=this.abortCallback)||void 0===t||t.call(this),this.stream.lastAddedSegmentNumber=null,this.setTimeToDefault(e)}},{key:"run",value:function(){var e,t=this;if(!this.destroyed&&"appending"!==this.stream.state){var r=++this.operationCounter,n=this.mediaState.currentTime;if(null!==n){var i=1e3*n,o=this.timeline.getSegment("text",null!==(e=this.stream.time)&&void 0!==e?e:i),a=o.track,u=o.segment;if(void 0!==a){var c=a;if(c.id===this.stream.currentTrack){if(void 0!==u&&this.stream.lastAddedSegmentNumber!==u.number){var s=(0,Yl.Y)((function(){return u.getChunkStream()}));s&&(this.stream.nextTimeToSet=u.end,this.appendStream(c,s,u.start,u.end,r).then((function(){t.operationCounter===r&&(t.stream.time=t.stream.nextTimeToSet,t.stream.lastAddedSegmentNumber=u.number)})).catch((function(e){"YASP_OPERATION_ABORTED"!==e.code?t.emit("Error",e):t.setTimeToDefault()})))}}else this.appendInitialSegment(c,r).catch((function(e){"YASP_OPERATION_ABORTED"!==e.code?t.emit("Error",e):t.setTimeToDefault()}))}}}}},{key:"createAbortPromise",value:function(){var e=this,t=new pf.B;return this.abortCallback=function(){t.reject(e.createAbortError())},t.promise}},{key:"createAbortError",value:function(){return new Qs.w({code:"YASP_OPERATION_ABORTED",details:{},isFatal:!1,category:Xs.q.EXCEPTION,message:"TextFeeder operation aborted"})}},{key:"setTimeToDefault",value:function(e){var t=this;this.stream.lastAddedSegmentNumber=null;var r=function(e){t.stream.time=e,t.textEngine.fullClear()};if(void 0===e){var n=this.mediaState.currentTime;r(null!==n?1e3*n:null)}else r(1e3*e)}},{key:"appendInitialSegment",value:(a=zu(Yu().mark((function e(t,r){var n,i,o,a,u=this;return Yu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getFullMimeType().includes("mp4"),i=function(){u.operationCounter===r&&(u.stream.currentTrack=t.id,u.stream.lastAddedSegmentNumber=null,u.textEngine.setCurrentTrackLabel(t.label),u.run())},n){e.next=5;break}return i(),e.abrupt("return");case 5:if(void 0!==(o=this.timeline.getInitialSegment("text",t.id))){e.next=8;break}return e.abrupt("return");case 8:return a=o.getChunkStream(),e.next=11,this.appendStream(t,a,null,null,r);case 11:i();case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"appendStream",value:(o=zu(Yu().mark((function e(t,r,n,i,o){var a,u,c,s,l,f;return Yu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stream.state="appending",a=this.createAbortPromise(),e.prev=2,this.textEngine.initParser(t.getFullMimeType()),e.next=6,Od.race([r.read(),a]);case 6:u=e.sent,c=u.value,s=u.done;case 9:if(s){e.next=27;break}if(!this.destroyed){e.next=12;break}return e.abrupt("return");case 12:if(!c){e.next=18;break}if(l=t.presentationTimeOffset/1e3,this.operationCounter===o){e.next=16;break}throw this.createAbortError();case 16:return e.next=18,this.textEngine.appendBuffer(c,n,i,l);case 18:if(!this.destroyed){e.next=20;break}return e.abrupt("return");case 20:return e.next=22,Od.race([r.read(),a]);case 22:f=e.sent,c=f.value,s=f.done,e.next=9;break;case 27:if(this.operationCounter===o){e.next=29;break}throw this.createAbortError();case 29:null!==n&&null!==i&&this.textEngine.updateBufferedRange(n,i),e.next=39;break;case 32:if(e.prev=32,e.t0=e.catch(2),!(0,zs.K)(e.t0)||!Sd.includes(e.t0.message)){e.next=38;break}throw this.createAbortError();case 38:throw Mr(e.t0)?e.t0:new Qs.w({code:"YASP_UNKNOWN_ERROR",details:{error:e.t0},isFatal:!1,category:Xs.q.MEDIA,message:"Can not append text buffer"});case 39:return e.prev=39,this.abortCallback=null,this.stream.state="idle",e.finish(39);case 43:case"end":return e.stop()}}),e,this,[[2,32,39,43]])}))),function(e,t,r,n,i){return o.apply(this,arguments)})},{key:"getDebugInfo",value:function(){return{stream:this.stream}}}])&&Ku(r.prototype,n),i&&Ku(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M),Td=function(){function e(){ic(this,e)}return ac(e,[{key:"parseInit",value:function(e){}},{key:"parseMedia",value:function(e,t){return[]}}]),e}(),Rd=function(){function e(t){ic(this,e),nc(this,"data_",void 0),nc(this,"position_",void 0),this.data_=t,this.position_=0}return ac(e,[{key:"atEnd",value:function(){var e;return this.position_===(null===(e=this.data_)||void 0===e?void 0:e.length)}},{key:"readLine",value:function(){return this.readRegexReturnCapture_(/(.*?)(\n|$)/gm,1)}},{key:"readWord",value:function(){return this.readRegexReturnCapture_(/[^ \t\n]*/gm,0)}},{key:"skipWhitespace",value:function(){this.readRegex(/[ \t]+/gm)}},{key:"readRegex",value:function(e){var t=this.indexOf_(e);return this.atEnd()||null===t||t.position!==this.position_?null:(this.position_+=t.length,t.results)}},{key:"readRegexReturnCapture_",value:function(e,t){if(this.atEnd())return null;var r=this.readRegex(e);return r?r[t]:null}},{key:"indexOf_",value:function(e){e.lastIndex=this.position_;var t=e.exec(this.data_);return null===t?null:{position:t.index,length:t[0].length,results:t}}}]),e}(),xd=function(){function e(t,r,n){uc(this,e),lc(this,"startTime",void 0),lc(this,"endTime",void 0),lc(this,"payload",void 0),lc(this,"direction",ad.HORIZONTAL_LEFT_TO_RIGHT),lc(this,"region",new Ld),lc(this,"position",null),lc(this,"positionAlign",nd.AUTO),lc(this,"size",0),lc(this,"textAlign",id.CENTER),lc(this,"writingMode",ud.HORIZONTAL_TOP_TO_BOTTOM),lc(this,"lineInterpretation",cd.LINE_NUMBER),lc(this,"line",null),lc(this,"lineHeight",""),lc(this,"lineAlign",sd.START),lc(this,"displayAlign",od.AFTER),lc(this,"color",""),lc(this,"backgroundColor",""),lc(this,"backgroundImage",""),lc(this,"fontSize",""),lc(this,"fontWeight",ld.NORMAL),lc(this,"fontStyle",fd.NORMAL),lc(this,"fontFamily",""),lc(this,"textDecoration",[]),lc(this,"wrapLine",!0),lc(this,"id",""),lc(this,"nestedCues",[]),lc(this,"lineBreak",!1),lc(this,"spacer",!1),lc(this,"cellResolution",{columns:32,rows:15}),lc(this,"border",""),lc(this,"letterSpacing",""),lc(this,"linePadding",""),lc(this,"opacity",1),this.startTime=t,this.endTime=r,this.payload=n}return sc(e,[{key:"clone",value:function(){var t=new e(0,0,"");for(var r in this)t[r]=this[r],t[r]&&t[r].constructor===Array&&(t[r]=t[r].slice());return t}}],[{key:"equal",value:function(t,r){for(var n in t)if("nestedCues"===n){if(!rl.equal(t.nestedCues,r.nestedCues,e.equal))return!1}else if("region"===n||"cellResolution"===n){for(var i in t[n])if(t[n][i]!==r[n][i])return!1}else if(Array.isArray(t[n])){if(!rl.equal(t[n],r[n]))return!1}else if(t[n]!==r[n])return!1;return!0}}]),e}();!function(e){e.LEFT="line-left",e.RIGHT="line-right",e.CENTER="center",e.AUTO="auto"}(nd||(nd={})),function(e){e.LEFT="left",e.RIGHT="right",e.CENTER="center",e.START="start",e.END="end"}(id||(id={})),function(e){e.BEFORE="before",e.CENTER="center",e.AFTER="after"}(od||(od={})),function(e){e.HORIZONTAL_LEFT_TO_RIGHT="ltr",e.HORIZONTAL_RIGHT_TO_LEFT="rtl"}(ad||(ad={})),function(e){e.HORIZONTAL_TOP_TO_BOTTOM="horizontal-tb",e.VERTICAL_LEFT_TO_RIGHT="vertical-lr",e.VERTICAL_RIGHT_TO_LEFT="vertical-rl"}(ud||(ud={})),function(e){e[e.LINE_NUMBER=0]="LINE_NUMBER",e[e.PERCENTAGE=1]="PERCENTAGE"}(cd||(cd={})),function(e){e.CENTER="center",e.START="start",e.END="end"}(sd||(sd={})),function(e){e[e.NORMAL=400]="NORMAL",e[e.BOLD=700]="BOLD"}(ld||(ld={})),function(e){e.NORMAL="normal",e.ITALIC="italic",e.OBLIQUE="oblique"}(fd||(fd={})),function(e){e.UNDERLINE="underline",e.LINE_THROUGH="lineThrough",e.OVERLINE="overline"}(hd||(hd={}));var Pd,Ad,Ld=sc((function e(){uc(this,e),lc(this,"id",""),lc(this,"viewportAnchorX",0),lc(this,"viewportAnchorY",0),lc(this,"regionAnchorX",0),lc(this,"regionAnchorY",0),lc(this,"width",100),lc(this,"height",100),lc(this,"heightUnits",Pd.PERCENTAGE),lc(this,"widthUnits",Pd.PERCENTAGE),lc(this,"viewportAnchorUnits",Pd.PERCENTAGE),lc(this,"scroll",Ad.NONE)}));!function(e){e[e.PX=0]="PX",e[e.PERCENTAGE=1]="PERCENTAGE",e[e.LINES=2]="LINES"}(Pd||(Pd={})),function(e){e.NONE="",e.UP="up"}(Ad||(Ad={}));var jd=function(e){function t(){return vc(this,t),r.call(this)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bc(e,t)}(t,e);var r=wc(t);return gc(t,[{key:"parseInit",value:function(e){}},{key:"parseMedia",value:function(e,r){var n=new uf,i=t.parameterNs,o=t.styleNs,a=xl.x.fromUTF8(e),u=[],c=null;if(!a)return u;try{c=n.parse(function(e){return e.replace(/<br\s*><\/br\s*>/gi,"<br />")}(a))}catch(U){throw new Qs.w({isFatal:!1,category:Xs.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",message:"Failed to parse TTML. "+U,details:{}})}if(!c||!c.length)throw new Qs.w({isFatal:!1,category:Xs.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",message:"Failed to parse TTML.",details:{}});var s,l=pc(c.filter((function(e){return"tt"===e.tagName})));try{for(l.s();!(s=l.n()).done;){var f=s.value,h=uf.setParent(f);if(!h)throw new Qs.w({isFatal:!1,category:Xs.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",message:"TTML does not contain <tt> tag.",details:{}});var d=uf.getElementByTagName(h,"body");if(d){var p=n.getAttributeNS(h,i,"frameRate"),y=n.getAttributeNS(h,i,"subFrameRate"),v=n.getAttributeNS(h,i,"frameRateMultiplier"),m=n.getAttributeNS(h,i,"tickRate"),g=n.getAttributeNS(h,i,"cellResolution"),b=h.attributes["xml:space"]||"default",w=n.getAttributeNS(h,o,"extent");if("default"!==b&&"preserve"!==b)throw new Qs.w({isFatal:!1,category:Xs.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",message:"Invalid xml:space value: "+b,details:{}});var E,_="default"===b,O=new Id(p,y,v,m),S=t.getCellResolution(null!==g&&void 0!==g?g:""),k=uf.getElementByTagName(h,"metadata"),T=k?uf.getChildren(k).filter((function(e){return!(0,nf.H)(e)})):[],R=uf.getElementsByTagName(h,"style"),x=uf.getElementsByTagName(h,"region"),P=[],A=pc(x);try{for(A.s();!(E=A.n()).done;){var L=E.value,j=t.parseCueRegion(L,R,w,n);j&&P.push(j)}}catch(G){A.e(G)}finally{A.f()}if(n.findChildren(d,"p").length)throw new Qs.w({category:Xs.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",isFatal:!1,message:"<p> can only be inside <div> in TTML",details:{}});var I,D=pc(n.findChildren(d,"div"));try{for(D.s();!(I=D.n()).done;){var N=I.value;if(n.findChildren(N,"span").length)throw new Qs.w({isFatal:!1,category:Xs.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",message:"<span> can only be inside <p> in TTML",details:{}});var M,C=pc(n.findChildren(N,"p"));try{for(C.s();!(M=C.n()).done;){var F=M.value,B=t.parseCue({cueNode:F,offset:r.periodStart,rateInfo:O,metadataElements:T,styles:R,regionElements:x,cueRegions:P,whitespaceTrim:_,isNested:!1,cellResolution:S,xmlUtils:n,parentNode:N});B&&u.push(B)}}catch(G){C.e(G)}finally{C.f()}}}catch(G){D.e(G)}finally{D.f()}}}}catch(G){l.e(G)}finally{l.f()}return u}}],[{key:"parseCue",value:function(e){var r,n,i=e.cueNode,o=e.offset,a=e.rateInfo,u=e.metadataElements,c=e.styles,s=e.regionElements,l=e.cueRegions,f=e.whitespaceTrim,h=e.isNested,d=e.cellResolution,p=e.xmlUtils,y=e.parentNode;if(!(n=(r=(0,nf.H)(i)?Sc(function(e,t){return{tagName:"span",attributes:{},children:[e],parent:t}}(i,y)):Sc(i)).parent))return null;var v=Sc(n),m=/\S/.test(r.textContent),g=r.textContent&&!m,b=Boolean(r.children.length),w="br"===r.tagName,E=r.attributes.begin||r.attributes.end||r.attributes.dur;if(!E&&g&&!w){if(!h)return null;if(f)return null}if(!m&&!b&&!E&&!w)return null;for(var _=t.parseTime(r,a),O=_.start,k=_.end;1===(null===(T=v)||void 0===T?void 0:T.nodeType)&&"tt"!==(null===(R=v)||void 0===R?void 0:R.tagName);){var T,R,x=t.resolveTime(v,a,O,k);O=x.start,k=x.end;var P=v.parent;if(!P)break;v=Sc(P)}if(null===O&&(O=0),O+=o,null===k?k=1/0:k+=o,"br"===r.tagName){var A=new xd(O,k,"");return A.lineBreak=!0,A}var L="",j=[];if(3===r.nodeType)L=S(r.textContent),f&&(L=(L=L.trim()).replace(/\s+/g," "));else{var I,D=pc(r.children);try{for(D.s();!(I=D.n()).done;){var N=I.value,M=t.parseCue({cueNode:N,offset:o,rateInfo:a,metadataElements:u,styles:c,regionElements:s,cueRegions:l,whitespaceTrim:f,isNested:!0,cellResolution:d,xmlUtils:p,parentNode:r});M&&j.push(M)}}catch(H){D.e(H)}finally{D.f()}}var C=new xd(O,k,L);C.nestedCues=j,d&&(C.cellResolution=d);var F=t.getElementsFromCollection(r,"region",s,"",p)[0];if(F&&F.attributes["xml:id"]){var B=F.attributes["xml:id"];C.region=l.filter((function(e){return e.id===B}))[0]}var U=t.getElementsFromCollection(r,"backgroundImage",u,"#",p,t.smpteNs)[0],G=0===j.length;return t.addStyle(C,r,F,U,c,h,G,p),C}},{key:"parseCueRegion",value:function(e,r,n,i){var o=new Ld,a=e.attributes["xml:id"];if(!a)return null;o.id=a;var u=null;n&&(u=t.percentValues.exec(n)||t.pixelValues.exec(n));var c=u?Number(u[1]):null,s=u?Number(u[2]):null,l=null,f=null,h=t.getStyleAttributeFromRegion(e,r,"extent",i);h&&null!==(l=(f=t.percentValues.exec(h))||t.pixelValues.exec(h))&&(o.width=null!==c?100*Number(l[1])/c:Number(l[1]),o.height=null!==s?100*Number(l[2])/s:Number(l[2]),o.widthUnits=f||null!==c?Pd.PERCENTAGE:Pd.PX,o.heightUnits=f||null!==s?Pd.PERCENTAGE:Pd.PX);var d=t.getStyleAttributeFromRegion(e,r,"origin",i);return d&&null!==(l=(f=t.percentValues.exec(d))||t.pixelValues.exec(d))&&(o.viewportAnchorX=null!==s?100*Number(l[1])/s:Number(l[1]),o.viewportAnchorY=null!==c?100*Number(l[2])/c:Number(l[2]),o.viewportAnchorUnits=f||null!==c?Pd.PERCENTAGE:Pd.PX),o}},{key:"addStyle",value:function(e,r,n,i,o,a,u,c){var s=i?Sc(i):i,l=a||u;"rtl"===t.getStyleAttribute(r,n,o,"direction",l,c)&&(e.direction=ad.HORIZONTAL_RIGHT_TO_LEFT);var f=t.getStyleAttribute(r,n,o,"writingMode",l,c);"tb"===f||"tblr"===f?e.writingMode=ud.VERTICAL_LEFT_TO_RIGHT:"tbrl"===f?e.writingMode=ud.VERTICAL_RIGHT_TO_LEFT:"rltb"===f||"rl"===f?e.direction=ad.HORIZONTAL_RIGHT_TO_LEFT:f&&(e.direction=ad.HORIZONTAL_LEFT_TO_RIGHT);var h=t.getStyleAttribute(r,n,o,"textAlign",l,c);h?(e.positionAlign=t.textAlignToPositionAlign[h],e.lineAlign=t.textAlignToLineAlign[h],e.textAlign=id[h.toUpperCase()]):e.textAlign=id.START;var d=t.getStyleAttribute(r,n,o,"displayAlign",l,c);d&&(e.displayAlign=od[d.toUpperCase()]);var p=t.getStyleAttribute(r,n,o,"color",l,c);p&&(e.color=p);var y=t.getStyleAttribute(r,n,o,"backgroundColor",l,c);y&&(e.backgroundColor=y);var v=t.getStyleAttribute(r,n,o,"border",l,c);v&&(e.border=v);var m=t.getStyleAttribute(r,n,o,"fontFamily",l,c);m&&(e.fontFamily=m);var g=t.getStyleAttribute(r,n,o,"fontWeight",l,c);g&&"bold"===g&&(e.fontWeight=ld.BOLD);var b=t.getStyleAttribute(r,n,o,"wrapOption",l,c);e.wrapLine=!b||"noWrap"!==b;var w=t.getStyleAttribute(r,n,o,"lineHeight",l,c);w&&w.match(t.unitValues)&&(e.lineHeight=w);var E=t.getStyleAttribute(r,n,o,"fontSize",l,c);E&&((E.match(t.unitValues)||E.match(t.percentValue))&&(e.fontSize=E));var _=t.getStyleAttribute(r,n,o,"fontStyle",l,c);if(_&&(e.fontStyle=fd[_.toUpperCase()]),s){var O=s.attributes.imagetype,S=s.attributes.encoding,k=s.textContent.trim();"PNG"===O&&"Base64"===S&&k&&(e.backgroundImage="data:image/png;base64,"+k)}var T=t.getStyleAttribute(r,n,o,"letterSpacing",l,c);T&&T.match(t.unitValues)&&(e.letterSpacing=T);var R=t.getStyleAttribute(r,n,o,"linePadding",l,c);R&&R.match(t.unitValues)&&(e.linePadding=R);var x=t.getStyleAttribute(r,n,o,"opacity",l,c);x&&(e.opacity=parseFloat(x));var P=t.getStyleAttributeFromRegion(n,o,"textDecoration",c);P&&t.addTextDecoration(e,P);var A=t.getStyleAttributeFromElement(r,o,"textDecoration",c);A&&t.addTextDecoration(e,A)}},{key:"addTextDecoration",value:function(e,t){var r,n=pc(t.split(" "));try{for(n.s();!(r=n.n()).done;){switch(r.value){case"underline":e.textDecoration.includes(hd.UNDERLINE)||e.textDecoration.push(hd.UNDERLINE);break;case"noUnderline":e.textDecoration.includes(hd.UNDERLINE)&&rl.remove(e.textDecoration,hd.UNDERLINE);break;case"lineThrough":e.textDecoration.includes(hd.LINE_THROUGH)||e.textDecoration.push(hd.LINE_THROUGH);break;case"noLineThrough":e.textDecoration.includes(hd.LINE_THROUGH)&&rl.remove(e.textDecoration,hd.LINE_THROUGH);break;case"overline":e.textDecoration.includes(hd.OVERLINE)||e.textDecoration.push(hd.OVERLINE);break;case"noOverline":e.textDecoration.includes(hd.OVERLINE)&&rl.remove(e.textDecoration,hd.OVERLINE);break;default:continue}}}catch(i){n.e(i)}finally{n.f()}}},{key:"getStyleAttribute",value:function(e,r,n,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5?arguments[5]:void 0,u=t.getStyleAttributeFromElement(e,n,i,a);return u||(o?t.getStyleAttributeFromRegion(r,n,i,a):null)}},{key:"getStyleAttributeFromRegion",value:function(e,r,n,i){var o=t.styleNs;if(!e)return null;var a=i.getAttributeNS(e,o,n);return a||t.getInheritedStyleAttribute(e,r,n,i)}},{key:"getStyleAttributeFromElement",value:function(e,r,n,i){var o=t.styleNs,a=i.getAttributeNS(e,o,n);return a||t.getInheritedStyleAttribute(e,r,n,i)}},{key:"getInheritedStyleAttribute",value:function(e,r,n,i){for(var o=t.styleNs,a=t.styleEbuttsNs,u=t.getElementsFromCollection(e,"style",r,"",i),c=null,s=0;s<u.length;s++){var l=i.getAttributeNS(u[s],a,n);l||(l=i.getAttributeNS(u[s],o,n)),l||(l=t.getStyleAttributeFromElement(u[s],r,n,i)),l&&(c=l)}return c}},{key:"getElementsFromCollection",value:function(e,r,n,i,o,a){var u=[];if(!e||n.length<1)return u;var c=t.getInheritedAttribute(e,r,o,a);if(c){var s,l=pc(c.split(" "));try{for(l.s();!(s=l.n()).done;){var f,h=s.value,d=pc(n);try{for(d.s();!(f=d.n()).done;){var p=f.value;if(i+p.attributes["xml:id"]===h){u.push(p);break}}}catch(y){d.e(y)}finally{d.f()}}}catch(y){l.e(y)}finally{l.f()}}return u}},{key:"getInheritedAttribute",value:function(e,t,r,n){for(var i=null;e&&!(i=n?r.getAttributeNS(e,n,t):e.attributes[t]);){var o=e.parent;if(null===o)break;e=o}return i}},{key:"resolveTime",value:function(e,r,n,i){var o=t.parseTime(e,r);return null===n?n=o.start:null!==o.start&&(n+=o.start),null===i?i=o.end:null!==o.start&&(i+=o.start),{start:n,end:i}}},{key:"parseTime",value:function(e,r){var n=t.parseTimeAttribute(e.attributes.begin,r),i=t.parseTimeAttribute(e.attributes.end,r),o=t.parseTimeAttribute(e.attributes.dur,r);return null===i&&null!==o&&(i=n+o),{start:n,end:i}}},{key:"parseTimeAttribute",value:function(e,r){var n=null;if(t.timeColonFormatFrames.test(e))n=t.parseColonTimeWithFrames(r,e);else if(t.timeColonFormat.test(e))n=t.parseTimeFromRegex(t.timeColonFormat,e);else if(t.timeColonFormatMilliseconds.test(e))n=t.parseTimeFromRegex(t.timeColonFormatMilliseconds,e);else if(t.timeFramesFormat.test(e))n=t.parseFramesTime(r,e);else if(t.timeTickFormat.test(e))n=t.parseTickTime(r,e);else if(t.timeHMSFormat.test(e))n=t.parseTimeFromRegex(t.timeHMSFormat,e);else if(e)throw new Qs.w({isFatal:!1,category:Xs.q.MEDIA,code:"YASP_INVALID_TEXT_CUE",details:{},message:"Could not parse cue time range in TTML"});return n}},{key:"parseFramesTime",value:function(e,r){var n=t.timeFramesFormat.exec(r);return n?Number(n[1])/e.frameRate:null}},{key:"parseTickTime",value:function(e,r){var n=t.timeTickFormat.exec(r);return n?Number(n[1])/e.tickRate:null}},{key:"parseColonTimeWithFrames",value:function(e,r){var n=t.timeColonFormatFrames.exec(r);if(!n)return null;var i=Number(n[1]),o=Number(n[2]),a=Number(n[3]),u=Number(n[4]);return(a+=(u+=(Number(n[5])||0)/e.subFrameRate)/e.frameRate)+60*o+3600*i}},{key:"parseTimeFromRegex",value:function(e,t){var r=e.exec(t);if(null===r||""===r[0])return null;var n=Number(r[1])||0,i=Number(r[2])||0,o=Number(r[3])||0;return(Number(r[4])||0)/1e3+o+60*i+3600*n}},{key:"getCellResolution",value:function(e){if(!e)return null;var t=/^(\d+) (\d+)$/.exec(e);return t?{columns:parseInt(t[1],10),rows:parseInt(t[2],10)}:null}}]),t}(Td);Oc(jd,"styleNs","http://www.w3.org/ns/ttml#styling"),Oc(jd,"parameterNs","http://www.w3.org/ns/ttml#parameter"),Oc(jd,"percentValues",/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/),Oc(jd,"percentValue",/^(\d{1,2}(?:\.\d+)?|100)%$/),Oc(jd,"unitValues",/^(\d+px|\d+em|\d*\.?\d+c)$/),Oc(jd,"pixelValues",/^(\d+)px (\d+)px$/),Oc(jd,"timeColonFormatFrames",/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/),Oc(jd,"timeColonFormat",/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/),Oc(jd,"timeColonFormatMilliseconds",/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/),Oc(jd,"timeFramesFormat",/^(\d*(?:\.\d*)?)f$/),Oc(jd,"timeTickFormat",/^(\d*(?:\.\d*)?)t$/),Oc(jd,"timeHMSFormat",new RegExp(["^(?:(\\d*(?:\\.\\d*)?)h)?","(?:(\\d*(?:\\.\\d*)?)m(?!s))?","(?:(\\d*(?:\\.\\d*)?)s)?","(?:(\\d*(?:\\.\\d*)?)ms)?$"].join(""))),Oc(jd,"smpteNs","http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"),Oc(jd,"styleEbuttsNs","urn:ebu:tt:style"),Oc(jd,"textAlignToLineAlign",{left:sd.START,center:sd.CENTER,right:sd.END,start:sd.START,end:sd.END}),Oc(jd,"textAlignToPositionAlign",{left:nd.LEFT,center:nd.CENTER,right:nd.RIGHT});var Id=gc((function e(t,r,n,i){if(vc(this,e),Oc(this,"frameRate",void 0),Oc(this,"subFrameRate",void 0),Oc(this,"tickRate",void 0),this.frameRate=Number(t)||30,this.subFrameRate=Number(r)||1,this.tickRate=Number(i),0===this.tickRate&&(this.tickRate=t?this.frameRate*this.subFrameRate:1),n){var o=/^(\d+) (\d+)$/g.exec(n);if(o){var a=Number(o[1])/Number(o[2]);this.frameRate*=a}}})),Dd=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r="parser",n=new jd,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,n;return t=e,(r=[{key:"parseInit",value:function(e){var t=!1;if((new Cf.p).box("moov",Cf.p.children).box("trak",Cf.p.children).box("mdia",Cf.p.children).box("minf",Cf.p.children).box("stbl",Cf.p.children).fullBox("stsd",Cf.p.sampleDescription).box("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new Error("Can not parse init while subtitles processing")}},{key:"parseMedia",value:function(e,t){var r=this,n=!1,i=[];return(new Cf.p).box("mdat",Cf.p.allData((function(e){n=!0,i=i.concat(r.parser.parseMedia(e,t))}))).parse(e,!1),n?i:[]}}])&&kc(t.prototype,r),n&&kc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Nd=r(52088),Md=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o.call(this)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ac(e,t)}(t,e);var r,n,i,o=Lc(t);return r=t,i=[{key:"parseRegion_",value:function(e){var r=new Rd(e),n=new Ld;r.readWord(),r.skipWhitespace();for(var i=r.readWord();i;)t.parseRegionSetting_(n,i),r.skipWhitespace(),i=r.readWord();return n}},{key:"parseCue_",value:function(e,r,n){if(1===e.length&&!e[0])return null;if(/^NOTE($|[ \t])/.test(e[0]))return null;if("STYLE"===e[0])return null;var i=null;e[0].includes("--\x3e")||(i=e[0],e.splice(0,1));var o=new Rd(e[0]),a=t.parseTime_(o),u=o.readRegex(/[ \t]+-->[ \t]+/g),c=t.parseTime_(o);if(null===a||null===u||null===c)return null;r&&(a+=r,c+=r);var s=e.slice(1).join("\n").trim(),l=new xd(a,c,s);o.skipWhitespace();for(var f=o.readWord();f;)t.parseCueSetting(l,f,n),o.skipWhitespace(),f=o.readWord();return null!==i&&(l.id=i),l}},{key:"parseCueStyles",value:function(e,r){var n="<span>"+e+"</span>",i=(new uf).parse(n);if(i){var o=[],a=i;if(1===a.length&&3===Sc(a[0]).nodeType)return void(r.payload=e);var u,c=Rc(a);try{for(c.s();!(u=c.n()).done;){var s=u.value;t.generateCueFromElement(s,r,o)}}catch(l){c.e(l)}finally{c.f()}r.nestedCues=o}else r.payload=e}},{key:"generateCueFromElement",value:function(e,r,n){var i=Sc(e),o=r.clone();if(1===i.nodeType&&i.tagName){var a,u=ld.BOLD,c=fd.ITALIC,s=hd.UNDERLINE,l=Rc(e.tagName.split(/[ .]+/));try{for(l.s();!(a=l.n()).done;)switch(a.value){case"b":o.fontWeight=u;break;case"i":o.fontStyle=c;break;case"u":o.textDecoration.push(s);break;default:continue}}catch(p){l.e(p)}finally{l.f()}}if(3===i.nodeType)o.payload=i.textContent,n.push(o);else{var f,h=Rc(i.children);try{for(h.s();!(f=h.n()).done;){var d=f.value;(0,nf.H)(d)||t.generateCueFromElement(d,o,n)}}catch(p){h.e(p)}finally{h.f()}}}},{key:"parseCueSetting",value:function(e,r,n){var i=null;if(i=/^align:(start|middle|center|end|left|right)$/.exec(r))t.setTextAlign_(e,i[1]);else if(i=/^vertical:(lr|rl)$/.exec(r))t.setVerticalWritingMode_(e,i[1]);else if(i=/^size:([\d.]+)%$/.exec(r))e.size=Number(i[1]);else if(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(r))e.position=Number(i[1]),i[2]&&t.setPositionAlign_(e,i[2]);else{if(!(i=/^region:(.*)$/.exec(r)))return t.parsedLineValueAndInterpretation_(e,r);var o=t.getRegionById_(n,i[1]);o&&(e.region=o)}return!0}},{key:"getRegionById_",value:function(e,t){var r=e.filter((function(e){return e.id===t}));return r.length?r[0]:null}},{key:"parseRegionSetting_",value:function(e,t){var r=null;if(r=/^id=(.*)$/.exec(t))e.id=r[1];else if(r=/^width=(\d{1,2}|100)%$/.exec(t))e.width=Number(r[1]);else if(r=/^lines=(\d+)$/.exec(t))e.height=Number(r[1]),e.heightUnits=Pd.LINES;else if(r=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(t))e.regionAnchorX=Number(r[1]),e.regionAnchorY=Number(r[2]);else if(r=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(t))e.viewportAnchorX=Number(r[1]),e.viewportAnchorY=Number(r[2]);else{if(!(r=/^scroll=up$/.exec(t)))return!1;e.scroll=Ad.UP}return!0}},{key:"setTextAlign_",value:function(e,t){e.textAlign="middle"===t?id.CENTER:id[t.toUpperCase()]}},{key:"setPositionAlign_",value:function(e,t){e.positionAlign="line-left"===t||"start"===t?nd.LEFT:"line-right"===t||"end"===t?nd.RIGHT:nd.CENTER}},{key:"setVerticalWritingMode_",value:function(e,t){e.writingMode="lr"===t?ud.VERTICAL_LEFT_TO_RIGHT:ud.VERTICAL_RIGHT_TO_LEFT}},{key:"parsedLineValueAndInterpretation_",value:function(e,t){var r=null;if(r=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=cd.PERCENTAGE,e.line=Number(r[1]),r[2]&&(e.lineAlign=sd[r[2].toUpperCase()]);else{if(!(r=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t)))return!1;e.lineInterpretation=cd.LINE_NUMBER,e.line=Number(r[1]),r[2]&&(e.lineAlign=sd[r[2].toUpperCase()])}return!0}},{key:"parseTime_",value:function(e){var t=e.readRegex(/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g);if(null===t)return null;var r=Number(t[1])||0,n=Number(t[2]),i=Number(t[3]),o=Number(t[4]);return n>59||i>59?null:o/1e3+i+60*n+3600*r}}],(n=[{key:"parseInit",value:function(e){}},{key:"parseMedia",value:function(e,r){var n=xl.x.fromUTF8(e),i=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(i[0]))throw new Error("INVALID_TEXT_HEADER");var o=r.segmentStart;null===o&&(o=0);for(var a=[],u=i[0].split("\n"),c=1;c<u.length;c++)if(/^Region:/.test(u[c])){var s=t.parseRegion_(u[c]);a.push(s)}for(var l=[],f=1;f<i.length;f++){u=i[f].split("\n");var h=t.parseCue_(u,o,a);h&&l.push(h)}return l}}])&&Pc(r.prototype,n),i&&Pc(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Td),Cd=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Gc(Bc(e=o.call(this)),"timescale",null),Gc(Bc(e),"parseInit",(function(t){var r=!1;if((new Cf.p).box("moov",Cf.p.children).box("trak",Cf.p.children).box("mdia",Cf.p.children).fullBox("mdhd",(function(t){0===t.version?(t.reader.skip(4),t.reader.skip(4),e.timescale=t.reader.readUint32(),t.reader.skip(4)):(t.reader.skip(8),t.reader.skip(8),e.timescale=t.reader.readUint32(),t.reader.skip(8)),t.reader.skip(4)})).box("minf",Cf.p.children).box("stbl",Cf.p.children).fullBox("stsd",Cf.p.sampleDescription).box("wvtt",(function(){r=!0})).parse(t),!e.timescale)throw new Error("Can not get vtt timescale");if(!r)throw new Error("No WVTT box was found")})),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mc(e,t)}(t,e);var r,n,i,o=Cc(t);return r=t,i=[{key:"parseTFHD",value:function(e,t){return t.skip(4),1&e&&t.skip(8),2&e&&t.skip(4),8&e?t.readUint32():null}},{key:"parseTRUN",value:function(e,t,r){var n=r.readUint32();1&t&&r.skip(4),4&t&&r.skip(4);for(var i=[],o=0;o<n;o++){var a={duration:null,sampleSize:null,timeOffset:null};256&t&&(a.duration=r.readUint32()),512&t&&(a.sampleSize=r.readUint32()),1024&t&&r.skip(4),2048&t&&(a.timeOffset=0===e?r.readUint32():r.readInt32()),i.push(a)}return i}},{key:"parseVTTC",value:function(e,r,n){var i,o,a="";return(new Cf.p).box("payl",Cf.p.allData((function(e){i=xl.x.fromUTF8(e)}))).box("iden",Cf.p.allData((function(e){o=xl.x.fromUTF8(e)}))).box("sttg",Cf.p.allData((function(e){a=xl.x.fromUTF8(e)}))).parse(e),i?t.assembleCue(i,o,a,r,n):null}},{key:"assembleCue",value:function(e,t,r,n,i){var o=new xd(n,i,e);if(Md.parseCueStyles(e,o),t&&(o.id=t),r)for(var a=new Rd(r),u=a.readWord();u;)Md.parseCueSetting(o,u,[]),a.skipWhitespace(),u=a.readWord();return o}}],(n=[{key:"parseMedia",value:function(e,r){var n=this;if(!this.timescale)throw new Error("No init segment for MP4+VTT!");var i=0,o=[],a=new Uint8Array,u=[],c=!1,s=!1,l=!1,f=null;if((new Cf.p).box("moof",Cf.p.children).box("traf",Cf.p.children).fullBox("tfdt",(function(e){c=!0,0!==e.version&&1!==e.version||(i=0===e.version?e.reader.readUint32():e.reader.readUint64())})).fullBox("tfhd",(function(e){null!==e.flags&&(f=t.parseTFHD(e.flags,e.reader))})).fullBox("trun",(function(e){s=!0,null!==e.version&&null!==e.flags&&(o=o.concat(t.parseTRUN(e.version,e.flags,e.reader)))})).box("mdat",Cf.p.allData((function(e){l=!0,a=fl.P.concat(a,e)}))).parse(e),!l&&!c&&!s||!a.length)throw new Error("Can not parse mp4 vtt because required box is missing.");var h=i,d=new DataView(a.buffer,a.byteOffset,a.byteLength),p=new Nd.K(d,Nd.I.BIG_ENDIAN);return o.forEach((function(e){var o=e.duration||f,a=e.timeOffset?i+e.timeOffset:h;h=a+(o||0);var c=0;do{var s=p.readUint32();c+=s;var l=p.readUint32(),d=Cf.p.typeToString(l),y=null;if("vttc"===d?s>8&&(y=p.readBytes(s-8)):p.skip(s-8),o&&y){if(null===n.timescale)throw new Error("No initial vtt segment");var v=t.parseVTTC(y,r.periodStart+a/n.timescale,r.periodStart+h/n.timescale);u.push(v)}}while(e.sampleSize&&c<e.sampleSize)})),u.filter(Boolean)}}])&&Nc(r.prototype,n),i&&Nc(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Td),Fd=r(72573),Bd=function(e){function t(){var e;Vc(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Xc(Kc(e=o.call.apply(o,[this].concat(n))),"parser",null),Xc(Kc(e),"timestampOffset",0),Xc(Kc(e),"bufferStart",null),Xc(Kc(e),"bufferEnd",null),Xc(Kc(e),"currentTrackLabel",null),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yc(e,t)}(t,e);var r,n,i,o=qc(t);return r=t,i=[{key:"registerParser",value:function(e,r){t.parserMap[e]=r}}],(n=[{key:"initParser",value:function(e){if("application/cea-608"!==e){var r=t.parserMap[e];this.parser=new r}}},{key:"setCurrentTrackLabel",value:function(e){this.currentTrackLabel=e}},{key:"appendBuffer",value:function(e,t,r,n){var i=this;return Fd.resolve().then((function(){if(i.parser&&i.currentTrackLabel)if(null!==t&&null!==r){var o={periodStart:i.timestampOffset,segmentStart:t,segmentEnd:r},a=i.parser.parseMedia(e,o);if(a&&a.length>0){var u=a.map((function(e){return e.startTime-=n,e.endTime-=n,e.nestedCues&&(e.nestedCues=e.nestedCues.map((function(e){return e.startTime-=n,e.endTime-=n,e}))),e}));i.emit("CuesAdded",{cues:u,label:i.currentTrackLabel})}}else i.parser.parseInit(e)}))}},{key:"updateBufferedRange",value:function(e,t){null===this.bufferStart?(this.bufferStart=e,this.bufferEnd=t):this.bufferEnd=t}},{key:"isInBufferedRange",value:function(e){return null!==this.bufferStart&&null!==this.bufferEnd&&e>=this.bufferStart&&e<=this.bufferEnd}},{key:"fullClear",value:function(){this.bufferStart=null,this.bufferEnd=null,this.emit("ClearCues")}}])&&Wc(r.prototype,n),i&&Wc(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M);Xc(Bd,"parserMap",{}),Bd.registerParser("text/vtt",Md),Bd.registerParser('text/vtt; codecs="vtt"',Md),Bd.registerParser('text/vtt; codecs="wvtt"',Md),Bd.registerParser("application/ttml+xml",jd),Bd.registerParser('application/mp4; codecs="stpp"',Dd),Bd.registerParser('application/mp4; codecs="stpp.ttml.im1t"',Dd),Bd.registerParser('application/mp4; codecs="stpp.TTML.im1t"',Dd),Bd.registerParser('application/mp4; codecs="wvtt"',Cd);var Ud=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;Jc(this,e),this.onLimit=t,this.limit=r,Zc(this,"store",[])}var t,r,n;return t=e,(r=[{key:"push",value:function(){var e,t=this;(e=this.store).push.apply(e,arguments),this.store.length>=this.limit&&this.onLimit(this.store).then((function(){t.store=[]}))}}])&&Qc(t.prototype,r),n&&Qc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Gd=r(72573),Hd=(0,vf.VY)(self)||(0,vf.yd)(self)||(0,vf.Fv)(self),Vd=function(e){function t(e,r,n,i,o,a){var c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(c=u.call(this)).cron=e,c.url=r,c.mediaState=n,c.timingsCollector=i,c.retryManager=o,ps(hs(c),"abr",void 0),ps(hs(c),"bandwidthEstimator",void 0),ps(hs(c),"ttfbEstimator",void 0),ps(hs(c),"playlist",void 0),ps(hs(c),"baseUrlManager",new ed),ps(hs(c),"playlistUpdater",void 0),ps(hs(c),"timeline",void 0),ps(hs(c),"mse",void 0),ps(hs(c),"mseFeeder",void 0),ps(hs(c),"textFeeder",void 0),ps(hs(c),"textEngine",void 0),ps(hs(c),"mseGc",void 0),ps(hs(c),"timelineFiller",void 0),ps(hs(c),"seekableUpdater",void 0),ps(hs(c),"timelineGc",void 0),ps(hs(c),"yaspWatchedTimeCollector",void 0),ps(hs(c),"segmentFetcher",void 0),ps(hs(c),"segmentDecoder",void 0),ps(hs(c),"targetLatencyUpdater",void 0),ps(hs(c),"cmafLogger",void 0),ps(hs(c),"fetcher",void 0),ps(hs(c),"fetcherParams",void 0),ps(hs(c),"fetcherProgressAccumulator",void 0),ps(hs(c),"attached",!1),ps(hs(c),"startPosition",null),ps(hs(c),"destroyed",!1),ps(hs(c),"performOnLoad",void 0),ps(hs(c),"watchedTime",0),ps(hs(c),"bufferGoalManager",void 0),ps(hs(c),"timelineFillerBufferGoalInterval",void 0),ps(hs(c),"mediaType",void 0),ps(hs(c),"sourceBufferExtraFeatures",{}),ps(hs(c),"isLowLatency",!1),ps(hs(c),"maxStartTimestamp",null),ps(hs(c),"wasSegmentLoaded",!1),ps(hs(c),"drmKeysResponse",null),ps(hs(c),"audioDecodingKey",null),ps(hs(c),"sourceKey",void 0),ps(hs(c),"attachUnsubscribers",[]),ps(hs(c),"onAttachCallbacks",[]),ps(hs(c),"decodeTimeBatcher",void 0),ps(hs(c),"onDecodeBatcherLimit",void 0),ps(hs(c),"mseBufferGoal",30),ps(hs(c),"mseBackWatch",10),ps(hs(c),"wasBufferGoalDecreased",!1),ps(hs(c),"timelineBackWatch",30),ps(hs(c),"callbacks",void 0),ps(hs(c),"isLowMemoryMode",void 0),ps(hs(c),"disableSegmentStreaming",!1),ps(hs(c),"circularBuffering",!1),ps(hs(c),"mirrorUrls",[]),ps(hs(c),"factories",void 0),self.source=hs(c),c.startPosition=Pi(c.url),c.sourceKey=(0,Zs.Hi)(c.url),c.callbacks=a.callbacks,c.isLowMemoryMode=a.isLowMemoryMode,c.factories=a.factories,c.performOnLoad=(0,qf.P)(new Gd((function(e){c.once("PlaylistLoaded",e)}))),c.timeline=c.createTimeline(),c.subscribeToTrackChanges(),c.bufferGoalManager=new Ah.B;var s=function(e,t,r,n,i){var o=uh.f.obtain({defaultEstimateValue:i,halfLife:{slow:5,fast:2}}),a=new lh,u=[new Rh,new Oh(e),new Sh(o),new hh(o,a,n),new Eh(r,t),new _h];return{bandwidthEstimator:o,ttfbEstimator:a,abr:new ah({rules:u})}}((function(){var e,t;return null!==(e=null===(t=c.playlist)||void 0===t?void 0:t.getPlaylistCapHeight())&&void 0!==e?e:null}),(function(){return c.callbacks.getUserQuality()}),(function(){return c.callbacks.getMaxAutoQuality()}),(function(){return c.getRemainingTimeToStart()}),c.callbacks.getDefaultBandwidth().value),l=s.bandwidthEstimator,f=s.ttfbEstimator,h=s.abr;c.bandwidthEstimator=l,c.ttfbEstimator=f,c.abr=h,c.abr.on("AbrDecisionChange",(function(e){var t=JSON.stringify(os(os({},e),{},{type:c.attached?"main":"preload"}));c.sendEvent({name:"AbrDecisionChange",data:{message:t}})})),c.abr.on("MaxCapAllowedVideoTrackUpdate",(function(e){var t,r,n,i;e&&null!==(t=e.video)&&void 0!==t&&t.width&&null!==(r=e.video)&&void 0!==r&&r.height&&c.emit("MaxCapAllowedVideoTrackUpdate",{width:null===(n=e.video)||void 0===n?void 0:n.width,height:null===(i=e.video)||void 0===i?void 0:i.height})})),c.on("SegmentLoaded",(function(e){var t;null===(t=c.mseFeeder)||void 0===t||t.run(),c.wasSegmentLoaded=!0}));var d=(0,Dh.p)();return void 0!==d&&(c.maxStartTimestamp=Date.now()+1e3*d),c.onDecodeBatcherLimit=function(){var e=ns(ts().mark((function e(t){return ts().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.sendEvent({name:"MseTimingsLog",data:{message:JSON.stringify(t)}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.decodeTimeBatcher=new Ud(c.onDecodeBatcherLimit),c}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ss(e,t)}(t,e);var r,n,i,o,a,u=ls(t);return r=t,n=[{key:"setMseBufferGoal",value:function(e,t){var r,n;void 0!==e&&(this.mseBufferGoal=e),void 0!==t&&(this.mseBackWatch=t),null===(r=this.mseGc)||void 0===r||r.setBackWatch(this.mseBackWatch),null===(n=this.mseFeeder)||void 0===n||n.setBufferGoal(this.mseBufferGoal,this.mseBackWatch)}},{key:"getRemainingTimeToStart",value:function(){if(!this.maxStartTimestamp||this.wasSegmentLoaded)return null;var e=this.maxStartTimestamp-Date.now();return e<=0?0:e/1e3}},{key:"updateSourceInfo",value:function(e){var t,r,n=(0,Zs.IN)(e);null===(t=this.playlist)||void 0===t||t.setSourceIndex(n),null===(r=this.timelineFiller)||void 0===r||r.setSourceIndex(n)}},{key:"checkTotalBufferDuration",value:function(e,t){var r=this.timelineGc?this.timelineGc.getTotalExpectedBufferSize()+10:this.timelineBackWatch+Lh.z,n=e.reduce((function(e,t){return e+(t.end-t.start)}),0);n>r&&this.sendEvent({name:"FatTimelineBuffer",data:{type:t,expectedSize:r,size:n}})}},{key:"emitManifestoError",value:function(e,t,r){var n,i=null===(n=this.playlist)||void 0===n?void 0:n.getDebugInfo();if(i){var o=new Qs.w({message:e.message,code:"YASP_MANIFESTO_UNHANDLED",details:os(os({},i),{},{start:t,end:r}),isFatal:!1,category:Xs.q.EXCEPTION});this.emit("Error",o)}}},{key:"createTimeline",value:function(){var e=this;if(this.timeline)return this.timeline;var t=new Tl;return t.on("BufferedInfoChanged",(function(t){e.checkTotalBufferDuration(t.video,"video"),e.checkTotalBufferDuration(t.audio,"audio"),e.emit("BufferedInfoChanged",t)})),t.on("CuesAdded",(function(t){e.emit("CuesAdded",t)})),t.on("CodecsChange",(function(t){var r;if(e.mse){null===(r=e.mseFeeder)||void 0===r||r.abortForType(t.type);var n=t.getFullMimeType();e.mse.changeCodec(t.type,n)}})),t.on("StreamEndTimeUpdate",(function(t){e.emit("StreamEndTimeUpdate",t)})),t}},{key:"getStartPosition",value:function(){var e;return null!==this.startPosition&&Number.isFinite(this.startPosition)?this.startPosition:null!==(e=this.timeline)&&void 0!==e&&e.getIsDynamic()?Math.floor(this.timeline.getSeekableRange().end/1e3):this.timeline.getSeekableRange().start/1e3}},{key:"setDurationByVideoType",value:function(){if(!(!this.mse||!this.mediaType&&this.playlist instanceof ff)){var e=this.timeline.getDuration();void 0!==e&&this.mse.setDuration(e/1e3)}}},{key:"updateStreamingParameters",value:function(){var e=this;if(this.mediaType&&this.emit("VideoTypeChange",this.mediaType),this.playlist){var t,r=this.playlist.getDrmInfos();if(r.length>0)(0,Ed.needsManualDecryption)(r)&&(null===(t=this.segmentDecoder)||void 0===t||t.setEncryptionType("AES-CBC")),this.emit("DrmInfoReceived",r)}this.emit("UtcStartTimeUpdate",this.timeline.getUtcStartTime());var n=this.timeline.getSeekableRange(),i=n.start/1e3,o=n.end/1e3;"number"===typeof this.startPosition&&(this.startPosition=Math.min(Math.max(this.startPosition,i),o-1)),this.mse&&this.timeline.getIsDynamic()&&this.mse.setLiveSeekableRange(i,o).catch((function(t){e.attached&&(e.emitManifestoError(t,i,o),(0,hl.L)(t))})),this.emit("SeekableRangeUpdate",{start:i,end:o}),this.emit("IsLowLatencyChange",this.isLowLatency)}},{key:"startProcess",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=os(os({},r),{},{sourceKey:this.sourceKey});return this.timingsCollector.startProcess(e,t,n)}},{key:"load",value:(a=ns(ts().mark((function e(){var t,r,n,i,o,a,u,c,s,l,f,h,d,p,y,v=this;return ts().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.startProcess("load","Source"),this.timeline.emitBufferedInfoChanged(),this.segmentDecoder){e.next=13;break}if(r=function(e){return v.emit("Error",e)},!this.audioDecodingKey||"mp4"!==hu(this.url)){e.next=11;break}return this.segmentDecoder=new wd(Js.Z,r),e.next=8,this.segmentDecoder.setEncryptionType("AES-CTR");case 8:this.segmentDecoder.setKeys({hex_key:this.audioDecodingKey}),e.next=13;break;case 11:n=function e(t){var r,n;v.drmKeysResponse?null===(r=v.segmentDecoder)||void 0===r||r.setKeys((0,_d.N)(v.drmKeysResponse)):(null!==(n=v.handlers.WaitForKey)&&void 0!==n?n:[]).length?v.emit("WaitForKey",t):v.onAttachCallbacks.push((function(){e(t)}))},this.segmentDecoder=new wd(n,r);case 13:if(this.playlist||(this.playlist=this.createPlaylist(),this.playlist.setMirrorUrls(this.mirrorUrls)),this.playlist instanceof ff&&(this.playlistUpdater=null!==(i=this.playlistUpdater)&&void 0!==i?i:new df(this.playlist,(function(){return v.timeline.getMaxSegmentDuration()}))),this.playlist.isInitiallyLoaded()){e.next=28;break}if(o=this.startProcess("update playlist","Source"),!this.playlistUpdater){e.next=22;break}return e.next=20,this.playlistUpdater.update();case 20:e.next=24;break;case 22:return e.next=24,this.playlist.update();case 24:this.emit("PlaylistLoaded"),o.end(),e.next=29;break;case 28:this.updateStreamingParameters();case 29:if(!this.destroyed){e.next=32;break}return t.end("destroyed"),e.abrupt("return");case 32:return this.fetcher||(null!==(a=this.factories)&&void 0!==a&&a.fetcherFactory?this.fetcher=this.factories.fetcherFactory(this.fetcherParams):this.fetcher=new Ql(this.fetcherParams),this.fetcher.setIsLL(this.timeline.isLowLatencyLive()),this.fetcher.isLL()?this.bandwidthEstimator.appendFetcher(this.fetcher):(this.fetcherProgressAccumulator=new rh,this.fetcherProgressAccumulator.on("NetworkTrace",(function(e){v.sendEvent({name:"NetworkTrace",data:e})})),this.fetcherProgressAccumulator.appendFetcher(this.fetcher),this.bandwidthEstimator.appendFetcher(this.fetcherProgressAccumulator)),null===(u=this.ttfbEstimator)||void 0===u||u.appendFetcher(this.fetcher)),this.cmafLogger||(c=function(e){v.sendEvent({name:"MediaFormatChange",data:e})},this.cmafLogger=new Nh(c,this.getMseConfig())),this.segmentFetcher||(s=function(e){return v.startProcess("load segment","Segment Fetcher",e)},this.segmentFetcher=new Vf(this.fetcher,this.segmentDecoder,s,this.isLowMemoryMode),this.segmentFetcher.setEmsgSchemeIdUris(this.playlist.getEmsgSchemeIdUris()),this.segmentFetcher.setSegmentStreaming(!this.disableSegmentStreaming),this.segmentFetcher.on("Error",(function(e){v.emit("Error",e)})),this.segmentFetcher.on("EmsgDetected",(function(e){v.emit("EmsgDetected",e)})),this.segmentFetcher.on("ManifestUpdateRequired",(function(){var e;null===(e=v.playlistUpdater)||void 0===e||e.forceUpdate()})),this.segmentFetcher.on("SegmentLoaded",(function(e){var t;null===(t=v.cmafLogger)||void 0===t||t.update(e.type,e.cmaf),v.emit("SegmentLoaded",e)})),this.segmentFetcher.on("BufferAllocationError",(function(e){var t=v.mediaState.currentTime?1e3*v.mediaState.currentTime:0,r=v.getSegmentsInfo(t),n=r.segmentsInfo,i=r.bufferedInfo,o=new Qs.w({isFatal:!1,message:e.error.message,code:"YASP_BUFFER_ALLOCATION_ERROR",category:Xs.q.EXCEPTION,details:{type:e.type,video:os(os({},n.video),{},{buffered:i.video}),audio:os(os({},n.audio),{},{buffered:i.audio})}});v.emit("Error",o)}))),this.timelineFiller?this.timelineFiller.abortUseless():(h={timeline:this.timeline,mediaState:this.mediaState,baseUrlManager:this.baseUrlManager,bufferGoal:this.getBufferGoal(this.attached),abr:this.abr,segmentFetcher:this.segmentFetcher,bandwidthEstimator:this.bandwidthEstimator,ttfbEstimator:this.ttfbEstimator,sourceIndex:(0,Zs.IN)(this.url),isLowMemoryMode:this.isLowMemoryMode,getMSEBuffer:function(e,t){if(!v.mse)return null;var r=ln(v.mse.getBufferedRangesByType(e),t);return r?[[r]]:null},getMseBufferGoal:function(){return v.mseBufferGoal},retryManager:this.retryManager},null!==(l=this.factories)&&void 0!==l&&l.timelineFillerFactory?this.timelineFiller=this.factories.timelineFillerFactory(h):this.timelineFiller=new Nf(h),this.timelineFiller.configure({segmentStreaming:!this.disableSegmentStreaming,circularBuffering:this.circularBuffering}),this.timelineFiller.on("Error",(function(e){v.emit("Error",e)})),this.timelineFiller.on("BandwidthEstimateUpdate",(function(e){v.emit("BandwidthEstimateUpdate",e)})),this.timelineFiller.on("SegmentInProgress",(function(){v.bandwidthEstimator.addActiveSource(v.url)})),this.timelineFiller.on("NoSegmentsInProgress",(function(){v.bandwidthEstimator.removeActiveSource(v.url)})),this.timelineFiller.on("OutOfBytesLimit",(function(){var e;null===(e=v.timelineGc)||void 0===e||e.onOutOfBytesLimit()})),this.cron.plan(this.timelineFiller,100),this.initTimelineFillerBufferGoalAutoUpdate(),this.timelineFiller.setVideoState(No(this.mediaState,{currentTime:Math.max(null!==(f=this.getStartPosition())&&void 0!==f?f:0,0),duration:this.timeline.getDuration()/1e3})),this.timelineFiller.run()),this.timelineGc||(d=function(){var e=v.getBufferGoal(!1),t=v.getBufferGoal(!0),r=Math.max(e,t);return v.isLowMemoryMode?Math.max(r,v.mseBufferGoal):r},this.timelineGc=new Mf(this.timeline,this.mediaState,this.timelineBackWatch,d),this.timelineGc.configure({isLowMemoryMode:this.isLowMemoryMode,circularBuffering:this.circularBuffering}),this.cron.plan(this.timelineGc,1e3)),this.yaspWatchedTimeCollector||(this.yaspWatchedTimeCollector=new Ph(this.mediaState),this.yaspWatchedTimeCollector.on("WatchedTimeUpdated",(function(e){var t=e.watchedTime;v.watchedTime=t})),this.cron.plan(this.yaspWatchedTimeCollector,100)),this.handleAttachedState(),p=this.getBufferGoal(!1),y=p===Number.MAX_SAFE_INTEGER?0:p,e.next=43,Nu(this.timeline,y,this);case 43:return t.end(),e.abrupt("return",{startPosition:this.startPosition,drmInfos:this.playlist.getDrmInfos()});case 45:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getIsLowMemoryMode",value:function(){return this.isLowMemoryMode}},{key:"getSegmentsInfo",value:function(e){var t;return{segmentsInfo:this.timeline.getSegmentsDebugInfo(e),bufferedInfo:(null===(t=this.mse)||void 0===t?void 0:t.getBufferedRanges())||{audio:[],video:[]}}}},{key:"createPlaylist",value:function(){return"mp4"===hu(this.url)?this.createSidxo():this.createManifesto()}},{key:"createManifesto",value:function(){var e,t=this,r=new ff({url:this.url,timeline:this.timeline,baseUrlManager:this.baseUrlManager,fetcherParams:this.fetcherParams,fetcherFactory:null===(e=this.factories)||void 0===e?void 0:e.fetcherFactory});return r.on("Error",(function(e){t.emit("Error",e)})),r.on("DrmInfoReceived",(function(e){var r;(0,Ed.needsManualDecryption)(e)&&(null===(r=t.segmentDecoder)||void 0===r||r.setEncryptionType("AES-CBC")),t.emit("DrmInfoReceived",e)})),r.on("ServerTimeChange",(function(e){t.emit("ServerTimeChange",e)})),r.on("ManifestUpdate",(function(){var e,r,n,i;t.emit("UtcStartTimeUpdate",t.timeline.getUtcStartTime());var o=t.timeline.getSeekableRange(),a=o.start/1e3,u=o.end/1e3;null===(e=t.mse)||void 0===e||e.setLiveSeekableRange(a,u).catch((function(e){t.attached&&(t.emitManifestoError(e,a,u),(0,hl.L)(e))})),t.emit("SeekableRangeUpdate",{start:a,end:u});var c=null===(r=t.playlist)||void 0===r?void 0:r.getMediaType();t.mediaType!==c&&(t.mediaType=c,t.emit("VideoTypeChange",t.mediaType),t.setDurationByVideoType());var s=t.timeline.isLowLatencyLive();t.isLowLatency!==s&&(t.isLowLatency=s,t.emit("IsLowLatencyChange",t.isLowLatency),t.isLowLatency&&t.sendEvent({name:"LowLatencyDetected",data:{url:t.url}})),null===(n=t.segmentFetcher)||void 0===n||n.setEmsgSchemeIdUris(null===(i=t.playlist)||void 0===i?void 0:i.getEmsgSchemeIdUris())})),r}},{key:"createSidxo",value:function(){var e,t=this,r=new vd({url:this.url,timeline:this.timeline,fetcherParams:this.fetcherParams,segmentDecoder:this.segmentDecoder,baseUrlManager:this.baseUrlManager,retryManager:this.retryManager,fetcherFactory:null===(e=this.factories)||void 0===e?void 0:e.fetcherFactory});return r.on("Error",(function(e){t.emit("Error",e)})),r.on("ManifestUpdate",(function(){t.setDurationByVideoType()})),r}},{key:"getBufferGoal",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.bufferGoalManager.getBufferGoal({watchedTime:this.watchedTime,currentTime:this.mediaState.currentTime||0,usePreloadBufferGoal:!e})}},{key:"initTimelineFillerBufferGoalAutoUpdate",value:function(){var e=this;this.stopTimelineFillerBufferGoalAutoUpdate();var t=function(){var t;null===(t=e.timelineFiller)||void 0===t||t.setBufferGoal(e.getBufferGoal(e.attached))};this.timelineFillerBufferGoalInterval=setInterval(t,1e3),t()}},{key:"stopTimelineFillerBufferGoalAutoUpdate",value:function(){this.timelineFillerBufferGoalInterval&&clearInterval(this.timelineFillerBufferGoalInterval)}},{key:"onPositionChange",value:function(e){var t,r,n;null!==(t=this.textEngine)&&void 0!==t&&t.isInBufferedRange(e)||null===(n=this.textFeeder)||void 0===n||n.abort(e),null===(r=this.timelineGc)||void 0===r||r.run(e)}},{key:"handleOutOfBufferSeek",value:(o=ns(ts().mark((function e(){var t,r,n,i,o,a,u,c,s,l,f,h,d,p=this,y=arguments;return ts().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=y.length>0&&void 0!==y[0]?y[0]:null,!(0,vf.yd)(self)){e.next=6;break}return e.next=4,(0,cf._)(100);case 4:e.next=9;break;case 6:if(!(0,vf.VY)(self)){e.next=9;break}return e.next=9,(0,cf._)(0);case 9:if(null===(t=this.timelineFiller)||void 0===t||t.abortUseless(),null===(r=this.timelineFiller)||void 0===r||r.run(),null===(n=this.cmafLogger)||void 0===n||n.onSeek(),!(0,_l.RW)("yasp_no_source_abort_on_fake_seek")){e.next=19;break}return null===(a=this.mse)||void 0===a||a.abort(),null===(u=this.mseFeeder)||void 0===u||u.abortUseless(),e.next=17,null===(c=this.mseGc)||void 0===c?void 0:c.fullClear(this.mediaState.currentTime).catch((function(e){if(p.attached)throw e}));case 17:e.next=29;break;case 19:if(!(0,_l.RW)("web_yasp_low_memory_cleaning_in_normal_mode")&&!this.isLowMemoryMode){e.next=26;break}return f=null!==o&&void 0!==o?o:this.mediaState.currentTime,null===(s=this.mseFeeder)||void 0===s||s.abortUseless(null!==f&&void 0!==f?f:void 0),e.next=24,null===(l=this.mseGc)||void 0===l?void 0:l.fullClear(f).catch((function(e){if(p.attached)throw e}));case 24:e.next=29;break;case 26:return e.next=28,null===(h=this.mseGc)||void 0===h?void 0:h.fullClear().catch((function(e){if(p.attached)throw e}));case 28:null===(d=this.mseFeeder)||void 0===d||d.abort();case 29:null===(i=this.mseFeeder)||void 0===i||i.run();case 30:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"handleAttachedState",value:function(){var e,t,r,n=this.attached?this.mediaState:No(this.mediaState,{currentTime:Math.max(null!==(e=this.startPosition)&&void 0!==e?e:0,0),duration:this.timeline.getDuration()/1e3});null===(t=this.timelineFiller)||void 0===t||t.setVideoState(n),null===(r=this.timelineGc)||void 0===r||r.setVideoState(n)}},{key:"handleSeekableUpdater",value:function(){var e=this;if(!this.seekableUpdater&&this.attached)return this.seekableUpdater=new jh(this.timeline),this.seekableUpdater.on("SeekableUpdate",(function(t){e.emit("SeekableRangeUpdate",t)})),void this.cron.plan(this.seekableUpdater,100);this.seekableUpdater&&!this.attached&&(this.cron.cancel(this.seekableUpdater),this.seekableUpdater.destroy(),this.seekableUpdater=void 0)}},{key:"setIsAttached",value:function(e){this.attached=e,this.emit("AttachedStateChange",e)}},{key:"attach",value:function(e){var t=this,r=this.startProcess("source attach","Source");return new Gd((function(n){t.performOnLoad((function(){var i,o,a,u;t.setIsAttached(!0),t.updateSourceInfo(e),t.playlistUpdater&&t.playlistUpdater.update(),t.startPosition=null!==(i=t.startPosition)&&void 0!==i?i:Pi(e),t.timelineGc&&t.cron.plan(t.timelineGc,1e3),t.handleAttachedState();var c=t.startProcess("init MSE","Source");t.mse=null!==(o=t.mse)&&void 0!==o?o:new $h(t.getMseConfig(),t.sourceBufferExtraFeatures),t.mse.on("Reset",(function(e){var r;null===(r=t.mseFeeder)||void 0===r||r.reset(),t.emit("UpdateUrlObject",e)})),t.mse.on("Open",(function(e){c.end("sourceopen"),t.sendEvent({name:"YaspSourceOpen",data:{time:e}})})),t.handleSeekableUpdater(),t.setDurationByVideoType(),t.updateStreamingParameters(),t.mseFeeder=null!==(a=t.mseFeeder)&&void 0!==a?a:new _f(t.timeline,t.mediaState,t.mse,(function(e){return t.startProcess("push segment in mse","MSE Feeder",e)}),{bufferGoal:t.mseBufferGoal,backWatch:t.mseBackWatch},t.decodeTimeBatcher,t.isLowMemoryMode),t.mseFeeder.on("QuotaExceededError",(function(){var e,r;t.wasBufferGoalDecreased||(t.setMseBufferGoal(t.mseBufferGoal/2,t.timeline.getMaxSegmentDuration()/1e3),null===(e=t.mseGc)||void 0===e||e.run(),null===(r=t.mseFeeder)||void 0===r||r.reset(),t.wasBufferGoalDecreased=!0,t.sendEvent({name:"YaspDecreaseBufferOnQuotaExceededError",data:{bufferGoal:t.mseBufferGoal,backWatch:t.mseBackWatch}}))})),t.mseFeeder.on("SameSegmentsAdded",(function(e){t.sendEvent({name:"YaspSameSegmentAdded",data:e})})),t.mseFeeder.on("FatBuffer",(function(e){t.sendEvent({name:"FatBuffer",data:{type:e}}),t.mseGc&&t.mseGc.run()})),t.mseFeeder.on("GorgedBuffer",(function(e){t.sendEvent({name:"GorgedBuffer",data:{type:e}})})),t.mseGc=null!==(u=t.mseGc)&&void 0!==u?u:new Yf(t.mse,t.mediaState,{backWatch:t.mseBackWatch,isLowMemoryMode:t.isLowMemoryMode},(function(){return t.startProcess("clear","MSE Garbage Collector")}),t.timeline),t.mseFeeder.on("Error",(function(e){var r=e;if("YASP_QUOTA_EXCEEDED_ERROR"===e.code){var n,i=1e3*(null!==(n=t.mediaState.currentTime)&&void 0!==n?n:0),o=t.getSegmentsInfo(i),a=o.segmentsInfo,u=o.bufferedInfo;r=new Qs.w(e,{details:os(os({},e.details),{},{video:os(os({},a.video),{},{buffered:u.video}),audio:os(os({},a.audio),{},{buffered:u.audio})})})}t.emit("Error",r)})),!t.targetLatencyUpdater&&t.timeline.isLowLatencyLive()&&(t.targetLatencyUpdater=new Ih({timeline:t.timeline,mediaState:t.mediaState}),t.targetLatencyUpdater.on("TargetLatencyUpdate",(function(e){t.emit("TargetLatencyUpdated",e)})),t.targetLatencyUpdater.notifyTargetLatency()),t.textEngine||(t.textEngine=new Bd,t.textEngine.on("CuesAdded",(function(e){t.emit("CuesAdded",e)})),t.textEngine.on("ClearCues",(function(){t.emit("ClearCues")}))),t.textFeeder||(t.textFeeder=new kd(t.timeline,t.mediaState,t.textEngine),t.textFeeder.on("Error",(function(e){t.emit("Error",e)}))),t.cron.plan(t.mseFeeder,100),t.cron.plan(t.textFeeder,100);var s=t.timeline.getMaxSegmentDuration()/2;t.cron.plan(t.mseGc,s),t.sendEvent({name:"YaspSourceAttached",data:{url:e}}),n(t.mse.getObjectUrl()),r.end(),t.onAttachCallbacks.forEach((function(e){return e()})),t.onAttachCallbacks.length=0}))}))}},{key:"setVideoTrack",value:function(e){this.timeline.setVideoTrack(e),void 0!==e&&this.handleSetTrack("video")}},{key:"setAudioTrack",value:function(e){this.timeline.setAudioLanguage(e),void 0!==e&&this.handleSetTrack("audio")}},{key:"handleSetTrack",value:function(e){var t,r,n=this;"text"!==e?null===(t=this.mseGc)||void 0===t||t.fullClear().then((function(){var e;null===(e=n.mseFeeder)||void 0===e||e.abort(),Hd||n.emit("FlushMediaPipelineRequested")})).catch((function(e){var t;!n.attached||null!==(t=n.mse)&&void 0!==t&&t.isReloading()||(0,hl.L)(e)})):null===(r=this.textFeeder)||void 0===r||r.abort()}},{key:"setTextTrack",value:function(e){this.timeline.setTextTrack(e),this.handleSetTrack("text")}},{key:"getVideoTracks",value:function(){return this.timeline.getVideoTracksInfo()}},{key:"getAudioTracks",value:function(){return this.timeline.getAudioTracksInfo()}},{key:"getTextTracks",value:function(){return this.timeline.getTextTracksInfo()}},{key:"detach",value:function(e){var t=this.startProcess("detach","Source");if(this.attached){this.attachUnsubscribers.forEach((function(e){return e()})),this.attachUnsubscribers=[],this.setIsAttached(!1),this.timelineGc&&this.cron.cancel(this.timelineGc),this.playlistUpdater&&this.playlistUpdater.disable();var r=this.mediaState,n=r.duration,i=r.currentTime;if(i&&i>=n){var o=this.timeline.getSeekableRange().start;this.startPosition=o/1e3}else this.playlist instanceof vd?this.startPosition=null:this.startPosition=this.mediaState.currentTime;this.handleSeekableUpdater(),this.handleAttachedState(),this.mseFeeder&&(this.cron.cancel(this.mseFeeder),this.mseFeeder.destroy(),this.mseFeeder=void 0),this.mseGc&&(this.cron.cancel(this.mseGc),this.mseGc=void 0),this.mse&&(this.mse.destroy(e.details),this.mse=void 0),this.textFeeder&&(this.cron.cancel(this.textFeeder),this.textFeeder.destroy(),this.mseFeeder=void 0),this.textEngine&&(this.textEngine.destroy(),this.textEngine=void 0),this.yaspWatchedTimeCollector&&(this.cron.cancel(this.yaspWatchedTimeCollector),this.yaspWatchedTimeCollector.destroy(),this.yaspWatchedTimeCollector=void 0),this.targetLatencyUpdater&&(this.targetLatencyUpdater.destroy(),this.targetLatencyUpdater=void 0),this.sendEvent({name:"YaspSourceDetached",data:{url:this.url}}),t.end()}else t.end("not attached")}},{key:"setVideoElementSizes",value:function(e){var t,r;null!==(t=e.width)&&void 0!==t||(e.width=1/0),null!==(r=e.height)&&void 0!==r||(e.height=1/0),this.abr.setVideoElementSizes(e)}},{key:"destroy",value:function(){var e,r,n,i,o=this.startProcess("destroy","Source");this.sendEvent({name:"YaspSourceDestroyCalled",data:{url:this.url}}),this.detach({name:"destroy"}),this.playlistUpdater&&(this.playlistUpdater.disable(),this.playlistUpdater=void 0),this.mseFeeder&&(this.cron.cancel(this.mseFeeder),this.mseFeeder.destroy(),this.mseFeeder=void 0),this.mseGc&&(this.cron.cancel(this.mseGc),this.mseGc=void 0),this.mse&&(this.mse.destroy(),this.mse=void 0),this.timelineFiller&&(this.cron.cancel(this.timelineFiller),this.timelineFiller.destroy(),this.timelineFiller=void 0,this.stopTimelineFillerBufferGoalAutoUpdate()),this.segmentFetcher&&(this.segmentFetcher.destroy(),this.segmentFetcher=void 0),this.segmentDecoder&&(this.segmentDecoder.destroy(),this.segmentFetcher=void 0),this.timelineGc&&(this.cron.cancel(this.timelineGc),this.timelineGc=void 0),this.playlist&&(this.playlist.destroy(),this.playlist=void 0),this.fetcher&&(null===(e=this.bandwidthEstimator)||void 0===e||e.removeFetcher(this.fetcher),null===(r=this.fetcherProgressAccumulator)||void 0===r||r.removeFetcher(this.fetcher),null===(n=this.ttfbEstimator)||void 0===n||n.removeFetcher(this.fetcher),this.fetcher.destroy(),this.fetcher=void 0),this.fetcherProgressAccumulator&&(this.fetcherProgressAccumulator.off("NetworkTrace"),null===(i=this.bandwidthEstimator)||void 0===i||i.removeFetcher(this.fetcherProgressAccumulator)),this.yaspWatchedTimeCollector&&(this.cron.cancel(this.yaspWatchedTimeCollector),this.yaspWatchedTimeCollector.destroy(),this.yaspWatchedTimeCollector=void 0),this.fetcherProgressAccumulator=void 0,this.timeline.destroy(),this.abr.off("AbrDecisionChange"),this.destroyed=!0,this.sendEvent({name:"YaspSourceDestroyed",data:{url:this.url}}),o.end(),us(ds(t.prototype),"destroy",this).call(this)}},{key:"getMseConfig",value:function(){var e=this.timeline.getMimeTypes(),t=e.audio[0],r=e.video[0],n={};return t&&(n.audio=t),r&&(n.video=r),n}},{key:"isAttached",value:function(){return this.attached}},{key:"getDebugInfo",value:function(){var e=this,t=null!==this.mediaState.currentTime?1e3*this.mediaState.currentTime:void 0;try{var r,n,i,o,a,u,c,s,l,f,h,d,p,y,v,m,g,b;return JSON.parse(JSON.stringify({attached:this.attached,url:this.url,mediaState:this.mediaState,abr:this.abr.getDebugInfo(),bandwidthEstimator:this.bandwidthEstimator.getDebugInfo(),ttfbEstimator:null!==(r=null===(n=this.ttfbEstimator)||void 0===n?void 0:n.getDebugInfo())&&void 0!==r?r:null,playlist:null!==(i=null===(o=this.playlist)||void 0===o?void 0:o.getDebugInfo())&&void 0!==i?i:null,playlistUpdater:null!==(a=null===(u=this.playlistUpdater)||void 0===u?void 0:u.getDebugInfo())&&void 0!==a?a:null,mse:null!==(c=null===(s=this.mse)||void 0===s?void 0:s.getDebugInfo())&&void 0!==c?c:null,mseFeeder:null!==(l=null===(f=this.mseFeeder)||void 0===f?void 0:f.getDebugInfo())&&void 0!==l?l:null,mseGc:null!==(h=null===(d=this.mseGc)||void 0===d?void 0:d.getDebugInfo())&&void 0!==h?h:null,timeline:this.timeline.getDebugInfo(t),timelineFiller:null!==(p=null===(y=this.timelineFiller)||void 0===y?void 0:y.getDebugInfo())&&void 0!==p?p:null,timelineGc:null!==(v=null===(m=this.timelineGc)||void 0===m?void 0:m.getDebugInfo())&&void 0!==v?v:null,fetcher:null!==(g=null===(b=this.fetcher)||void 0===b?void 0:b.getDebugInfo())&&void 0!==g?g:null,userQuality:this.callbacks.getUserQuality(),maxAutoQuality:this.callbacks.getMaxAutoQuality(),wasSegmentLoaded:this.wasSegmentLoaded,maxStartTimestamp:this.maxStartTimestamp,isLowMemoryMode:this.isLowMemoryMode,mirrorUrls:this.mirrorUrls,baseUrlManager:this.baseUrlManager.getDebugInfo(),factories:this.factories?(0,gl.Z)(this.factories).reduce((function(t,r){var n;return t[r]=Boolean(null===(n=e.factories)||void 0===n?void 0:n[r]),t}),{}):void 0}))}catch(w){return{attached:String(this.attached),url:String(this.url),message:"failed to serialize debug info",error:String(w),stack:String(null===w||void 0===w?void 0:w.stack)}}}},{key:"sendEvent",value:function(e){this.emit("Event",e)}},{key:"getStats",value:function(){var e;return{bandwidth:null===(e=this.bandwidthEstimator)||void 0===e?void 0:e.getBandwidthEstimate()}}},{key:"banBaseUrlByCsp",value:function(e){this.baseUrlManager.banUrlPermanently(e)}},{key:"configure",value:function(e){var t,r,n,i,o,a,u,c;if(this.validateBufferGoals(e),e.videoSizes&&this.setVideoElementSizes(e.videoSizes),e.drmKeysResponse&&(this.drmKeysResponse=e.drmKeysResponse,null===(u=this.segmentFetcher)||void 0===u||u.setKeys((0,_d.N)(this.drmKeysResponse))),e.audioDecodingKey&&(this.audioDecodingKey=e.audioDecodingKey),null!==(t=e.tracks)&&void 0!==t&&t.videoTrackId&&this.setVideoTrack(e.tracks.videoTrackId),null!==(r=e.tracks)&&void 0!==r&&r.audioLang&&this.setAudioTrack(e.tracks.audioLang),void 0!==(null===(n=e.tracks)||void 0===n?void 0:n.textTrack)&&this.setTextTrack(e.tracks.textTrack),null!==(i=e.offlineParams)&&void 0!==i&&i.contentId){var s,l=e.offlineParams,f=l.contentId,h=l.downloadedFragments;e.tracks&&!h&&Hl.SourceStoreHandlers.handleStart(this.url,f,null===(s=this.playlist)||void 0===s?void 0:s.getMpdXml(),this.timeline,e.tracks),h&&(Hl.SourcePersistStore.downloadedFragments=h)}void 0!==e.bufferGoal&&this.bufferGoalManager.setConstantBufferGoal(e.bufferGoal),void 0!==e.backWatch&&(this.timelineBackWatch=e.backWatch,null===(c=this.timelineGc)||void 0===c||c.setBackWatch(this.timelineBackWatch)),void 0!==e.preloadBufferGoal&&this.bufferGoalManager.setPreloadBufferGoal(e.preloadBufferGoal),void 0===e.mseBufferGoal&&void 0===e.mseBackWatch||this.setMseBufferGoal(e.mseBufferGoal,e.mseBackWatch),this.bandwidthEstimator&&e.defaultBandwidthEstimate&&this.bandwidthEstimator.setDefaultEstimate(e.defaultBandwidthEstimate),this.timeline.setPresentationDelayOptions({delay:e.presentationDelay,enableOffset:e.enablePresentationDelayOffset});var d,p,y,v,m=this.bufferGoalManager.getSkippableFragments();this.bufferGoalManager.setSkippableFragments(null!==(o=e.skippableFragments)&&void 0!==o?o:m),e.mirrorUrls&&(this.mirrorUrls=e.mirrorUrls,null===(d=this.playlist)||void 0===d||d.setMirrorUrls(this.mirrorUrls)),void 0===e.maxStartTime||this.wasSegmentLoaded||(this.maxStartTimestamp=Date.now()+1e3*e.maxStartTime),void 0!==e.disableSegmentStreaming&&(this.disableSegmentStreaming=e.disableSegmentStreaming,null===(p=this.segmentFetcher)||void 0===p||p.setSegmentStreaming(!this.disableSegmentStreaming)),e.sourceBufferExtraFeatures&&(this.sourceBufferExtraFeatures=e.sourceBufferExtraFeatures,null===(y=this.mse)||void 0===y||y.setExtraFeatures(this.sourceBufferExtraFeatures)),void 0!==e.circularBuffering&&(this.circularBuffering=e.circularBuffering,null===(v=this.timelineGc)||void 0===v||v.configure({circularBuffering:this.circularBuffering})),null===(a=this.timelineFiller)||void 0===a||a.configure({circularBuffering:this.circularBuffering,segmentStreaming:!this.disableSegmentStreaming}),this.updateFetchersParams(e)}},{key:"validateBufferGoals",value:function(e){var t,r;if(void 0!==e.bufferGoal||void 0!==e.preloadBufferGoal){var n=void 0!==e.bufferGoal?e.bufferGoal:null!==(t=this.bufferGoalManager.getConstantBufferGoal())&&void 0!==t?t:Lh.z,i=null!==(r=e.preloadBufferGoal)&&void 0!==r?r:this.bufferGoalManager.getPreloadBufferGoal();i>n&&(0,hl.L)(new Error("Preload buffer goal should not be greater than buffer goal: ".concat(i," > ").concat(n)))}}},{key:"updateFetchersParams",value:function(e){var t,r;this.fetcherParams=function(e,t){var r={};return e.offlineParams&&(r.contentId=e.offlineParams.contentId),void 0===e.withCredentials?ha(ha({},t),r):(r.credentials=e.withCredentials?"include":"omit",r)}(e,this.fetcherParams),null===(t=this.fetcher)||void 0===t||t.setBaseParams(this.fetcherParams),null===(r=this.playlist)||void 0===r||r.setFetcherBaseParams(this.fetcherParams)}},{key:"subscribeToTrackChanges",value:function(){var e=this;this.timeline.on("VideoTrackChange",(function(t){e.emit("VideoTrackChange",t)})),this.timeline.on("VideoTracksChange",(function(t){e.emit("VideoTracksChange",t)})),this.timeline.on("AudioLanguageChange",(function(t){e.emit("AudioLanguageChange",t)})),this.timeline.on("TextTrackChange",(function(t){e.emit("TextTrackChange",t)}))}},{key:"addAttachedListener",value:function(e,t){var r=this;this.on(e,t),this.attachUnsubscribers.push((function(){r.off(e,t)}))}}],i=[{key:"removeFromDisk",value:function(e){Hl.SourcePersistStore.removeDirectory(e),delete Hl.SourcePersistStore.downloadedFragments[e]}}],n&&as(r.prototype,n),i&&as(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(ll.M),Wd=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),vs(this,"timesheet",[]),vs(this,"started",!1),vs(this,"startTimesheetItem",(function(e){clearInterval(e.intervalId),e.intervalId=self.setInterval((function(){e.tasks.forEach((function(e){if(t.started)try{e.run()}catch(r){self.setTimeout((function(){throw r}))}}))}),e.interval)}))}var t,r,n;return t=e,n=[{key:"stopTimesheetItem",value:function(e){clearInterval(e.intervalId),e.intervalId=void 0}}],(r=[{key:"obtainTimesheetItemByInterval",value:function(e){var t=this.timesheet.find((function(t){return t.interval===e}));if(void 0!==t)return t;var r={interval:e,intervalId:void 0,tasks:[]};return this.started&&this.startTimesheetItem(r),this.timesheet.push(r),r}},{key:"start",value:function(){this.started||(this.started=!0,this.timesheet.forEach(this.startTimesheetItem))}},{key:"stop",value:function(){this.started&&(this.started=!1,this.timesheet.forEach(e.stopTimesheetItem))}},{key:"plan",value:function(e,t){var r=this.obtainTimesheetItemByInterval(t);r.tasks.includes(e)||r.tasks.push(e)}},{key:"cancel",value:function(t){for(var r=0;r<this.timesheet.length;r++){var n=this.timesheet[r],i=n.tasks.indexOf(t);-1!==i&&(n.tasks.splice(i,1),0===n.tasks.length&&(e.stopTimesheetItem(n),this.timesheet.splice(r,1),r-=1))}}},{key:"destroy",value:function(){this.stop(),this.timesheet.length=0}}])&&ys(t.prototype,r),n&&ys(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Yd=r(18772),qd=r(85564),zd=r(35478),Kd=r(60435),$d=r(10743),Xd=r(28557),Jd=r(89737),Qd=r(87853),Zd={userQuality:vh.k,maxAutoQuality:mh,defaultBandwidthEstimate:{value:Qd.S,source:"default"}},ep=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ss(this,"storage",new Map),Ss(this,"common",_s({},Zd)),Ss(this,"onError",void 0),this.onError=t}var t,r,n;return t=e,(r=[{key:"generateStorageKey",value:function(e,t){return"".concat(this.getStoragePrefix(e)).concat(t)}},{key:"getStoragePrefix",value:function(e){return"scopeId=".concat(e,":")}},{key:"countScopeStorage",value:function(e){var t,r=this.getStoragePrefix(e),n=0,i=gs(this.storage.keys());try{for(i.s();!(t=i.n()).done;)t.value.startsWith(r)&&n++}catch(o){i.e(o)}finally{i.f()}return n}},{key:"checkAndClearConfigStorage",value:function(e){var t=this;if(!(this.countScopeStorage(e)<100)){var r,n=this.getStoragePrefix(e),i=[],o=gs(this.storage.keys());try{for(o.s();!(r=o.n()).done;){var a=r.value;a.startsWith(n)&&i.length<50&&i.push(a)}}catch(u){o.e(u)}finally{o.f()}i.forEach((function(e){return t.storage.delete(e)})),this.onError(new Error("Too many items in config storage for scope ".concat(e,"! ").concat(100)),e)}}},{key:"updateCommonOptions",value:function(e){var t=this;Object.keys(this.common).forEach((function(r){var n=e[r];e.hasOwnProperty(r)&&void 0===n?t.common[r]=Zd[r]:void 0!==n&&(t.common[r]=n)}))}},{key:"add",value:function(e,t,r){var n=this.generateStorageKey(e,t),i=_s(_s({},this.storage.get(n)),r);this.storage.set(n,i),this.updateCommonOptions(r),this.checkAndClearConfigStorage(e)}},{key:"extract",value:function(e,t){var r=this.generateStorageKey(e,t),n=this.storage.get(r);return this.storage.delete(r),n}},{key:"getCommonOptions",value:function(){return this.common}},{key:"getDebugInfo",value:function(){var e,t={},r=gs(this.storage.entries());try{for(r.s();!(e=r.n()).done;){var n=ms(e.value,2),i=n[0],o=n[1],a=i.match(/^scopeId=(\d+):/);if(a){var u=parseInt(a[1],10);t[u]||(t[u]={storage:{},size:0});var c=i.substring(i.indexOf(":")+1);t[u].storage[c]=o,t[u].size++}}}catch(s){r.e(s)}finally{r.f()}return _s(_s({},this.common),{},{scopes:t})}}])&&Os(t.prototype,r),n&&Os(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),tp=function(e){function t(){return Rs(this,t),o.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xs(e,t)}(t,e);var r,n,i,o=Ps(t);return r=t,n&&Ts(r.prototype,n),i&&Ts(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}(Ks),rp=r(24735),np=r(34902),ip=r(67251),op=r(53096),ap=r(72573),up=r(67767),cp=["objectUrl"],sp=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scope=t,Hs(this,"yaspRpc",void 0),Hs(this,"isFakeWorker",void 0),Hs(this,"cron",new Wd),Hs(this,"resourceTimingsMonitor",void 0),Hs(this,"segmentRetryManager",void 0),Hs(this,"rpcIncomingHistory",new Xd.d(Jd.K)),Hs(this,"rpcOutgoingHistory",new Xd.d(Jd.K)),Hs(this,"timingsCollector",void 0),Hs(this,"cspErrorHandler",void 0),Hs(this,"configStorage",new ep((function(e,t){return r.handleRpcError(e,t)}))),Hs(this,"scopes",new Map),Hs(this,"getMaxAutoQuality",(function(){return r.configStorage.getCommonOptions().maxAutoQuality})),Hs(this,"getUserQuality",(function(){return r.configStorage.getCommonOptions().userQuality})),Hs(this,"getDefaultBandwidth",(function(){return r.configStorage.getCommonOptions().defaultBandwidthEstimate})),Hs(this,"createVideoSource",(function(e,t,n,i,o,a){var u=new ph,c=u,s=new $s(t,r.scope,u,i),l=new Vd(r.cron,e,c,r.timingsCollector,r.segmentRetryManager,{callbacks:n,isLowMemoryMode:o,factories:a});l.on("VideoTypeChange",(function(t){r.sendEventAndSaveHistory({method:"changeVideoType",params:{source:e,videoType:t,scopeId:i}})})),l.on("CuesAdded",(function(t){var n=t.cues,o=t.label;r.sendEventAndSaveHistory({method:"cuesAdded",params:{source:e,cues:n,label:o,scopeId:i}})})),l.on("ClearCues",(function(){r.sendEventAndSaveHistory({method:"cuesCleared",params:{source:e,scopeId:i}})}));var f=function(e){var r=e.source,n=e.devicePixelRatio;return(0,Zs.Hi)(r)!==t?{done:!1,value:void 0}:(u.devicePixelRatio=n,{done:!0,value:void 0})};return r.yaspRpc.registerHandler("setDevicePixelRatio",f),l.on("Destroy",(function(){r.yaspRpc.removeHandler("setDevicePixelRatio",f)})),[l,c,s]})),Hs(this,"createAudioSource",(function(e,t,n,i,o,a){var u=new yh,c=u,s=new tp(t,r.scope,u,i);return[new Vd(r.cron,e,c,r.timingsCollector,r.segmentRetryManager,{callbacks:n,isLowMemoryMode:o,factories:a}),c,s]})),this.isFakeWorker="isFakeWorker"in t,this.yaspRpc=new Yd.A((function(e){r.isFakeWorker?t.postMessage(e):t.postMessage(e,(0,zd._)(e))}),this.isFakeWorker),this.cspErrorHandler=new np.r(self)}var t,r,n;return t=e,(r=[{key:"processCspError",value:function(e){return this.cspErrorHandler?(0,ip.t)(this.cspErrorHandler,e):e}},{key:"obtainScope",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.scopes.has(e))return this.scopes.get(e);var i=new el(t,(function(t,n){r.sendEventAndSaveHistory({method:"event",params:{source:null,event:{name:"YaspReleasedSrcAutomatically",data:{sourceLimit:n,urls:t}},isWorkerMessage:!0,scopeId:e}})}),(function(t){r.sendEventAndSaveHistory({method:"error",params:{source:null,error:JSON.stringify(t),isWorkerMessage:!0,scopeId:e}})}));return this.scopes.set(e,{sourceManager:i,isLowMemoryMode:n}),this.scopes.get(e)}},{key:"init",value:function(){var e=this;this.cron.start(),this.yaspRpc.registerHandler("initWorker",(function(t){(0,_l.Vc)(t);var r=null===t.retryConfig?void 0:t.retryConfig,n=null===t.sourceLimit?void 0:t.sourceLimit,i=null===t.isLowMemoryMode?void 0:t.isLowMemoryMode;e.segmentRetryManager=new Af(r);var o=e.obtainScope(op.$,n,i),a=o.sourceManager,u=o.isLowMemoryMode;setTimeout((function(){var t="undefined"===typeof document;e.sendEventAndSaveHistory({method:"event",params:{source:null,event:{name:t?"YaspWorkerEnabled":"YaspWorkerDisabled",data:void 0},isWorkerMessage:!0,scopeId:op.$}})})),setTimeout((function(){e.sendEventAndSaveHistory({method:"workerInited",params:{sourceLimit:a.getSourceLimit()||0,isLowMemoryMode:u,scopeId:op.$}})})),e.timingsCollector=new rp.h;var c=null===t.perfLogUrl?void 0:t.perfLogUrl;return e.initResourceTimingsMonitor(c),{done:!0,value:""}})),this.registerHandlerWithHistorySaving("detach",(function(t){var r=t.source,n=t.scopeId,i=t.reason,o=e.getSourceObject(r,n);return null===o||void 0===o||o.detach(i),{done:!0,value:void 0}})),this.registerHandlerWithHistorySaving("destroy",(function(t){var r,n=t.source,i=t.reason,o=t.scopeId,a=(e.scopes.get(o)||{}).sourceManager,u="ExternalApi"===i?"YaspReleaseSrcManuallyCalled":"YaspReleaseSrcOnErrorCalled",c="ExternalApi"===i?{url:n,sourceCount:null!==(r=null===a||void 0===a?void 0:a.getSourceCount())&&void 0!==r?r:0}:{url:n};e.sendEventAndSaveHistory({method:"event",params:{source:n,event:{name:u,data:c},scopeId:o}});var s=e.getSourceObject(n,o);if(s){e.validateSourceDestroy(s,i,n,o),null===a||void 0===a||a.removeSource(n);var l="ExternalApi"===i?"YaspReleasedSrcManually":"YaspReleasedSrcOnError";e.sendEventAndSaveHistory({method:"event",params:{source:n,event:{name:l,data:c},isWorkerMessage:!0,scopeId:o}})}if(n.startsWith(Vl.STORE_BASE_PATH)){var f=n.split("/").pop();f&&Vd.removeFromDisk(f)}return{done:!0,value:void 0}})),this.registerHandlerWithHistorySaving("notifyCspError",(function(t){var r=t.source,n=t.url,i=t.scopeId,o=e.getSourceObject(r,i);return null===o||void 0===o||o.banBaseUrlByCsp(n),{done:!0,value:void 0}})),this.registerHandlerWithHistorySaving("requestDebugInfo",(function(t){var r,n,i,o=t.source;if(!e.scopes.size)return{done:!0,value:void 0};var a,u,c={};return e.scopes.forEach((function(e,t){var r=e.sourceManager,n=e.isLowMemoryMode,i=r.getAllSources().map((function(e){return e.getDebugInfo()}));0===t?(a=i,u=n):c[t]={sources:i,isLowMemoryMode:n}})),{done:!0,value:{yaspSrc:null!==o&&void 0!==o?o:null,outgoingHistory:e.rpcOutgoingHistory.toArray(),incomingHistory:e.rpcIncomingHistory.toArray(),timings:null===(r=e.timingsCollector)||void 0===r?void 0:r.extractTimings(),sources:null!==(n=a)&&void 0!==n?n:[],isLowMemoryMode:u,configStorage:null!==(i=e.configStorage.getDebugInfo())&&void 0!==i?i:null,scopes:c}}})),this.registerHandlerWithHistorySaving("configureSource",(function(t){var r=t.source,n=t.config,i=t.scopeId;try{var o=e.getSourceObjectOrThrowException(r,"configureSource",i);e.configStorage.updateCommonOptions(n),o.configure(n)}catch(u){var a=(0,Zs.Hi)(r);e.configStorage.add(i,a,n)}return{done:!0,value:void 0}})),this.registerHandlerWithHistorySaving("attach",function(){var t=Us(Ms().mark((function t(r){var n,i,o,a;return Ms().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.source,i=r.scopeId,(o=e.obtainSource(n,i)).addAttachedListener("VideoTrackChange",(function(t){e.sendEventAndSaveHistory({method:"changeSelectedVideoTrack",params:{source:n,trackId:t,scopeId:i}})})),o.addAttachedListener("AudioLanguageChange",(function(t){e.sendEventAndSaveHistory({method:"changeSelectedAudioLanguage",params:{source:n,language:t,scopeId:i}})})),o.addAttachedListener("BandwidthEstimateUpdate",(function(t){e.sendEventAndSaveHistory({method:"updateBandwidthEstimate",params:{bandwidth:t,scopeId:i}})})),o.addAttachedListener("MaxCapAllowedVideoTrackUpdate",(function(t){e.sendEventAndSaveHistory({method:"updateMaxCapAllowedVideoTrack",params:{maxCapAllowedVideoTrack:t,scopeId:i}})})),o.addAttachedListener("DrmInfoReceived",(function(t){e.sendEventAndSaveHistory({method:"applyDrmInfos",params:{source:n,drmInfos:t,scopeId:i}})})),o.addAttachedListener("WaitForKey",(function(t){e.sendEventAndSaveHistory({method:"notifyWaitForKey",params:{source:n,message:t,scopeId:i}})})),o.addAttachedListener("FlushMediaPipelineRequested",(function(){e.sendEventAndSaveHistory({method:"flushMediaPipeline",params:{source:n,scopeId:i}})})),o.addAttachedListener("ServerTimeChange",(function(t){e.sendEventAndSaveHistory({method:"updateServerTime",params:{source:n,time:t,scopeId:i}})})),o.addAttachedListener("StreamEndTimeUpdate",(function(t){e.yaspRpc.sendEvent({method:"updateStreamEndTime",params:{source:n,time:t,scopeId:i}})})),t.next=13,o.attach(n);case 13:return a=t.sent,e.sendEventAndSaveHistory({method:"setStartInfo",params:{source:n,objectUrl:a,startPosition:o.getStartPosition(),scopeId:i}}),e.yaspRpc.sendEvent({method:"changeVideoTracks",params:{source:n,added:o.getVideoTracks().map((function(e){return{source:n,track:Fs(Fs({},e),{},{bitrate:e.bitrate?e.bitrate/1e3:void 0})}})),removed:[],scopeId:i}}),o.addAttachedListener("VideoTracksChange",(function(t){var r=t.added,o=t.removed;e.yaspRpc.sendEvent({method:"changeVideoTracks",params:{source:n,added:r.map((function(e){return{source:n,track:Fs(Fs({},e),{},{bitrate:e.bitrate?e.bitrate/1e3:void 0})}})),removed:o,scopeId:i}})})),o.getAudioTracks().forEach((function(t){e.sendEventAndSaveHistory({method:"addAudioTrack",params:{source:n,track:Fs(Fs({},t),{},{bitrate:t.bitrate?t.bitrate/1e3:void 0}),scopeId:i}})})),o.getTextTracks().forEach((function(t){e.sendEventAndSaveHistory({method:"addTextTrack",params:{source:n,track:{id:t.id,kind:t.kind,label:t.label,language:t.language||"unknown"},scopeId:i}})})),t.abrupt("return",{done:!0,value:void 0});case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.registerHandlerWithHistorySaving("load",function(){var t=Us(Ms().mark((function t(r){var n,i,o,a,u,c,s;return Ms().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.source,i=r.displace,o=r.scopeId,a=e.obtainSource(n,o,i),t.next=4,a.load();case 4:if(t.t0=t.sent,t.t0){t.next=7;break}t.t0={};case 7:return u=t.t0,c=u.drmInfos,s={video:a.getVideoTracks(),audio:a.getAudioTracks(),text:a.getTextTracks()},t.abrupt("return",{done:!0,value:{tracks:s,drmInfos:c}});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.registerHandlerWithHistorySaving("seeking",function(){var t=Us(Ms().mark((function t(r){var n,i,o,a;return Ms().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.source,i=r.currentTime,o=r.scopeId,a=e.obtainSource(n,o),t.next=4,a.handleOutOfBufferSeek(i);case 4:return t.abrupt("return",{done:!0,value:void 0});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.registerHandlerWithHistorySaving("positionChanged",function(){var t=Us(Ms().mark((function t(r){var n,i,o;return Ms().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.source,i=r.currentTime,o=r.scopeId,e.obtainSource(n,o).onPositionChange(i),t.abrupt("return",{done:!0,value:void 0});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.registerHandlerWithHistorySaving("setWorkerConfig",(function(t){var r=t.workerConfig,n=t.scopeId,i=r.sourceLimit,o=r.isLowMemoryMode,a=null===i?void 0:i,u=null!==o&&o,c=e.obtainScope(n,a,u);return void 0!==o&&(c.isLowMemoryMode=null!==o&&o),void 0!==i&&(null===i?c.sourceManager.setSourceLimit(void 0):c.sourceManager.setSourceLimit(i)),{done:!0,value:void 0}})),this.scope.addEventListener("message",(function(t){"object"===Ns(t.data)&&("string"!==typeof t.data.method||"object"===Ns(t.data.params)&&null!==t.data.params)&&e.yaspRpc.handleMessage(t)}))}},{key:"initResourceTimingsMonitor",value:function(e){void 0!==e&&void 0===this.resourceTimingsMonitor&&"undefined"===typeof document&&(this.resourceTimingsMonitor=new Kd.$W({sendLog:function(t,r){var n=(0,$d.Y)(t);if(n){var i=new up(e);(0,wl.J)(r).forEach((function(e){var t=Is(e,2),r=t[0],n=t[1];void 0!==n&&i.searchParams.set(r,n)})),(0,Bl.dy)(i.href,{method:"POST",keepalive:!0,body:n})}},ignoreWhiteList:!0,useOldWhiteListLogic:!(0,_l.RW)("web_yasp_use_new_perf_whitelist_logic")}),this.resourceTimingsMonitor.attach(self))}},{key:"validateSourceDestroy",value:function(e,t,r,n){if(e.isAttached()){var i="ExternalApi"===t?"ActiveSourceReleasedExternal":"ActiveSourceReleasedInternal";this.sendEventAndSaveHistory({method:"event",params:{source:r,event:{name:i,data:{url:r}},isWorkerMessage:!0,scopeId:n}})}}},{key:"handleRpcError",value:function(e,t){var r=new Qs.w({code:e.code===qd.v.METHOD_NOT_FOUND?"YASP_UNKNOWN_METHOD":"YASP_UNKNOWN_ERROR",details:{error:e},isFatal:!1,category:Xs.q.EXCEPTION,message:e.message});this.sendEventAndSaveHistory({method:"error",params:{source:null,error:JSON.stringify(r),scopeId:t}})}},{key:"getSourceObject",value:function(e,t){var r=(this.scopes.get(t)||{}).sourceManager;if(!r)throw new Error("Source Manager not inited!");return r.takeSource(e)}},{key:"getSourceObjectOrThrowException",value:function(e,t,r){var n=this.getSourceObject(e,r);if(void 0===n)throw new Error("[".concat(t,"] Unknown source ").concat(e,"."));return n}},{key:"sendEventAndSaveHistory",value:function(e){var t=e.method,r=e.params;if(!["updateBufferedInfo","updateSeekableRange"].includes(t)){var n=Fs({},r);if("objectUrl"in n){var i=n;i.objectUrl,n=js(i,cp)}this.rpcOutgoingHistory.push({method:t,params:n,time:Date.now()})}return this.yaspRpc.sendEvent(e)}},{key:"registerHandlerWithHistorySaving",value:function(e,t){var r=this;this.yaspRpc.registerHandler(e,(function(n){return r.rpcIncomingHistory.push({method:e,params:n,time:Date.now()}),t(n)}))}},{key:"obtainSource",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.obtainScope(t),i=n.sourceManager,o=n.isLowMemoryMode,a=i.takeSource(e);if(!a&&(null===i||void 0===i||!i.hasFreeSpace(r)))throw new Error("Source limit exceeded.");var u=null!==a&&void 0!==a?a:this.createSource(e,t,o);return i.putSource(e,u),u}},{key:"createSource",value:function(e,t,r){var n,i,o,a=this,u=(0,Zs.Hi)(e),c={getMaxAutoQuality:this.getMaxAutoQuality,getUserQuality:this.getUserQuality,getDefaultBandwidth:this.getDefaultBandwidth},s=this.configStorage.extract(t,u),l="mp4"===hu(e)?this.createAudioSource:this.createVideoSource,f=Is(l(e,u,c,t,r,null===s||void 0===s?void 0:s.factories),3);return n=f[0],i=f[1],o=f[2],s&&n.configure(s),n.on("Error",function(){var r=Us(Ms().mark((function r(i){var o;return Ms().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,cf._)(0);case 2:o=a.processCspError(i),(0,ip.n)(o)&&n.banBaseUrlByCsp(o.details.url),a.sendEventAndSaveHistory({method:"error",params:{source:e,error:JSON.stringify(o),scopeId:t}});case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()),n.on("BufferedInfoChanged",(function(r){a.sendEventAndSaveHistory({method:"updateBufferedInfo",params:{bufferedInfo:r,source:e,duration:i.duration,scopeId:t}})})),n.on("Event",(function(r){a.sendEventAndSaveHistory({method:"event",params:{source:e,event:r,scopeId:t}})})),n.on("IsLowLatencyChange",(function(r){a.sendEventAndSaveHistory({method:"changeIsLowLatency",params:{source:e,isLowLatency:r,scopeId:t}})})),n.on("EmsgDetected",(function(r){a.sendEventAndSaveHistory({method:"emsg",params:{source:e,emsg:r,scopeId:t}})})),n.on("SegmentLoaded",(function(r){a.sendEventAndSaveHistory({method:"logSegmentLoaded",params:{source:e,info:r,scopeId:t}})})),n.on("TargetLatencyUpdated",(function(r){a.sendEventAndSaveHistory({method:"updateTargetLatency",params:{source:e,latency:r,scopeId:t}})})),n.on("UtcStartTimeUpdate",(function(r){a.sendEventAndSaveHistory({method:"updateUtcStartTime",params:{source:e,time:r,scopeId:t}})})),n.on("SeekableRangeUpdate",(function(r){var n=r.start,i=r.end;a.sendEventAndSaveHistory({method:"updateSeekableRange",params:{source:e,start:n,end:i,scopeId:t}})})),n.on("UpdateUrlObject",(function(r){a.sendEventAndSaveHistory({method:"urlObjectUpdated",params:{source:e,objectUrl:r,scopeId:t}})})),n.on("Destroy",(function(){var e;null===(e=o)||void 0===e||e.destroy(),o=null})),n}}])&&Gs(t.prototype,r),n&&Gs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),lp=Ws;"object"!==("undefined"===typeof window?"undefined":Vs(window))&&(self.window=self,Ws())},44165:function(e,t,r){"use strict";function n(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(0,Ai.k)(e)&&e.forEach((function(e){"function"===typeof e&&e.apply(void 0,r)}))}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){switch(e){case Ni.ly:return Di.WL.widevine;case Ni.xE:return Di.WL.playready;case Ni.dn:return Di.WL.clearkey;default:return Di.WL.none}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){var r=function(){try{return function(e){return{error:String(e.error)||"",isFatal:Boolean(e.isFatal),helpLink:String(e.helpLink)||""}}(JSON.parse(e))}catch(t){return l(l({},Bi),{},{error:e})}}();return r.isFatal=r.isFatal||!isFinite(t)||t<=0,r}function d(e){if(void 0===e)return qi.q.DEFAULT;var t=function(e){switch(e){case Ii.DEFAULT_ERROR:return qi.q.DEFAULT;case Ii.BROADCAST_AD_BLOCK_INIT_ERROR:case Ii.AD_TYPE_IS_NOT_RECOGNIZED:case Ii.AD_IS_ALREADY_PLAYING:case Ii.MULTIROLL_INIT_ERROR:case Ii.PLAY_AD_VIEWERS_ERROR:return qi.q.ADS;case Ii.INVALID_METADATA:case Ii.NO_STREAMS:case Ii.INVALID_STREAM_URL:case Ii.NO_DRM_CONFIG:return qi.q.CONFIG;case Ii.ON_TICK_ERROR:case Ii.SAGA_ERROR:case Ii.NO_HLS_JS_INSTANCE:case Ii.REACT_COMPONENT_DID_CATCH_ERROR_INFO:case Ii.RECOVER_TASK_ERROR:case Ii.PRELOAD_SOURCE_FAILED:case Ii.MEDIA_ERR_ABORTED:return qi.q.EXCEPTION;case Ii.UNSUPPORTED_MEDIA_TYPE:case Ii.NATIVE_HLS_NOT_SUPPORTED_ERROR:case Ii.HLS_JS_NOT_SUPPORTED_ERROR:case Ii.MEDIA_ERR_SRC_NOT_SUPPORTED:case Ii.MEDIA_ERR_CUSTOM:case Ii.MEDIA_ERR_DECODE:case Ii.REPRESENTATION_CHANGE:return qi.q.MEDIA;case Ii.SCRIPT_INIT_ERROR:case Ii.META_INFO_REQUEST_FAILED:case Ii.STRM_ABD_INVALID_RESPONSE:case Ii.MANIFEST_NOT_FOUND:return qi.q.NETWORK_PLAYER;case Ii.MEDIA_ERR_NETWORK:return qi.q.NETWORK_MEDIA;case Ii.MPD_WIDEVINE_CERT_LOAD_ERROR:case Ii.FAIRPLAY_CERT_LOAD_ERROR:case Ii.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR:case Ii.FAIRPLAY_CREATE_KEY_SESSION_ERROR:case Ii.FAIRPLAY_SPC_LOAD_ERROR:case Ii.FAIRPLAY_CREATE_KEY_ERROR:case Ii.FAIRPLAY_INVALID_CONTENT_ID:case Ii.DRM_PROXY_ERROR:case Ii.DRM_PROXY_ERROR_NEED_COOKIE:case Ii.DRM_PROXY_ERROR_NEED_TEAM_LOGIN:case Ii.DRM_PROXY_ERROR_NEED_VIEW_PERMISSION:case Ii.DRM_PROXY_ERROR_SIGNATURE_EXPIRED:case Ii.MEDIA_ERR_ENCRYPTED:case Ii.FAIRPLAY_NOT_SUPPORTED:case Ii.NO_DRM:case Ii.DRM_INIT_ERROR:case Ii.DRM_NO_INIT_DATA:case Ii.DRM_CERT_LOAD_ERROR:case Ii.DRM_NO_SUPPORTED_KEY_SYSTEM:case Ii.DRM_FAILED_TO_CREATE_CDM:case Ii.DRM_FAILED_TO_SET_MEDIA_KEYS:case Ii.DRM_NO_LICENSE_SERVER:case Ii.DRM_FAILED_TO_CREATE_SESSION:case Ii.DRM_SESSION_ERROR:case Ii.DRM_FAILED_TO_GENERATE_REQUEST:case Ii.DRM_UNKNOWN_ERROR:return qi.q.DRM;case Ii.REGIONAL_LIMITATION_MANIFEST:case Ii.REGIONAL_LIMITATION_LEVEL:case Ii.REGIONAL_LIMITATION_SEGMENT:return qi.q.REGIONAL;case Ii.SIGNATURE_EXPIRED_MANIFEST:case Ii.SIGNATURE_EXPIRED_LEVEL:case Ii.SIGNATURE_EXPIRED_SEGMENT:return qi.q.ACCESS;case Ii.BANNED_MANIFEST:case Ii.BANNED_LEVEL:case Ii.BANNED_SEGMENT:return qi.q.BANNED;case Ii.NO_CODECS:return qi.q.NO_CODECS;case Ii.NO_PLAYABLE_STREAMS:return qi.q.CANNOT_PLAY;case Ii.NO_MSE:return qi.q.UNSUPPORTED_ENV}return}(e);if(void 0!==t)return t;if(void 0!==(t=function(e){switch(e){case"VH_ACCESS_ERROR_OLD_BROWSER":case"VH_ACCESS_ERROR_UNSUPPORTED_BROWSER":return qi.q.UNSUPPORTED_ENV;case"VH_ACCESS_DENIED":return qi.q.ACCESS;case"VH_ACCESS_ERROR_INVALID_REGION":return qi.q.REGIONAL;case"VH_ACCESS_ERROR_NO_LICENSE":return qi.q.DRM;case"VH_ACCESS_ERROR_FUTURE_VOD_RELEASE":case"VH_ACCESS_ERROR_NOT_FOUND":case"VH_VIDEO_PROCESSING":case"VH_VIDEO_PROCESSING_FAILED":case"VH_ACCESS_ERROR_UNEXPECTED":return qi.q.DEFAULT}return}(e)))return t;switch(e){case ji.BUFFER_FULL_ERROR:case ji.BUFFER_NUDGE_ON_STALL:case ji.BUFFER_STALLED_ERROR:case ji.FRAG_PARSING_ERROR:case ji.BUFFER_SEEK_OVER_HOLE:case ji.BUFFER_APPENDING_ERROR:case ji.PIPELINE_ERROR_DECODE:case ji.DECODER_ERROR_NOT_SUPPORTED:case ji.BUFFER_APPEND_ERROR:case ji.MEDIA_ELEMENT_ERROR_FORMAT_ERROR:case ji.REMUX_ALLOC_ERROR:case ji.BUFFER_ADD_CODEC_ERROR:case ji.DEMUXER_ERROR_COULD_NOT_OPEN:case ji.NS_ERROR_DOM_INVALID_STATE_ERR:case ji.CHUNK_DEMUXER_ERROR_APPEND_FAILED:case ji.FAILED_TO_INIT_DECODER:case ji.PIPELINE_ERROR_INITIALIZATION_FAILED:case ji.NS_ERROR_FAILURE:case ji.REQUEST_FAILED:case ji.PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED:case ji.PIPELINE_ERROR_COULD_NOT_RENDER:case ji.NS_ERROR_DOM_MEDIA_METADATA_ERR:case ji.MEDIA_ELEMENT_ERROR_EMPTY_SRC_ATTRIBUTE:case ji.NS_ERROR_DOM_MEDIA_FATAL_ERR:case ji.MANIFEST_PARSING_ERROR:return qi.q.MEDIA;case ji.FRAG_LOAD_ERROR:case ji.MANIFEST_LOAD_ERROR:case ji.LEVEL_LOAD_ERROR:case ji.AUDIO_TRACK_LOAD_ERROR:return qi.q.NETWORK_MEDIA;case ji.FRAG_LOAD_TIME_OUT:case ji.MANIFEST_LOAD_TIME_OUT:case ji.LEVEL_LOAD_TIME_OUT:case ji.AUDIO_TRACK_LOAD_TIME_OUT:return qi.q.NETWORK_TIMEOUT;case ji.INTERNAL_EXCEPTION:case ji.ON_PLAYER_INIT_ERROR_INTERNAL:case ji.EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR:case ji.INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR:case ji.LOAD_SKIN_ERROR:case ji.INSERT_INTO_WITH_SECURE_FRAME:case ji.PLAY_AD_VIEWERS_WITH_SECURE_FRAME:case ji.ERROR_SCREEN_LOAD_ERROR:case ji.YASP_UNEXPECTED_METHOD_CALL:case ji.PLAY_REJECTED:return qi.q.EXCEPTION;case ji.UNABLE_TO_LOAD_PLAYER_IFRAME:case ji.ON_PLAYER_INIT_ERROR:case ji.LOADER_INIT_ERROR:case ji.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT:case ji.FAILED_TO_DOWNLOAD_DEBUG_INFO:case ji.REQUEST_SOURCE_ERROR:return qi.q.NETWORK_PLAYER;case ji.PLAYER_CONTAINER_NOT_FOUND:case ji.KEY_LOAD_ERROR:case ji.FEATURE_HANDLER_ERROR:case ji.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER:case ji.INVALID_CONFIG_LANG_IN_CREATE_PLAYER:case ji.INVALID_CONFIG_IN_CREATE_PLAYER:case ji.INVALID_CONFIG_IN_SET_SOURCE:case ji.INVALID_CONFIG_IN_SOURCE_UPDATE:case ji.IFRAME_DOES_NOT_ALLOW_DRM:case ji.DRM_IS_NOT_ALLOWED:case ji.ELEMENT_NOT_IN_DOM:case ji.INVALID_LOG_URL:case ji.SCREEN_WAKE_LOCK_ERROR:return qi.q.CONFIG}return qi.q.DEFAULT}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){if(t&&("object"===E(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){var t="function"===typeof Map?new Map:void 0;return(v=function(e){function r(){return m(e,arguments,w(this).constructor)}if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,e)})(e)}function m(e,t,r){return(m=g()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&b(i,r.prototype),i}).apply(null,arguments)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){return e instanceof Xi}function O(e){var t=[],r=[{issues:t,valiIssues:e.issues}];try{for(;r.length;)S(r)}catch(n){return"[parsing failed]"}return t}function S(e){var t=e.pop(),r=t.issues;t.valiIssues.forEach((function(t){var n={expected:t.expected,received:t.received,message:t.message,kind:t.kind,type:t.type};t.issues&&(n.issues=[],e.push({issues:n.issues,valiIssues:t.issues})),t.path&&(n.path=[],t.path.forEach((function(e){var t,r=e.key,i=e.origin,o=e.type;null===(t=n.path)||void 0===t||t.push({key:r,origin:i,type:o})}))),r.push(n)}))}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t){if(t&&("object"===R(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){var t="function"===typeof Map?new Map:void 0;return(L=function(e){function r(){return j(e,arguments,N(this).constructor)}if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),D(r,e)})(e)}function j(e,t,r){return(j=I()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&D(i,r.prototype),i}).apply(null,arguments)}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function D(e,t){return(D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e){switch(e.error){case zi.EXPIRED_SIGNATURE:return Ii.DRM_PROXY_ERROR_SIGNATURE_EXPIRED;case zi.NEED_COOKIE:return Ii.DRM_PROXY_ERROR_NEED_COOKIE;case zi.NEED_YATEAM_LOGIN:return Ii.DRM_PROXY_ERROR_NEED_TEAM_LOGIN;case zi.NEED_VIEW_PERMISSION:return Ii.DRM_PROXY_ERROR_NEED_VIEW_PERMISSION;default:return Ii.DRM_PROXY_ERROR}}function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==F(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}G=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=ao);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function H(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):ao.resolve(c).then(n,i)}function V(e){return function(){var t=this,r=arguments;return new ao((function(n,i){function o(e){H(u,n,i,o,a,"next",e)}function a(e){H(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Y(){return(Y="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=q(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function q(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=J(e)););return e}function z(e,t){return(z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=J(e);if(t){var i=J(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $(this,r)}}function $(e,t){if(t&&("object"===F(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return X(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Z(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}ee=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=ho);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function te(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):ho.resolve(c).then(n,i)}function re(e){return function(){var t=this,r=arguments;return new ho((function(n,i){function o(e){te(u,n,i,o,a,"next",e)}function a(e){te(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(e,t){return(ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ce(e);if(t){var i=ce(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ae(this,r)}}function ae(e,t){if(t&&("object"===Z(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ue(e)}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function le(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function he(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function de(e){return 0===bo.length&&(go=window.setInterval((function(){bo.forEach((function(e){return e()}))}),250)),bo.push(e),function(){var t=bo.indexOf(e);t>-1&&bo.splice(t,1),0===bo.length&&clearInterval(go)}}function pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _e(e,t){return(_e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ke(e);if(t){var i=ke(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Se(this,r)}}function Se(e,t){if(t&&("object"===we(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Re(e,t,r){return t&&Te(e.prototype,t),r&&Te(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ie(e,t){return(Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function De(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ce(e);if(t){var i=Ce(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ne(this,r)}}function Ne(e,t){if(t&&("object"===Pe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Me(e)}function Me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{bubbles:!1,cancelable:!1,detail:void 0};if("function"===typeof CustomEvent)return new CustomEvent(e,t);var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ve(e,t){return(Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function We(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ze(e);if(t){var i=ze(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ye(this,r)}}function Ye(e,t){if(t&&("object"===Ue(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qe(e)}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(){return(Qe="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Ze(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Ze(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=it(e)););return e}function et(e,t){return(et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=it(e);if(t){var i=it(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return rt(this,r)}}function rt(e,t){if(t&&("object"===$e(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nt(e)}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function at(e,t){for(var r=0;r<e.length;r++)t.id!==e[r].id&&(e[r].enabled=!1)}function ut(e){if(void 0!==e)for(;e.length>0;)e.removeTrack(e[0])}function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ht(e,t){return(ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function dt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=vt(e);if(t){var i=vt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return pt(this,r)}}function pt(e,t){if(t&&("object"===ct(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yt(e)}function yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Et(){return(Et="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=_t(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function _t(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rt(e)););return e}function Ot(e,t){return(Ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function St(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Rt(e);if(t){var i=Rt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kt(this,r)}}function kt(e,t){if(t&&("object"===gt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tt(e)}function Tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pt(e,t){for(var r=0;r<e.length;r++)Object.keys(e[r]).length&&t.id!==e[r].id&&(e[r].selected=!1)}function At(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jt(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function It(e,t,n){var i={};i[n]=[];var o=t.toString(),a=o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||o.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!a)return i;for(var u,c=a[1],s=new RegExp("(\\\\n|\\W)"+jt(c)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");u=s.exec(o);)"dll-reference"!==u[3]&&i[n].push(u[3]);for(s=new RegExp("\\("+jt(c)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");u=s.exec(o);)e[u[2]]||(i[n].push(u[1]),e[u[2]]=r(u[1]).m),i[u[2]]=i[u[2]]||[],i[u[2]].push(u[4]);for(var l,f=Object.keys(i),h=0;h<f.length;h++)for(var d=0;d<i[f[h]].length;d++)l=i[f[h]][d],isNaN(1*l)||(i[f[h]][d]=1*i[f[h]][d]);return i}function Dt(e){return Object.keys(e).reduce((function(t,r){return t||e[r].length>0}),!1)}function Nt(e,t,r,n,i,o){var a=e[n].map((function(e){return'"'.concat(e,'": ').concat(t[n][e].toString())})).join(","),u=Ko.toString().replace("PUBLIC_PATH",JSON.stringify(i)).replace("GET_CHUNK_FILENAME_FUNCTION",o).split("ENTRY_MODULE");return"".concat(u[0],"{").concat(a,"}").concat(u[1],'"').concat(r,'"').concat(u[2])}function Mt(e,t){t=t||{};var n=function(){var e=r.p||r.p||"";if(function(e){return/^(?:[a-z+]+:)?\/\//i.test(e.trim())}(e))return e;var t=window.location.origin;t||(t=window.location.protocol+"//"+window.location.host);return new zo(e,t).href}(),i=r.u.toString(),o={main:r.m},a=t.all?{main:Object.keys(o.main)}:function(e,t){for(var r={main:[t]},n={main:[]},i={main:{}};Dt(r);)for(var o=Object.keys(r),a=0;a<o.length;a++){var u=o[a],c=r[u].pop();if(i[u]=i[u]||{},!i[u][c]&&e[u][c]){i[u][c]=!0,n[u]=n[u]||[],n[u].push(c);for(var s=It(e,e[u][c],u),l=Object.keys(s),f=0;f<l.length;f++)r[l[f]]=r[l[f]]||[],r[l[f]]=r[l[f]].concat(s[l[f]])}}return n}(o,e),u="";Object.keys(a).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;a[e][t];)t++;a[e].push(t),o[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",u+="var ".concat(e," = (").concat(Nt(a,o,t,modules,n,i),")();\n")})),u+="var a = (".concat(Nt(a,o,e,"main",n,i),");\ntry {\n    a();\n} catch(e) { console.warn(e); throw e }");var c=window.Blob;try{c=window.top.Blob}catch(p){}var s=new c([u],{type:"text/javascript"});if(t.bare)return s;var l=void 0;try{l=window.top.URL||window.top.webkitURL||window.top.mozURL||window.top.msURL}catch(p){}l=l||window.URL||window.webkitURL||window.mozURL||window.msURL;var f=window.Worker;try{f=window.top.Worker}catch(p){}var h=l.createObjectURL(s),d=new f(h);return d.objectURL=h,d}function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(r),!0).forEach((function(t){Bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ut(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Gt(e){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(e){var t,r=e.inline,n=e.path,i=e.workerInternal,o=e.workerConfig,a=!1;if(!r)try{t=Mt(n),(0,Uo.t)(t.constructor)||(r=!0,t.terminate())}catch(l){r=!0}r&&(t=new Yo(i),a=!0);var u=new $o.A((function(e){if(a)t.postMessage(e);else{var r=function(e){if("configureSource"!==e.method)return e;var t=e.params;if(!t||"object"!==Gt(t))return e;var r=t.config;if(!r||"object"!==Gt(r)||Array.isArray(r))return e;r.factories;var n=Ut(r,Jo);return Ft(Ft({},e),{},{params:Ft(Ft({},t),{},{config:n})})}(e);t.postMessage(r,(0,Xo._)(r))}}),a),c=!1,s=new Qo((function(e,a){var s=u.request({method:"initWorker",params:o}),l=function(a){c||r?console.error(a):(f(),t.terminate(),e(Ht({inline:!0,workerInternal:i,path:n,workerConfig:o})))},f=function(){t.removeEventListener("error",l)};s.then((function(){c=!0,f(),e({worker:t,rpc:u})})).catch(l),t.addEventListener("error",l),t.addEventListener("message",(function(e){u.handleMessage(e)}))}));return(0,oo.v)(s),s}function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wt(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Vt(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Wt=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Zo);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function Yt(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Zo.resolve(c).then(n,i)}function qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(r),!0).forEach((function(t){tr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function er(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nr(e){switch(e.source){case"default":case"default-slow":case"cache":case"timing-api":case"network-api":case"ewma":case"hlsjs":case"external-yasp":return e;default:return{value:e.value,source:"external-yasp"}}}function ir(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function or(e,t){var r=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,ba.s)(e,(function(e){var n=e.start,i=e.end;return n-r<=t&&t<=i+r}))}(e,t);return void 0===r?void 0:r.end-t}function ar(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return ur(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ur(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fr(e){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};for(var r in e){var n=e[r],i=fr(n);"string"!==i&&"number"!==i&&"boolean"!==i||(t[r]=n)}return t}function dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(r),!0).forEach((function(t){wr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function br(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Er(e){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _r(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Er(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}_r=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Ma);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function Or(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Ma.resolve(c).then(n,i)}function Sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tr(e,t){return(0,yo.Hi)(e)===(0,yo.Hi)(t)}function Rr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pr(e){return e.startsWith("DETACHED_")?e:"DETACHED_".concat(e)}function Ar(e){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.map(Ir),i="YA PLAYER: ".concat((new Date).toString()," ").concat(n.join(" "));return i}function Ir(e){return e&&"object"===Ar(e)?JSON.stringify(e,Object.getOwnPropertyNames(e)):e}function Dr(e){return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nr(e){return function(e){if(Array.isArray(e))return Mr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Mr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(r),!0).forEach((function(t){Jr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Br(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Dr(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Br=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=za);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function Ur(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):za.resolve(c).then(n,i)}function Gr(e){return function(){var t=this,r=arguments;return new za((function(n,i){function o(e){Ur(u,n,i,o,a,"next",e)}function a(e){Ur(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wr(){return(Wr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Yr(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Yr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xr(e)););return e}function qr(e,t){return(qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Xr(e);if(t){var i=Xr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Kr(this,r)}}function Kr(e,t){if(t&&("object"===Dr(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $r(e)}function $r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xr(e){return(Xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qr(e){var t;return t=function(e){function t(){var e;Hr(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Jr($r(e=p.call.apply(p,[this].concat(n))),"airplayController",void 0),Jr($r(e),"progressWatcher",void 0),Jr($r(e),"yaspEventListeners",void 0),Jr($r(e),"yaspErrorListeners",void 0),Jr($r(e),"gapController",void 0),Jr($r(e),"eventsWatcher",void 0),Jr($r(e),"playheadMover",void 0),Jr($r(e),"cspErrorHandler",void 0),Jr($r(e),"srcSetDeferred",void 0),Jr($r(e),"detachCallbacks",void 0),Jr($r(e),"detachPromise",void 0),Jr($r(e),"playCalled",void 0),Jr($r(e),"shouldPlay",void 0),Jr($r(e),"recoverHelper",void 0),Jr($r(e),"restorePrototype",void 0),Jr($r(e),"yaspSrc",void 0),Jr($r(e),"yaspError",null),Jr($r(e),"error",null),Jr($r(e),"audioTrackList",void 0),Jr($r(e),"mediaStateNotifier",void 0),Jr($r(e),"stallDetector",null),Jr($r(e),"yaspSeekable",void 0),Jr($r(e),"startTime",NaN),Jr($r(e),"scopeId",qa.$),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qr(e,t)}(t,e);var r,n,i,o,a,u,c,s,l,f,h,d,p=zr(t);return r=t,n=[{key:"airplaySrc",get:function(){var e;return null===(e=this.airplayController)||void 0===e?void 0:e.airplaySrc},set:function(e){this.airplayController&&(this.airplayController.airplaySrc=e)}},{key:"audioTracks",get:function(){var e;return this.yaspSrc?this.audioTrackList:null!==(e=Wr(Xr(t.prototype),"audioTracks",this))&&void 0!==e?e:this.audioTrackList}},{key:"canPlayType",value:function(e){return Wr(Xr(t.prototype),"canPlayType",this).call(this,e)}},{key:"rethrowEmptySrc",value:function(e){e||(0,Po.L)(new Error("Setting empty src"))}},{key:"getAttribute",value:function(e){return"src"===e&&void 0!==this.yaspSrc?this.yaspSrc:Wr(Xr(t.prototype),"getAttribute",this).call(this,e)}},{key:"setAttribute",value:function(e,r){return"src"===e?(this.rethrowEmptySrc(r),this.setSrc(r)):Wr(Xr(t.prototype),"setAttribute",this).call(this,e,r)}},{key:"removeAttribute",value:function(e){"src"===e&&this.setSrc(""),Wr(Xr(t.prototype),"removeAttribute",this).call(this,e)}},{key:"src",get:function(){var e;return void 0===this.yaspSrc?null!==(e=HTMLMediaElement.prototype.getAttribute.call(this,"src"))&&void 0!==e?e:"":this.yaspSrc},set:function(e){this.rethrowEmptySrc(e),this.setSrc(e)}},{key:"addEventListener",value:function(e,r,n){var i;if(Wr(Xr(t.prototype),"addEventListener",this).call(this,e,r,n),"yasp-event"===e)null===(i=this.yaspEventListeners)||void 0===i||i.add(r);else if("yasp-error"===e){var o;null===(o=this.yaspErrorListeners)||void 0===o||o.add(r)}}},{key:"removeEventListener",value:function(e,r,n){var i;if(Wr(Xr(t.prototype),"removeEventListener",this).call(this,e,r,n),"yasp-event"===e)null===(i=this.yaspEventListeners)||void 0===i||i.delete(r);else if("yasp-error"===e){var o;null===(o=this.yaspErrorListeners)||void 0===o||o.delete(r)}}},{key:"yasp",get:function(){return!0}},{key:"getMediaElementDebugDump",value:function(){var e=this.paused,r=this.seeking,n=this.yaspError,i=this.yaspSeekable,o=this.currentTime,a=this.yaspSrc,u=this.readyState,c=this.duration,s=ua.getTimeRanges(t.getNativeSeekableAndInitYaspSeekable(this)),l=t.getNativeErrorAndAttachErrorStore(this),f=(0,_o.w)(this);return{error:l,yaspError:n,paused:e,seeking:r,seekable:s,yaspSeekable:i,buffered:f,bufferedTime:or(f,this.currentTime),currentTime:o,src:HTMLMediaElement.prototype.getAttribute.call(this,"src"),yaspSrc:a,readyState:u,duration:c}}},{key:"yaspReleaseSrc",value:(d=Gr(Br().mark((function e(r){return Br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.releaseSrc(r,this.scopeId));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"yaspRequestDebugInfo",value:(h=Gr(Br().mark((function e(){var r,n,i,o,a,u,c;return Br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.worker.request({method:"requestDebugInfo",params:{source:this.yaspSrc,scopeId:this.scopeId}}),o={mediaElement:Fr({},this.getMediaElementDebugDump()),time:(0,ya.no)()/1e3,mediaEventsHistory:null===(r=this.eventsWatcher)||void 0===r?void 0:r.getEventHistory()},e.next=4,i;case 4:return a=e.sent,u=(null===(n=this.eventsWatcher)||void 0===n?void 0:n.getTimings())||[],c=a.timings,e.abrupt("return",Fr(Fr(Fr({},o),a),{},{timings:[].concat(Nr(u),Nr(c))}));case 8:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"detachInternal",value:(f=Gr(Br().mark((function e(){var r,n,i,o,a,u,c,s,l,f=this;return Br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.yaspSrc){e.next=3;break}return e.next=3,t.worker.request({method:"detach",params:{source:this.yaspSrc,scopeId:this.scopeId,reason:{name:"detachInternal"}}});case 3:this.detachCallbacks&&(this.detachCallbacks.filter(Boolean).forEach(function(){var e=Gr(Br().mark((function e(t){return Br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),(0,Po.L)(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()),this.detachCallbacks.length=0,delete this.detachCallbacks),null===(r=this.yaspErrorListeners)||void 0===r||r.clear(),this.yaspErrorListeners=void 0,null===(n=this.yaspEventListeners)||void 0===n||n.clear(),this.yaspEventListeners=void 0,null===(i=this.gapController)||void 0===i||i.release(),this.stallDetector=null,this.gapController=void 0,null===(o=this.cspErrorHandler)||void 0===o||o.destroy(),this.cspErrorHandler=void 0,null===(a=this.progressWatcher)||void 0===a||a.release(),this.progressWatcher=void 0,null===(u=this.playheadMover)||void 0===u||u.release(),this.playheadMover=void 0,null===(c=this.eventsWatcher)||void 0===c||c.release(),this.eventsWatcher=void 0,this.restore(),this.removeEventListener("progress",this.onSegmentAppended),this.removeEventListener("seeking",this.onSeeking),this.removeEventListener("canplay",this.onCanPlay),this.removeEventListener("error",this.onNativeError),this.removeAttribute("src"),t.messenger.emit("yasp-event",{name:"YaspDetached",data:void 0}),null===(s=this.restorePrototype)||void 0===s||s.call(this),this.restorePrototype=void 0,t.instances=t.instances.filter((function(e){return e!==f})),null===(l=this.mediaStateNotifier)||void 0===l||l.disable();case 30:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"detach",value:function(){var e=this;return this.detachPromise||(this.detachPromise=Gr(Br().mark((function t(){return Br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.detachInternal();case 3:return t.prev=3,e.detachPromise=void 0,t.finish(3);case 6:case"end":return t.stop()}}),t,null,[[0,,3,6]])})))()),this.detachPromise}},{key:"yaspDispatchEvent",value:function(e,r,n){var i=new CustomEvent(e,Fr({detail:r},n));Wr(Xr(t.prototype),"dispatchEvent",this).call(this,i)}},{key:"handleError",value:function(e){var t=this.processCspError(e);t.isFatal?(this.yaspError=this.createMediaError(MediaError.MEDIA_ERR_NETWORK,t.message,t),this.yaspDispatchEvent("error",void 0)):("YASP_BUFFER_ALLOCATION_ERROR"===t.code&&(t.details.memory=self?hr((self.performance||{}).memory):{}),this.yaspDispatchEvent("yasp-error",t,{cancelable:!0}))}},{key:"yaspSetAudioTrack",value:function(e){e&&t.configureSource(this.src,{tracks:{audioLang:e}})}},{key:"initAudioTrackList",value:function(){var e=this;if(void 0===this.audioTrackList){var r=new Mo;r.addEventListener("change",(function(){(0,xo.w)(r).find((function(r){r.enabled&&t.configureSource(e.src,{tracks:{audioLang:r.language}})}));var n=new Event("change");(0,Wi.Y)((function(){Wr(Xr(t.prototype),"audioTracks",e).dispatchEvent(n)}))})),this.audioTrackList=r}}},{key:"updateObjectUrl",value:function(e){this.rethrowEmptySrc(e),"string"===typeof e?HTMLMediaElement.prototype.setAttribute.call(this,"src",e):this.srcObject=e}},{key:"registerRpcHandlerForInstance",value:function(e,r){var n=this;this.detachCallbacks.push(t.worker.registerRpcHandler(e,(function(e){return t.isCurrentSrc(n,"source"in e?e.source:null)&&e.scopeId===n.scopeId?r(e):{done:!1,value:void 0}})))}},{key:"registerMediaRpcHandlers",value:function(){var e=this;this.registerRpcHandlerForInstance("setStartInfo",(function(t){var r,n;return e.updateObjectUrl(t.objectUrl),e.setStartPosition(t.startPosition),e.readyState<HTMLMediaElement.HAVE_METADATA&&e.addEventListener("loadedmetadata",(function(){Tr(e.yaspSrc,t.source)&&e.setStartPosition(t.startPosition)}),{once:!0}),null===(r=e.mediaStateNotifier)||void 0===r||r.handleTimeupdate(),null===(n=e.srcSetDeferred)||void 0===n||n.resolve(),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("addAudioTrack",(function(t){var r,n,i;return(null===(r=e.audioTrackList)||void 0===r?void 0:r.getTrackById(t.track.id))&&Tr(e.yaspSrc,t.source)||null===(n=e.audioTrackList)||void 0===n||n.addTrack(new Io({enabled:t.track.selected,label:t.track.label,language:null!==(i=t.track.language)&&void 0!==i?i:void 0,id:t.track.id,kind:t.track.kind,bitrate:t.track.bitrate,channels:t.track.channels})),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("changeSelectedAudioLanguage",(function(t){if(!e.audioTrackList)return{done:!0,value:void 0};for(var r=0;r<e.audioTrackList.length;r++)e.audioTrackList[r].enabled=e.audioTrackList[r].language===t.language;return{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("applyDrmInfos",(function(t){return e.yaspDispatchEvent("yasp-drmInfoReceived",t.drmInfos,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("notifyWaitForKey",(function(t){return e.yaspDispatchEvent("yasp-waitForKey",t,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("emsg",(function(t){return e.yaspDispatchEvent("yasp-emsg",t.emsg,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("logSegmentLoaded",(function(t){var r="[SegmentLoader] loaded type = ".concat(t.info.type,", number = ").concat(t.info.number,", cmaf = ").concat(t.info.cmaf);return e.yaspDispatchEvent("yasp-debug",r,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("updateUtcStartTime",(function(t){return e.startTime=t.time,{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("updateSeekableRange",(function(t){return e.yaspSeekable={start:t.start,end:t.end},{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("urlObjectUpdated",(function(t){var r=e.currentTime;return e.updateObjectUrl(t.objectUrl),e.currentTime===r?e.currentTime=r:e.setStartPosition(r),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("flushMediaPipeline",(function(t){return 0===e.buffered.length&&(e.currentTime-=.001),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("event",(function(t){var r,n=t.source,i=t.event;return Tr(n,e.yaspSrc)&&null!==(r=e.yaspEventListeners)&&void 0!==r&&r.size?(e.yaspDispatchEvent("yasp-event",i,{cancelable:!0}),{done:!0,value:void 0}):{done:!1,value:void 0}})),this.registerRpcHandlerForInstance("error",(function(r){var n,i=r.error,o=r.source;if(!Tr(o,e.yaspSrc))return{done:!1,value:void 0};var a=t.parseErrorString(i);return a.isFatal&&t.worker.sendEvent({method:"destroy",params:{source:o,reason:"Error",scopeId:e.scopeId}}),null!==(n=e.yaspErrorListeners)&&void 0!==n&&n.size?(e.handleError(a),{done:!0,value:void 0}):{done:!1,value:void 0}}))}},{key:"setStartPosition",value:function(e){var t;e<=0&&0===this.currentTime||this.currentTime!==e&&(null===(t=this.playheadMover)||void 0===t||t.moveTo(e))}},{key:"forceTimeUpdate",value:function(){var e;null===(e=this.mediaStateNotifier)||void 0===e||e.handleTimeupdate()}},{key:"clearTrackLists",value:function(){ut(this.audioTrackList)}},{key:"createMediaError",value:function(e,t,r){var n=r;if(this.error)try{var i="string"===typeof(null===r||void 0===r?void 0:r.details)?Fr(Fr({},JSON.parse(r.details)),{},{mediaTagError:this.error}):Fr(Fr({},r.details),{},{mediaTagError:this.error});n=new ca.w(Fr(Fr({},r),{},{details:i}))}catch(o){}return{code:e,message:t,yaspError:n}}},{key:"initNativeErrorHandling",value:function(){this.addEventListener("error",this.onNativeError)}},{key:"yaspRecover",value:(l=Gr(Br().mark((function e(){var r=this;return Br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new za(function(){var e=Gr(Br().mark((function e(n,i){var o,a,u;return Br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.yaspSrc){e.next=3;break}return i(),e.abrupt("return");case 3:return e.prev=3,e.next=6,t.worker.request({method:"detach",params:{source:r.yaspSrc,scopeId:r.scopeId,reason:{name:"yaspRecover",details:"decode"}}});case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(3),i(),e.abrupt("return");case 12:if(o=r.yaspSrc,t.isCurrentSrc(r,o)){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,(0,no._)(500);case 17:if(t.isCurrentSrc(r,o)){e.next=19;break}return e.abrupt("return");case 19:return e.prev=19,e.next=22,t.worker.request({method:"attach",params:{source:r.yaspSrc,scopeId:r.scopeId}});case 22:e.next=28;break;case 24:return e.prev=24,e.t1=e.catch(19),i(),e.abrupt("return");case 28:a=setTimeout((function(){i()}),1e3),u=function e(){clearTimeout(a),r.removeEventListener("canplaythrough",e),n()},r.addEventListener("canplaythrough",u);case 31:case"end":return e.stop()}}),e,null,[[3,8],[19,24]])})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})},{key:"onNativeError",value:(s=Gr(Br().mark((function e(){var r,n,i,o=this;return Br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.yaspSrc&&(null===(r=this.recoverHelper)||void 0===r||!r.isRecovering())){e.next=2;break}return e.abrupt("return");case 2:if((null===(n=t.getNativeErrorAndAttachErrorStore(this))||void 0===n?void 0:n.code)!==MediaError.MEDIA_ERR_DECODE||!(0,ra.RW)("web_yasp_mse_recover_media_error")){e.next=14;break}return e.prev=4,e.next=7,null===(i=this.recoverHelper)||void 0===i?void 0:i.recover((function(){return o.yaspRecover()}));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),t.worker.sendEvent({method:"destroy",params:{source:this.yaspSrc,reason:"Error",scopeId:this.scopeId}});case 12:e.next=15;break;case 14:n&&t.worker.sendEvent({method:"destroy",params:{source:this.yaspSrc,reason:"Error",scopeId:this.scopeId}});case 15:case"end":return e.stop()}}),e,this,[[4,9]])}))),function(){return s.apply(this,arguments)})},{key:"initEventsWatcher",value:function(){var e=this;this.eventsWatcher=new Da(this,(function(){return e.getMediaElementDebugDump()}))}},{key:"initPlayheadMover",value:function(){this.playheadMover=new ka(this,3)}},{key:"initCspErrorHandler",value:function(){this.cspErrorHandler=new Wa.r(window)}},{key:"processCspError",value:function(e){if(!this.cspErrorHandler||!this.yaspSrc)return e;var r=(0,Ya.t)(this.cspErrorHandler,e);return(0,Ya.n)(r)&&t.worker.sendEvent({method:"notifyCspError",params:{source:this.yaspSrc,url:r.details.url,scopeId:this.scopeId}}),r}},{key:"initWatchdog",value:function(){var e=this;this.initStallDetector(),this.gapController||(this.gapController=new oa(this,{getSeekRangeEnd:function(){return e.seekable.end(0)}},{jumpLargeGaps:!0,jumpOnPause:!0,largeGapLimit:da},this.stallDetector,(function(t){var r;null===(r=e.eventsWatcher)||void 0===r||r.pushCustomEvent({event:"YaspLargeGap",timestamp:Date.now(),dump:t}),e.yaspDispatchEvent("yasp-event",{name:"YaspLargeGap",data:t},{cancelable:!0})})),this.addEventListener("seeking",this.onSeeking),this.addEventListener("canplay",this.onCanPlay),this.addEventListener("progress",this.onSegmentAppended),this.progressWatcher=new Sa(this))}},{key:"onCanPlay",value:function(){var e;null===(e=this.gapController)||void 0===e||e.configure({jumpOnPause:!1}),this.shouldPlay&&(0,oo.v)(this.play())}},{key:"onSegmentAppended",value:function(){var e;null===(e=this.gapController)||void 0===e||e.onSegmentAppended()}},{key:"clampPosition",value:function(e){if(!this.seekable.length)return null;var t=this.seekable,r=t.length,n=t.start;if(0===e&&r&&n(0)===wa.S/1e3)return this.currentTime=n(0),this.currentTime;var i=this.seekable.end(this.seekable.length-1);return e<=i+.15?null:(this.currentTime=i,this.currentTime)}},{key:"onSeeking",value:function(){var e,r=this;if(this.yaspSrc&&null===this.clampPosition(this.currentTime)){var n,i,o;if(null===(e=this.gapController)||void 0===e||e.configure({jumpOnPause:!0}),!ua.isBuffered(this.buffered,this.currentTime,.5)&&this.yaspSrc)(0,ra.RW)("yasp_no_source_abort_on_fake_seek")&&(null===(n=this.gapController)||void 0===n||n.lock(),null===(i=this.gapController)||void 0===i||i.onSeeking()),t.worker.request({method:"seeking",params:{source:this.yaspSrc,currentTime:this.currentTime,scopeId:this.scopeId}}).then(Gr(Br().mark((function e(){var t,n,i;return Br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,ra.RW)("yasp_no_source_abort_on_fake_seek")?null===(t=r.gapController)||void 0===t||t.unlock():null===(n=r.gapController)||void 0===n||n.onSeeking(),(0,fo.zK)()&&za.resolve().then(null===(i=r.mediaStateNotifier)||void 0===i?void 0:i.handleTimeupdate);case 2:case"end":return e.stop()}}),e)})))).catch((function(){var e;(0,ra.RW)("yasp_no_source_abort_on_fake_seek")&&(null===(e=r.gapController)||void 0===e||e.unlock())}));else null===(o=this.gapController)||void 0===o||o.onSeeking();t.worker.sendEvent({method:"positionChanged",params:{source:this.yaspSrc,currentTime:this.currentTime,scopeId:this.scopeId}})}}},{key:"updateShouldPlayState",value:function(e){this.shouldPlay=e}},{key:"play",value:(c=Gr(Br().mark((function e(){var r;return Br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.playCalled=!0,this.updateShouldPlayState(!0),this.yaspSrc&&"none"===this.preload&&this.readyState===HTMLMediaElement.HAVE_NOTHING&&t.worker.sendEvent({method:"load",params:{source:this.yaspSrc,displace:!0,scopeId:this.scopeId}}),HTMLMediaElement.prototype.getAttribute.call(this,"src")||this.srcObject){e.next=6;break}return e.next=6,null===(r=this.srcSetDeferred)||void 0===r?void 0:r.promise;case 6:if(this.playCalled){e.next=8;break}return e.abrupt("return");case 8:return this.playCalled=!1,this.handleLivePresentationWindowDropout(),e.abrupt("return",Wr(Xr(t.prototype),"play",this).call(this));case 11:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"pause",value:function(){this.playCalled=!1,this.updateShouldPlayState(!1),Wr(Xr(t.prototype),"pause",this).call(this)}},{key:"isSupportedSrc",value:function(e){return Ba(e)}},{key:"initAirplayController",value:function(){var e=this;this.airplayController||(this.airplayController=new Ua(this,(function(t){return e.logAirplayStateChange(t)})))}},{key:"logAirplayStateChange",value:function(e){this.yaspDispatchEvent("yasp-event",{name:"AirplayStateChange",data:{enabled:e}})}},{key:"setSrc",value:function(e){var r,n,i,o,a;if(this.yaspSrc&&(t.worker.sendEvent({method:"detach",params:{source:this.yaspSrc,scopeId:this.scopeId,reason:{name:"setSrc"}}}),this.yaspSrc=void 0,this.clearSrcFromNativeElements(),null===(r=this.srcSetDeferred)||void 0===r||r.reject("Source loading interrupted: new source requested before previous load completed"),this.srcSetDeferred=void 0,null===(n=this.mediaStateNotifier)||void 0===n||n.disable(),this.clearTrackLists(),this.restore(),null===(i=this.recoverHelper)||void 0===i||i.reset()),this.srcSetDeferred=new io.B,(0,oo.v)(this.srcSetDeferred.promise),this.isSupportedSrc(e))return this.airplayController&&this.airplayController.airplayEnabled?void(this.airplayController.detachedSrc=e):(this.yaspSrc=e,t.worker.sendEvent({method:"attach",params:{source:e,scopeId:this.scopeId}}),null===(o=this.mediaStateNotifier)||void 0===o||o.enable(),null===(a=this.gapController)||void 0===a||a.configure({jumpOnPause:!0}),"none"!==this.preload&&t.worker.sendEvent({method:"load",params:{source:e,displace:!0,scopeId:this.scopeId}}),void(t.shouldSaveBandwidth&&t.worker.sendEvent({method:"configureSource",params:{source:e,config:{defaultBandwidthEstimate:t.getDefaultBandwidthEstimate()},scopeId:this.scopeId}})));e?HTMLMediaElement.prototype.setAttribute.call(this,"src",e):HTMLMediaElement.prototype.removeAttribute.call(this,"src")}},{key:"clearSrcFromNativeElements",value:function(){this.srcObject=null,HTMLMediaElement.prototype.removeAttribute.call(this,"src")}},{key:"initStallDetector",value:function(){var e=this;this.stallDetector||(this.stallDetector=new _a(this,(function(t){var r,n=t?"YaspForcedLoop":"YaspNudgeStalled";null===(r=e.eventsWatcher)||void 0===r||r.pushCustomEvent({event:n,timestamp:Date.now(),dump:e.getMediaElementDebugDump()}),e.yaspDispatchEvent("yasp-event",{name:n,data:void 0},{cancelable:!0})})))}},{key:"restore",value:function(){this.startTime=NaN,this.yaspSeekable=void 0,this.shouldPlay=void 0}},{key:"handleLivePresentationWindowDropout",value:function(){this.duration===1/0&&this.seekable.length&&this.currentTime<this.seekable.start(0)&&(this.currentTime=this.seekable.end(this.seekable.length-1))}},{key:"getStartDate",value:function(){return this.yaspSrc||"function"!==typeof Wr(Xr(t.prototype),"getStartDate",this)?new Date(this.startTime):new Date(Wr(Xr(t.prototype),"getStartDate",this).call(this))}},{key:"isFatalErrorRecoverable",value:function(){var e;return null===(e=this.recoverHelper)||void 0===e?void 0:e.isRecovering()}},{key:"setScopeId",value:function(e){this.scopeId=e}}],i=[{key:"isSupported",value:function(){var e;return"function"===typeof(null===(e=(0,Ta.Q)())||void 0===e?void 0:e.isTypeSupported)}},{key:"isCurrentSrc",value:function(e,r){return!(null===r||!t.isYaspElement(e))&&Tr(e.yaspSrc,r)}},{key:"getDefaultBandwidthEstimate",value:function(){var e=t.bandwidth;if(e)return nr(e);var r=function(){try{var e=va.tO.getItem("videoplayer-bandwidth-estimate");if(!e)return NaN;var t=JSON.parse(e),r=t.bandwidthEstimate,n=t.time,i=t.source;return ga.includes(i)&&(0,ya.m6)()-n<ma?r:NaN}catch(o){return NaN}}();return r?{value:r,source:"cache"}:{value:pa.S,source:"default"}}},{key:"attachElement",value:function(e,r,n,i){var o;if(!t.isSupported())throw new Error("Unsupported platform");if(t.isYaspElement(r))return(0,Po.L)(new Error("Unexpected YaspMediaElement.attach(yaspMediaElement) call")),r;t.setWorkerConfig(i,n);var a,u,c=(u=Go(a=r))?function(){Go(a)!==u&&Vi()(a,u)}:Ho.Z;Vi()(r,e.prototype);var s=r;if(s.setScopeId(n),s.restorePrototype=c,s.detachCallbacks=[],s.yaspEventListeners=new Set,s.yaspErrorListeners=new Set,s.initEventsWatcher(),(0,ra.RW)("web_yasp_mse_recover_media_error")){var l;try{l=JSON.parse(Na()||"")}catch(d){l=null}s.recoverHelper=new Ca({retryDelays:l})}var f=null===(o=s.eventsWatcher)||void 0===o?void 0:o.startProcess("element attach","Media Element");s.registerMediaRpcHandlers(),s.initAudioTrackList(),s.initPlayheadMover(),s.initWatchdog(),s.initCspErrorHandler(),s.initNativeErrorHandling(),s.initAirplayController();var h=t.overrideYaspGetters(s);return s.detachCallbacks.push(h),t.instances.push(s),(0,Wi.Y)((function(){var e=t.getExpConfig(),r=function(e){var t=e.flags,r=e.slots,n=void 0===r?"":r,i=e.testids,o=void 0===i?[]:i;try{var a=parseInt(String(t.web_experiment_checker_testid),10),u=o.concat(n).join(";").split(";").map((function(e){return parseInt(e,10)})).filter(isFinite);return a||0!==u.length?a?-1===u.indexOf(a)?"NoTargetSlot":"Success":"NoFlag":"NoFlagNoSlots"}catch(c){return"Exception"}}(e);t.messenger.emit("yasp-event",{name:"YaspExperimentCheck".concat(r),data:e})})),null===f||void 0===f||f.end(),s}},{key:"warmUp",value:function(){(0,Ho.Z)(t.worker)}},{key:"destroy",value:(u=Gr(Br().mark((function e(){var r,n,i=arguments;return Br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:qa.$,e.next=3,za.all(t.instances.map((function(e){return e.scopeId!==r?za.resolve():e.detach()})));case 3:t.hasActiveInstance()||null===(n=t.workerImpl)||void 0===n||n.destroy();case 4:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},{key:"hasActiveInstance",value:function(){return Boolean(t.instances.length)}},{key:"overrideYaspGetters",value:function(e){var r=t.initYaspSeekable(e),n=t.attachErrorStore(e),i=t.initYaspCurrentSrc(e);return function(){r(),n(),i()}}},{key:"attachErrorStore",value:function(e){return Object.defineProperty(e,"error",{get:function(){return void 0!==this.yaspError?this.yaspError:t.getNativeErrorAndAttachErrorStore(e)},configurable:!0}),function(){return delete e.error}}},{key:"getNativeErrorAndAttachErrorStore",value:function(e){delete e.error;var r=e.error;return t.attachErrorStore(e),r}},{key:"getNativeSeekableAndInitYaspSeekable",value:function(e){delete e.seekable;var r=e.seekable;return t.initYaspSeekable(e),r}},{key:"isYaspElement",value:function(e){return!0===e.yasp}},{key:"preloadSrc",value:(a=Gr(Br().mark((function e(r,n){var i,o,a,u=arguments;return Br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.length>2&&void 0!==u[2]?u[2]:qa.$,(a=n.yaspSourceConfig)?t.configureSource(r,a,o):t.shouldSaveBandwidth&&t.worker.sendEvent({method:"configureSource",params:{source:r,config:{defaultBandwidthEstimate:t.getDefaultBandwidthEstimate()},scopeId:o}}),e.abrupt("return",t.worker.request({method:"load",params:{source:r,contentId:null===a||void 0===a||null===(i=a.offlineParams)||void 0===i?void 0:i.contentId,displace:!1,scopeId:o}}));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})},{key:"releaseSrc",value:(o=Gr(Br().mark((function e(r){var n,i=arguments;return Br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:qa.$,e.abrupt("return",t.worker.request({method:"destroy",params:{source:r,reason:"ExternalApi",scopeId:n}}).catch(Va.warn));case 2:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"getStats",value:function(){return{bandwidth:t.bandwidth}}},{key:"configureSource",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qa.$,i=r.defaultBandwidthEstimate?nr(r.defaultBandwidthEstimate):void 0;void 0!==i&&(t.shouldSaveBandwidth=!1);var o=i?Fr(Fr({},r),{},{defaultBandwidthEstimate:i}):r;t.worker.sendEvent({method:"configureSource",params:{source:e,config:o,scopeId:n}})}},{key:"setWorkerConfig",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qa.$;void 0!==e&&(r===qa.$&&(void 0!==e.sourceLimit&&(t.workerConfig.sourceLimit=null===e.sourceLimit?void 0:e.sourceLimit),void 0!==e.perfLogUrl&&(t.workerConfig.perfLogUrl=null===e.perfLogUrl?void 0:e.perfLogUrl),void 0!==e.isLowMemoryMode&&(t.workerConfig.isLowMemoryMode=null===e.isLowMemoryMode?void 0:e.isLowMemoryMode),void 0!==e.retryConfig&&(t.workerConfig.retryConfig=null===e.retryConfig?void 0:e.retryConfig),void 0!==e.enabled&&(t.workerConfig.enabled=null===e.enabled||e.enabled)),void 0!==t.workerImpl&&t.workerImpl.sendEvent({method:"setWorkerConfig",params:{workerConfig:e,scopeId:r}}))}},{key:"worker",get:function(){if(void 0!==t.workerImpl)return t.workerImpl;var e=(0,Ta.Q)(),r=!!e&&"canConstructInDedicatedWorker"in e&&Boolean(e.canConstructInDedicatedWorker),n=!!(t.workerConfig.enabled&&(0,ra.RW)("web_yasp_enable_worker")&&r)&&Boolean(window.MediaSourceHandle);return t.workerImpl=new ea({useWebWorker:n,workerConfig:Fr(Fr({},t.workerConfig),{},{flags:(0,ra.qm)()}),onTerminate:function(){t.messenger.emit("yasp-event",{name:"YaspWorkerTerminate",data:void 0}),t.workerImpl=void 0}}),t.workerImpl.registerStaticRpcHandler("updateBandwidthEstimate",(function(e){return t.bandwidth=e.bandwidth,t.shouldSaveBandwidth&&function(e){if(!isNaN(e.value)&&ga.includes(e.source)){var t={bandwidthEstimate:Math.floor(e.value),time:(0,ya.m6)(),source:e.source};va.tO.setItem("videoplayer-bandwidth-estimate",JSON.stringify(t))}}(e.bandwidth),{done:!0,value:void 0}})),t.workerImpl.registerStaticRpcHandler("updateBufferedInfo",(function(e){return t.messenger.emit("BufferedInfoChanged",e),{done:!0,value:void 0}})),t.workerImpl.registerStaticRpcHandler("error",t.globalErrorRpcHandler),t.workerImpl.registerStaticRpcHandler("event",t.globalEventRpcHandler),t.workerImpl}},{key:"parseErrorString",value:function(e){try{return new ca.w(JSON.parse(e))}catch(t){return new ca.w({code:"YASP_PARSE_ERROR_EXCEPTION",details:{error:t,errorString:e},message:"Expect error to be serialized error.",isFatal:!0,category:qi.q.EXCEPTION})}}},{key:"initYaspCurrentSrc",value:function(e){return Object.defineProperty(e,"currentSrc",{get:function(){return this.src},configurable:!0}),function(){return delete e.currentSrc}}},{key:"initYaspSeekable",value:function(e){return Object.defineProperty(e,"seekable",{get:function(){var e=this;return this.yaspSeekable?{start:function(t){if(t>e.length-1)throw new Error("Failed to execute 'start' on 'TimeRanges': The index provided (".concat(t,") is greater than the maximum bound (").concat(e.length-1,")"));return e.yaspSeekable.start},end:function(t){if(t>e.length-1)throw new Error("Failed to execute 'end' on 'TimeRanges': The index provided (".concat(t,") is greater than the maximum bound (").concat(e.length-1,")"));return e.yaspSeekable.end},length:1}:t.getNativeSeekableAndInitYaspSeekable(this)},configurable:!0}),function(){return delete e.seekable}}},{key:"getExpConfig",value:function(){var e=(new ha).getConfig();return{flags:e.flags,testids:e.testids,slots:e.slots}}}],n&&Vr(r.prototype,n),i&&Vr(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(e),Jr(t,"instances",[]),Jr(t,"shouldSaveBandwidth",!0),Jr(t,"bandwidth",void 0),Jr(t,"workerImpl",void 0),Jr(t,"messenger",new ta.v),Jr(t,"workerConfig",{enabled:!0}),Jr(t,"globalErrorRpcHandler",(function(e){var r=e.error,n=e.source,i=e.scopeId,o=t.parseErrorString(r),a=new ca.w(Fr(Fr({},o),{},{message:"Detached mediaElement error: ".concat(o.message),isFatal:!1,code:Pr(o.code)}));return o.isFatal&&n&&t.worker.sendEvent({method:"destroy",params:{source:n,reason:"Error",scopeId:i}}),t.messenger.emit("yasp-error",a),{done:!0,value:void 0}})),Jr(t,"globalEventRpcHandler",(function(e){var r=e.event,n=e.isWorkerMessage;return t.messenger.emit("yasp-event",Fr(Fr({},r),{},{name:n?r.name:Pr(r.name)})),{done:!0,value:void 0}})),Jr(t,"currentScopeId",qa.$),t}function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Zr(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}en=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Ka);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(r),!0).forEach((function(t){pn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nn(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Ka.resolve(c).then(n,i)}function on(e){return function(){var t=this,r=arguments;return new Ka((function(n,i){function o(e){nn(u,n,i,o,a,"next",e)}function a(e){nn(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function an(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function un(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cn(){return(cn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=sn(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function sn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dn(e)););return e}function ln(e,t){return(ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=dn(e);if(t){var i=dn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return hn(this,r)}}function hn(e,t){if(t&&("object"===Zr(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function dn(e){return(dn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mn(e,t){return(mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=wn(e);if(t){var i=wn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return bn(this,r)}}function bn(e,t){if(t&&("object"===yn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function wn(e){return(wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function En(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?En(Object(r),!0).forEach((function(t){On(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):En(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function On(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tn(e,t){return(Tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Rn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=An(e);if(t){var i=An(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return xn(this,r)}}function xn(e,t){if(t&&("object"===Sn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pn(e)}function Pn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function An(e){return(An=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ln(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function In(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dn(e){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Cn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bn(e,t){return(Bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Un(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Vn(e);if(t){var i=Vn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Gn(this,r)}}function Gn(e,t){if(t&&("object"===Dn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hn(e)}function Hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vn(e){return(Vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yn(e){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kn(e,t){return(Kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $n(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Qn(e);if(t){var i=Qn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Xn(this,r)}}function Xn(e,t){if(t&&("object"===Yn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Jn(e)}function Jn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ei(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return ti(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ti(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ri(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ni(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ii(e){return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ai(){return(ai="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=ui(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function ui(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hi(e)););return e}function ci(e,t){return(ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function si(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=hi(e);if(t){var i=hi(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return li(this,r)}}function li(e,t){if(t&&("object"===ii(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fi(e)}function fi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hi(e){return(hi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function di(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pi(e){return(pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yi(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===E)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===E)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==pi(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return E;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,E;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,E):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,E)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}yi=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var E={},_={};e(_,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(_=S);var k=o.prototype=n.prototype=Object.create(_);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=su);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),E}},p}function vi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vi(Object(r),!0).forEach((function(t){Pi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gi(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):su.resolve(c).then(n,i)}function bi(e){return function(){var t=this,r=arguments;return new su((function(n,i){function o(e){gi(u,n,i,o,a,"next",e)}function a(e){gi(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function wi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ei(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _i(){return(_i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Oi(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Oi(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xi(e)););return e}function Si(e,t){return(Si=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ki(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xi(e);if(t){var i=xi(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ti(this,r)}}function Ti(e,t){if(t&&("object"===pi(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ri(e)}function Ri(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xi(e){return(xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ai=r(29003),Li=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"_isDestroyed",!1),u(this,"destroyHandlers",[]),u(this,"_destroyReason",void 0)}var t,r,o;return t=e,o=[{key:"addErrorHandler",value:function(t){e.errorHandlers.push(t)}}],(r=[{key:"destroyReason",get:function(){return this._destroyReason}},{key:"isDestroyed",get:function(){return this._isDestroyed}},{key:"addDestroyHandler",value:function(e){this._isDestroyed?e.apply(void 0,i([this._destroyReason])):this.destroyHandlers.push(e)}},{key:"destroy",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=r[0];if(!this._isDestroyed){this._isDestroyed=!0,this._destroyReason=o;try{n.apply(void 0,[this.destroyHandlers].concat(r))}catch(a){n(e.errorHandlers,a)}this.destroyHandlers.length=0}}}])&&a(t.prototype,r),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();u(Li,"errorHandlers",[]);var ji,Ii,Di=r(87994),Ni=r(7487),Mi=r(18414),Ci=r(72391),Fi=r(96418),Bi={error:"",isFatal:!1,helpLink:""},Ui=r(30868),Gi=r(55589),Hi=r(40497),Vi=r.n(Hi),Wi=r(86673),Yi=r(16187),qi=r(47134);!function(e){e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.BUFFER_STALLED_ERROR="bufferStalledError",e.FRAG_PARSING_ERROR="fragParsingError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.PIPELINE_ERROR_DECODE="PIPELINE_ERROR_DECODE",e.DECODER_ERROR_NOT_SUPPORTED="DECODER_ERROR_NOT_SUPPORTED",e.BUFFER_APPEND_ERROR="bufferAppendError",e.MEDIA_ELEMENT_ERROR_FORMAT_ERROR="MEDIA_ELEMENT_ERROR: Format error",e.REMUX_ALLOC_ERROR="remuxAllocError",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.DEMUXER_ERROR_COULD_NOT_OPEN="DEMUXER_ERROR_COULD_NOT_OPEN",e.NS_ERROR_DOM_INVALID_STATE_ERR="NS_ERROR_DOM_INVALID_STATE_ERR",e.CHUNK_DEMUXER_ERROR_APPEND_FAILED="CHUNK_DEMUXER_ERROR_APPEND_FAILED",e.FAILED_TO_INIT_DECODER="Failed to init decoder",e.PIPELINE_ERROR_INITIALIZATION_FAILED="PIPELINE_ERROR_INITIALIZATION_FAILED",e.NS_ERROR_FAILURE="NS_ERROR_FAILURE",e.REQUEST_FAILED="2147500036: Request failed",e.PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED="PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED",e.PIPELINE_ERROR_COULD_NOT_RENDER="PIPELINE_ERROR_COULD_NOT_RENDER",e.MEDIA_ELEMENT_ERROR_EMPTY_SRC_ATTRIBUTE="MEDIA_ELEMENT_ERROR: Empty src attribute",e.NS_ERROR_DOM_MEDIA_METADATA_ERR="NS_ERROR_DOM_MEDIA_METADATA_ERR",e.NS_ERROR_DOM_MEDIA_FATAL_ERR="NS_ERROR_DOM_MEDIA_FATAL_ERR",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.FRAG_LOAD_ERROR="fragLoadError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.LEVEL_LOAD_ERROR="levelLoadError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.FRAG_LOAD_TIME_OUT="fragLoadTimeOut",e.MANIFEST_LOAD_TIME_OUT="manifestLoadTimeOut",e.LEVEL_LOAD_TIME_OUT="levelLoadTimeOut",e.AUDIO_TRACK_LOAD_TIME_OUT="audioTrackLoadTimeOut",e.INTERNAL_EXCEPTION="internalException",e.ON_PLAYER_INIT_ERROR_INTERNAL="ON_PLAYER_INIT_ERROR_INTERNAL",e.UNABLE_TO_LOAD_PLAYER_IFRAME="UNABLE_TO_LOAD_PLAYER_IFRAME",e.ON_PLAYER_INIT_ERROR="ON_PLAYER_INIT_ERROR",e.LOADER_INIT_ERROR="LoaderInitError",e.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT="UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT",e.FAILED_TO_DOWNLOAD_DEBUG_INFO="FAILED_TO_DOWNLOAD_DEBUG_INFO",e.PLAYER_CONTAINER_NOT_FOUND="PLAYER_CONTAINER_NOT_FOUND",e.KEY_LOAD_ERROR="keyLoadError",e.FEATURE_HANDLER_ERROR="FEATURE_HANDLER_ERROR",e.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER="InvalidConfigElementInCreatePlayer",e.INVALID_CONFIG_LANG_IN_CREATE_PLAYER="InvalidConfigLangInCreatePlayer",e.INVALID_CONFIG_IN_CREATE_PLAYER="InvalidConfigInCreatePlayer",e.INVALID_CONFIG_IN_SET_SOURCE="InvalidConfigInSetSource",e.INVALID_CONFIG_IN_SOURCE_UPDATE="InvalidConfigInSourceUpdate",e.INVALID_LOG_URL="InvalidLogUrl",e.IFRAME_DOES_NOT_ALLOW_DRM="IframeDoesNotAllowDrm",e.DRM_IS_NOT_ALLOWED="DrmIsNotAllowed",e.EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR="EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR",e.INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR="INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR",e.LOAD_SKIN_ERROR="LOAD_SKIN_ERROR",e.INSERT_INTO_WITH_SECURE_FRAME="INSERT_INTO_WITH_SECURE_FRAME",e.PLAY_AD_VIEWERS_WITH_SECURE_FRAME="PLAY_AD_VIEWERS_WITH_SECURE_FRAME",e.ELEMENT_NOT_IN_DOM="ELEMENT_NOT_IN_DOM",e.ERROR_SCREEN_LOAD_ERROR="ERROR_SCREEN_LOAD_ERROR",e.REQUEST_SOURCE_ERROR="REQUEST_SOURCE_ERROR",e.SCREEN_WAKE_LOCK_ERROR="SCREEN_WAKE_LOCK_ERROR",e.YASP_UNEXPECTED_METHOD_CALL="YASP_UNEXPECTED_METHOD_CALL",e.PLAY_REJECTED="PLAY_REJECTED"}(ji||(ji={})),function(e){e.DEFAULT_ERROR="DEFAULT_ERROR",e.BROADCAST_AD_BLOCK_INIT_ERROR="BROADCAST_AD_BLOCK_INIT_ERROR",e.AD_TYPE_IS_NOT_RECOGNIZED="AD_TYPE_IS_NOT_RECOGNIZED",e.INVALID_METADATA="INVALID_METADATA",e.INVALID_STREAM_URL="INVALID_STREAM_URL",e.UNSUPPORTED_MEDIA_TYPE="UNSUPPORTED_MEDIA_TYPE",e.SCRIPT_INIT_ERROR="SCRIPT_INIT_ERROR",e.MPD_WIDEVINE_CERT_LOAD_ERROR="MPD_WIDEVINE_CERT_LOAD_ERROR",e.NATIVE_HLS_NOT_SUPPORTED_ERROR="NATIVE_HLS_NOT_SUPPORTED_ERROR",e.HLS_JS_NOT_SUPPORTED_ERROR="HLS_JS_NOT_SUPPORTED_ERROR",e.ON_TICK_ERROR="ON_TICK_ERROR",e.FAIRPLAY_NOT_SUPPORTED="FAIRPLAY_NOT_SUPPORTED",e.FAIRPLAY_CERT_LOAD_ERROR="FAIRPLAY_CERT_LOAD_ERROR",e.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR="FAIRPLAY_CREATE_MEDIA_KEYS_ERROR",e.FAIRPLAY_CREATE_KEY_SESSION_ERROR="FAIRPLAY_CREATE_KEY_SESSION_ERROR",e.FAIRPLAY_SPC_LOAD_ERROR="FAIRPLAY_SPC_LOAD_ERROR",e.FAIRPLAY_CREATE_KEY_ERROR="FAIRPLAY_CREATE_KEY_ERROR",e.FAIRPLAY_INVALID_CONTENT_ID="FAIRPLAY_INVALID_CONTENT_ID",e.DRM_PROXY_ERROR="DRM_PROXY_ERROR",e.DRM_PROXY_ERROR_SIGNATURE_EXPIRED="DRM_PROXY_ERROR_SIGNATURE_EXPIRED",e.DRM_PROXY_ERROR_NEED_COOKIE="DRM_PROXY_ERROR_NEED_COOKIE",e.DRM_PROXY_ERROR_NEED_TEAM_LOGIN="DRM_PROXY_ERROR_NEED_TEAM_LOGIN",e.DRM_PROXY_ERROR_NEED_VIEW_PERMISSION="DRM_PROXY_ERROR_NEED_VIEW_PERMISSION",e.DRM_INIT_ERROR="DRM_INIT_ERROR",e.DRM_NO_INIT_DATA="DRM_NO_INIT_DATA",e.DRM_CERT_LOAD_ERROR="DRM_CERT_LOAD_ERROR",e.DRM_LICENSE_LOAD_ERROR="DRM_CERT_LOAD_ERROR",e.DRM_NO_SUPPORTED_KEY_SYSTEM="DRM_NO_SUPPORTED_KEY_SYSTEM",e.DRM_FAILED_TO_CREATE_CDM="DRM_FAILED_TO_CREATE_CDM",e.DRM_FAILED_TO_SET_MEDIA_KEYS="DRM_FAILED_TO_SET_MEDIA_KEYS",e.DRM_NO_LICENSE_SERVER="DRM_NO_LICENSE_SERVER",e.DRM_FAILED_TO_CREATE_SESSION="DRM_FAILED_TO_CREATE_SESSION",e.DRM_SESSION_ERROR="DRM_SESSION_ERROR",e.DRM_FAILED_TO_GENERATE_REQUEST="DRM_FAILED_TO_GENERATE_REQUEST",e.DRM_UNKNOWN_ERROR="DRM_UNKNOWN_ERROR",e.NO_HLS_JS_INSTANCE="NO_HLS_JS_INSTANCE",e.AD_IS_ALREADY_PLAYING="AD_IS_ALREADY_PLAYING",e.META_INFO_REQUEST_FAILED="META_INFO_REQUEST_FAILED",e.MULTIROLL_INIT_ERROR="MULTIROLL_INIT_ERROR",e.REACT_COMPONENT_DID_CATCH_ERROR_INFO="REACT_COMPONENT_DID_CATCH_ERROR_INFO",e.PLAY_AD_VIEWERS_ERROR="PLAY_AD_VIEWERS_ERROR",e.SAGA_ERROR="SAGA_ERROR",e.STRM_ABD_INVALID_RESPONSE="STRM_ABD_INVALID_RESPONSE",e.REPRESENTATION_CHANGE="REPRESENTATION_CHANGE",e.RECOVER_TASK_ERROR="RECOVER_TASK_ERROR",e.PRELOAD_SOURCE_FAILED="PRELOAD_SOURCE_FAILED",e.REGIONAL_LIMITATION_MANIFEST="REGIONAL_LIMITATION_MANIFEST",e.REGIONAL_LIMITATION_LEVEL="REGIONAL_LIMITATION_LEVEL",e.REGIONAL_LIMITATION_SEGMENT="REGIONAL_LIMITATION_SEGMENT",e.SIGNATURE_EXPIRED_MANIFEST="SIGNATURE_EXPIRED_MANIFEST",e.SIGNATURE_EXPIRED_LEVEL="SIGNATURE_EXPIRED_LEVEL",e.SIGNATURE_EXPIRED_SEGMENT="SIGNATURE_EXPIRED_SEGMENT",e.BANNED_MANIFEST="BANNED_MANIFEST",e.BANNED_LEVEL="BANNED_LEVEL",e.BANNED_SEGMENT="BANNED_SEGMENT",e.MANIFEST_NOT_FOUND="MANIFEST_NOT_FOUND",e.NO_STREAMS="NO_STREAMS",e.NO_CODECS="NO_CODECS",e.NO_MSE="NO_MSE",e.NO_DRM_CONFIG="NO_DRM_CONFIG",e.NO_DRM="NO_DRM",e.NO_PLAYABLE_STREAMS="NO_PLAYABLE_STREAMS",e.MEDIA_ERR_CUSTOM="MEDIA_ERR_CUSTOM",e.MEDIA_ERR_ABORTED="MEDIA_ERR_ABORTED",e.MEDIA_ERR_NETWORK="MEDIA_ERR_NETWORK",e.MEDIA_ERR_DECODE="MEDIA_ERR_DECODE",e.MEDIA_ERR_SRC_NOT_SUPPORTED="MEDIA_ERR_SRC_NOT_SUPPORTED",e.MEDIA_ERR_ENCRYPTED="MEDIA_ERR_ENCRYPTED"}(Ii||(Ii={}));var zi,Ki=r(76101),$i=r(68992),Xi=(r(72573),r(47228),r(67767),function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=u.call(this,e[0].message)).name="ValiError",r.issues=e,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e);var r,n,i,o,a,u=(r=t,n=g(),function(){var e,t=w(r);if(n){var i=w(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return y(this,e)});return i=t,o&&p(i.prototype,o),a&&p(i,a),Object.defineProperty(i,"prototype",{writable:!1}),i}(v(Error))),Ji=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i="object"===R(e)?e:{message:String(e),code:0};M(A(n=u.call(this,i.message||String(i.code))),"message",void 0),M(A(n),"messageDetails",void 0),M(A(n),"code",void 0),M(A(n),"category",void 0),M(A(n),"isFatal",void 0),M(A(n),"details",void 0),M(A(n),"stack",void 0),M(A(n),"vsid",void 0),M(A(n),"helpLink",void 0),Vi()(A(n),t.prototype),n.message=i.message||String(i.code)||n.message,n.messageDetails=i.messageDetails,n.code=i.code;var o=d(n.code);if(n.category=null!==i&&void 0!==i&&i.category&&o===qi.q.DEFAULT?i.category:o,n.details=i.details,n.isFatal=void 0===i.isFatal||i.isFatal,n.stack=i.stack&&"?:?:?"!==i.stack?i.stack:n.details&&n.details.stack||function(e,t){var r=e.url,n=e.line,i=e.col,o=e.fileName,a=e.columnNumber,u=e.lineNumber;return String(t||"".concat(r||o||"?",":").concat(n||u||"?",":").concat(i||a||"?"))}(i,A(n).stack),!n.stack||n.stack===Gi.J.stack)try{throw new Error(n.message)}catch(a){(0,Ki.K)(a)&&(n.stack=a.stack||Gi.J.stack)}return n.helpLink=i.helpLink||void 0,n.vsid=r||i.vsid,n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(t,e);var r,n,i,o,a,u=(r=t,n=I(),function(){var e,t=N(r);if(n){var i=N(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return P(this,e)});return i=t,a=[{key:"from",value:function(e){var r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null!==(r=null!==(n=i.code)&&void 0!==n?n:(0,Wi.Y)((function(){return e.code})))&&void 0!==r?r:0;if(e instanceof t)return i?new t(T(T(T({},e),i),{},{code:o})):e;if(_(e)){var a=O(e),u=JSON.stringify(a,null,4);return new t(T(T({details:a,message:u},i),{},{code:o}))}return(0,$i.V)(e)?new t(T(T(T({},e),i),{},{code:o})):(0,Yi.H)(e)?new t(T(T({message:e},i),{},{code:o})):new t(T(T({message:"UNEXPECTED_ERROR_TYPE"},i),{},{code:o}))}}],(o=[{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"toJSON",value:function(){var e={message:this.message,messageDetails:this.messageDetails,code:this.code,category:this.category,isFatal:this.isFatal,details:this.details,stack:this.stack,vsid:this.vsid,helpLink:this.helpLink||void 0};return T(T({},e),{},{raw:JSON.stringify(e)})}}])&&x(i.prototype,o),a&&x(i,a),Object.defineProperty(i,"prototype",{writable:!1}),t}(L(Error));!function(e){e.EXPIRED_SIGNATURE="EXPIRED_SIGNATURE",e.NEED_COOKIE="NEED_COOKIE",e.NEED_YATEAM_LOGIN="NEED_YATEAM_LOGIN",e.NEED_VIEW_PERMISSION="NEED_VIEW_PERMISSION"}(zi||(zi={}));var Qi,Zi=r(72573),eo=function(e){var t=0;return{promise:new Zi((function(r){t=window.setTimeout(r,e)})),clear:function(){clearTimeout(t)},timeoutId:t}},to=r(35276),ro=r(18566),no=(r(61330),r(3569)),io=r(45990);!function(e){e.Temporary="temporary",e.Persistent="persistent"}(Qi||(Qi={}));var oo=r(36354),ao=r(72573),uo=r(174).SourcePersistStore,co=r(25767).DRM_MAP_FILENAME,so=r(80349).needsManualDecryption,lo=function(e){function t(e,r,n,i){var o,a,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(u=T.call(this)).video=e,u.config=r,u.onEvent=i,Q(X(u),"session",void 0),Q(X(u),"initPromise",void 0),Q(X(u),"shouldStopOnEncrypted",!1),Q(X(u),"mainEventUnsubscribers",[]),Q(X(u),"currentDrmKeySystem",Di.WL.none),Q(X(u),"keySystem",void 0),Q(X(u),"drmKeySystemMapping",void 0),Q(X(u),"cacheKeySystemAccess",void 0),Q(X(u),"requestSync",(0,ro.l)()),Q(X(u),"onError",void 0),u.onError=function(e){u.isDestroyed||(e.isFatal&&u.destroy(),n(e))},u.initWorkarounds(),(null===(o=r.privateParams)||void 0===o?void 0:o.mode)===Qi.Persistent&&(u.shouldStopOnEncrypted=!0),u.mainEventUnsubscribers.push(u.addEventListener(u.video,"encrypted",(function(e){u.logEvent("DrmEncrypted",{initDataType:e.initDataType}),u.removeSubscriptions(),u.onEncrypted(e.target)}),{once:!0})),u.mainEventUnsubscribers.push(u.addEventListener(u.video,"waitingforkey",(function(e){u.logEvent("DrmWaitingForKey",void 0),u.removeSubscriptions(),u.onEncrypted(e.target)}),{once:!0})),u.keySystem=null,u.drmKeySystemMapping=r.drmKeySystemMapping||{},u.cacheKeySystemAccess=null===(a=r.cacheKeySystemAccess)||void 0===a||a,u.logEvent("CreateDrmController",{config:r}),u}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(t,e);var r,n,i,o,a,u,s,l,f,d,p,y,v,m,g,b,w,E,_,O,S,k,T=K(t);return r=t,n=[{key:"initWorkarounds",value:function(){}},{key:"removeSubscriptions",value:function(){this.mainEventUnsubscribers.forEach((function(e){return e()})),this.mainEventUnsubscribers.length=0}},{key:"getMediaKeySessionInitData",value:(k=V(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ao.resolve({}));case 1:case"end":return e.stop()}}),e)}))),function(){return k.apply(this,arguments)})},{key:"loadCertificate",value:(S=V(G().mark((function e(r){var n,i,o,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.keySystem!==Ni.dn){e.next=2;break}return e.abrupt("return",new ArrayBuffer(0));case 2:if(!r){e.next=18;break}return e.prev=3,this.logEvent("DrmCertificateLoad",{url:r}),n=(0,to.u)(),e.next=8,t.requestDrmProxy({method:"get",responseType:"arraybuffer",url:r,withCredentials:this.config.withCredentials},0,this.requestSync);case 8:return i=e.sent,o=i.response,this.logEvent("DrmCertificateLoadEnd",{url:r,requestTime:Math.round(n())}),e.abrupt("return",o);case 14:e.prev=14,e.t0=e.catch(3),a=Ji.from(e.t0),this.onError(new Ji(U(U({},a.toJSON()),{},{code:Ii.DRM_CERT_LOAD_ERROR,message:"Failed to get certificate via direct link: ".concat(a),isFatal:!1})));case 18:return e.abrupt("return",new ArrayBuffer(0));case 19:case"end":return e.stop()}}),e,this,[[3,14]])}))),function(e){return S.apply(this,arguments)})},{key:"removeMediaKeys",value:(O=V(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.video.mediaKeys){e.next=2;break}return e.abrupt("return");case 2:if(""!==(t=this.video.src)){e.next=12;break}return e.prev=4,e.next=7,this.video.setMediaKeys(null);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(4);case 11:return e.abrupt("return");case 12:return this.video.removeAttribute("src"),e.prev=13,e.next=16,this.video.setMediaKeys(null);case 16:e.next=20;break;case 18:e.prev=18,e.t1=e.catch(13);case 20:this.video.src=t;case 21:case"end":return e.stop()}}),e,this,[[4,9],[13,18]])}))),function(){return O.apply(this,arguments)})},{key:"activatePreloadedSession",value:(_=V(G().mark((function e(t){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.mediaKeys,e.next=3,this.removeMediaKeys();case 3:if(!this.isDestroyed){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.video.setMediaKeys(r);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"loadOfflineSession",value:(E=V(G().mark((function e(r){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPreloadedSession(r,Qi.Persistent,this.drmKeySystemMapping,this.cacheKeySystemAccess);case 2:if(n=e.sent){e.next=5;break}throw new Ji({code:Ii.DRM_SESSION_ERROR,message:"Session not found for content ID: ".concat(r),isFatal:!1});case 5:return e.abrupt("return",this.activatePreloadedSession(n));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return E.apply(this,arguments)})},{key:"init",value:(w=V(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.initPromise){e.next=2;break}return e.abrupt("return",this.initPromise);case 2:return this.initPromise=this.initInternal(),e.abrupt("return",this.initPromise);case 4:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)})},{key:"initInternal",value:(b=V(G().mark((function e(){var r,n,i,o,a,u,s,l,f,h,d;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentDrmKeySystem===Di.WL.none){e.next=2;break}return e.abrupt("return");case 2:if(this.video){e.next=4;break}return e.abrupt("return");case 4:if(r=this.config.privateParams||{},n=r.mode,i=r.licenseId,n!==Qi.Persistent){e.next=7;break}return e.abrupt("return",this.loadOfflineSession(i));case 7:return e.next=9,t.getPreloadedSession(i,n,this.drmKeySystemMapping,this.cacheKeySystemAccess);case 9:if(!(o=e.sent)){e.next=29;break}return e.prev=11,e.next=14,this.activatePreloadedSession(o);case 14:return this.session=o.session,this.keySystem=o.keySystem,this.currentDrmKeySystem=c(this.keySystem),this.shouldStopOnEncrypted=!0,e.abrupt("return");case 21:return e.prev=21,e.t0=e.catch(11),e.next=25,this.removeMediaKeys();case 25:this.shouldStopOnEncrypted=!1;case 26:return e.prev=26,t.temporarySessions.delete(i),e.finish(26);case 29:if(this.keySystem=t.getDrmKeySystem(this.config),this.keySystem){e.next=33;break}return this.onError(new Ji({code:Ii.DRM_NO_SUPPORTED_KEY_SYSTEM,message:"No supported drm server specified",isFatal:!0})),e.abrupt("return");case 33:if(!this.video.mediaKeys){e.next=35;break}return e.abrupt("return");case 35:if(!so([{keySystem:this.keySystem}])){e.next=38;break}return this.currentDrmKeySystem=c(this.keySystem),e.abrupt("return");case 38:return a=t.getServerCertificateUrl(this.config,this.keySystem),u=this.loadCertificate(a),e.prev=40,e.next=43,t.getMediaKeySystemAccess(this.keySystem,Qi.Temporary,this.drmKeySystemMapping,this.cacheKeySystemAccess);case 43:return l=e.sent,e.next=46,l.createMediaKeys();case 46:s=e.sent,e.next=54;break;case 49:return e.prev=49,e.t1=e.catch(40),f=(0,Ki.K)(e.t1)?e.t1.message:(0,Yi.H)(e.t1)?e.t1:"",this.onError(Ji.from(e.t1,{code:Ii.DRM_FAILED_TO_CREATE_CDM,message:"Failed to create mediaKeys: ".concat(f),isFatal:!0})),e.abrupt("return");case 54:if(e.prev=54,!this.isDestroyed){e.next=57;break}return e.abrupt("return");case 57:return e.next=59,this.video.setMediaKeys(s);case 59:e.next=66;break;case 61:return e.prev=61,e.t2=e.catch(54),h=(0,Ki.K)(e.t2)?e.t2.message:(0,Yi.H)(e.t2)?e.t2:"",this.onError(Ji.from(e.t2,{code:Ii.DRM_FAILED_TO_SET_MEDIA_KEYS,message:"Failed set mediaKeys: ".concat(h),isFatal:!0})),e.abrupt("return");case 66:return e.next=68,u;case 68:if(!(d=e.sent).byteLength){e.next=72;break}return e.next=72,s.setServerCertificate(d);case 72:this.currentDrmKeySystem=c(this.keySystem);case 73:case"end":return e.stop()}}),e,this,[[11,21,26,29],[40,49],[54,61]])}))),function(){return b.apply(this,arguments)})},{key:"onEncrypted",value:(g=V(G().mark((function e(r){var n,i,o,a,u=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDestroyed){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.initPromise;case 4:if(!this.shouldStopOnEncrypted){e.next=6;break}return e.abrupt("return");case 6:if(r.mediaKeys&&this.keySystem){e.next=9;break}return this.onError(new Ji({code:Ii.DRM_INIT_ERROR,message:"MediaKeys not inited",isFatal:!0})),e.abrupt("return");case 9:if(i=null===(n=this.config.servers)||void 0===n?void 0:n[this.keySystem]){e.next=13;break}return this.onError(new Ji({code:Ii.DRM_NO_LICENSE_SERVER,message:"No valid url to license server",isFatal:!0})),e.abrupt("return");case 13:e.prev=13,this.session=r.mediaKeys.createSession(),e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(13),o=(0,Ki.K)(e.t0)?e.t0.message:(0,Yi.H)(e.t0)?e.t0:"",this.onError(Ji.from(e.t0,{code:Ii.DRM_FAILED_TO_CREATE_SESSION,message:"Failed to create session: ".concat(o),isFatal:!0})),e.abrupt("return");case 22:if(this.session){e.next=25;break}return this.onError(new Ji({code:Ii.DRM_FAILED_TO_CREATE_SESSION,message:"session is ".concat(this.session),isFatal:!0})),e.abrupt("return");case 25:return this.addEventListener(this.session,"message",function(){var e=V(G().mark((function e(r){var n,o,a,c,s,l,f,h;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.message,e.prev=1,u.logEvent("DrmProxyRequest",{requestParams:u.config.requestParams,url:i,keySystem:u.keySystem}),o=(0,to.u)(),a={keySystem:u.keySystem,url:i,config:u.config,message:n,retry:0},e.next=7,t.handleSessionMessage(a,u.requestSync,u.onError);case 7:if(c=e.sent,s=c.response,u.logEvent("DrmProxyRequestEnd",{url:i,requestTime:Math.round(o()),keySystem:u.keySystem}),!u.isDestroyed){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,u.updateSession(s);case 14:e.next=21;break;case 16:e.prev=16,e.t0=e.catch(1),f=Ji.from(e.t0),h=null!==(l=f.details)&&void 0!==l&&l.drmProxyError?f.code:Ii.DRM_SESSION_ERROR,u.onError(new Ji(U(U({},f.toJSON()),{},{code:h,message:"Failed to handle session message: ".concat(f)})));case 21:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),!1),this.addEventListener(this.session,"error",(function(e){var t,r;u.onError(new Ji(U(U({},e),{},{code:Ii.DRM_SESSION_ERROR,message:"Session error: ".concat(e.message),isFatal:null===(t=null===(r=e.details)||void 0===r?void 0:r.isFatal)||void 0===t||t})))})),e.prev=27,e.next=30,this.getMediaKeySessionInitData();case 30:return a=e.sent,e.next=33,this.generateRequest(this.session,a);case 33:e.next=39;break;case 35:return e.prev=35,e.t1=e.catch(27),this.onError(Ji.from(e.t1,{code:Ii.DRM_UNKNOWN_ERROR})),e.abrupt("return");case 39:case"end":return e.stop()}}),e,this,[[13,17],[27,35]])}))),function(e){return g.apply(this,arguments)})},{key:"updateSession",value:(m=V(G().mark((function e(t){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.keySystem!==Ni.dn){e.next=5;break}return e.next=3,this.updateClearKeyLicense(t);case 3:e.next=7;break;case 5:return e.next=7,null===(r=this.session)||void 0===r?void 0:r.update(t);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"createClearKeyObject",value:function(e,t){return{kty:"oct",kid:e,k:t,alg:"A128KW"}}},{key:"updateClearKeyLicense",value:(v=V(G().mark((function e(t){var r,n,i,o,a,u=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.keySystem===Ni.dn){e.next=2;break}return e.abrupt("return");case 2:return n=JSON.parse((new TextDecoder).decode(t)),i=n.keys,o=i.map((function(e){var t=e.key_id,r=e.key;return u.createClearKeyObject(t,r)})),a=(new TextEncoder).encode(JSON.stringify({keys:o})),e.next=8,null===(r=this.session)||void 0===r?void 0:r.update(a);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"generateRequest",value:(y=V(G().mark((function e(t,r){var n,i,o,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.initData,i=r.initDataType,!this.isDestroyed){e.next=3;break}return e.abrupt("return");case 3:if(n){e.next=6;break}return this.onError(new Ji({code:Ii.DRM_NO_INIT_DATA,message:"No drm initialization data in initialization info",isFatal:!0})),e.abrupt("return");case 6:return e.prev=6,o=Mi.P.fromBase64(n).buffer,e.next=10,t.generateRequest(i,o);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),a=(0,Ki.K)(e.t0)?e.t0.message:(0,Yi.H)(e.t0)?e.t0:"",this.onError(Ji.from(e.t0,{code:Ii.DRM_FAILED_TO_GENERATE_REQUEST,message:"Failed to generate request: ".concat(a,"}"),isFatal:!0}));case 16:case"end":return e.stop()}}),e,this,[[6,12]])}))),function(e,t){return y.apply(this,arguments)})},{key:"addEventListener",value:function(e,t,r,n){var i=(0,Ci.O)(e,t,r,n);return this.addDestroyHandler(i),i}},{key:"destroy",value:(p=V(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y(J(t.prototype),"destroy",this).call(this),this.logEvent("DestroyDrmControllerCalled",void 0),this.currentDrmKeySystem=Di.WL.none,!this.session){e.next=6;break}return e.next=6,t.closeSession(this.session);case 6:if(this.session=void 0,""!==this.video.src){e.next=15;break}return e.prev=8,e.next=11,this.video.setMediaKeys(null);case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(8);case 15:this.logEvent("DestroyDrmController",void 0);case 16:case"end":return e.stop()}}),e,this,[[8,13]])}))),function(){return p.apply(this,arguments)})},{key:"logEvent",value:function(e,t){this.onEvent({name:e,data:t})}}],i=[{key:"savePreloadedSession",value:function(e,r,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Qi.Temporary,a=arguments.length>5?arguments[5]:void 0;o!==Qi.Persistent?t.temporarySessions.set(r,{session:n,mediaKeys:i,keySystem:e}):uo.appendToJSON(co,Q({},r,{sessionId:n.sessionId,keySystem:e,expirationTimestamp:a}))}},{key:"getMediaKeySystemAccess",value:(d=V(G().mark((function e(r){var n,i,o,a,u,c=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:Qi.Temporary,i=c.length>2&&void 0!==c[2]?c[2]:{},o=!(c.length>3&&void 0!==c[3])||c[3],!(a=o?t.mediaKeySystemAccessMaps[n].get(r):void 0)){e.next=6;break}return e.abrupt("return",a);case 6:return u=i[r]||r,e.next=9,window.navigator.requestMediaKeySystemAccess(u,t.getVideoConfigs(n));case 9:return a=e.sent,o&&t.mediaKeySystemAccessMaps[n].set(r,a),e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})},{key:"extendDrmConfig",value:function(e,t,r){var n=r||{},i=n.mode,o=void 0===i?Qi.Temporary:i,a=n.drmKeySystemMapping,u=n.cacheKeySystemAccess;return U(U({},e),{},{privateParams:{licenseId:t,mode:o},drmKeySystemMapping:a,cacheKeySystemAccess:u})}},{key:"preloadSession",value:(f=V(G().mark((function e(r,n){var i,o,a,u,c,s,l,f;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.privateParams||{},o=i.mode,a=void 0===o?Qi.Temporary:o,u=i.licenseId,c=r.drmKeySystemMapping,s=r.cacheKeySystemAccess,e.next=4,t.getPreloadedSession(u,a,c,s);case 4:if(!e.sent){e.next=7;break}return e.abrupt("return");case 7:return l=new io.B,f=t.preloadSessionInternal(r,n,l),e.abrupt("return",ao.race([f,l.promise]).then(function(){var e=V(G().mark((function e(n){var i,o,a,u,c,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.keySystem,a=n.licenseId,u=n.session,c=n.mediaKeys,s=n.mode,t.savePreloadedSession(o,a,u,c,s,null===r||void 0===r||null===(i=r.requestParams)||void 0===i?void 0:i.expirationTimestamp),s!==Qi.Persistent){e.next=5;break}return e.next=5,u.close();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:case"end":return e.stop()}}),e)}))),function(e,t){return f.apply(this,arguments)})},{key:"preloadSessionInternal",value:(l=V(G().mark((function e(r,n,i){var o,a,u,c,s,l,f,h,d,p,y,v,m,g,b,w,E,_,O,S,k,T,R,x,P,A,L,j,I,D;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=r.privateParams||{},c=u.mode,s=void 0===c?Qi.Temporary:c,l=u.licenseId){e.next=3;break}throw new Ji({code:Ii.DRM_CERT_LOAD_ERROR,message:"Can not preload drm session without licenseId",isFatal:!1});case 3:if(null!==(f=t.getDrmKeySystem(r))){e.next=6;break}throw new Ji({code:Ii.DRM_CERT_LOAD_ERROR,message:"Can not preload drm session without supported key system in drm config",isFatal:!1});case 6:if(h=n.find((function(e){return e.keySystem===f}))){e.next=9;break}throw new Ji({code:Ii.DRM_CERT_LOAD_ERROR,message:"Can not preload drm session without drm info for chosen key system ".concat(f),isFatal:!1});case 9:if(d=h.initData[0],p=d.initData,y=d.initDataType,p){e.next=12;break}throw new Ji({code:Ii.DRM_CERT_LOAD_ERROR,message:"Can not preload drm session without init data for chosen key system ".concat(f),isFatal:!1});case 12:if(v=null===(o=r.servers)||void 0===o?void 0:o[f]){e.next=15;break}throw new Ji({code:Ii.DRM_CERT_LOAD_ERROR,message:"Can not preload drm session without license url",isFatal:!1});case 15:return m=r.drmKeySystemMapping,g=r.cacheKeySystemAccess,e.next=18,t.getMediaKeySystemAccess(f,s,m,g);case 18:return b=e.sent,e.next=21,b.createMediaKeys();case 21:if(w=e.sent,E=Mi.P.fromBase64(p).buffer,(_=w.createSession(s===Qi.Persistent?"persistent-license":"temporary")).onkeystatuseschange=function(){switch(_.keyStatuses.values().next().value){case"usable":i.resolve({keySystem:f,licenseId:l,session:_,mediaKeys:w,mode:s});break;case"expired":i.reject(new Ji({code:Ii.DRM_LICENSE_LOAD_ERROR,message:"License expired",isFatal:!1}));break;case"internal-error":i.reject(new Ji({code:Ii.DRM_LICENSE_LOAD_ERROR,message:"EME internal error",isFatal:!1}))}},O=(0,ro.l)(),S=(null===(a=r.advanced)||void 0===a?void 0:a[f])||{},!(k=S.serverCertificateUrl)){e.next=34;break}return e.next=30,t.requestDrmProxy({method:"get",responseType:"arraybuffer",url:k,withCredentials:r.withCredentials},0,O);case 30:return T=e.sent,R=T.response,e.next=34,w.setServerCertificate(R);case 34:return e.next=36,_.generateRequest(y,E);case 36:if(k){e.next=46;break}return e.next=39,t.getSessionMessage(_,i.promise);case 39:return x=e.sent,e.next=42,t.handleSessionMessage({keySystem:f,url:v,config:r,message:x,retry:0},O);case 42:return P=e.sent,A=P.response,e.next=46,_.update(A);case 46:return e.next=48,t.getSessionMessage(_,i.promise);case 48:return L=e.sent,j={keySystem:f,url:v,config:r,message:L,retry:0},e.next=52,t.handleSessionMessage(j,O);case 52:return I=e.sent,D=I.response,e.next=56,_.update(D);case 56:return e.abrupt("return",{keySystem:f,licenseId:l,session:_,mediaKeys:w,mode:s});case 57:case"end":return e.stop()}}),e)}))),function(e,t,r){return l.apply(this,arguments)})},{key:"getSessionMessage",value:function(e,t){return new ao((function(r,n){var i=function(e){r(e.message)},o=function(){n(new Ji({code:Ii.DRM_SESSION_ERROR,message:"DRM session error",isFatal:!1}))};if(e.addEventListener("message",i,{once:!0}),e.addEventListener("error",o,{once:!0}),t){var a=function(){e.removeEventListener("message",i),e.removeEventListener("error",o)};t.then(a,a)}}))}},{key:"isExpired",value:function(e){var t=e.expiration;return!isNaN(t)&&t<=Date.now()}},{key:"getPreloadedSession",value:(s=V(G().mark((function e(r){var n,i,o,a,u,c,s,l,f,h,d,p,y,v=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=v.length>1&&void 0!==v[1]?v[1]:Qi.Temporary,o=v.length>2?v[2]:void 0,a=v.length>3?v[3]:void 0,r){e.next=5;break}return e.abrupt("return",null);case 5:if(i!==Qi.Persistent){e.next=29;break}return e.prev=6,e.next=9,uo.getParsedJSON(co);case 9:if(c=e.sent,u=c[r]){e.next=13;break}return e.abrupt("return",null);case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(6),e.abrupt("return",null);case 18:return l=(s=u).sessionId,f=s.keySystem,e.next=21,t.getMediaKeySystemAccess(f,Qi.Persistent,o,a);case 21:return h=e.sent,e.next=24,h.createMediaKeys();case 24:return d=e.sent,p=d.createSession("persistent-license"),e.next=28,p.load(l);case 28:return e.abrupt("return",{session:p,mediaKeys:d,keySystem:f});case 29:if(y=t.temporarySessions.get(r)){e.next=32;break}return e.abrupt("return",null);case 32:if(!t.isExpired(y.session)){e.next=35;break}return t.removePreloadedSessionById(r,Qi.Temporary),e.abrupt("return",null);case 35:return e.abrupt("return",null!==(n=t.temporarySessions.get(r))&&void 0!==n?n:null);case 36:case"end":return e.stop()}}),e,null,[[6,15]])}))),function(e){return s.apply(this,arguments)})},{key:"removePreloadedSession",value:(u=V(G().mark((function e(r){var n,i,o,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.privateParams||{},i=n.mode,o=void 0===i?Qi.Temporary:i,a=n.licenseId){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",t.removePreloadedSessionById(a,o));case 4:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"removePreloadedSessionById",value:(a=V(G().mark((function e(r){var n,i,o,a,u,c=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=c.length>1&&void 0!==c[1]?c[1]:Qi.Temporary)!==Qi.Persistent){e.next=10;break}return e.next=4,t.getPreloadedSession(r,n);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:return i=e.t0,o=i.session,e.abrupt("return",o&&o.remove());case 10:if(a=t.temporarySessions.get(r)||{},!(u=a.session)){e.next=16;break}return e.next=14,(0,oo.v)(u.remove());case 14:return e.next=16,t.closeSession(u);case 16:t.temporarySessions.delete(r);case 17:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"getVideoConfigs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qi.Temporary;return e===Qi.Persistent?Ni._m.map((function(e){return U(U({},e),{},{sessionTypes:["persistent-license"]})})):Ni._m}},{key:"requestDrmProxy",value:function(e,t,r){return r.waitAndLock((function(){return new ao((function(n,i){(0,Fi._n)(U(U({},e),{},{onSuccess:n,onError:function(e,n){var o,a=h(Ui.x.fromUTF8(n.response),n.status),u=function(e,t){switch(e){case 429:return([500,2500,6500][t]||1e3)+1e3*Math.random();default:return 0}}(n.status,t);return r.addLock((0,no._)(u)),i(new Ji({isFatal:(o=a).isFatal,code:C(o),details:{drmProxyError:o.error},helpLink:o.helpLink}))}}))}))}))}},{key:"getRequestParams",value:function(e,r,n,i){var o=i,a=n.requestParams,u=n.withCredentials,c=U({},a),s={method:"post",data:"",responseType:"arraybuffer",url:r,withCredentials:u};if(e===Ni.xE){var l=t.unpackPlayReadyRequest(i);s.headers=U(U({},l.headers),s.headers),delete s.headers["Content-Type"],o=l.data}if(e===Ni.dn){var f=JSON.parse((new TextDecoder).decode(i));c.key_ids=f.kids}return s.data=function(){if(!a)return o;var e=U(U({},c),{},{rawLicenseRequestBase64:Mi.P.toBase64(new Uint8Array(o))});return Ui.x.toUTF8(JSON.stringify(e))}(),s}},{key:"handleSessionMessage",value:function(e,r,n){var i=e.keySystem,o=e.url,a=e.config,u=e.message,c=e.retry,s=t.getRequestParams(i,o,a,u);return t.requestDrmProxy(s,c,r).catch((function(e){var s,l=Ji.from(e),f=new Ji(U(U({},l.toJSON()),{},{isFatal:l.isFatal||c>3,code:null!==(s=l.details)&&void 0!==s&&s.drmProxyError?l.code:Ii.DRM_SESSION_ERROR,message:"Failed to handle session message: ".concat(l)}));if(null===n||void 0===n||n(f),f.isFatal)throw f;return t.handleSessionMessage({keySystem:i,url:o,config:a,message:u,retry:c+1},r,n)}))}},{key:"unpackPlayReadyRequest",value:function(e){var t=Ui.x.fromUTF16(e,!0,!0),r={},n=e;if(!t.includes("PlayReadyKeyMessage"))return{headers:r,data:n};for(var i=(new DOMParser).parseFromString(t,"application/xml"),o=i.getElementsByTagName("HttpHeader"),a=0;a<o.length;++a){var u=o[a].getElementsByTagName("name")[0],c=o[a].getElementsByTagName("value")[0];u.textContent&&c.textContent&&(r[u.textContent]=c.textContent)}var s=i.getElementsByTagName("Challenge")[0];return s&&"base64encoded"===s.getAttribute("encoding")&&(n=Mi.P.fromBase64(s.textContent).buffer),{headers:r,data:n}}},{key:"getDrmKeySystem",value:function(e){var t,r,n;return null!==(t=e.servers)&&void 0!==t&&t[Ni.ly]?Ni.ly:null!==(r=e.servers)&&void 0!==r&&r[Ni.xE]?Ni.xE:null!==(n=e.servers)&&void 0!==n&&n[Ni.dn]?Ni.dn:null}},{key:"getServerCertificateUrl",value:function(e,t){var r;return((null===(r=e.advanced)||void 0===r?void 0:r[t])||{}).serverCertificateUrl}},{key:"closeSession",value:(o=V(G().mark((function e(t){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=eo(1e3).promise,e.next=4,ao.race([ao.all([t.closed,t.close()]),r]);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(e){return o.apply(this,arguments)})}],n&&W(r.prototype,n),i&&W(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Li);Q(lo,"temporarySessions",new Map),Q(lo,"mediaKeySystemAccessMaps",{persistent:new Map,temporary:new Map});var fo=r(85470),ho=r(72573),po=function(e){function t(e,r,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),se(ue(i=a.call(this,e,r,n,(function(t){var r;null===(r=e.yaspDispatchEvent)||void 0===r||r.call(e,"yasp-event",t)}))),"drmInfoReceivedDeferred",new io.B),se(ue(i),"yaspDrmInfos",null),se(ue(i),"onYaspWaitForKey",function(){var e=re(ee().mark((function e(t){var r,n,o,a,u,c,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.message,o=t.source,e.next=3,i.initPromise;case 3:if(i.keySystem&&i.keySystem===Ni.dn){e.next=5;break}return e.abrupt("return");case 5:if(a=null===(r=i.config.servers)||void 0===r?void 0:r[i.keySystem]){e.next=8;break}return e.abrupt("return");case 8:return u={keySystem:i.keySystem,url:a,config:i.config,message:n,retry:0},e.next=11,lo.handleSessionMessage(u,i.requestSync,i.onError);case 11:c=e.sent,s=c.response,i.video.getScope().configureSource(o,{drmKeysResponse:s});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.addEventListener(i.video,"yasp-drmInfoReceived",(function(t){var r,n=t.detail.map((function(e){return e.keySystem}));null===(r=e.yaspDispatchEvent)||void 0===r||r.call(e,"yasp-event",{name:"DrmInfoReceived",data:{keySystems:n}}),i.yaspDrmInfos=t.detail,i.drmInfoReceivedDeferred.resolve(t)}),{once:!0}),i.addEventListener(i.video,"yasp-waitForKey",(function(e){var t=e.detail;return i.onYaspWaitForKey(t)}),{once:!0}),i}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(t,e);var r,n,i,o,a=oe(t);return r=t,(n=[{key:"getMediaKeySessionInitData",value:(o=re(ee().mark((function e(){var t,r,n,i,o,a=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.drmInfoReceivedDeferred.promise;case 2:if(n=e.sent,i=n.detail,o=i.find((function(e){return e.keySystem===a.keySystem}))){e.next=7;break}throw new Ji({code:Ii.DRM_INIT_ERROR,message:"No drm initialization info",isFatal:!0});case 7:if(null!==(t=o.initData)&&void 0!==t&&null!==(r=t[0])&&void 0!==r&&r.initData){e.next=9;break}throw new Ji({code:Ii.DRM_INIT_ERROR,message:"No drm initialization data in initialization info",isFatal:!0});case 9:return e.abrupt("return",o.initData[0]);case 10:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"initWorkarounds",value:function(){var e=this;if((0,fo.gk)()){var t=!1,r=null,n=null,i=null,o=function(){null!==r&&(clearInterval(r),r=null)},a=function(){n&&(n(),n=null),i&&(i(),i=null)},u=function(){t=!0,o(),a()},c=function(){o(),a()},s=function(){null===r&&(r=setInterval((function(){e.video.buffered.length>0&&null!==e.keySystem&&(e.keySystem===Ni.dn?t?o():e.yaspDrmInfos&&e.yaspDrmInfos.some((function(e){return e.keySystem===Ni.dn}))&&(e.video.dispatchEvent(new Event("waitingforkey")),o()):o())}),200))};this.addEventListener(this.video,"encrypted",u),this.addEventListener(this.video,"waitingforkey",u),n=this.addEventListener(this.video,"seeking",(function(){o(),i&&i(),i=e.addEventListener(e.video,"seeked",c,{once:!0}),s()})),this.addDestroyHandler((function(){o(),a()}))}}}])&&ne(r.prototype,n),i&&ne(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(lo),yo=r(10005),vo={attributes:!0,childList:!1,subtree:!1,attributeFilter:["loop"]},mo=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"observer",void 0),this.observer=new MutationObserver((function(e){var n,i=le(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if("attributes"!==o.type)return;var a=o.attributeName;r(a,t[a])}}catch(u){i.e(u)}finally{i.f()}})),this.observer.observe(t,vo)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e;null===(e=this.observer)||void 0===e||e.disconnect(),this.observer=null}}])&&he(t.prototype,r),n&&he(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),go=0,bo=[],wo=(0,fo.EZ)()||(0,fo.zK)()?function(e,t){var r=e.paused;return de((function(){e.paused!==r&&(r=e.paused,t(r))}))}:function(e,t){var r=e.paused,n=function(e){var n="pause"===e.type;n!==r&&t(r=n)},i=(0,Ci.O)(e,"pause",n,{passive:!0}),o=(0,Ci.O)(e,"playing",n,{passive:!0}),a=(0,Ci.O)(e,"play",n,{passive:!0});return function(){i(),o(),a()}},Eo=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ye(this,"unsubscribers",[]),ye(this,"media",void 0),ye(this,"destroy",(function(){n(r.unsubscribers)})),this.unsubscribers=[],this.media=t}var t,r,i;return t=e,(r=[{key:"observe",value:function(e){var t=this,r=wo(this.media,e),n=function e(){r(),t.unsubscribers=t.unsubscribers.filter((function(t){return t!==e}))};return this.unsubscribers.push(n),n}}])&&pe(t.prototype,r),i&&pe(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),_o=r(5486),Oo=function(e,t){if(!e||!e.length)return null;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return null;for(var r=0;r<e.length;r++)if(e.start(r)>t&&(0===r||e.end(r-1)-t<=.5))return r;return null},So=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15,r=arguments.length>2?arguments[2]:void 0,n=e.currentTime,i=e.duration;if(e.readyState<e.HAVE_FUTURE_DATA)return!0;var o=null!==Oo(e.buffered,e.currentTime);return(!o||!r)&&!(0,_o.w)(e).some((function(e){var r=e.start,o=e.end;return!(n<r||n>o)&&(i<=o||n+t<o)}))},ko=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),me(this,"unsubscribers",[]),me(this,"media",void 0),me(this,"destroy",(function(){n(r.unsubscribers)})),this.unsubscribers=[],this.media=t}var t,r,i;return t=e,(r=[{key:"observe",value:function(e){var t=this,r=function(e,t,r){var n=!1,i=function(){var i=So(e,n?.3:.15,r);i!==n&&t(n=i)},o=de(i),a=setTimeout(i,0);return function(){o(),clearTimeout(a)}}(this.media,e),n=function e(){r(),t.unsubscribers=t.unsubscribers.filter((function(t){return t!==e}))};return this.unsubscribers.push(n),n}}])&&ve(t.prototype,r),i&&ve(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),To=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),be(this,"yaspMediaElement",void 0),be(this,"notifyCallback",void 0),be(this,"notify",void 0),be(this,"attributeObserver",null),be(this,"pausedObserver",null),be(this,"bufferingObserver",null),be(this,"handlePaused",(function(e){n.notify("updatePaused",e)})),be(this,"handleBuffering",(function(e){n.notify("updateBuffering",e)})),be(this,"handleBuffered",(function(){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");for(var e=[],t=n.yaspMediaElement.buffered,r=0;r<t.length;r++)e.push([t.start(r),t.end(r)]);n.notify("updateBuffered",e)})),be(this,"handleRatechange",(function(){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");n.notify("updatePlaybackRate",n.yaspMediaElement.playbackRate)})),be(this,"handleTimeupdate",(function(){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");n.notify("updateCurrentTime",Math.max(n.yaspMediaElement.currentTime,0))})),be(this,"handleDurationchange",(function(){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");n.notify("updateDuration",Math.max(n.yaspMediaElement.duration,0))})),this.yaspMediaElement=t,this.notifyCallback=r,this.notify=function(e,t){n.notifyCallback&&n.notifyCallback(e,t)}}var t,r,n;return t=e,(r=[{key:"enable",value:function(){var e,t=this;null!==this.yaspMediaElement&&(this.disable(),this.yaspMediaElement.addEventListener("ratechange",this.handleRatechange,{passive:!0}),this.yaspMediaElement.addEventListener("timeupdate",this.handleTimeupdate,{passive:!0}),this.yaspMediaElement.addEventListener("seeking",this.handleTimeupdate,{passive:!0}),this.yaspMediaElement.addEventListener("durationchange",this.handleDurationchange,{passive:!0}),this.yaspMediaElement.addEventListener("progress",this.handleBuffered,{passive:!0}),this.attributeObserver=new mo(this.yaspMediaElement,(function(e,r){"loop"===e&&t.handleLoop(null!==r&&void 0!==r&&r)})),this.pausedObserver=new Eo(this.yaspMediaElement),this.bufferingObserver=new ko(this.yaspMediaElement),this.pausedObserver.observe(this.handlePaused),this.bufferingObserver.observe(this.handleBuffering),this.handleLoop(null!==(e=this.yaspMediaElement.loop)&&void 0!==e&&e))}},{key:"disable",value:function(){var e,t,r;null!==this.yaspMediaElement&&(this.yaspMediaElement.removeEventListener("ratechange",this.handleRatechange),this.yaspMediaElement.removeEventListener("timeupdate",this.handleTimeupdate),this.yaspMediaElement.removeEventListener("seeking",this.handleTimeupdate),this.yaspMediaElement.removeEventListener("durationchange",this.handleDurationchange),this.yaspMediaElement.removeEventListener("progress",this.handleBuffered),null===(e=this.attributeObserver)||void 0===e||e.destroy(),this.attributeObserver=null,null===(t=this.pausedObserver)||void 0===t||t.destroy(),this.pausedObserver=null,null===(r=this.bufferingObserver)||void 0===r||r.destroy(),this.bufferingObserver=null)}},{key:"destroy",value:function(){this.disable(),this.yaspMediaElement=null,this.notifyCallback=null}},{key:"handleLoop",value:function(e){this.notify("updateLoop",e)}}])&&ge(t.prototype,r),n&&ge(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ro=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o.call(this,e,r)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(t,e);var r,n,i,o=Oe(t);return r=t,n&&Ee(r.prototype,n),i&&Ee(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}(To),xo=r(66169),Po=r(84780),Ao=0,Lo=Re((function e(t){var r=t.label,n=void 0===r?"":r,i=t.language,o=void 0===i?"":i,a=t.id,u=void 0===a?"media-track-".concat(Ao++):a,c=t.sourceBuffer,s=void 0===c?null:c,l=t.props,f=void 0===l?void 0:l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xe(this,"label",void 0),xe(this,"id",void 0),xe(this,"language",void 0),xe(this,"kind",""),xe(this,"props",void 0),xe(this,"sourceBuffer",null),this.label=n,this.language=o,this.id=u,this.sourceBuffer=s,this.props=f})),jo=["enabled","bitrate","channels"],Io=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.enabled,i=void 0!==n&&n,a=r.bitrate,u=r.channels,c=Ae(r,jo);return Le(this,t),Fe(Me(e=o.call(this,c)),"_enabled",!1),Fe(Me(e),"bitrate",void 0),Fe(Me(e),"channels",void 0),Fe(Me(e),"onenabledchange",void 0),e._enabled=i,e.bitrate=a,e.channels=u,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ie(e,t)}(t,e);var r,n,i,o=De(t);return r=t,(n=[{key:"_destroy",value:function(){delete this.onenabledchange}},{key:"enabled",get:function(){return this._enabled},set:function(e){var t;"boolean"===typeof e&&e!==this._enabled&&(this._enabled=e,null===(t=this.onenabledchange)||void 0===t||t.call(this))}}])&&je(r.prototype,n),i&&je(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Lo),Do=r(9057),No=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Ge(this,t),Ke(qe(e=o.call(this)),"tracks",[]),Ke(qe(e),"_changing",!1);for(var n=0;n<r.length;n++)e.addTrack(r[n]);return e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ve(e,t)}(t,e);var r,n,i,o=We(t);return r=t,(n=[{key:"length",get:function(){return this.tracks.length}},{key:"addTrack",value:function(e){var t=this;if(-1===this.tracks.indexOf(e)){var r=this.tracks.length;Object.defineProperty(this,r,{get:function(){return t.tracks[r]},enumerable:!1,configurable:!0}),this.tracks.push(e),this.dispatchTrackEvent("addtrack",e)}}},{key:"removeTrack",value:function(e){var t,r=this.tracks.indexOf(e);if(-1!==r){null===(t=e._destroy)||void 0===t||t.call(e);var n=this.tracks.length-1;String(n)in this&&Object.defineProperty(this,n,{get:void 0,enumerable:!1,configurable:!0}),this.tracks.splice(r,1),this.dispatchTrackEvent("removetrack",e)}}},{key:"getTrackById",value:function(e){return this.tracks.find((function(t){return t.id===e}))||null}},{key:"item",value:function(e){return this.tracks[e]}},{key:"dispatchTrackEvent",value:function(e,t){var r=Be(e);r.track=t,this.dispatchEvent(r)}}])&&He(r.prototype,n),i&&He(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Do.Z),Mo=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Xe(this,t);for(var n=r.length-1;n>=0;n--)if(r[n].enabled){at(r,r[n]);break}return ot(nt(e=o.call(this,r)),"onaddtrack",void 0),ot(nt(e),"onchange",void 0),ot(nt(e),"onremovetrack",void 0),e.onaddtrack=null,e.onchange=null,e.onremovetrack=null,e.addEventListener("change",(function(t){var r,n;return null===(r=(n=e).onchange)||void 0===r?void 0:r.call(n,t)})),e.addEventListener("addtrack",(function(t){var r,n;return null===(r=(n=e).onaddtrack)||void 0===r?void 0:r.call(n,t)})),e.addEventListener("removetrack",(function(t){var r,n;return null===(r=(n=e).onremovetrack)||void 0===r?void 0:r.call(n,t)})),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&et(e,t)}(t,e);var r,n,i,o=tt(t);return r=t,(n=[{key:"addTrack",value:function(e){var r=this;e.enabled&&at(this,e),Qe(it(t.prototype),"addTrack",this).call(this,e),e.onenabledchange=function(){r._changing||(r._changing=!0,at(r,e),r._changing=!1,r.dispatchEvent(Be("change")))}}},{key:"addEventListener",value:function(e,r,n){Qe(it(t.prototype),"addEventListener",this).call(this,e,r,n)}},{key:"removeEventListener",value:function(e,r,n){Qe(it(t.prototype),"removeEventListener",this).call(this,e,r,n)}}])&&Je(r.prototype,n),i&&Je(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(No),Co=["selected","width","height","bitrate","frameRate"],Fo=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.selected,i=void 0!==n&&n,a=r.width,u=r.height,c=r.bitrate,s=r.frameRate,l=st(r,Co);return lt(this,t),mt(yt(e=o.call(this,l)),"_selected",!1),mt(yt(e),"width",void 0),mt(yt(e),"height",void 0),mt(yt(e),"bitrate",void 0),mt(yt(e),"frameRate",void 0),mt(yt(e),"onselectedchange",void 0),e.selected=i,e.bitrate=c,e.frameRate=s,e.width=a,e.height=u,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ht(e,t)}(t,e);var r,n,i,o=dt(t);return r=t,(n=[{key:"_destroy",value:function(){delete this.onselectedchange}},{key:"selected",get:function(){return this._selected},set:function(e){var t;"boolean"===typeof e&&e!==this._selected&&(this._selected=e,null===(t=this.onselectedchange)||void 0===t||t.call(this))}}])&&ft(r.prototype,n),i&&ft(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Lo),Bo=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];bt(this,t);for(var n=r.length-1;n>=0;n--)if(r[n].selected){Pt(r,r[n]);break}return xt(Tt(e=o.call(this,r)),"onaddtrack",void 0),xt(Tt(e),"onchange",void 0),xt(Tt(e),"onremovetrack",void 0),e.onaddtrack=null,e.onchange=null,e.onremovetrack=null,e.addEventListener("change",(function(t){var r,n;return null===(r=(n=e).onchange)||void 0===r?void 0:r.call(n,t)})),e.addEventListener("addtrack",(function(t){var r,n;return null===(r=(n=e).onaddtrack)||void 0===r?void 0:r.call(n,t)})),e.addEventListener("removetrack",(function(t){var r,n;return null===(r=(n=e).onremovetrack)||void 0===r?void 0:r.call(n,t)})),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ot(e,t)}(t,e);var r,n,i,o=St(t);return r=t,(n=[{key:"addEventListener",value:function(e,r,n){Et(Rt(t.prototype),"addEventListener",this).call(this,e,r,n)}},{key:"removeEventListener",value:function(e,r,n){Et(Rt(t.prototype),"removeEventListener",this).call(this,e,r,n)}},{key:"selectedIndex",get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1}},{key:"addTrack",value:function(e){var r=this;e.selected&&Pt(this,e),Et(Rt(t.prototype),"addTrack",this).call(this,e),e.onselectedchange=function(){r._changing||(r._changing=!0,Pt(r,e),r._changing=!1,r.dispatchEvent(Be("change")))}}}])&&wt(r.prototype,n),i&&wt(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(No),Uo=r(53878),Go=(0,Uo.t)(Object.getPrototypeOf)?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__||Object.prototype},Ho=r(88261),Vo=r(58094),Wo=r(72573),Yo=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Lt(this,"externalEventTarget",new Do.Z),Lt(this,"internalEventTarget",new Do.Z),Lt(this,"isFakeWorker",!0),t({addEventListener:this.internalEventTarget.addEventListener.bind(this.internalEventTarget),removeEventListener:this.internalEventTarget.removeEventListener.bind(this.internalEventTarget),postMessage:function(e){var t=new MessageEvent("message",{data:e});Wo.resolve().then((function(){return r.externalEventTarget.dispatchEvent(t)}))}})}var t,r,n;return t=e,(r=[{key:"addEventListener",value:function(e,t,r){this.externalEventTarget.addEventListener(e,t,r)}},{key:"removeEventListener",value:function(e,t,r){this.externalEventTarget.removeEventListener(e,t,r)}},{key:"terminate",value:function(){}},{key:"postMessage",value:function(e){var t=new MessageEvent("message",{data:e});this.internalEventTarget.dispatchEvent(t)}}])&&At(t.prototype,r),n&&At(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),qo=r(72573),zo=r(67767),Ko=function(){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{}};return t[n](i,i.exports,e),i.exports}var t=ENTRY_MODULE,r={},n=PUBLIC_PATH;e.m=t,e.p=n,e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,{a:r}),r},e.d=function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.g=function(){if("[object Object]"===Object.prototype.toString.call(globalThis))return globalThis;try{return this||new Function("return this")()}catch(e){if("[object Object]"===Object.prototype.toString.call(window))return window}}(),e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.u=GET_CHUNK_FILENAME_FUNCTION,e.f={},e.e=function(t){return qo.all(Object.keys(e.f).reduce((function(r,n){return e.f[n](t,r),r}),[]))},function(){var t={};e.f.j=function(r,n){var i=e.o(t,r)?t[r]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new qo((function(e,n){i=t[r]=[e,n]}));n.push(i[2]=o);(function t(n){var i=e.p+e.u(r);try{return importScripts(i),qo.resolve()}catch(a){if(n>0){var o=100*Math.pow(2,5-n);return new qo((function(e){return setTimeout(e,o)})).then((function(){return t(n-1)}))}return qo.reject(a)}})(3).catch((function(e){var t=e&&e.target&&e.target.src||url,n=new Error("Loading chunk "+r+" failed.\n("+t+")");n.name="ChunkLoadError",n.type=t,i[1](n)}))}};var r=function(r){var n,i,o=r[0],a=r[1],u=r[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(n in a)e.o(a,n)&&(e.m[n]=a[n]);if(u)u(e)}for(;c<o.length;c++)i=o[c],e.o(t,i)&&t[i]&&t[i][0](),t[i]=0};self.webpackChunkwebpackStreamPlayerJsonp=self.webpackChunkwebpackStreamPlayerJsonp||[],self.webpackChunkwebpackStreamPlayerJsonp.forEach(r),self.webpackChunkwebpackStreamPlayerJsonp.push=r}();var i=e(ENTRY_MODULE);return i.default||i};Ko.toString();var $o=r(18772),Xo=r(35478),Jo=["factories"],Qo=r(72573),Zo=r(72573),ea=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),zt(this,"workerPromise",void 0),zt(this,"terminateHandlers",[]),this.workerPromise=Ht({inline:!t.useWebWorker,path:58094,workerInternal:Vo.Z,workerConfig:t.workerConfig}),this.terminateHandlers.push(t.onTerminate)}var t,r,n,i,o;return t=e,(r=[{key:"postMessage",value:(i=Wt().mark((function e(){var t,r,n=arguments;return Wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.workerPromise;case 2:t=e.sent,(r=t.worker).postMessage.apply(r,n);case 5:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Zo((function(r,n){function o(e){Yt(u,r,n,o,a,"next",e)}function a(e){Yt(u,r,n,o,a,"throw",e)}var u=i.apply(e,t);o(void 0)}))},function(){return o.apply(this,arguments)})},{key:"sendEvent",value:function(e){var t=e.method,r=e.params;return this.workerPromise.then((function(e){return e.rpc.sendEvent({method:t,params:r})}))}},{key:"request",value:function(e){var t=e.method,r=e.params;return this.workerPromise.then((function(e){return e.rpc.request({method:t,params:r})}))}},{key:"registerRpcHandler",value:function(e,t){var r=this;return this.workerPromise.then((function(r){return r.rpc.registerHandler(e,t)})),function(){return r.removeRpcHandler(e,t)}}},{key:"registerStaticRpcHandler",value:function(e,t){var r=this;return this.workerPromise.then((function(r){return r.rpc.registerStaticHandler(e,t)})),function(){return r.removeRpcHandler(e,t)}}},{key:"removeRpcHandler",value:function(e,t){this.workerPromise.then((function(r){return r.rpc.removeHandler(e,t)}))}},{key:"onTerminate",value:function(e){this.terminateHandlers.push(e)}},{key:"destroy",value:function(){var e=this;this.workerPromise.then((function(t){var r=t.worker,n=t.rpc;r.terminate(),n.destroy(),e.terminateHandlers=e.terminateHandlers.filter((function(e){return(0,Wi.Y)((function(){return e()})),!1}))}))}}])&&qt(t.prototype,r),n&&qt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ta=r(46667),ra=r(84626),na=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$t(this,"onTick",void 0),$t(this,"cancelPending",void 0),this.onTick=t,this.cancelPending=null}var t,r,n;return t=e,(r=[{key:"tickAfter",value:function(e){var t=this;this.stop();var r=!0,n=null;return this.cancelPending=function(){self.clearTimeout(n),r=!1},n=self.setTimeout((function(){r&&t.onTick()}),1e3*e),this}},{key:"stop",value:function(){this.cancelPending&&(this.cancelPending(),this.cancelPending=null)}}])&&Kt(t.prototype,r),n&&Kt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ia=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Jt(this,"onTick",void 0),Jt(this,"ticker",void 0),this.onTick=t,this.ticker=null}var t,r,n;return t=e,(r=[{key:"tickNow",value:function(){return this.stop(),this.onTick(),this}},{key:"tickAfter",value:function(e){var t=this;return this.stop(),this.ticker=new na((function(){t.onTick()})).tickAfter(e),this}},{key:"tickEvery",value:function(e){var t=this;return this.stop(),this.ticker=new na((function(){var r;null===(r=t.ticker)||void 0===r||r.tickAfter(e),t.onTick()})).tickAfter(e),this}},{key:"stop",value:function(){this.ticker&&(this.ticker.stop(),this.ticker=null)}}])&&Xt(t.prototype,r),n&&Xt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),oa=function(){function e(t,r,n,i,o){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),tr(this,"media",void 0),tr(this,"timeline",void 0),tr(this,"config",void 0),tr(this,"stallDetector",void 0),tr(this,"onEvent",void 0),tr(this,"unsubscribe",void 0),tr(this,"seekingEventReceived",void 0),tr(this,"prevReadyState",void 0),tr(this,"didFireLargeGap",void 0),tr(this,"hadSegmentAppended",void 0),tr(this,"locked",void 0),tr(this,"gapJumpTimer",void 0),this.media=t,this.timeline=r,this.config=n,this.stallDetector=i,this.onEvent=o,this.seekingEventReceived=!1,this.prevReadyState=t.readyState,this.didFireLargeGap=!1,this.hadSegmentAppended=!1,this.locked=!1,this.unsubscribe=(0,Ci.O)(t,"waiting",(function(){return a.onPollGapJump()}),!1),this.gapJumpTimer=new ia((function(){a.onPollGapJump()})).tickEvery(.25)}var t,r,n;return t=e,(r=[{key:"release",value:function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),null!==this.gapJumpTimer&&(this.gapJumpTimer.stop(),this.gapJumpTimer=null),this.stallDetector&&(this.stallDetector.release(),this.stallDetector=null),this.onEvent=null,this.timeline=null,this.media=null}},{key:"configure",value:function(e){this.config=Zt(Zt({},this.config),e)}},{key:"onSegmentAppended",value:function(){this.hadSegmentAppended=!0,this.onPollGapJump()}},{key:"onSeeking",value:function(){this.seekingEventReceived=!0,this.hadSegmentAppended=!1,this.didFireLargeGap=!1}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"onPollGapJump",value:function(){var t,r,n,i,o;if(this.media&&(!this.locked||!(0,ra.RW)("yasp_no_source_abort_on_fake_seek"))&&0!==this.media.readyState){if(this.media.seeking){if(!this.seekingEventReceived)return}else this.seekingEventReceived=!1;if((!this.media.paused||null!==(t=this.config)&&void 0!==t&&t.jumpOnPause)&&(this.media.readyState!==this.prevReadyState&&(this.didFireLargeGap=!1,this.prevReadyState=this.media.readyState),null===(r=this.stallDetector)||void 0===r||!r.poll())){var a=(null===(n=this.config)||void 0===n?void 0:n.smallGapLimit)||.5,u=(null===(i=this.config)||void 0===i?void 0:i.largeGapLimit)||1/0,c=this.media.currentTime,s=this.media.buffered,l=Oo(s,c);if(null!==l){var f=s.start(l),h=f-c;if((0!==l||this.hadSegmentAppended||!(h>.1))&&!(f>=((null===(o=this.timeline)||void 0===o?void 0:o.getSeekRangeEnd())||0))){var d=h<=a,p=!1;if(!(h<e.BROWSER_GAP_TOLERANCE)){if(!d&&!this.didFireLargeGap){var y,v;this.didFireLargeGap=!0;for(var m=[],g=0;g<this.media.buffered.length;g++)m.push([this.media.buffered.start(g),this.media.buffered.end(g)]);null===(y=this.onEvent)||void 0===y||y.call(this,{currentTime:c,gapSize:h,bufferedRanges:m}),null!==(v=this.config)&&void 0!==v&&v.jumpLargeGaps&&h<u&&(p=!0)}(d||p)&&(this.media.currentTime=f)}}}}}}}])&&er(t.prototype,r),n&&er(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();tr(oa,"BROWSER_GAP_TOLERANCE",.001);var aa=r(48446),ua=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"isBuffered",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e||!e.length)return!1;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return!1;if(t>e.end(e.length-1))return!1;for(var n=0;n<e.length;n++)if(t+r>=e.start(n)&&t-r<=e.end(n))return!0;return!1}},{key:"getTimeRanges",value:function(e){for(var t=[],r=0;r<e.length;r++)try{t.push({start:e.start(r),end:e.end(r)})}catch(n){}return(0,aa.l)(t)}}],(r=null)&&rr(t.prototype,r),n&&rr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ca=r(10664),sa=r(81031),la=new io.B;(0,sa.a)(la.resolve);var fa=r(72573),ha=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"isInited",value:function(){return(0,sa.r)().flagsInited}},{key:"waitForInit",value:function(){var e=this;return this.isInited()?fa.resolve(this.getConfig()):la.promise.then((function(){return e.getConfig()}))}},{key:"getConfig",value:function(){var e=(0,sa.r)(),t=e.flags,r=e.testids,n=e.slots;return{flags:(0,Ki.K)(t)?JSON.parse(JSON.stringify(t)):{},testids:(0,Yi.H)(r)?r.split(",").map(Number).filter(Boolean):[],slots:(0,Yi.H)(n)?n:""}}}])&&ir(t.prototype,r),n&&ir(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),da=Math.max(5,0),pa=r(87853),ya=r(71294),va=r(19631),ma=(0,fo.HZ)()?9e5:864e5,ga=["ewma","hlsjs"],ba=r(47858),wa=r(79549),Ea=(0,fo.Fv)()||(0,fo.VY)()||(0,fo.yd)(),_a=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ho.Z,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;cr(this,e),lr(this,"video",void 0),lr(this,"wasMakingProgress",void 0),lr(this,"value",void 0),lr(this,"lastUpdateSeconds",void 0),lr(this,"didJump",void 0),lr(this,"didTryToEscape",void 0),lr(this,"didTryToEscapeSeekingStucking",void 0),lr(this,"skipOffset",void 0),lr(this,"stallThresholdSeconds",void 0),lr(this,"extraThresholdSeconds",void 0),lr(this,"onEvent",void 0),lr(this,"makePP",(function(){r.video&&(r.video.pause(),(0,oo.v)(r.video.play()))})),lr(this,"handleTVPoll",(function(e,t){return!!r.video&&(r.video.seeking?r.tryToEscapeSeekingStucking(e):(0,fo.Fv)()&&!r.video.paused&&r.video.readyState>=r.video.HAVE_CURRENT_DATA&&e>=.3&&r.video.duration-r.video.currentTime<.3&&!0===r.video.loop&&r.video.seekable.length&&r.video.seekable.start(0)===wa.S/1e3&&!r.didJump?(r.video.currentTime=r.video.seekable.start(0),r.didJump=!0,r.value=r.video.currentTime,r.onEvent(!0),!0):e>=r.stallThresholdSeconds&&t&&!r.didJump?(r.onStall(),r.didJump=!0,r.value=r.video.currentTime,r.onEvent(),!0):!(!(e>=r.extraThresholdSeconds&&t)||r.didTryToEscape)&&r.tryToEscapeTVStucking())})),lr(this,"handlePoll",(function(e,t){if(!r.video)return!1;var n=e>=r.stallThresholdSeconds&&t&&!r.didJump;return n&&(r.onStall(),r.didJump=!0,r.value=r.video.currentTime,r.onEvent()),n})),this.video=t,this.wasMakingProgress=this.shouldBeMakingProgress(),this.value=null===t||void 0===t?void 0:t.currentTime,this.lastUpdateSeconds=Date.now()/1e3,this.didJump=!1,this.didTryToEscape=!1,this.didTryToEscapeSeekingStucking=!1,this.skipOffset=i,this.stallThresholdSeconds=o,this.extraThresholdSeconds=2*o,this.onEvent=n}var t,r,n;return t=e,(r=[{key:"release",value:function(){this.video=null,this.onEvent=Ho.Z}},{key:"onStall",value:function(){this.video&&((0,fo.VY)()||(0,fo.yd)()||(0,fo.M9)()||!this.skipOffset?this.makePP():this.video.currentTime+=this.skipOffset)}},{key:"poll",value:function(){if(this.video){var e=this.shouldBeMakingProgress(),t=this.video.currentTime,r=Date.now()/1e3;(this.value!==t||this.wasMakingProgress!==e)&&(this.lastUpdateSeconds=r,this.value=t,this.wasMakingProgress=e,this.didJump=!1,this.didTryToEscape=!1,this.didTryToEscapeSeekingStucking=!1);var n=r-this.lastUpdateSeconds;return(Ea?this.handleTVPoll:this.handlePoll)(n,e)}}},{key:"shouldBeMakingProgress",value:function(){return!!this.video&&!this.video.paused&&0!==this.video.playbackRate&&0!==this.video.buffered.length&&this.hasContentFor(this.video.currentTime)}},{key:"tryToEscapeTVStucking",value:function(){var e=this;if(!this.video)return!1;if((0,fo.Fv)())return!(this.video.readyState<this.video.HAVE_ENOUGH_DATA)&&(this.didTryToEscape=!0,setTimeout((function(){var t;null!==(t=e.video)&&void 0!==t&&t.paused||e.makePP()}),2e3),!0);if((0,fo.yd)()){var t=or((0,_o.w)(this.video),this.video.currentTime);if(!t||t<7.5)return!1;if(this.video.readyState===this.video.HAVE_METADATA)return this.video.currentTime+=this.skipOffset,this.value=this.video.currentTime,this.didTryToEscape=!0,!0}return!1}},{key:"tryToEscapeSeekingStucking",value:function(e){return!(!this.video||this.didTryToEscapeSeekingStucking||!this.video.paused||e<this.extraThresholdSeconds)&&this.video.readyState===this.video.HAVE_METADATA&&(this.video.currentTime+=this.skipOffset,this.value=this.video.currentTime,this.didTryToEscapeSeekingStucking=!0,!0)}},{key:"hasContentFor",value:function(e){if(!this.video)return!1;var t,r=ar((0,_o.w)(this.video));try{for(r.s();!(t=r.n()).done;){var n=t.value,i=n.start,o=n.end;if(!(e<i-.1)&&!(e>o-.5))return!0}}catch(a){r.e(a)}finally{r.f()}return!1}}])&&sr(t.prototype,r),n&&sr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Oa=(r(60435),r(62720)),Sa=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),pr(this,"media",null),pr(this,"wasNativeProgressEmited",{default:!1,onPause:!1}),pr(this,"interval",null),pr(this,"lastBufferedEnd",0),pr(this,"onPoll",(function(){if(r.media){var e=r.media.buffered.length;if(e){var t=r.media.buffered.end(e-1);r.lastBufferedEnd<t&&r.emitProgress(),r.lastBufferedEnd=t}else r.lastBufferedEnd=0}})),pr(this,"onProgress",(function(e){r.media&&("detail"in e&&e.detail.synthetic||(r.media.paused?r.wasNativeProgressEmited.onPause=!0:r.wasNativeProgressEmited.default=!0,r.shouldStopPolling()&&r.release()))})),this.media=t,t.addEventListener("progress",this.onProgress),this.interval=setInterval(this.onPoll,250)}var t,r,n;return t=e,(r=[{key:"shouldStopPolling",value:function(){return(0,Oa.z)(this.wasNativeProgressEmited).every(Boolean)}},{key:"release",value:function(){var e;null===(e=this.media)||void 0===e||e.removeEventListener("progress",this.onProgress),this.interval&&(clearInterval(this.interval),this.interval=null),this.media=null}},{key:"emitProgress",value:function(){var e,t;this.shouldStopPolling()||(this.wasNativeProgressEmited.default||null!==(e=this.media)&&void 0!==e&&e.paused)&&(this.wasNativeProgressEmited.onPause||null===(t=this.media)||void 0===t||!t.paused)||this.dispatchSyntheticProgress()}},{key:"dispatchSyntheticProgress",value:function(){var e;null===(e=this.media)||void 0===e||e.dispatchEvent(new CustomEvent("progress",{detail:{synthetic:!0}}))}}])&&dr(t.prototype,r),n&&dr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ka=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxAttempts=r,vr(this,"remainingAttempts",0),vr(this,"originTime",0),vr(this,"targetTime",0),vr(this,"timer",new ia((function(){n.onTick()}))),vr(this,"media",void 0),this.media=t}var t,r,n;return t=e,(r=[{key:"release",value:function(){this.timer&&(this.timer.stop(),this.timer=null),this.media=null}},{key:"moveTo",value:function(e){this.media&&this.timer&&(this.originTime=this.media.currentTime,this.targetTime=e,this.remainingAttempts=this.maxAttempts,this.media.currentTime=e,this.timer.tickEvery(.1))}},{key:"onTick",value:function(){this.media&&this.timer&&(this.remainingAttempts<=0?this.timer.stop():this.media.currentTime===this.originTime?(this.media.currentTime=this.targetTime,this.remainingAttempts--):this.timer.stop())}}])&&yr(t.prototype,r),n&&yr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ta=r(42904),Ra=r(24735),xa=r(89737),Pa=r(28557),Aa=["play","playing","pause","error","waiting","stalled","suspend","ended","loadstart","abort","loadedmetadata","loadeddata","canplay","canplaythrough","durationchange","seeking","seeked","encrypted","ratechange","emptied"],La=["error","waiting","seeking","seeked","canplay","encrypted","durationchange"],ja=["waiting","canplay","canplaythrough","loadedmetadata","loadeddata","emptied"],Ia=["seeking","seeked"],Da=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.media=t,this.getDump=r,wr(this,"history",new Pa.d(xa.K)),wr(this,"timingsCollector",new Ra.h),wr(this,"readyStateChangeProcess",void 0),wr(this,"seekprocess",null),wr(this,"handleEvent",(function(e){var t=e.type,r={event:t,timestamp:Date.now()};La.includes(t)&&(r.dump=n.getDump()),n.history.push(r);var i,o,a=n.media.readyState;(ja.includes(t)&&n.readyStateChangeProcess.readyState!==a&&(n.readyStateChangeProcess.process.end(),n.readyStateChangeProcess.process=n.startProcess("ready state change","MediaElement",{readyState:a}),n.readyStateChangeProcess.readyState=a),Ia.includes(t))&&("seeked"===t?null===(i=n.seekprocess)||void 0===i||i.end():(null===(o=n.seekprocess)||void 0===o||o.end(),n.seekprocess=n.startProcess("seek","MediaElement",{readyState:a})))}));var i=this.media.readyState;this.readyStateChangeProcess={readyState:i,process:this.startProcess("ready state change","MediaElement",{readyState:i})},this.subscribeToEvents()}var t,r,n;return t=e,(r=[{key:"startProcess",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=gr(gr({},r),{},{sourceKey:(0,yo.Hi)(this.media.src)});return this.timingsCollector.startProcess(e,t,n)}},{key:"subscribeToEvents",value:function(){var e=this;Aa.forEach((function(t){e.media.addEventListener(t,e.handleEvent)}))}},{key:"release",value:function(){var e=this;Aa.forEach((function(t){e.media.removeEventListener(t,e.handleEvent)})),this.history.clear(),this.timingsCollector.destroy(),this.seekprocess=null}},{key:"getTimings",value:function(){return this.timingsCollector.extractTimings()}},{key:"getEventHistory",value:function(){return this.history.toArray()}},{key:"pushCustomEvent",value:function(e){this.history.push(e)}}])&&br(t.prototype,r),n&&br(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Na=(0,r(12693).I)((function(){return(0,ra.r0)("web_yasp_mse_recover_delays")})),Ma=r(72573),Ca=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=t,kr(this,"currentAttempt",0),kr(this,"recovering",!1)}var t,r,n;return t=e,(r=[{key:"recover",value:function(e){var t=this;return new Ma(function(){var r,n=(r=_r().mark((function r(n,i){return _r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.props.retryDelays&&t.props.retryDelays.length){r.next=3;break}return i(),r.abrupt("return");case 3:t.recovering=!0;case 4:if(!(t.currentAttempt<t.props.retryDelays.length)){r.next=20;break}return r.next=7,(0,no._)(t.props.retryDelays[t.currentAttempt]);case 7:return t.currentAttempt=t.currentAttempt+1,r.prev=8,r.next=11,e();case 11:return t.currentAttempt=0,n(),r.abrupt("break",20);case 16:r.prev=16,r.t0=r.catch(8);case 18:r.next=4;break;case 20:t.recovering=!1,t.currentAttempt>=t.props.retryDelays.length&&i();case 22:case"end":return r.stop()}}),r,null,[[8,16]])})),function(){var e=this,t=arguments;return new Ma((function(n,i){function o(e){Or(u,n,i,o,a,"next",e)}function a(e){Or(u,n,i,o,a,"throw",e)}var u=r.apply(e,t);o(void 0)}))});return function(e,t){return n.apply(this,arguments)}}())}},{key:"reset",value:function(){this.currentAttempt=0,this.recovering=!1}},{key:"isRecovering",value:function(){return this.recovering}}])&&Sr(t.prototype,r),n&&Sr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Fa=r(34118),Ba=function(e){return"mpd"===(0,Fa.lm)(e.toLocaleLowerCase())},Ua=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xr(this,"yaspMedia",void 0),xr(this,"detachedSrcInternal",void 0),xr(this,"airplaySrcInternal",void 0),xr(this,"airplayEnabled",void 0),xr(this,"lastSetSrcTime",void 0),xr(this,"onAirplayStateChange",void 0),this.airplayEnabled=t.webkitCurrentPlaybackTargetIsWireless,this.onAirplayStateChange=r,this.yaspMedia=t,this.setUpAirplay()}var t,r,n;return t=e,(r=[{key:"airplaySrc",get:function(){return this.airplaySrcInternal},set:function(e){this.airplaySrcInternal=e,this.airplayEnabled&&e&&(this.lastSetSrcTime=(0,ya.no)(),this.yaspMedia.src=e,this.yaspMedia.play())}},{key:"detachedSrc",get:function(){return this.detachedSrcInternal},set:function(e){this.detachedSrcInternal=e}},{key:"setUpAirplay",value:function(){var e,t=this;this.yaspMedia.setAttribute("x-webkit-airplay","allow"),this.yaspMedia.disableRemotePlayback=!0,this.yaspMedia.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",(function(r){var n=(0,ya.no)();if(!(t.lastSetSrcTime&&n-t.lastSetSrcTime<3e3)&&!(e&&n-e<2e3)){e=(0,ya.no)();var i=t.yaspMedia.currentTime;t.yaspMedia.disableRemotePlayback?(t.yaspMedia.disableRemotePlayback=!1,t.onAirplayStateChange(!0),t.airplayEnabled=!0,t.detachedSrc=t.yaspMedia.src,t.yaspMedia.src=t.airplaySrcInternal,t.yaspMedia.addEventListener("loadedmetadata",(function(){t.yaspMedia.currentTime=i,t.yaspMedia.play()}))):(t.airplayEnabled=!1,t.onAirplayStateChange(!1),t.yaspMedia.disableRemotePlayback=!0,t.yaspMedia.src=t.detachedSrc,t.yaspMedia.addEventListener("loadedmetadata",(function(){t.yaspMedia.currentTime=i,t.yaspMedia.play()})))}}))}}])&&Rr(t.prototype,r),n&&Rr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ga=r(10743),Ha=[],Va=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"enableConsole",value:function(){e.consoleEnabled=!0,e.log("YA PLAYER VERSION: 1.0-13090")}},{key:"log",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.consoleEnabled&&console.log(jr.apply(void 0,r)),e.addToHistory("log",r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.consoleEnabled&&console.warn(jr.apply(void 0,r)),e.addToHistory("warn",r)}},{key:"error",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.consoleEnabled&&console.error(jr.apply(void 0,r)),e.addToHistory("error",r)}},{key:"getHistory",value:function(){return[].concat(Ha)}},{key:"addToHistory",value:function(e,t){Ha.length>=150&&Ha.shift(),Ha.push("[".concat(e,"][").concat(Date.now(),"] ").concat(t.map((function(e){try{return(0,Ga.Y)(e)}catch(t){return(0,Ki.K)(t)?JSON.stringify(["stringify_error",t.stack]):JSON.stringify(["stringify_error","not_an_object_error"])}})).join()))}}],(r=null)&&Lr(t.prototype,r),n&&Lr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Va,"consoleEnabled",void 0);var Wa=r(34902),Ya=r(67251),qa=r(53096),za=r(72573),Ka=r(72573),$a=r(67767),Xa=Qr(HTMLAudioElement),Ja=function(e){function t(){return an(this,t),u.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ln(e,t)}(t,e);var r,n,i,o,a,u=fn(t);return r=t,n=[{key:"isSupportedSrc",value:function(e){return cn(dn(t.prototype),"isSupportedSrc",this).call(this,e)||this.isSupportedAudioSrc(e)}},{key:"isSupportedAudioSrc",value:function(e){var t,r=new $a(e,"https://domain.com"),n=Boolean(r.searchParams.get("codec")),i=function(e){return"mp4"===(0,Fa.lm)(e.toLocaleLowerCase())}(e)||"mp4"===(null===(t=r.searchParams.get("container"))||void 0===t?void 0:t.toLowerCase());return n&&i}},{key:"initAudioStateNotifier",value:function(){var e=this;this.mediaStateNotifier=new Ro(this,(function(r,n){null!==e.yasp&&t.worker.postMessage({jsonrpc:"2.0",method:r,sourceKey:(0,yo.Hi)(e.yaspSrc),scopeId:e.scopeId,params:n})})),this.mediaStateNotifier.enable()}},{key:"yaspRequestDebugInfo",value:(a=on(en().mark((function e(){var r,n;return en().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.audioTracks,n={audioElement:{audioTracks:(0,xo.w)(r)}},e.t0=rn,e.t1=rn({},n),e.next=6,cn(dn(t.prototype),"yaspRequestDebugInfo",this).call(this);case 6:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 8:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"yaspPreloadSrc",value:(o=on(en().mark((function e(r,n){return en().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.preloadSrc(r,n));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)})},{key:"getScope",value:function(){return this.scopeId&&t.scopeObjects.get(this.scopeId)||t}}],i=[{key:"attach",value:function(e,r){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qa.$;if(t.isYaspAudioElement(e))return(0,Po.L)(new Error("Unexpected YaspAudioElement.attach(yaspAudioElement) call")),e.setScopeId(i),e;var o=Xa.attachElement(t,e,i,r);return o.initAudioStateNotifier(),Xa.messenger.emit("yasp-event",{name:"YaspAttached",data:{message:null!==(n=(0,Wi.Y)((function(){return"1.0-13090"})))&&void 0!==n?n:""}}),o}},{key:"isYaspAudioElement",value:function(e){return!0===e.yasp}},{key:"createScope",value:function(e){t.warmUp();var r=++t.currentScopeId,n={isSupported:t.isSupported,attach:function(e,n){return t.attach(e,n,r)},isYaspAudioElement:t.isYaspAudioElement,preloadSrc:function(e,n){return t.preloadSrc(e,n,r)},releaseSrc:function(e){return t.releaseSrc(e,r)},getStats:t.getStats,configureSource:function(e,n){return t.configureSource(e,n,r)},destroy:function(){return t.destroy(r)},setWorkerConfig:function(e){return t.setWorkerConfig(e,r)},messenger:t.messenger};return n.setWorkerConfig(e),t.scopeObjects.set(r,n),n}}],n&&un(r.prototype,n),i&&un(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Xa);pn(Ja,"scopeObjects",new Map);var Qa=r(67767).createObjectURL(new Blob(["WEBVTT"],{type:"text/vtt"})),Za=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=o.call(this);var i={videoWidth:e.videoWidth,videoHeight:e.videoHeight},a=function(){var t=e.videoWidth,n=e.videoHeight;isNaN(t)||isNaN(n)||t<1||n<1||i.videoWidth===t&&i.videoHeight===n||(i={videoWidth:t,videoHeight:n},r({videoWidth:t,videoHeight:n}))};if("onresize"in e)e.addEventListener("resize",a),n.once("Destroy",(function(){return e.removeEventListener("resize",a)}));else{e.addEventListener("timeupdate",a),n.once("Destroy",(function(){return e.removeEventListener("timeupdate",a)}));var u=setInterval(a,1e3);n.once("Destroy",(function(){return clearInterval(u)}))}return n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mn(e,t)}(t,e);var r,n,i,o=gn(t);return r=t,n&&vn(r.prototype,n),i&&vn(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}(r(54588).M),eu={droppedVideoFrames:0,corruptedVideoFrames:0,totalVideoFrames:0},tu=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ln(Pn(r=o.call(this)),"video",void 0),Ln(Pn(r),"playbackQuality",eu),Ln(Pn(r),"persistedPlaybackQuality",eu),Ln(Pn(r),"accumulatedPlaybackQuality",eu),r.video=e,r.addDestroyHandler((function(){r.reset(),r.video=void 0})),r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tn(e,t)}(t,e);var r,n,i,o=Rn(t);return r=t,(n=[{key:"update",value:function(){if(this.video){var e=function(e){if("function"===typeof e.getVideoPlaybackQuality){var t=e.getVideoPlaybackQuality();return{droppedVideoFrames:t.droppedVideoFrames,corruptedVideoFrames:t.corruptedVideoFrames,totalVideoFrames:t.totalVideoFrames}}var r=e;return"number"===typeof r.webkitDroppedFrameCount&&"number"===typeof r.webkitDecodedFrameCount?_n(_n({},eu),{},{droppedVideoFrames:r.webkitDroppedFrameCount,totalVideoFrames:r.webkitDecodedFrameCount}):eu}(this.video);this.playbackQuality=e,0!==this.persistedPlaybackQuality.totalVideoFrames&&(this.persistedPlaybackQuality.totalVideoFrames>e.totalVideoFrames&&(this.accumulatedPlaybackQuality={droppedVideoFrames:this.accumulatedPlaybackQuality.droppedVideoFrames+this.persistedPlaybackQuality.droppedVideoFrames,corruptedVideoFrames:this.accumulatedPlaybackQuality.corruptedVideoFrames+this.persistedPlaybackQuality.corruptedVideoFrames,totalVideoFrames:this.accumulatedPlaybackQuality.totalVideoFrames+this.persistedPlaybackQuality.totalVideoFrames}),this.persistedPlaybackQuality=eu)}}},{key:"persist",value:function(){0!==this.playbackQuality.totalVideoFrames&&(this.persistedPlaybackQuality=this.playbackQuality,this.playbackQuality=eu)}},{key:"reset",value:function(){this.playbackQuality=eu,this.persistedPlaybackQuality=eu,this.accumulatedPlaybackQuality=eu}},{key:"getPlaybackQuality",value:function(){return this.persistedPlaybackQuality.totalVideoFrames>0?eu:{droppedVideoFrames:this.playbackQuality.droppedVideoFrames+this.accumulatedPlaybackQuality.droppedVideoFrames,corruptedVideoFrames:this.playbackQuality.corruptedVideoFrames+this.accumulatedPlaybackQuality.corruptedVideoFrames,totalVideoFrames:this.playbackQuality.totalVideoFrames+this.accumulatedPlaybackQuality.totalVideoFrames}}}])&&kn(r.prototype,n),i&&kn(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Li),ru=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),In(this,"callback",void 0),In(this,"intervalId",void 0),In(this,"playbackQualityController",void 0),In(this,"oldValues",{}),In(this,"dprCheckingInProgress",!1),In(this,"tick",(function(){var e;null===(e=n.playbackQualityController)||void 0===e||e.update();var t=n.getFramesValue();void 0!==t&&n.callback("frames",t),n.checkDevicePixelRatio()})),this.callback=r,this.playbackQualityController=new tu(t),this.intervalId=null}var t,r,n;return t=e,(r=[{key:"getFramesValue",value:function(){var e,t;if(null!==this.playbackQualityController&&null!==this.oldValues){var r=this.playbackQualityController.getPlaybackQuality(),n=r.droppedVideoFrames,i=r.totalVideoFrames;if((null===(e=this.oldValues.frames)||void 0===e?void 0:e.dropped)!==n||(null===(t=this.oldValues.frames)||void 0===t?void 0:t.total)!==i)return this.oldValues.frames={dropped:Math.max(Math.floor(n)),total:Math.max(Math.floor(i))},this.oldValues.frames}}},{key:"checkDevicePixelRatio",value:function(){var e=this;if(null!==this.oldValues&&!this.dprCheckingInProgress){var t="undefined"!==typeof globalThis?globalThis:window;this.oldValues.devicePixelRatio||this.handleDpr((0,fo.mX)(t)),this.dprCheckingInProgress=!0,(0,fo.u0)(t).then((function(t){e.handleDpr(t)})).catch((function(){e.handleDpr((0,fo.mX)(t))}))}}},{key:"handleDpr",value:function(e){this.dprCheckingInProgress=!1,null!==this.oldValues&&this.oldValues.devicePixelRatio!==e&&(this.oldValues.devicePixelRatio=e,void 0!==e&&this.callback("devicePixelRatio",e))}},{key:"enable",value:function(){this.tick(),this.intervalId=setInterval(this.tick,250)}},{key:"disable",value:function(){var e;this.oldValues={},null===(e=this.playbackQualityController)||void 0===e||e.persist(),clearInterval(this.intervalId)}},{key:"destroy",value:function(){var e;this.disable(),null===(e=this.playbackQualityController)||void 0===e||e.destroy(),this.callback=Ho.Z,this.oldValues=null}}])&&jn(t.prototype,r),n&&jn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),nu=function(e){try{var t=e.getBoundingClientRect(),r=t.left,n=t.right,i=t.top,o=t.bottom;return{left:r,right:n,top:i,bottom:o,width:n-r,height:o-i}}catch(a){return{left:0,width:0,top:0,height:0,right:0,bottom:0}}},iu=r(17338),ou=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Wn(Hn(r=o.call(this)),"onResize",void 0),Wn(Hn(r),"resizeObserverCallback",(function(e){var t=Mn(e,1)[0].contentRect,n=t.width,i=t.height;r.onResize.dispatch({width:n,height:i})}));var n=nu(e);if(r.onResize=new iu.R({width:n.width,height:n.height},(function(e,t){var r=t.width,n=t.height;return!!(isNaN(r)||isNaN(n)||r<1||n<1)||e.width===r&&e.height===n})),r.addDestroyHandler((function(){r.onResize.removeAll()})),"undefined"!==typeof ResizeObserver)try{var i=new ResizeObserver(r.resizeObserverCallback);i.observe(e),r.addDestroyHandler((function(){i.disconnect()}))}catch(a){r.fallbackToCustomDetectionMethods(e)}else r.fallbackToCustomDetectionMethods(e);return r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bn(e,t)}(t,e);var r,n,i,o=Un(t);return r=t,(n=[{key:"getSize",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(r),!0).forEach((function(t){Wn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.onResize.getValue())}},{key:"fallbackToCustomDetectionMethods",value:function(e){var t=this,r=e.ownerDocument;if(r){var n=r.defaultView;if(n){var i=function(){var r=nu(e);t.onResize.dispatch({width:r.width,height:r.height})};this.addDestroyHandler((0,Ci.O)(n,"resize",i,{passive:!0})),this.addDestroyHandler(de(i))}}}}])&&Fn(r.prototype,n),i&&Fn(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Li),au=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zn(Jn(e=o.call(this)),"onResize",void 0);var r=e.getWindowSize();return e.onResize=new iu.R(r,(function(e,t){var r=t.width,n=t.height;return!!(isNaN(r)||isNaN(n)||r<1||n<1)||e.width===r&&e.height===n})),e.addDestroyHandler((function(){return e.onResize.removeAll()})),e.setupEventListeners(),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kn(e,t)}(t,e);var r,n,i,o=$n(t);return r=t,(n=[{key:"getSize",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(r),!0).forEach((function(t){Zn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.onResize.getValue())}},{key:"getWindowSize",value:function(){return{width:window.innerWidth,height:window.innerHeight}}},{key:"setupEventListeners",value:function(){var e=this,t=function(){var t=e.getWindowSize();e.onResize.dispatch(t)};this.addResizeListener(t);var r=setInterval(t,5e3);this.addDestroyHandler((function(){return clearInterval(r)}))}},{key:"addResizeListener",value:function(e){window&&(this.addDestroyHandler((0,Ci.O)(window,"resize",e,{passive:!0})),this.addDestroyHandler((0,Ci.O)(window,"orientationchange",e,{passive:!0})),window.visualViewport&&this.addDestroyHandler((0,Ci.O)(window.visualViewport,"resize",e,{passive:!0})))}}])&&zn(r.prototype,n),i&&zn(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Li),uu=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ni(this,"observer",void 0),ni(this,"lastValue",void 0),ni(this,"video",void 0),ni(this,"onChangeCallbacks",[]),this.video=t,this.lastValue=this.computeObjectFit(),this.observer=new MutationObserver((function(e){var t,n=ei(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;"attributes"!==i.type||"class"!==i.attributeName&&"style"!==i.attributeName||function(){var e=r.computeObjectFit();r.lastValue!==e&&(r.lastValue=e,r.onChangeCallbacks.forEach((function(t){return t(e)})))}()}}catch(o){n.e(o)}finally{n.f()}})),this.observer.observe(t,{attributes:!0,attributeFilter:["class","style"]})}var t,r,n;return t=e,(r=[{key:"computeObjectFit",value:function(){if(!this.video)throw new Error("No video-element to compute object-fit");return self.getComputedStyle(this.video).getPropertyValue("object-fit")}},{key:"getObjectFit",value:function(){return this.lastValue}},{key:"onChange",value:function(e){this.onChangeCallbacks.push(e)}},{key:"destroy",value:function(){var e;null===(e=this.observer)||void 0===e||e.disconnect(),this.observer=null,this.video=null,this.onChangeCallbacks=[]}}])&&ri(t.prototype,r),n&&ri(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),cu=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),di(fi(n=o.call(this,e,r)),"intervalWatcher",null),di(fi(n),"videoSizeObserver",null),di(fi(n),"videoSizeSensor",null),di(fi(n),"windowSizeSensor",null),di(fi(n),"objectFitObserver",null),di(fi(n),"handleIntervalUpdate",(function(e,t){switch(e){case"frames":return void n.handleFrames(t);case"devicePixelRatio":return void n.handleDevicePixelRatio(t)}})),di(fi(n),"handleVideoResize",(function(){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");n.notify("updateVideoSize",{height:Math.max(Math.floor(n.yaspMediaElement.videoHeight)),width:Math.max(Math.floor(n.yaspMediaElement.videoWidth))})})),di(fi(n),"handleResize",(function(e,t){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");n.notify("updateContainerSize",{height:Math.max(Math.floor(t),0),width:Math.max(Math.floor(e),0)})})),di(fi(n),"handleWindowSize",(function(e,t){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");n.notify("updateWindowSize",{height:Math.max(Math.floor(t),0),width:Math.max(Math.floor(e),0)})})),di(fi(n),"handleObjectFit",(function(e){n.notify("updateObjectFit",e)})),n.yaspMediaElement=e,n.intervalWatcher=new ru(n.yaspMediaElement,n.handleIntervalUpdate),n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ci(e,t)}(t,e);var r,n,i,o=si(t);return r=t,(n=[{key:"enable",value:function(){var e=this;if(null!==this.intervalWatcher){ai(hi(t.prototype),"enable",this).call(this),this.intervalWatcher.enable(),this.videoSizeObserver=new Za(this.yaspMediaElement,this.handleVideoResize),this.videoSizeSensor=new ou(this.yaspMediaElement),this.videoSizeSensor.onResize.add((function(t){var r=t.width,n=t.height;return e.handleResize(r,n)})),this.windowSizeSensor=new au,this.windowSizeSensor.onResize.add((function(t){var r=t.width,n=t.height;return e.handleWindowSize(r,n)})),this.objectFitObserver=new uu(this.yaspMediaElement),this.objectFitObserver.onChange(this.handleObjectFit);var r=this.videoSizeSensor.getSize();this.handleResize(r.width,r.height);var n=this.windowSizeSensor.getSize();this.handleWindowSize(n.width,n.height)}}},{key:"disable",value:function(){var e,r,n,i;null!==this.intervalWatcher&&(ai(hi(t.prototype),"disable",this).call(this),this.intervalWatcher.disable(),null===(e=this.videoSizeSensor)||void 0===e||e.destroy(),null===(r=this.videoSizeObserver)||void 0===r||r.destroy(),this.videoSizeObserver=null,null===(n=this.windowSizeSensor)||void 0===n||n.destroy(),this.windowSizeSensor=null,null===(i=this.objectFitObserver)||void 0===i||i.destroy(),this.objectFitObserver=null)}},{key:"destroy",value:function(){var e;ai(hi(t.prototype),"destroy",this).call(this),null===(e=this.intervalWatcher)||void 0===e||e.destroy(),this.intervalWatcher=null}},{key:"handleFrames",value:function(e){if(null===this.yaspMediaElement)throw new Error("Unexpected notification call after destroy");this.notify("updateFrames",e)}},{key:"handleDevicePixelRatio",value:function(e){if(null===this.yaspMediaElement)throw new Error("Unexpected notification call after destroy");this.notify("updateDevicePixelRatio",e)}}])&&oi(r.prototype,n),i&&oi(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(To),su=r(72573),lu=Qr(HTMLVideoElement),fu=function(e){function t(){var e;wi(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Pi(Ri(e=c.call.apply(c,[this].concat(n))),"videoTrackList",void 0),Pi(Ri(e),"unsubscribeTextTracksChange",void 0),Pi(Ri(e),"unsubscribeTextTracksAdd",void 0),Pi(Ri(e),"isLowLatency",!1),Pi(Ri(e),"serverTimeInfo",void 0),Pi(Ri(e),"streamEndTime",void 0),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Si(e,t)}(t,e);var r,n,i,o,a,u,c=ki(t);return r=t,n=[{key:"videoTracks",get:function(){var e;return this.yaspSrc?this.videoTrackList:null!==(e=_i(xi(t.prototype),"videoTracks",this))&&void 0!==e?e:this.videoTrackList}},{key:"canPlayType",value:function(e){return t.isSupported()&&"application/dash+xml"===e?_i(xi(t.prototype),"canPlayType",this).call(this,'video/mp4; codecs="avc1.42E01E"'):_i(xi(t.prototype),"canPlayType",this).call(this,e)}},{key:"addEventListener",value:function(e,r,n){_i(xi(t.prototype),"addEventListener",this).call(this,e,r,n)}},{key:"removeEventListener",value:function(e,r,n){_i(xi(t.prototype),"removeEventListener",this).call(this,e,r,n)}},{key:"yaspRequestDebugInfo",value:(u=bi(yi().mark((function e(){var r,n,i,o;return yi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.videoTracks,n=this.audioTracks,i=this.textTracks,o={videoElement:{audioTracks:(0,xo.w)(n),videoTracks:(0,xo.w)(r),textTracks:(0,xo.w)(i)}},e.t0=mi,e.t1=mi({},o),e.next=6,_i(xi(t.prototype),"yaspRequestDebugInfo",this).call(this);case 6:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 8:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"yaspPreloadSrc",value:(a=bi(yi().mark((function e(r,n){return yi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.preloadSrc(r,n,this.scopeId));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"yaspSetVideoElementSizes",value:function(e){t.setVideoElementSizes(this.src,e,this.scopeId)}},{key:"yaspDispatchEvent",value:function(e,r,n){var i=new CustomEvent(e,mi({detail:r},n));_i(xi(t.prototype),"dispatchEvent",this).call(this,i)}},{key:"initVideoTrackList",value:function(){var e=this;if(void 0===this.videoTrackList){var r=new Bo;r.addEventListener("change",(function(){var n=r[r.selectedIndex].id;t.configureSource(e.src,{tracks:{videoTrackId:n}});var i=new Event("change");(0,Wi.Y)((function(){_i(xi(t.prototype),"videoTracks",e).dispatchEvent(i)}))})),this.videoTrackList=r}}},{key:"initTextTrackList",value:function(){var e=this;(0,fo.Fv)()&&(this.unsubscribeTextTracksAdd=(0,Ci.O)(this.textTracks,"addtrack",(function(t){var r,n=t.track;"empty-yasp-text-track"===n.id&&"showing"===n.mode&&(n.mode="disabled",null===(r=e.findEmptyTextTrack())||void 0===r||r.remove())}))),this.unsubscribeTextTracksChange=(0,Ci.O)(this.textTracks,"change",(function(r){for(var n=r.target,i={source:e.yaspSrc,track:null},o=n,a=0;a<o.length;a++){var u,c=o[a];"empty-yasp-text-track"!==c.id?"disabled"!==c.mode&&(t.removeCues(c),i.track={id:c.id,label:c.label,language:c.language,kind:c.kind}):null===(u=e.findEmptyTextTrack())||void 0===u||u.remove()}t.configureSource(e.src,{tracks:{textTrack:i.track}})}))}},{key:"findEmptyTextTrack",value:function(){return this.querySelector('track[id="'.concat("empty-yasp-text-track",'"]'))}},{key:"registerVideoRpcHandlers",value:function(){var e=this;this.registerRpcHandlerForInstance("addTextTrack",(function(t){var r=e.getElementsByTagName("track"),n=(0,xo.w)(r).some((function(e){return e.id===t.track.id}));if(Tr(e.yaspSrc,t.source)&&n)return{done:!0,value:void 0};if((0,fo.Fv)()&&!e.findEmptyTextTrack()){var i=document.createElement("track");i.setAttribute("kind",t.track.kind),i.setAttribute("default","true"),i.setAttribute("id","empty-yasp-text-track"),i.src=Qa,e.appendChild(i)}var o=document.createElement("track");return o.setAttribute("kind",t.track.kind),o.setAttribute("label",t.track.label),o.setAttribute("srclang",t.track.language),o.setAttribute("id",t.track.id),o.src=Qa,e.appendChild(o),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("cuesCleared",(function(){for(var r=0;r<e.textTracks.length;r++)t.removeCues(e.textTracks[r]);return{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("cuesAdded",(function(t){for(var r,n=t.cues,i=t.label,o=0;o<e.textTracks.length;o++)e.textTracks[o].label===i&&(r=e.textTracks[o]);return r?(n.forEach((function e(t){if("\0"!==t.payload&&"\x1f"!==t.payload){var n=new VTTCue(t.startTime,t.endTime,t.payload);r.addCue(n)}(t.nestedCues||[]).forEach(e)})),{done:!0,value:void 0}):{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("changeVideoTracks",(function(t){var r=t.added;return t.removed.forEach((function(t){var r,n,i=null===(r=e.videoTrackList)||void 0===r?void 0:r.getTrackById(t);i&&(null===(n=e.videoTrackList)||void 0===n||n.removeTrack(i))})),r.forEach((function(t){var r,n,i,o=t.source,a=t.track,u=null===(r=e.videoTrackList)||void 0===r?void 0:r.getTrackById(a.id);Tr(e.yaspSrc,o)&&u||null===(n=e.videoTrackList)||void 0===n||n.addTrack(new Fo({selected:a.selected,width:a.width,height:a.height,bitrate:a.bitrate,label:a.label,language:null!==(i=a.language)&&void 0!==i?i:void 0,frameRate:a.frameRate,id:a.id,kind:a.kind}))})),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("changeSelectedVideoTrack",(function(t){if(!e.videoTrackList)return{done:!0,value:void 0};var r=e.videoTrackList.getTrackById(t.trackId);return r?(r.selected=!0,{done:!0,value:void 0}):{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("changeVideoType",(function(t){return e.yaspDispatchEvent("yasp-videoTypeChange",t.videoType,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("changeIsLowLatency",(function(t){return e.isLowLatency=t.isLowLatency,{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("updateTargetLatency",(function(t){return e.yaspDispatchEvent("yasp-updateTargetLatency",t.latency,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("updateServerTime",(function(t){return e.serverTimeInfo?(e.serverTimeInfo.time=t.time,e.serverTimeInfo.getTime=(0,to.u)()):e.serverTimeInfo={time:t.time,getTime:(0,to.u)()},{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("updateStreamEndTime",(function(t){return e.streamEndTime=t.time,{done:!0,value:void 0}}))}},{key:"initVideoStateNotifier",value:function(){var e=this;this.mediaStateNotifier=new cu(this,(function(r,n){null!==e.yasp&&t.worker.postMessage({jsonrpc:"2.0",method:r,sourceKey:(0,yo.Hi)(e.yaspSrc),scopeId:e.scopeId,params:n})})),this.mediaStateNotifier.enable()}},{key:"getServerTime",value:function(){if(this.serverTimeInfo&&this.serverTimeInfo.time)return(this.serverTimeInfo.time+this.serverTimeInfo.getTime())/1e3}},{key:"getStreamEndTime",value:function(){return this.streamEndTime?this.streamEndTime/1e3:null}},{key:"isLowLatencyLive",value:function(){return this.isLowLatency}},{key:"clearTextTrackList",value:function(){for(var e=0;e<this.textTracks.length;e++)this.textTracks[e].mode="disabled";for(var t=this.getElementsByTagName("track");t.length;)t[0].remove()}},{key:"clearTrackLists",value:function(){_i(xi(t.prototype),"clearTrackLists",this).call(this),ut(this.videoTrackList),this.clearTextTrackList()}},{key:"setSrc",value:function(e){var r,n;_i(xi(t.prototype),"setSrc",this).call(this,e),Ba(e)?(t.setDevicePixelRatioForSource(e,this.scopeId),this.initTextTrackList()):(null===(r=this.unsubscribeTextTracksChange)||void 0===r||r.call(this),this.unsubscribeTextTracksChange=void 0,null===(n=this.unsubscribeTextTracksAdd)||void 0===n||n.call(this),this.unsubscribeTextTracksAdd=void 0)}},{key:"restore",value:function(){_i(xi(t.prototype),"restore",this).call(this),this.streamEndTime=void 0,this.serverTimeInfo=void 0,this.isLowLatency=!1}},{key:"getScope",value:function(){return this.scopeId&&t.scopeObjects.get(this.scopeId)||t}}],i=[{key:"setDevicePixelRatioForSource",value:function(e,r){t.worker.request({method:"setDevicePixelRatio",params:{source:e,devicePixelRatio:(0,fo.mX)(window),scopeId:r}}).catch(Ho.Z),(0,fo.u0)(window).then((function(n){return t.worker.request({method:"setDevicePixelRatio",params:{source:e,devicePixelRatio:n,scopeId:r}})})).catch(Ho.Z)}},{key:"attach",value:function(e,r){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qa.$;if(t.isYaspVideoElement(e))return e.setScopeId(i),e;var o=lu.attachElement(t,e,i,r);return o.registerVideoRpcHandlers(),o.initVideoStateNotifier(),o.initVideoTrackList(),lu.messenger.emit("yasp-event",{name:"YaspAttached",data:{message:null!==(n=(0,Wi.Y)((function(){return"1.0-13090"})))&&void 0!==n?n:""}}),o}},{key:"isYaspVideoElement",value:function(e){return!0===e.yasp}},{key:"preloadSrc",value:(o=bi(yi().mark((function e(r,n){var i,o=arguments;return yi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>2&&void 0!==o[2]?o[2]:qa.$,t.setDevicePixelRatioForSource(r,i),e.abrupt("return",_i(xi(t),"preloadSrc",this).call(this,r,n,i));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"setVideoElementSizes",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qa.$;Ba(e)&&t.configureSource(e,{videoSizes:r},n)}},{key:"getStats",value:function(){return mi(mi({},lu.getStats()),{},{maxCapAllowedVideoTrack:t.maxCapAllowedVideoTrack})}},{key:"worker",get:function(){var e=lu.worker;return this.workerHandlersRegistered||(e.registerStaticRpcHandler("updateMaxCapAllowedVideoTrack",(function(e){return t.maxCapAllowedVideoTrack=e.maxCapAllowedVideoTrack,{done:!0,value:void 0}})),e.registerStaticRpcHandler("workerInited",(function(e){return t.sourceLimit=e.sourceLimit,{done:!0,value:e.sourceLimit}})),e.onTerminate((function(){t.workerHandlersRegistered=!1})),this.workerHandlersRegistered=!0),e}},{key:"removeCues",value:function(e){if(e.cues)for(var t=e.cues,r=t.length-1;r>=0;r--){var n=t[r];n&&e.removeCue(n)}}},{key:"createScope",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.warmUp();var r=++t.currentScopeId,n={isSupported:t.isSupported,attach:function(e,n){return t.attach(e,n,r)},isYaspVideoElement:t.isYaspVideoElement,preloadSrc:function(e,n){return t.preloadSrc(e,n,r)},releaseSrc:function(e){return t.releaseSrc(e,r)},getStats:t.getStats,configureSource:function(e,n){return t.configureSource(e,n,r)},destroy:function(){return t.destroy(r)},getExpConfig:t.getExpConfig,setWorkerConfig:function(e){return t.setWorkerConfig(e,r)},messenger:t.messenger};return n.setWorkerConfig(e),t.scopeObjects.set(r,n),n}}],n&&Ei(r.prototype,n),i&&Ei(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(lu);Pi(fu,"maxCapAllowedVideoTrack",void 0),Pi(fu,"sourceLimit",null),Pi(fu,"workerHandlersRegistered",!1),Pi(fu,"scopeObjects",new Map);var hu=r(72573),du=self;du.Ya=du.Ya||{},du.Ya.YaspVideoElement=fu,du.Ya.YaspAudioElement=Ja,du.Ya.YaspDrmController=po,du.Ya.preloadYaspScripts=function(){return hu.resolve()},du.Ya.applyFlags=function(e){if(Array.isArray(e))(0,ra.Vc)(e);else{var t=(0,Wi.Y)((function(){return JSON.parse(e)}))||{};(0,ra.Vc)({flags:t})}},du.Ya.getTestIds=ra._V},25780:function(e,t,r){"use strict";function n(e){return e}r.d(t,{y:function(){return n}})},61330:function(e,t,r){"use strict";r(62474)},62474:function(e,t,r){"use strict"},17422:function(e){e.exports=function(e){e||(e=window);var t=e.navigator.userAgent,r=t.indexOf("MSIE ");if(r>0)return parseInt(t.substring(r+5,t.indexOf(".",r)),10);if(t.indexOf("Trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var i=t.indexOf("Edge/");return i>0&&parseInt(t.substring(i+5,t.indexOf(".",i)),10)}},70627:function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=Array.isArray,n=Object.keys,i=Object.prototype.hasOwnProperty;e.exports=function e(o,a){if(o===a)return!0;if(o&&a&&"object"==t(o)&&"object"==t(a)){var u,c,s,l=r(o),f=r(a);if(l&&f){if((c=o.length)!=a.length)return!1;for(u=c;0!==u--;)if(!e(o[u],a[u]))return!1;return!0}if(l!=f)return!1;var h=o instanceof Date,d=a instanceof Date;if(h!=d)return!1;if(h&&d)return o.getTime()==a.getTime();var p=o instanceof RegExp,y=a instanceof RegExp;if(p!=y)return!1;if(p&&y)return o.toString()==a.toString();var v=n(o);if((c=v.length)!==n(a).length)return!1;for(u=c;0!==u--;)if(!i.call(a,v[u]))return!1;for(u=c;0!==u--;)if(!e(o[s=v[u]],a[s]))return!1;return!0}return o!==o&&a!==a}},40497:function(e){"use strict";e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=t[r]);return e})},75781:function(e,t){function r(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,a,u;!function(r,n){"object"==i(t)?n(t):(a=[t],void 0===(u="function"===typeof(o=n)?o.apply(t,a):o)||(e.exports=u))}(0,(function(e){"use strict";function t(e,t){function i(t){for(var n=[];e[f];)if(e.charCodeAt(f)==p){if(e.charCodeAt(f+1)===m){var i=f+2;if(f=e.indexOf(">",f),-1==e.substring(i,f).indexOf(t)){var o=e.substring(0,f).split("\n");throw new Error("Unexpected close tag\nLine: "+(o.length-1)+"\nColumn: "+(o[o.length-1].length+1)+"\nChar: "+e[f])}return f+1&&(f+=1),n}if(e.charCodeAt(f+1)===g){if(e.charCodeAt(f+2)==v){for(var u=f;-1!==f&&(e.charCodeAt(f)!==y||e.charCodeAt(f-1)!=v||e.charCodeAt(f-2)!=v||-1==f);)f=e.indexOf(">",f+1);-1===f&&(f=e.length),h&&n.push(e.substring(u,f+1))}else{if(e.charCodeAt(f+2)===E&&e.charCodeAt(f+8)===E&&"cdata"===e.substr(f+3,5).toLowerCase()){var s=e.indexOf("]]>",f);-1==s?(n.push(e.substr(f+9)),f=e.length):(n.push(e.substring(f+9,s)),f=s+3);continue}var l=f+1;f+=2;for(var b=!1;(e.charCodeAt(f)!==y||!0===b)&&e[f];)e.charCodeAt(f)===E?b=!0:!0===b&&e.charCodeAt(f)===_&&(b=!1),f++;n.push(e.substring(l,f))}f++;continue}var w=c();n.push(w),"?"===w.tagName[0]&&(n.push.apply(n,r(w.children)),w.children=[])}else{var O=a();if(d)O.length>0&&n.push(O);else{var S=O.trim();S.length>0&&n.push(S)}f++}return n}function a(){var t=f;return-2===(f=e.indexOf("<",f)-1)&&(f=e.length),e.slice(t,f+1)}function u(){for(var t=f;-1==="\r\n\t>/= ".indexOf(e[f])&&e[f];)f++;return e.slice(t,f)}function c(){f++;for(var t=u(),r={},n=[];e.charCodeAt(f)!==y&&e[f];){var o=e.charCodeAt(f);if(o>64&&o<91||o>96&&o<123){for(var a=u(),c=e.charCodeAt(f);c&&c!==b&&c!==w&&!(c>64&&c<91||c>96&&c<123)&&c!==y;)f++,c=e.charCodeAt(f);if(c===b||c===w){var l=s();if(-1===f)return{tagName:t,attributes:r,children:n}}else l=null,f--;r[a]=l}f++}if(e.charCodeAt(f-1)!==m)if("script"==t){var h=f+1;f=e.indexOf("<\/script>",f),n=[e.slice(h,f)],f+=9}else"style"==t?(h=f+1,f=e.indexOf("</style>",f),n=[e.slice(h,f)],f+=8):-1===O.indexOf(t)?(f++,n=i(t)):f++;else f++;return{tagName:t,attributes:r,children:n}}function s(){var t=e[f],r=f+1;return f=e.indexOf(t,r),e.slice(r,f)}var l,f=(t=t||{}).pos||0,h=!!t.keepComments,d=!!t.keepWhitespace,p="<".charCodeAt(0),y=">".charCodeAt(0),v="-".charCodeAt(0),m="/".charCodeAt(0),g="!".charCodeAt(0),b="'".charCodeAt(0),w='"'.charCodeAt(0),E="[".charCodeAt(0),_="]".charCodeAt(0),O=t.noChildNodes||["img","br","input","meta","link","hr"],S=null;if(void 0!==t.attrValue)for(t.attrName=t.attrName||"id",S=[];-1!==(void 0,l=new RegExp("\\s"+t.attrName+"\\s*=['\"]"+t.attrValue+"['\"]").exec(e),f=l?l.index:-1);)-1!==(f=e.lastIndexOf("<",f))&&S.push(c()),e=e.substr(f),f=0;else S=t.parseNode?c():i("");return t.filter&&(S=o(S,t.filter)),t.simplify?n(Array.isArray(S)?S:[S]):(t.setPos&&(S.pos=f),S)}function n(e){var t={};if(!e.length)return"";if(1===e.length&&"string"==typeof e[0])return e[0];for(var r in e.forEach((function(e){if("object"==i(e)){t[e.tagName]||(t[e.tagName]=[]);var r=n(e.children);t[e.tagName].push(r),Object.keys(e.attributes).length&&"string"!=typeof r&&(r._attributes=e.attributes)}})),t)1==t[r].length&&(t[r]=t[r][0]);return t}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=[];return e.forEach((function(e,u){if("object"==i(e)&&t(e,u,r,n)&&a.push(e),e.children){var c=o(e.children,t,r+1,(n?n+".":"")+u+"."+e.tagName);a=a.concat(c)}})),a}e.filter=o,e.getElementById=function(e,r,n){var i=t(e,{attrValue:r});return n?tXml.simplify(i):i[0]},e.getElementsByClassName=function(e,r,n){var i=t(e,{attrName:"class",attrValue:"[a-zA-Z0-9- ]*"+r+"[a-zA-Z0-9- ]*"});return n?tXml.simplify(i):i},e.parse=t,e.simplify=n,e.simplifyLostLess=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return t.length?1===t.length&&"string"==typeof t[0]?Object.keys(r).length?{_attributes:r,value:t[0]}:t[0]:(t.forEach((function(t){if("object"==i(t)){n[t.tagName]||(n[t.tagName]=[]);var r=e(t.children||[],t.attributes);n[t.tagName].push(r),Object.keys(t.attributes).length&&(r._attributes=t.attributes)}})),n):n},e.stringify=function(e){function t(e){if(e)for(var t=0;t<e.length;t++)"string"==typeof e[t]?n+=e[t].trim():r(e[t])}function r(e){for(var r in n+="<"+e.tagName,e.attributes)null===e.attributes[r]?n+=" "+r:-1===e.attributes[r].indexOf('"')?n+=" "+r+'="'+e.attributes[r].trim()+'"':n+=" "+r+"='"+e.attributes[r].trim()+"'";"?"!==e.tagName[0]?(n+=">",t(e.children),n+="</"+e.tagName+">"):n+="?>"}var n="";return t(e),n},e.toContentString=function e(t){if(Array.isArray(t)){var r="";return t.forEach((function(t){r=(r+=" "+e(t)).trim()})),r}return"object"==i(t)?e(t.children):" "+t},Object.defineProperty(e,"__esModule",{value:!0})}))},89151:function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n,i,o,a,u;"object"!==("undefined"===typeof globalThis?"undefined":r(globalThis))&&(Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__),"undefined"===typeof Math.imul&&(Math.imul=function(e,t){return(4294901760&e)*(65535&t)+(65535&e)*(0|t)|0}),"undefined"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView=function(e){return null!=e&&null!=e.__proto__&&e.__proto__.__proto__===Int8Array.prototype.__proto__}),"undefined"===typeof Array.prototype.fill&&Object.defineProperty(Array.prototype,"fill",{value:function(e){if(null==this)throw new TypeError("this is null or not defined");for(var t=Object(this),r=t.length>>>0,n=arguments[1],i=n>>0,o=i<0?Math.max(r+i,0):Math.min(i,r),a=arguments[2],u=void 0===a?r:a>>0,c=u<0?Math.max(r+u,0):Math.min(u,r);o<c;)t[o]=e,o++;return t}}),[Int8Array,Int16Array,Uint16Array,Int32Array,Float32Array,Float64Array].forEach((function(e){"undefined"===typeof e.prototype.fill&&Object.defineProperty(e.prototype,"fill",{value:Array.prototype.fill})})),"undefined"===typeof Math.clz32&&(Math.clz32=(a=Math.log,u=Math.LN2,function(e){var t=e>>>0;return 0===t?32:31-(a(t)/u|0)|0})),i=[t],void 0===(o="function"===typeof(n=function(e){"use strict";function t(){}function n(){}function i(){}function o(){}function a(e){return e.length-1|0}function u(e,t){if(null==t){var r=0,n=e.length-1|0;if(r<=n)do{var i=r;if(r=r+1|0,null==e[i])return i}while(r<=n)}else{var o=0,a=e.length-1|0;if(o<=a)do{var u=o;if(o=o+1|0,G(t,e[u]))return u}while(o<=a)}return-1}function c(e,t,r,n,i,o,a){return t=t===en?", ":t,r=r===en?"":r,n=n===en?"":n,i=i===en?-1:i,o=o===en?"...":o,a=a===en?null:a,function(e,t,r,n,i,o,a,u){r=r===en?", ":r,n=n===en?"":n,i=i===en?"":i,o=o===en?-1:o,a=a===en?"...":a,u=u===en?null:u,t.b(n);var c=0,s=e.c();e:for(;s.d();){var l=s.e();if((c=c+1|0)>1&&t.b(r),!(o<0||c<=o))break e;Dr(t,l,u)}return o>=0&&c>o&&t.b(a),t.b(i),t}(e,ur(),t,r,n,i,o,a).toString()}function s(e){if(_e(e,v)){var t;switch(e.f()){case 0:t=xr();break;case 1:t=Ae(_e(e,y)?e.g(0):e.c().e());break;default:t=l(e)}return t}return function(e){switch(e.f()){case 0:return xr();case 1:return Ae(e.g(0));default:return e}}(f(e))}function l(e){return qe(e)}function f(e){return _e(e,v)?l(e):function(e,t){for(var r=e.c();r.d();){var n=r.e();t.l(n)}return t}(e,We())}function h(e,t){return e<t?t:e}function d(e,t){return e>t?t:e}function p(){}function y(){}function v(){}function m(){}function g(){}function b(){}function w(e){var t=null==e?null:B(e);return null==t?"null":t}function E(){Cr=this,this.v_1=new _(0,-2147483648),this.w_1=new _(-1,2147483647),this.x_1=8,this.y_1=64}function _(e,t){null==Cr&&new E,i.call(this),this.z_1=e,this.a1_1=t}function O(e){for(var t=1,r=[],n=0,i=e.length;n<i;){var o=e[n];n=n+1|0;var a=t,u=o.prototype.$imask$,c=null==u?o.$imask$:u;null!=c&&(r.push(c),a=c.length);var s=o.$metadata$.iid,l=null==s?null:(h=void 0,d=void 0,p=void 0,h=(f=s)>>5,d=new Int32Array(h+1|0),p=1<<(31&f),d[h]=d[h]|p,d);null!=l&&(r.push(l),a=Math.max(a,l.length)),a>t&&(t=a)}var f,h,d,p;return function(e,t){for(var r=0,n=new Int32Array(e);r<e;){for(var i=r,o=0,a=0,u=t.length;a<u;){var c=t[a];a=a+1|0,i<c.length&&(o|=c[i])}n[i]=o,r=r+1|0}return n}(t,r)}function S(e,t){var r=0,n=e.length-1|0;if(r<=n)do{var i=r;r=r+1|0,e[i]=t}while(i!==n);return e}function k(e){this.j1_1=e,this.i1_1=0}function T(){return L(),Fr}function R(){return L(),Br}function x(){return L(),Ur}function P(){return L(),Gr}function A(e){return L(),(0|e)===e?(t=e)instanceof _?t.g1():function(e){return e>2147483647?2147483647:e<-2147483648?-2147483648:0|e}(t):(R()[0]=e,ln(x()[(L(),Hr)],31)+x()[P()]|0);var t}function L(){Vr||(Vr=!0,Fr=new ArrayBuffer(8),Br=new Float64Array(T()),new Float32Array(T()),Ur=new Int32Array(T()),R()[0]=-1,Gr=0!==x()[0]?1:0,Hr=1-P()|0)}function j(e){return B(e)}function I(e,t){var n;switch(r(e)){case"number":n="number"===typeof t?D(e,t):t instanceof _?D(e,t.h1()):N(e,t);break;case"string":case"boolean":n=N(e,t);break;default:n=function(e,t){return e.a(t)}(e,t)}return n}function D(e,t){var r;if(e<t)r=-1;else if(e>t)r=1;else if(e===t){var n;if(0!==e)n=0;else{var i=1/e;n=i===1/t?0:i<0?-1:1}r=n}else r=e!==e?t!==t?0:1:-1;return r}function N(e,t){return e<t?-1:e>t?1:0}function M(e){if(!("kotlinHashCodeValue$"in e)){var t=C(),r=new Object;r.value=t,r.enumerable=!1,Object.defineProperty(e,"kotlinHashCodeValue$",r)}return e.kotlinHashCodeValue$}function C(){return 4294967296*Math.random()|0}function F(e){return e=e===en?null:e,Object.create(e)}function B(e){return null==e?"null":function(e){return Ee(e)||fn(e)}(e)?"[...]":"function"!==typeof e.toString?function(e){return Object.prototype.toString.call(e)}(e):e.toString()}function U(e){if(null==e)return 0;var t,n=r(e);switch(n){case"object":t="function"===typeof e.hashCode?e.hashCode():M(e);break;case"function":t=M(e);break;case"number":t=A(e);break;case"boolean":t=e?1231:1237;break;case"string":t=function(e){var t=0,r=e.length,n=0,i=r-1|0;if(n<=i)do{var o=n;n=n+1|0;var a=e.charCodeAt(o);t=ln(t,31)+a|0}while(o!==i);return t}(String(e));break;case"bigint":t=function(e){for(var t=BigInt(32),r=BigInt(4294967295),n=e<0?-e:e,i=0,o=e<0?-1:1;0!=n;){var a=Number(n&r);i=ln(31,i)+a|0,n>>=t}return ln(i,o)}(e);break;case"symbol":t=function(e){var t,r=(t=e,Symbol.keyFor(t)!=en?(Wr===en&&(Wr=new Map),Wr):(Yr===en&&(Yr=new WeakMap),Yr)),n=r.get(e);if(n!==en)return n;var i=C();return r.set(e,i),i}(e);break;default:t=function(){throw new Error("Unexpected typeof `"+n+"`")}()}return t}function G(e,t){if(null==e)return null==t;if(null==t)return!1;if("object"===r(e)&&"function"===typeof e.equals)return e.equals(t);if(e!==e)return t!==t;if("number"===typeof e&&"number"===typeof t){var n;if(e===t)n=0!==e||1/e===1/t;else n=!1;return n}return e===t}function H(e,t){null!=Error.captureStackTrace?Error.captureStackTrace(e,t):e.stack=(new Error).stack}function V(e){return e.prototype}function W(e,t,r){Error.call(e),function(e,t,r){var n=function e(t){var r=t.constructor,n=null==r?null:r.$metadata$,i=null==n?null:n.errorInfo;if(null!=i)return i;var o,a=0;if(ke(t,"message")&&(a|=1),ke(t,"cause")&&(a|=2),3!==a){var u=(o=t,Object.getPrototypeOf(o));u!=Error.prototype&&(a|=e(u))}return null!=n&&(n.errorInfo=a),a}(Object.getPrototypeOf(e));if(0===(1&n)){var i;if(null==t){var o;if(null!==t){var a=null==r?null:r.toString();o=null==a?en:a}else o=en;i=o}else i=t;e.message=i}0===(2&n)&&(e.cause=r),e.name=Object.getPrototypeOf(e).constructor.name}(e,t,r)}function Y(e){var t;return null==e?function(){throw rr()}():t=e,t}function q(){throw ir()}function z(){return de(),qr}function K(){return de(),zr}function $(){return de(),Kr}function X(){return de(),Xr}function J(){return de(),Jr}function Q(e,t){if(de(),ne(e,t))return 0;var r=oe(e),n=oe(t);return r&&!n?-1:!r&&n?1:oe(ee(e,t))?-1:1}function Z(e,t){de();var r=e.a1_1>>>16|0,n=65535&e.a1_1,i=e.z_1>>>16|0,o=65535&e.z_1,a=t.a1_1>>>16|0,u=65535&t.a1_1,c=t.z_1>>>16|0,s=0,l=0,f=0,h=0;return s=(s=s+((l=(l=l+((f=(f=f+((h=h+(o+(65535&t.z_1)|0)|0)>>>16|0)|0)+(i+c|0)|0)>>>16|0)|0)+(n+u|0)|0)>>>16|0)|0)+(r+a|0)|0,new _((f&=65535)<<16|(h&=65535),(s&=65535)<<16|(l&=65535))}function ee(e,t){return de(),Z(e,t.e1())}function te(e,t){if(de(),ae(e))return z();if(ae(t))return z();if(ne(e,X()))return ue(t)?X():z();if(ne(t,X()))return ue(e)?X():z();if(oe(e))return oe(t)?te(ce(e),ce(t)):ce(te(ce(e),t));if(oe(t))return ce(te(e,ce(t)));if(se(e,J())&&se(t,J()))return le(re(e)*re(t));var r=e.a1_1>>>16|0,n=65535&e.a1_1,i=e.z_1>>>16|0,o=65535&e.z_1,a=t.a1_1>>>16|0,u=65535&t.a1_1,c=t.z_1>>>16|0,s=65535&t.z_1,l=0,f=0,h=0,d=0;return h=h+((d=d+ln(o,s)|0)>>>16|0)|0,d&=65535,f=(f=f+((h=h+ln(i,s)|0)>>>16|0)|0)+((h=(h&=65535)+ln(o,c)|0)>>>16|0)|0,h&=65535,l=(l=(l=l+((f=f+ln(n,s)|0)>>>16|0)|0)+((f=(f&=65535)+ln(i,c)|0)>>>16|0)|0)+((f=(f&=65535)+ln(o,u)|0)>>>16|0)|0,f&=65535,l=l+(((ln(r,s)+ln(n,c)|0)+ln(i,u)|0)+ln(o,a)|0)|0,new _(h<<16|d,(l&=65535)<<16|f)}function re(e){return de(),4294967296*e.a1_1+function(e){return de(),e.z_1>=0?e.z_1:4294967296+e.z_1}(e)}function ne(e,t){return de(),e.a1_1===t.a1_1&&e.z_1===t.z_1}function ie(e){return de(),new _(e,e<0?-1:0)}function oe(e){return de(),e.a1_1<0}function ae(e){return de(),0===e.a1_1&&0===e.z_1}function ue(e){return de(),1===(1&e.z_1)}function ce(e){return de(),e.e1()}function se(e,t){return de(),Q(e,t)<0}function le(e){return de(),xe(e)?z():e<=-0x8000000000000000?X():e+1>=0x8000000000000000?(de(),$r):e<0?ce(le(-e)):new _(e%4294967296|0,e/4294967296|0)}function fe(e,t){return de(),Q(e,t)>0}function he(e,t){return de(),Q(e,t)>=0}function de(){Qr||(Qr=!0,qr=ie(0),zr=ie(1),Kr=ie(-1),$r=new _(-1,2147483647),Xr=new _(0,-2147483648),Jr=ie(16777216))}function pe(e,t,r,n,i,o){return{kind:e,simpleName:t,associatedObjectKey:n,associatedObjects:i,suspendArity:o,$kClass$:en,defaultConstructor:r,iid:"interface"===e?(Zr===en&&(Zr=0),Zr=Zr+1|0):en}}function ye(e,t,r,n,i,o,a,u,c){null!=i&&(t.prototype=Object.create(i.prototype),t.prototype.constructor=t);var s=pe(e,r,n,u,c,a);t.$metadata$=s,null!=o&&((G(s.iid,en)?t.prototype:t).$imask$=O(o))}function ve(e,t,r,n,i,o,a,u){ye("class",e,t,r,n,i,o,a,u)}function me(e,t,r,n,i,o,a,u){ye("object",e,t,r,n,i,o,a,u)}function ge(e,t,r,n,i,o,a,u){ye("interface",e,t,r,n,i,o,a,u)}function be(e,t,r,n){me(e,"Companion",en,t,r,n,en,en)}function we(){this.MIN_VALUE=5e-324,this.MAX_VALUE=17976931348623157e292,this.POSITIVE_INFINITY=1/0,this.NEGATIVE_INFINITY=-1/0,this.NaN=NaN,this.SIZE_BYTES=8,this.SIZE_BITS=64}function Ee(e){return Array.isArray(e)}function _e(e,t){return function(e,t){var r=e.$imask$;return null!=r&&function(e,t){var r=t>>5;if(r>e.length)return!1;var n=1<<(31&t);return!(0===(e[r]&n))}(r,t)}(e,t.$metadata$.iid)}function Oe(e){return!!Ee(e)&&!e.$type$}function Se(e){var t,i=r(e);return"string"===i||"boolean"===i||"number"===typeof(t=e)||t instanceof _||_e(e,n)}function ke(e,t){return e.hasOwnProperty(t)}function Te(e,t){if(!(t>=0))throw Mt(B("Invalid new array size: "+t+"."));return function(e,t,r){var n=e.slice(0,t);void 0!==e.$type$&&(n.$type$=e.$type$);var i=e.length;if(t>i)for(n.length=t;i<t;){var o=i;i=o+1|0,n[o]=r}return n}(e,t,null)}function Re(){}function xe(e){return!(e===e)}function Pe(e){return function(e){if(e.m())return[];for(var t=e.f(),r=S(Array(t),null),n=e.c(),i=0;n.d();){var o=i;i=o+1|0,r[o]=n.e()}return r}(e)}function Ae(e){return 0===(t=[e]).length?We():qe(new Ar(t,!0));var t}function Le(e){return void 0!==e.toArray?e.toArray():Pe(e)}function je(e,t,r,n,i){nn.s1(n,i,e.length);var o=i-n|0;if(nn.s1(r,r+o|0,t.length),fn(t)&&fn(e)){var a=e.subarray(n,i);t.set(a,r)}else if(e!==t||r<=n){var u=0;if(u<o)do{var c=u;u=u+1|0,t[r+c|0]=e[n+c|0]}while(u<o)}else{var s=o-1|0;if(0<=s)do{var l=s;s=s+-1|0,t[r+l|0]=e[n+l|0]}while(0<=s)}}function Ie(e){return e<0&&function(){throw er("Index overflow has happened.")}(),e}function De(){sr.call(this)}function Ne(e){this.z1_1=e,this.x1_1=0,this.y1_1=-1}function Me(){De.call(this),this.a2_1=0}function Ce(){vr.call(this),this.i2_1=null,this.j2_1=null}function Fe(){De.call(this)}function Be(e){if(!(e>=0))throw Mt(B("capacity must be non-negative."));return S(Array(e),null)}function Ue(e,t,r){e.fill(null,t,r)}function Ge(e,t){return Te(e,t)}function He(e,t){e[t]=null}function Ve(){tn=this;var e=Ye(0);e.j_1=!0,this.s2_1=e}function We(){return e=F(V(Ke)),Ke.call(e,[]),e;var e}function Ye(e){return function(e,t){if(Ke.call(t,[]),!(e>=0))throw Mt(B("Negative initial capacity: "+e));return t}(e,F(V(Ke)))}function qe(e){return function(e,t){var r=Le(e);return Ke.call(t,r),t}(e,F(V(Ke)))}function ze(e,t){return nn.t2(t,e.f()),t}function Ke(e){null==tn&&new Ve,Me.call(this),this.i_1=e,this.j_1=!1}function $e(e,t){if(function(){var e=rn;if(null!=e)return e;rn=!1;var t=[],r=0;if(r<600)do{var n=r;r=r+1|0,t.push(n)}while(r<600);var i=Xe;t.sort(i);var o=1,a=t.length;if(o<a)do{var u=o;o=o+1|0;var c=t[u-1|0],s=t[u];if((3&c)===(3&s)&&c>=s)return!1}while(o<a);return rn=!0,!0}()){var r=(n=t,function(e,t){return n.compare(e,t)});e.sort(r)}else!function(e,t,r,n){var i=e.length,o=S(Array(i),null),a=function e(t,r,n,i,o){if(n===i)return t;var a=(n+i|0)/2|0,u=e(t,r,n,a,o),c=e(t,r,a+1|0,i,o),s=u===r?t:r,l=n,f=a+1|0,h=n;if(h<=i)do{var d=h;if(h=h+1|0,l<=a&&f<=i){var p=u[l],y=c[f];o.compare(p,y)<=0?(s[d]=p,l=l+1|0):(s[d]=y,f=f+1|0)}else l<=a?(s[d]=u[l],l=l+1|0):(s[d]=c[f],f=f+1|0)}while(d!==i);return s}(e,o,t,r,n);if(a!==e){var u=t;if(u<=r)do{var c=u;u=u+1|0,e[c]=a[c]}while(c!==r)}}(e,0,a(e),t);var n}function Xe(e,t){return(3&e)-(3&t)|0}function Je(e,t){return Ce.call(t),Ze.call(t),t.a3_1=e,t}function Qe(e){return Je(st(),e),e}function Ze(){this.b3_1=null}function et(e){Fe.call(this),this.d3_1=e}function tt(e){rt.call(this,e)}function rt(e){Fe.call(this),this.i3_1=e}function nt(e){this.q3_1=e}function it(e){Fe.call(this),this.r3_1=e}function ot(e){return function(e,t){Fe.call(t),at.call(t),t.t3_1=e}(st(),e),e}function at(){}function ut(e,t){return 0===(r=ln(h(t,1),3))?0:1<<(31-hn(r)|0);var r}function ct(e,t){return hn(t)+1|0}function st(){return lt(8,e=F(V(Tt))),e;var e}function lt(e,t){return Tt.call(t,Be(e),null,new Int32Array(e),new Int32Array(ut(0,e)),2,0),t}function ft(e){return e.v3_1.length}function ht(e){return e.y3_1.length}function dt(e){e.c4_1=e.c4_1+1|0}function pt(e,t){!function(e,t){var r=ft(e)-e.a4_1|0,n=e.a4_1-e.f()|0;return r<t&&(n+r|0)>=t&&n>=(ft(e)/4|0)}(e,t)?function(e,t){if(t<0)throw zt("too many elements");if(t>ft(e)){var r=nn.f4(ft(e),t);e.v3_1=Ge(e.v3_1,r);var n=e,i=e.w3_1;n.w3_1=null==i?null:Ge(i,r),e.x3_1=function(e,t){if(!(t>=0))throw Mt(B("Invalid new array size: "+t+"."));return function(e,t){for(var r=e.length,n=t.length,i=0,o=t;i<r&&i<n;){var a=i,u=i;i=u+1|0,o[a]=e[u]}return t}(e,new Int32Array(t))}(e.x3_1,r);var o=ut(0,r);o>ht(e)&&mt(e,o)}}(e,e.a4_1+t|0):vt(e,!0)}function yt(e,t){return null==t?0:ln(U(t),-1640531527)>>>e.b4_1|0}function vt(e,t){for(var r=0,n=0,i=e.w3_1;r<e.a4_1;){var o=e.x3_1[r];o>=0&&(e.v3_1[n]=e.v3_1[r],null!=i&&(i[n]=i[r]),t&&(e.x3_1[n]=o,e.y3_1[o]=n+1|0),n=n+1|0),r=r+1|0}Ue(e.v3_1,n,e.a4_1),null==i||Ue(i,n,e.a4_1),e.a4_1=n}function mt(e,t){dt(e),e.a4_1>e.d4_1&&vt(e,!1),e.y3_1=new Int32Array(t),e.b4_1=ct(0,t);for(var r=0;r<e.a4_1;){var n=r;if(r=n+1|0,!gt(e,n))throw Ut("This cannot happen with fixed magic multiplier and grow-only hash array. Have object hashCodes changed?")}}function gt(e,t){for(var r=yt(e,e.v3_1[t]),n=e.z3_1;;){if(0===e.y3_1[r])return e.y3_1[r]=t+1|0,e.x3_1[t]=r,!0;if((n=n-1|0)<0)return!1;var i=r;r=i-1|0,0===i&&(r=ht(e)-1|0)}}function bt(e,t){for(var r=yt(e,t),n=e.z3_1;;){var i=e.y3_1[r];if(0===i)return-1;if(i>0&&G(e.v3_1[i-1|0],t))return i-1|0;if((n=n-1|0)<0)return-1;var o=r;r=o-1|0,0===o&&(r=ht(e)-1|0)}}function wt(e,t){He(e.v3_1,t);var r=e.w3_1;null==r||He(r,t),function(e,t){for(var r=t,n=t,i=0,o=d(ln(e.z3_1,2),ht(e)/2|0);;){var a=r;if(r=a-1|0,0===a&&(r=ht(e)-1|0),(i=i+1|0)>e.z3_1)return e.y3_1[n]=0,Mr;var u=e.y3_1[r];if(0===u)return e.y3_1[n]=0,Mr;if(u<0?(e.y3_1[n]=-1,n=r,i=0):((yt(e,e.v3_1[u-1|0])-r|0)&(ht(e)-1|0))>=i&&(e.y3_1[n]=u,e.x3_1[u-1|0]=n,n=r,i=0),(o=o-1|0)<0)return e.y3_1[n]=-1,Mr}}(e,e.x3_1[t]),e.x3_1[t]=-1,e.d4_1=e.d4_1-1|0,dt(e)}function Et(){this.g4_1=-1640531527,this.h4_1=8,this.i4_1=2,this.j4_1=-1}function _t(e){this.k4_1=e,this.l4_1=0,this.m4_1=-1,this.n4_1=this.k4_1.c4_1,this.o4()}function Ot(e){_t.call(this,e)}function St(e){_t.call(this,e)}function kt(e,t){this.e5_1=e,this.f5_1=t}function Tt(e,t,r,n,i,o){this.v3_1=e,this.w3_1=t,this.x3_1=r,this.y3_1=n,this.z3_1=i,this.a4_1=o,this.b4_1=ct(0,ht(this)),this.c4_1=0,this.d4_1=0,this.e4_1=!1}function Rt(){}function xt(){return Qe(e=F(V(Pt))),Pt.call(e),e;var e}function Pt(){}function At(){return ot(e=F(V(Lt))),Lt.call(e),e;var e}function Lt(){}function jt(e){return W(e),Nt.call(e),e}function It(e,t){return W(t,e),Nt.call(t),t}function Dt(e){var t=It(e,F(V(Nt)));return H(t,Dt),t}function Nt(){H(this,Nt)}function Mt(e){var t=function(e,t){return qt(e,t),Ct.call(t),t}(e,F(V(Ct)));return H(t,Mt),t}function Ct(){H(this,Ct)}function Ft(e){var t=function(e,t){return qt(e,t),Bt.call(t),t}(e,F(V(Bt)));return H(t,Ft),t}function Bt(){H(this,Bt)}function Ut(e){var t=function(e,t){return qt(e,t),Gt.call(t),t}(e,F(V(Gt)));return H(t,Ut),t}function Gt(){H(this,Gt)}function Ht(){var e,t=(Yt(e=F(V(Wt))),Wt.call(e),e);return H(t,Ht),t}function Vt(e){var t=function(e,t){return qt(e,t),Wt.call(t),t}(e,F(V(Wt)));return H(t,Vt),t}function Wt(){H(this,Wt)}function Yt(e){return jt(e),Kt.call(e),e}function qt(e,t){return It(e,t),Kt.call(t),t}function zt(e){var t=qt(e,F(V(Kt)));return H(t,zt),t}function Kt(){H(this,Kt)}function $t(){var e,t=(Yt(e=F(V(Jt))),Jt.call(e),e);return H(t,$t),t}function Xt(e){var t=function(e,t){return qt(e,t),Jt.call(t),t}(e,F(V(Jt)));return H(t,Xt),t}function Jt(){H(this,Jt)}function Qt(){var e,t=(Yt(e=F(V(Zt))),Zt.call(e),e);return H(t,Qt),t}function Zt(){H(this,Zt)}function er(e){var t=function(e,t){return qt(e,t),tr.call(t),t}(e,F(V(tr)));return H(t,er),t}function tr(){H(this,tr)}function rr(){var e,t=(Yt(e=F(V(nr))),nr.call(e),e);return H(t,rr),t}function nr(){H(this,nr)}function ir(){var e,t=(Yt(e=F(V(or))),or.call(e),e);return H(t,ir),t}function or(){H(this,or)}function ar(e){return cr.call(e,""),e}function ur(){return ar(F(V(cr)))}function cr(e){this.a5_1=void 0!==e?e:""}function sr(){}function lr(){this.r1_1=2147483639}function fr(e){this.q5_1=e}function hr(e,t){return t===e?"(this Map)":w(t)}function dr(e,t){var r;e:{for(var n=e.u().c();n.d();){var i=n.e();if(G(i.p(),t)){r=i;break e}}r=null}return r}function pr(){}function yr(e){this.r5_1=e,gr.call(this)}function vr(){this.n2_1=null,this.o2_1=null}function mr(){}function gr(){sr.call(this)}function br(){return e=F(V(Rr)),Me.call(e),Rr.call(e),e.v5_1=Tr().x5_1,e;var e}function wr(e,t){if(t<0)throw Ut("Deque is too big.");if(t<=e.v5_1.length)return Mr;if(e.v5_1===Tr().x5_1){var r=e,n=h(t,10);return r.v5_1=S(Array(n),null),Mr}!function(e,t){var r=S(Array(t),null),n=e.v5_1,i=e.u5_1,o=e.v5_1.length;je(n,r,0,i,o);var a=e.v5_1,u=e.v5_1.length-e.u5_1|0,c=e.u5_1;je(a,r,u,0,c),e.u5_1=0,e.v5_1=r}(e,nn.f4(e.v5_1.length,t))}function Er(e,t){return t>=e.v5_1.length?t-e.v5_1.length|0:t}function _r(e,t){return t===a(e.v5_1)?0:t+1|0}function Or(e,t){return 0===t?a(e.v5_1):t-1|0}function Sr(e){e.a2_1=e.a2_1+1|0}function kr(){an=this,this.x5_1=[],this.y5_1=10}function Tr(){return null==an&&new kr,an}function Rr(){Tr(),this.u5_1=0,this.w5_1=0}function xr(){return null==un&&new Pr,un}function Pr(){un=this,this.f6_1=new _(-1478467534,-1720727600)}function Ar(e,t){this.h6_1=e,this.i6_1=t}function Lr(){}function jr(e){return e.f()-1|0}function Ir(){}function Dr(e,r,n){var i;null!=n?e.b(n(r)):null==r||"string"===typeof(i=r)||_e(i,t)?e.b(r):r instanceof p?e.d5(r.q6_1):e.b(w(r))}function Nr(e,t){this.l6_1=e,this.m6_1=t}var Mr,Cr,Fr,Br,Ur,Gr,Hr,Vr,Wr,Yr,qr,zr,Kr,$r,Xr,Jr,Qr,Zr,en,tn,rn,nn,on,an,un,cn,sn,ln=Math.imul,fn=ArrayBuffer.isView,hn=Math.clz32;return ge(t,"CharSequence"),ge(n,"Comparable"),ve(i,"Number"),me(o,"Unit"),ve(p,"Char",en,en,[n]),ge(v,"Collection"),ge(y,"List",en,en,[v]),ge(m,"Entry"),ge(g,"Map"),ge(b,"Set",en,en,[v]),be(E),ve(_,"Long",en,i,[i,n]),ve(k),me(we,"DoubleCompanionObject"),ge(Re,"Comparator"),ve(sr,"AbstractCollection",en,en,[v]),ve(De,"AbstractMutableCollection",en,sr,[sr,v]),ve(Ne,"IteratorImpl"),ve(Me,"AbstractMutableList",en,De,[De,v,y]),ve(vr,"AbstractMap",en,en,[g]),ve(Ce,"AbstractMutableMap",en,vr,[vr,g]),ve(Fe,"AbstractMutableSet",en,De,[De,b,v]),be(Ve),ve(Ke,"ArrayList",We,Me,[Me,v,y]),ve(Ze,"HashMap",(function(){return Qe(F(V(Ze)))}),Ce,[Ce,g]),ve(et,"HashMapKeys",en,Fe,[b,v,Fe]),ve(rt,"HashMapEntrySetBase",en,Fe,[b,v,Fe]),ve(tt,"HashMapEntrySet",en,rt),ve(nt),ve(it,"HashMapKeysDefault",en,Fe),ve(at,"HashSet",(function(){return ot(F(V(at)))}),Fe,[Fe,b,v]),be(Et),ve(_t,"Itr"),ve(Ot,"KeysItr",en,_t),ve(St,"EntriesItr",en,_t),ve(kt,"EntryRef",en,en,[m]),ge(Rt,"InternalMap"),ve(Tt,"InternalHashMap",st,en,[Rt]),ve(Pt,"LinkedHashMap",xt,Ze,[Ze,g]),ve(Lt,"LinkedHashSet",At,at,[at,b,v]),ve(Nt,"Exception",(function e(){var t=jt(F(V(Nt)));return H(t,e),t}),Error),ve(Kt,"RuntimeException",(function e(){var t=Yt(F(V(Kt)));return H(t,e),t}),Nt),ve(Ct,"IllegalArgumentException",(function e(){var t,r=(Yt(t=F(V(Ct))),Ct.call(t),t);return H(r,e),r}),Kt),ve(Bt,"IndexOutOfBoundsException",(function e(){var t,r=(Yt(t=F(V(Bt))),Bt.call(t),t);return H(r,e),r}),Kt),ve(Gt,"IllegalStateException",(function e(){var t,r=(Yt(t=F(V(Gt))),Gt.call(t),t);return H(r,e),r}),Kt),ve(Wt,"UnsupportedOperationException",Ht,Kt),ve(Jt,"NoSuchElementException",$t,Kt),ve(Zt,"ConcurrentModificationException",Qt,Kt),ve(tr,"ArithmeticException",(function e(){var t,r=(Yt(t=F(V(tr))),tr.call(t),t);return H(r,e),r}),Kt),ve(nr,"NullPointerException",rr,Kt),ve(or,"ClassCastException",ir,Kt),ve(cr,"StringBuilder",ur,en,[t]),be(lr),ve(fr),be(pr),ve(gr,"AbstractSet",en,sr,[sr,b]),ve(yr,en,en,gr),be(mr),be(kr),ve(Rr,"ArrayDeque",br,Me),me(Pr,"EmptyList",en,en,[y]),ve(Ar,"ArrayAsCollection",en,en,[v]),me(Lr,"EmptyIterator"),me(Ir,"ReverseOrderComparator",en,en,[Re]),ve(Nr,"Pair"),V(o).toString=function(){return"kotlin.Unit"},V(_).b1=function(e){return Q(this,e)},V(_).a=function(e){return this.b1(e instanceof _?e:q())},V(_).c1=function(e){return Z(this,e)},V(_).d1=function(e){return function(e,t){if(de(),ae(t))throw Dt("division by zero");if(ae(e))return z();if(ne(e,X())){if(ne(t,K())||ne(t,$()))return X();if(ne(t,X()))return K();var r=function(e,t){de();var r=63&t;return 0===r?e:r<32?new _(e.z_1<<r,e.a1_1<<r|e.z_1>>>(32-r|0)|0):new _(0,e.z_1<<(r-32|0))}(function(e,t){de();var r=63&t;return 0===r?e:r<32?new _(e.z_1>>>r|0|e.a1_1<<(32-r|0),e.a1_1>>r):new _(e.a1_1>>(r-32|0),e.a1_1>=0?0:-1)}(e,1).d1(t),1);if(ne(r,z()))return oe(t)?K():$();var n=ee(e,te(t,r));return Z(r,n.d1(t))}if(ne(t,X()))return z();if(oe(e))return oe(t)?ce(e).d1(ce(t)):ce(ce(e).d1(t));if(oe(t))return ce(e.d1(ce(t)));for(var i=z(),o=e;he(o,t);){for(var a=re(o)/re(t),u=Math.max(1,Math.floor(a)),c=Math.ceil(Math.log(u)/Math.LN2),s=c<=48?1:Math.pow(2,c-48),l=le(u),f=te(l,t);oe(f)||fe(f,o);)l=le(u-=s),f=te(l,t);ae(l)&&(l=K()),i=Z(i,l),o=ee(o,f)}return i}(this,e)},V(_).e1=function(){return this.f1().c1(new _(1,0))},V(_).f1=function(){return new _(~this.z_1,~this.a1_1)},V(_).g1=function(){return this.z_1},V(_).h1=function(){return re(this)},V(_).toString=function(){return function e(t,r){if(de(),r<2||36<r)throw Dt("radix out of range: "+r);if(ae(t))return"0";if(oe(t)){if(ne(t,X())){var n=ie(r),i=t.d1(n),o=ee(te(i,n),t).g1();return e(i,r)+o.toString(r)}return"-"+e(ce(t),r)}for(var a=2===r?31:r<=10?9:r<=21?7:r<=35?6:5,u=le(Math.pow(r,a)),c=t,s="";;){var l=c.d1(u),f=ee(c,te(l,u)).g1().toString(r);if(ae(c=l))return f+s;for(;f.length<a;)f="0"+f;s=f+s}}(this,10)},V(_).equals=function(e){return e instanceof _&&ne(this,e)},V(_).hashCode=function(){return e=this,de(),e.z_1^e.a1_1;var e},V(_).valueOf=function(){return this.h1()},V(k).d=function(){return!(this.i1_1===this.j1_1.length)},V(k).e=function(){if(this.i1_1===this.j1_1.length)throw Xt(""+this.i1_1);var e=this.i1_1;return this.i1_1=e+1|0,this.j1_1[e]},V(we).k1=function(){return this.MIN_VALUE},V(we).l1=function(){return this.MAX_VALUE},V(we).m1=function(){return this.POSITIVE_INFINITY},V(we).n1=function(){return this.NEGATIVE_INFINITY},V(we).o1=function(){return this.NaN},V(we).p1=function(){return this.SIZE_BYTES},V(we).q1=function(){return this.SIZE_BITS},V(De).u1=function(e){this.v1();for(var t=this.c();t.d();)if(G(t.e(),e))return t.w1(),!0;return!1},V(De).k=function(e){this.v1();for(var t=!1,r=e.c();r.d();){var n=r.e();this.l(n)&&(t=!0)}return t},V(De).toJSON=function(){return this.toArray()},V(De).v1=function(){},V(Ne).d=function(){return this.x1_1<this.z1_1.f()},V(Ne).e=function(){if(!this.d())throw $t();var e=this.x1_1;return this.x1_1=e+1|0,this.y1_1=e,this.z1_1.g(this.y1_1)},V(Ne).w1=function(){if(-1===this.y1_1)throw Ut(B("Call next() or previous() before removing element from the iterator."));this.z1_1.b2(this.y1_1),this.x1_1=this.y1_1,this.y1_1=-1},V(Me).l=function(e){return this.v1(),this.c2(this.f(),e),!0},V(Me).c=function(){return new Ne(this)},V(Me).n=function(e){return this.d2(e)>=0},V(Me).d2=function(e){var t;e:{for(var r=0,n=this.c();n.d();){if(G(n.e(),e)){t=r;break e}r=r+1|0}t=-1}return t},V(Me).equals=function(e){return e===this||!(null==e||!_e(e,y))&&nn.e2(this,e)},V(Me).hashCode=function(){return nn.f2(this)},V(Ce).k2=function(){return new it(this)},V(Ce).t=function(){var e,t=this.i2_1;if(null==t){var r=this.k2();this.i2_1=r,e=r}else e=t;return e},V(Ce).m2=function(e){this.v1();for(var t=this.u().c();t.d();){var r=t.e();if(G(e,r.p())){var n=r.q();return t.w1(),n}}return null},V(Ce).v1=function(){},V(Fe).equals=function(e){return e===this||!(null==e||!_e(e,b))&&on.q2(this,e)},V(Fe).hashCode=function(){return on.r2(this)},V(Ke).f=function(){return this.i_1.length},V(Ke).g=function(e){var t=this.i_1[ze(this,e)];return null==t||null!=t?t:q()},V(Ke).t1=function(e,t){this.v1(),ze(this,e);var r=this.i_1[e];return this.i_1[e]=t,null==r||null!=r?r:q()},V(Ke).l=function(e){return this.v1(),this.i_1.push(e),this.a2_1=this.a2_1+1|0,!0},V(Ke).c2=function(e,t){this.v1(),this.i_1.splice(function(e,t){return nn.u2(t,e.f()),t}(this,e),0,t),this.a2_1=this.a2_1+1|0},V(Ke).k=function(e){if(this.v1(),e.m())return!1;for(var t,r,n,i=(t=this,r=e.f(),n=t.f(),t.i_1.length=t.f()+r|0,n),o=0,a=e.c();a.d();){var u=a.e(),c=o;o=c+1|0;var s=Ie(c);this.i_1[i+s|0]=u}return this.a2_1=this.a2_1+1|0,!0},V(Ke).b2=function(e){return this.v1(),ze(this,e),this.a2_1=this.a2_1+1|0,e===jr(this)?this.i_1.pop():this.i_1.splice(e,1)[0]},V(Ke).d2=function(e){return u(this.i_1,e)},V(Ke).toString=function(){return e=this.i_1,t=(t=", ")===en?", ":t,r=(r="[")===en?"":r,n=(n="]")===en?"":n,i=(i=en)===en?-1:i,o=(o=en)===en?"...":o,a=(a=j)===en?null:a,function(e,t,r,n,i,o,a,u){r=r===en?", ":r,n=n===en?"":n,i=i===en?"":i,o=o===en?-1:o,a=a===en?"...":a,u=u===en?null:u,t.b(n);var c=0,s=0,l=e.length;e:for(;s<l;){var f=e[s];if(s=s+1|0,(c=c+1|0)>1&&t.b(r),!(o<0||c<=o))break e;Dr(t,f,u)}return o>=0&&c>o&&t.b(a),t.b(i),t}(e,ur(),t,r,n,i,o,a).toString();var e,t,r,n,i,o,a},V(Ke).v2=function(){return[].slice.call(this.i_1)},V(Ke).toArray=function(){return this.v2()},V(Ke).v1=function(){if(this.j_1)throw Ht()},V(Ze).r=function(e){return this.a3_1.c3(e)},V(Ze).k2=function(){return new et(this.a3_1)},V(Ze).u=function(){var e,t=this.b3_1;if(null==t){var r=new tt(this.a3_1);this.b3_1=r,e=r}else e=t;return e},V(Ze).s=function(e){return this.a3_1.s(e)},V(Ze).l2=function(e,t){return this.a3_1.l2(e,t)},V(Ze).m2=function(e){return this.a3_1.m2(e)},V(Ze).f=function(){return this.a3_1.f()},V(et).f=function(){return this.d3_1.f()},V(et).m=function(){return 0===this.d3_1.f()},V(et).n=function(e){return this.d3_1.c3(e)},V(et).l=function(e){throw Ht()},V(et).k=function(e){throw Ht()},V(et).u1=function(e){return this.d3_1.e3(e)},V(et).c=function(){return this.d3_1.f3()},V(et).v1=function(){return this.d3_1.g3()},V(tt).c=function(){return this.i3_1.j3()},V(rt).f=function(){return this.i3_1.f()},V(rt).m=function(){return 0===this.i3_1.f()},V(rt).k3=function(e){return this.i3_1.n3(e)},V(rt).n=function(e){return!(null==e||!_e(e,m))&&this.k3(null!=e&&_e(e,m)?e:q())},V(rt).l3=function(e){throw Ht()},V(rt).l=function(e){return this.l3(null!=e&&_e(e,m)?e:q())},V(rt).k=function(e){throw Ht()},V(rt).m3=function(e){return this.i3_1.o3(e)},V(rt).u1=function(e){return!(null==e||!_e(e,m))&&this.m3(null!=e&&_e(e,m)?e:q())},V(rt).o=function(e){return this.i3_1.p3(e)},V(rt).v1=function(){return this.i3_1.g3()},V(nt).d=function(){return this.q3_1.d()},V(nt).e=function(){return this.q3_1.e().p()},V(nt).w1=function(){return this.q3_1.w1()},V(it).s3=function(e){throw Vt("Add is not supported on keys")},V(it).l=function(e){return this.s3(null==e||null!=e?e:q())},V(it).c3=function(e){return this.r3_1.r(e)},V(it).n=function(e){return(null==e||null!=e)&&this.c3(null==e||null!=e?e:q())},V(it).c=function(){return new nt(this.r3_1.u().c())},V(it).m2=function(e){return this.v1(),!!this.r3_1.r(e)&&(this.r3_1.m2(e),!0)},V(it).u1=function(e){return(null==e||null!=e)&&this.m2(null==e||null!=e?e:q())},V(it).f=function(){return this.r3_1.f()},V(it).v1=function(){return this.r3_1.v1()},V(at).l=function(e){return null==this.t3_1.l2(e,!0)},V(at).u3=function(){this.t3_1.u3()},V(at).n=function(e){return this.t3_1.c3(e)},V(at).m=function(){return 0===this.t3_1.f()},V(at).c=function(){return this.t3_1.f3()},V(at).u1=function(e){return!(null==this.t3_1.m2(e))},V(at).f=function(){return this.t3_1.f()},V(_t).o4=function(){for(;this.l4_1<this.k4_1.a4_1&&this.k4_1.x3_1[this.l4_1]<0;)this.l4_1=this.l4_1+1|0},V(_t).d=function(){return this.l4_1<this.k4_1.a4_1},V(_t).w1=function(){if(this.p4(),-1===this.m4_1)throw Ut(B("Call next() before removing element from the iterator."));this.k4_1.g3(),wt(this.k4_1,this.m4_1),this.m4_1=-1,this.n4_1=this.k4_1.c4_1},V(_t).p4=function(){if(this.k4_1.c4_1!==this.n4_1)throw Qt()},V(Ot).e=function(){if(this.p4(),this.l4_1>=this.k4_1.a4_1)throw $t();var e=this.l4_1;this.l4_1=e+1|0,this.m4_1=e;var t=this.k4_1.v3_1[this.m4_1];return this.o4(),t},V(St).e=function(){if(this.p4(),this.l4_1>=this.k4_1.a4_1)throw $t();var e=this.l4_1;this.l4_1=e+1|0,this.m4_1=e;var t=new kt(this.k4_1,this.m4_1);return this.o4(),t},V(St).y4=function(){if(this.l4_1>=this.k4_1.a4_1)throw $t();var e=this.l4_1;this.l4_1=e+1|0,this.m4_1=e;var t=this.k4_1.v3_1[this.m4_1],r=null==t?null:U(t),n=null==r?0:r,i=Y(this.k4_1.w3_1)[this.m4_1],o=null==i?null:U(i),a=n^(null==o?0:o);return this.o4(),a},V(St).z4=function(e){if(this.l4_1>=this.k4_1.a4_1)throw $t();var t=this.l4_1;this.l4_1=t+1|0,this.m4_1=t;var r=this.k4_1.v3_1[this.m4_1];G(r,this.k4_1)?e.c5("(this Map)"):e.b5(r),e.d5(61);var n=Y(this.k4_1.w3_1)[this.m4_1];G(n,this.k4_1)?e.c5("(this Map)"):e.b5(n),this.o4()},V(kt).p=function(){return this.e5_1.v3_1[this.f5_1]},V(kt).q=function(){return Y(this.e5_1.w3_1)[this.f5_1]},V(kt).equals=function(e){return!(null==e||!_e(e,m)||!G(e.p(),this.p()))&&G(e.q(),this.q())},V(kt).hashCode=function(){var e=this.p(),t=null==e?null:U(e),r=null==t?0:t,n=this.q(),i=null==n?null:U(n);return r^(null==i?0:i)},V(kt).toString=function(){return w(this.p())+"="+w(this.q())},V(Tt).f=function(){return this.d4_1},V(Tt).s=function(e){var t=bt(this,e);return t<0?null:Y(this.w3_1)[t]},V(Tt).c3=function(e){return bt(this,e)>=0},V(Tt).l2=function(e,t){var r=function(e,t){e.g3();e:for(;;)for(var r=yt(e,t),n=d(ln(e.z3_1,2),ht(e)/2|0),i=0;;){var o=e.y3_1[r];if(o<=0){if(e.a4_1>=ft(e)){pt(e,1);continue e}var a=e.a4_1;e.a4_1=a+1|0;var u=a;return e.v3_1[u]=t,e.x3_1[u]=r,e.y3_1[r]=u+1|0,e.d4_1=e.d4_1+1|0,dt(e),i>e.z3_1&&(e.z3_1=i),u}if(G(e.v3_1[o-1|0],t))return 0|-o;if((i=i+1|0)>n){mt(e,ln(ht(e),2));continue e}var c=r;r=c-1|0,0===c&&(r=ht(e)-1|0)}}(this,e),n=function(e){var t=e.w3_1;if(null!=t)return t;var r=Be(ft(e));return e.w3_1=r,r}(this);if(r<0){var i=n[(0|-r)-1|0];return n[(0|-r)-1|0]=t,i}return n[r]=t,null},V(Tt).m2=function(e){this.g3();var t=bt(this,e);if(t<0)return null;var r=Y(this.w3_1)[t];return wt(this,t),r},V(Tt).u3=function(){this.g3();var e=0,t=this.a4_1-1|0;if(e<=t)do{var r=e;e=e+1|0;var n=this.x3_1[r];n>=0&&(this.y3_1[n]=0,this.x3_1[r]=-1)}while(r!==t);Ue(this.v3_1,0,this.a4_1);var i=this.w3_1;null==i||Ue(i,0,this.a4_1),this.d4_1=0,this.a4_1=0,dt(this)},V(Tt).equals=function(e){return e===this||!(null==e||!_e(e,g))&&function(e,t){return e.d4_1===t.f()&&e.p3(t.u())}(this,e)},V(Tt).hashCode=function(){for(var e=0,t=this.j3();t.d();)e=e+t.y4()|0;return e},V(Tt).toString=function(){var e,t=(ln(this.d4_1,3),ar(e=F(V(cr))),e);t.c5("{");for(var r=0,n=this.j3();n.d();)r>0&&t.c5(", "),n.z4(t),r=r+1|0;return t.c5("}"),t.toString()},V(Tt).g3=function(){if(this.e4_1)throw Ht()},V(Tt).e3=function(e){this.g3();var t=bt(this,e);return!(t<0)&&(wt(this,t),!0)},V(Tt).n3=function(e){var t=bt(this,e.p());return!(t<0)&&G(Y(this.w3_1)[t],e.q())},V(Tt).g5=function(e){return this.n3(_e(e,m)?e:q())},V(Tt).o3=function(e){this.g3();var t=bt(this,e.p());return!(t<0)&&!!G(Y(this.w3_1)[t],e.q())&&(wt(this,t),!0)},V(Tt).f3=function(){return new Ot(this)},V(Tt).j3=function(){return new St(this)},V(Pt).v1=function(){return this.a3_1.g3()},V(Lt).v1=function(){return this.t3_1.g3()},V(cr).d5=function(e){var t;return this.a5_1=this.a5_1+(t=e,String.fromCharCode(t)),this},V(cr).b=function(e){return this.a5_1=this.a5_1+w(e),this},V(cr).b5=function(e){return this.a5_1=this.a5_1+w(e),this},V(cr).c5=function(e){var t=this.a5_1;return this.a5_1=t+(null==e?"null":e),this},V(cr).toString=function(){return this.a5_1},V(sr).n=function(e){var t;e:if(_e(this,v)&&this.m())t=!1;else{for(var r=this.c();r.d();)if(G(r.e(),e)){t=!0;break e}t=!1}return t},V(sr).o=function(e){var t;e:if(_e(e,v)&&e.m())t=!0;else{for(var r=e.c();r.d();){var n=r.e();if(!this.n(n)){t=!1;break e}}t=!0}return t},V(sr).m=function(){return 0===this.f()},V(sr).toString=function(){return c(this,", ","[","]",en,en,(e=this,function(t){return t===e?"(this Collection)":w(t)}));var e},V(sr).toArray=function(){return Pe(this)},V(lr).t2=function(e,t){if(e<0||e>=t)throw Ft("index: "+e+", size: "+t)},V(lr).u2=function(e,t){if(e<0||e>t)throw Ft("index: "+e+", size: "+t)},V(lr).s1=function(e,t,r){if(e<0||t>r)throw Ft("fromIndex: "+e+", toIndex: "+t+", size: "+r);if(e>t)throw Mt("fromIndex: "+e+" > toIndex: "+t)},V(lr).f4=function(e,t){var r=e+(e>>1)|0;return(r-t|0)<0&&(r=t),(r-2147483639|0)>0&&(r=t>2147483639?2147483647:2147483639),r},V(lr).f2=function(e){for(var t=1,r=e.c();r.d();){var n=r.e(),i=ln(31,t),o=null==n?null:U(n);t=i+(null==o?0:o)|0}return t},V(lr).e2=function(e,t){if(e.f()!==t.f())return!1;for(var r=t.c(),n=e.c();n.d();)if(!G(n.e(),r.e()))return!1;return!0},V(fr).d=function(){return this.q5_1.d()},V(fr).e=function(){return this.q5_1.e().p()},V(yr).c3=function(e){return this.r5_1.r(e)},V(yr).n=function(e){return(null==e||null!=e)&&this.c3(null==e||null!=e?e:q())},V(yr).c=function(){return new fr(this.r5_1.u().c())},V(yr).f=function(){return this.r5_1.f()},V(vr).r=function(e){return!(null==dr(this,e))},V(vr).p2=function(e){if(null==e||!_e(e,m))return!1;var t=e.p(),r=e.q(),n=(_e(this,g)?this:q()).s(t);return!!G(r,n)&&!(null==n&&!(_e(this,g)?this:q()).r(t))},V(vr).equals=function(e){if(e===this)return!0;if(null==e||!_e(e,g))return!1;if(this.f()!==e.f())return!1;var t;e:{var r=e.u();if(_e(r,v)&&r.m())t=!0;else{for(var n=r.c();n.d();){var i=n.e();if(!this.p2(i)){t=!1;break e}}t=!0}}return t},V(vr).s=function(e){var t=dr(this,e);return null==t?null:t.q()},V(vr).hashCode=function(){return U(this.u())},V(vr).f=function(){return this.u().f()},V(vr).t=function(){return null==this.n2_1&&(this.n2_1=new yr(this)),Y(this.n2_1)},V(vr).toString=function(){var e;return c(this.u(),", ","{","}",en,en,(e=this,function(t){return e.s5(t)}))},V(vr).s5=function(e){return hr(this,e.p())+"="+hr(this,e.q())},V(mr).r2=function(e){for(var t=0,r=e.c();r.d();){var n=r.e(),i=t,o=null==n?null:U(n);t=i+(null==o?0:o)|0}return t},V(mr).q2=function(e,t){return e.f()===t.f()&&e.o(t)},V(gr).equals=function(e){return e===this||!(null==e||!_e(e,b))&&on.q2(this,e)},V(gr).hashCode=function(){return on.r2(this)},V(Rr).f=function(){return this.w5_1},V(Rr).m=function(){return 0===this.w5_1},V(Rr).z5=function(e){Sr(this),wr(this,this.w5_1+1|0),this.u5_1=Or(this,this.u5_1),this.v5_1[this.u5_1]=e,this.w5_1=this.w5_1+1|0},V(Rr).a6=function(e){Sr(this),wr(this,this.w5_1+1|0);var t=this.v5_1,r=this.w5_1;t[Er(this,this.u5_1+r|0)]=e,this.w5_1=this.w5_1+1|0},V(Rr).b6=function(){if(this.m())throw Xt("ArrayDeque is empty.");Sr(this);var e=this.u5_1,t=this.v5_1[e],r=null==t||null!=t?t:q();return this.v5_1[this.u5_1]=null,this.u5_1=_r(this,this.u5_1),this.w5_1=this.w5_1-1|0,r},V(Rr).c6=function(){return this.m()?null:this.b6()},V(Rr).d6=function(){if(this.m())throw Xt("ArrayDeque is empty.");Sr(this);var e=jr(this),t=Er(this,this.u5_1+e|0),r=this.v5_1[t],n=null==r||null!=r?r:q();return this.v5_1[t]=null,this.w5_1=this.w5_1-1|0,n},V(Rr).l=function(e){return this.a6(e),!0},V(Rr).c2=function(e,t){if(nn.u2(e,this.w5_1),e===this.w5_1)return this.a6(t),Mr;if(0===e)return this.z5(t),Mr;Sr(this),wr(this,this.w5_1+1|0);var r=Er(this,this.u5_1+e|0);if(e<(this.w5_1+1|0)>>1){var n=Or(this,r),i=Or(this,this.u5_1);n>=this.u5_1?(this.v5_1[i]=this.v5_1[this.u5_1],je(this.v5_1,this.v5_1,this.u5_1,this.u5_1+1|0,n+1|0)):(je(this.v5_1,this.v5_1,this.u5_1-1|0,this.u5_1,this.v5_1.length),this.v5_1[this.v5_1.length-1|0]=this.v5_1[0],je(this.v5_1,this.v5_1,0,1,n+1|0)),this.v5_1[n]=t,this.u5_1=i}else{var o=this.w5_1,a=Er(this,this.u5_1+o|0);r<a?je(this.v5_1,this.v5_1,r+1|0,r,a):(je(this.v5_1,this.v5_1,1,0,a),this.v5_1[0]=this.v5_1[this.v5_1.length-1|0],je(this.v5_1,this.v5_1,r+1|0,r,this.v5_1.length-1|0)),this.v5_1[r]=t}this.w5_1=this.w5_1+1|0},V(Rr).k=function(e){if(e.m())return!1;Sr(this),wr(this,this.w5_1+e.f()|0);var t=this.w5_1;return function(e,t,r){var n=r.c(),i=t,o=e.v5_1.length;if(i<o)e:do{var a=i;if(i=i+1|0,!n.d())break e;e.v5_1[a]=n.e()}while(i<o);var u=0,c=e.u5_1;if(u<c)e:do{var s=u;if(u=u+1|0,!n.d())break e;e.v5_1[s]=n.e()}while(u<c);e.w5_1=e.w5_1+r.f()|0}(this,Er(this,this.u5_1+t|0),e),!0},V(Rr).g=function(e){nn.t2(e,this.w5_1);var t=Er(this,this.u5_1+e|0),r=this.v5_1[t];return null==r||null!=r?r:q()},V(Rr).t1=function(e,t){nn.t2(e,this.w5_1);var r=Er(this,this.u5_1+e|0),n=this.v5_1[r],i=null==n||null!=n?n:q();return this.v5_1[r]=t,i},V(Rr).n=function(e){return!(-1===this.d2(e))},V(Rr).d2=function(e){var t=this.w5_1,r=Er(this,this.u5_1+t|0);if(this.u5_1<r){var n=this.u5_1;if(n<r)do{var i=n;if(n=n+1|0,G(e,this.v5_1[i]))return i-this.u5_1|0}while(n<r)}else if(this.u5_1>=r){var o=this.u5_1,a=this.v5_1.length;if(o<a)do{var u=o;if(o=o+1|0,G(e,this.v5_1[u]))return u-this.u5_1|0}while(o<a);var c=0;if(c<r)do{var s=c;if(c=c+1|0,G(e,this.v5_1[s]))return(s+this.v5_1.length|0)-this.u5_1|0}while(c<r)}return-1},V(Rr).b2=function(e){if(nn.t2(e,this.w5_1),e===jr(this))return this.d6();if(0===e)return this.b6();Sr(this);var t=Er(this,this.u5_1+e|0),r=this.v5_1[t],n=null==r||null!=r?r:q();if(e<this.w5_1>>1)t>=this.u5_1?je(this.v5_1,this.v5_1,this.u5_1+1|0,this.u5_1,t):(je(this.v5_1,this.v5_1,1,0,t),this.v5_1[0]=this.v5_1[this.v5_1.length-1|0],je(this.v5_1,this.v5_1,this.u5_1+1|0,this.u5_1,this.v5_1.length-1|0)),this.v5_1[this.u5_1]=null,this.u5_1=_r(this,this.u5_1);else{var i=jr(this),o=Er(this,this.u5_1+i|0);t<=o?je(this.v5_1,this.v5_1,t,t+1|0,o+1|0):(je(this.v5_1,this.v5_1,t,t+1|0,this.v5_1.length),this.v5_1[this.v5_1.length-1|0]=this.v5_1[0],je(this.v5_1,this.v5_1,0,1,o+1|0)),this.v5_1[o]=null}return this.w5_1=this.w5_1-1|0,n},V(Rr).e6=function(e){var t,r=e.length>=this.w5_1?e:(t=this.w5_1,S(Array(t),null)),n=Oe(r)?r:q(),i=this.w5_1,o=Er(this,this.u5_1+i|0);this.u5_1<o?je(this.v5_1,n,0,this.u5_1,o):this.m()||(je(this.v5_1,n,0,this.u5_1,this.v5_1.length),je(this.v5_1,n,this.v5_1.length-this.u5_1|0,0,o));var a=function(e,t){return t}(this.w5_1,n);return Oe(a)?a:q()},V(Rr).v2=function(){var e=this.w5_1,t=S(Array(e),null);return this.e6(t)},V(Rr).toArray=function(){return this.v2()},V(Pr).equals=function(e){return!(null==e||!_e(e,y))&&e.m()},V(Pr).hashCode=function(){return 1},V(Pr).toString=function(){return"[]"},V(Pr).f=function(){return 0},V(Pr).m=function(){return!0},V(Pr).g6=function(e){return e.m()},V(Pr).o=function(e){return this.g6(e)},V(Pr).g=function(e){throw Ft("Empty list doesn't contain element at index "+e+".")},V(Pr).c=function(){return cn},V(Ar).f=function(){return this.h6_1.length},V(Ar).m=function(){return 0===this.h6_1.length},V(Ar).j6=function(e){return function(e,t){return u(e,t)>=0}(this.h6_1,e)},V(Ar).k6=function(e){var t;e:if(_e(e,v)&&e.m())t=!0;else{for(var r=e.c();r.d();){var n=r.e();if(!this.j6(n)){t=!1;break e}}t=!0}return t},V(Ar).o=function(e){return this.k6(e)},V(Ar).c=function(){return new k(this.h6_1)},V(Lr).d=function(){return!1},V(Lr).e=function(){throw $t()},V(Ir).p6=function(e,t){return I(t,e)},V(Ir).compare=function(e,t){var r=null!=e&&Se(e)?e:q();return this.p6(r,null!=t&&Se(t)?t:q())},V(Nr).toString=function(){return"("+w(this.l6_1)+", "+w(this.m6_1)+")"},V(Nr).n6=function(){return this.l6_1},V(Nr).o6=function(){return this.m6_1},V(Nr).hashCode=function(){var e=null==this.l6_1?0:U(this.l6_1);return e=ln(e,31)+(null==this.m6_1?0:U(this.m6_1))|0},V(Nr).equals=function(e){if(this===e)return!0;if(!(e instanceof Nr))return!1;var t=e instanceof Nr?e:q();return!!G(this.l6_1,t.l6_1)&&!!G(this.m6_1,t.m6_1)},V(Tt).p3=function(e){var t;e:if(_e(e,v)&&e.m())t=!0;else{for(var r=e.c();r.d();){var n=r.e();if(null==n||!_e(n,m)||!this.g5(n)){t=!1;break e}}t=!0}return t},Mr=new o,new we,rn=null,new Et,nn=new lr,new pr,on=new mr,cn=new Lr,sn=new Ir,e.$_$=e.$_$||{},e.$_$.a=en,e.$_$.b=br,e.$_$.c=We,e.$_$.d=xt,e.$_$.e=At,e.$_$.f=$t,e.$_$.g=zt,e.$_$.h=Mr,e.$_$.i=Le,e.$_$.j=xr,e.$_$.k=Ae,e.$_$.l=function(e){return n=(t=[e]).length,function(e,t){for(var r=0,n=t.length;r<n;){var i=t[r];r=r+1|0;var o=i.n6(),a=i.o6();e.l2(o,a)}}(r=function(e,t){return function(e,t,r){Je(function(e,t){return function(e,t,r){if(lt(e,r),!(t>0))throw Mt(B("Non-positive load factor: "+t));return r}(e,t,F(V(Tt)))}(e,t),r)}(e,1,t),t}(n,F(V(Ze))),t),r;var t,r,n},e.$_$.m=function(e,t){if(_e(t,v)){var r=Ye(e.f()+t.f()|0);return r.k(e),r.k(t),r}var n=qe(e);return function(e,t){if(_e(t,v))return e.k(t);for(var r=t.c();r.d();){var n=r.e();e.l(n)&&!0}}(n,t),n},e.$_$.n=function(e){return function(e,t){if(_e(e,v)){if(e.f()<=1)return s(e);var r=Le(e),n=Oe(r)?r:q();return function(e,t){e.length>1&&$e(e,t)}(n,t),function(e){return new Ke(e)}(n)}var i=f(e);return function(e,t){!function(e,t){if(e.f()<=1)return Mr;var r=Le(e);$e(r,t);var n=0,i=r.length;if(n<i)do{var o=n;n=n+1|0,e.t1(o,r[o])}while(n<i)}(e,t)}(i,t),i}(e,_e(t=sn,Re)?t:q());var t},e.$_$.o=s,e.$_$.p=I,e.$_$.q=function(e,t,r,n){return Object.defineProperty(e,t,{configurable:!0,get:r,set:n})},e.$_$.r=G,e.$_$.s=ve,e.$_$.t=be,e.$_$.u=ge,e.$_$.v=function(e){return e instanceof _?e:le(e)},e.$_$.w=V,e.$_$.x=function(e){return!function(e){return e===1/0||e===-1/0}(e)&&!xe(e)},e.$_$.y=xe,e.$_$.z=function(e,t){return new Nr(e,t)},e})?n.apply(t,i):n)||(e.exports=o)},81524:function(e,t,r){var n,i,o;i=[t,r(89151)],void 0===(o="function"===typeof(n=function(e,t){"use strict";function r(e,t){return e=e===Me?null:e,this.f7(e)}function n(){ye=this,this.v6_1=(new K).getValue()}function i(){return null==ye&&new n,ye}function o(e){i(),this.r6_1=e;var t=this.r6_1;this.s6_1=null==t?null:t.flags;var r=this.r6_1;this.t6_1=new y(null==r?null:r.skippableFragments),this.u6_1=function(e){var t,r=e.r6_1;if(null!=(null==r?null:r.rules)){for(var n=xe(),i=e.r6_1.rules,o=0,a=i.length;o<a;){var u=i[o];o=o+1|0;var c=u.priority,s=u.rules;n.l2(c,s)}t=n}else{var l=[e.t6_1,new v];t=Re(Te(0,l))}return t}(this)}function a(e,t,r){this.disableDynamicBuffer=e,this.lowBufferBeforeStart=t,this.defaultBuffer=r}function u(e,t,r){this.skippableFragments=e,this.flags=t,this.rules=r}function c(){}function s(e,t,r){r=r!==Me&&r,this.startTime=e,this.endTime=t,this.autoSkip=r}function l(e,t,r){this.watchedTime=e,this.currentTime=t,this.flags=r}function f(e){e=e===Me?null:e,this.l7_1=e}function h(e){e=e===Me?null:e,this.m7_1=e}function d(e,t){this.watchedTime=e,this.currentTime=t}function p(e,t){this.priority=e,this.rules=t}function y(e){e=e===Me?null:e,this.w6_1=e}function v(){}function m(){return ge||(ge=!0,ve=new T(5,.45)),ve}function g(){me=this,this.o7_1=null,this.p7_1=new te}function b(){return null==me&&new g,me}function w(e,t){b(),e=e===Me?NaN:e,t=t===Me?null:t,this.u7_1=Be();var r,n=null==t?null:t.halfLife;this.v7_1=null==n?m():n,this.w7_1=new k(e,!0),this.x7_1=(r=this,function(e){return r.sample(e.durationMs,e.sizeBytes),Pe})}function E(e){e=e===Me?null:e,this.halfLife=e}function _(e){this.z7_1=NaN,this.a8_1=0,this.b8_1=0,this.c8(e)}function O(){be=this,this.f8_1=new T(5,2),this.g8_1=new T(2,1)}function S(){return null==be&&new O,be}function k(e,t){S(),e=e===Me?NaN:e,t=t!==Me&&t,this.h8_1=e,this.i8_1=t,this.j8_1=new _(S().f8_1.fast),this.k8_1=new _(S().f8_1.slow),this.l8_1=0,this.m8_1=new Z}function T(e,t){this.slow=e,this.fast=t}function R(e,t){e=e===Me?null:e,t=t===Me?null:t,this.okMessage=e,this.errorMessage=t}function x(e,t){this.value=e,this.source=t}function P(){this.MAX="max",this.MIN="min",this.DEFAULT="default"}function A(){return we}function L(){}function j(e,t){Ve(t)&&function(e,t){for(e.b9_1.l(t);e.b9_1.w5_1>20;)e.b9_1.c6()}(e,t)}function I(e){var t=e.b9_1.c();if(!t.d())throw We();for(var r=t.e();t.d();){var n=t.e(),i=r;r=Math.max(i,n)}return r}function D(){this.b9_1=Ye()}function N(e,t,r){this.hasGoodEstimate=e,this.value=t,this.history=r}function M(e,t,r){r=r!==Me&&r,this.durationMs=e,this.sizeBytes=t,this.isLowLatency=r}function C(e,t){var r,n=V().h9_1;if(_e.r7_1){var i=t.sizeBytes;Ve(i)&&(e.k9_1=e.k9_1+i),r=Pe}else{e:{var o=n.s7_1;try{if(o.t7_1.n(o))throw Fe("runLocked: recursion lock error");o.t7_1.l(o);var a=t.sizeBytes;Ve(a)&&(e.k9_1=e.k9_1+a);break e}finally{o.t7_1.u1(o)}}r=Pe}return r}function F(e,t){var r,n=V().h9_1;if(_e.r7_1){var i,o=e.p9_1.s(t),a=null==o?null:o.t9_1,u=null==a?0:a,c=e.p9_1.s(t);if(null==c||(c.t9_1=u+1|0),e.l9_1=e.l9_1+1|0,e.m9_1)i=!0;else{var s=e.s9_1;i=!0===(null==s?null:s.y9())}if(i)return Pe;e.m9_1=!0,e.n9_1=e.i9_1.create();var l,f=e.s9_1;null==f?l=null:(f.start(),l=Pe),r=l}else{var h;e:{var d=n.s7_1;try{if(d.t7_1.n(d))throw Fe("runLocked: recursion lock error");d.t7_1.l(d);var p,y=e.p9_1.s(t),v=null==y?null:y.t9_1,m=null==v?0:v,g=e.p9_1.s(t);if(null==g||(g.t9_1=m+1|0),e.l9_1=e.l9_1+1|0,e.m9_1)p=!0;else{var b=e.s9_1;p=!0===(null==b?null:b.y9())}if(p)return Pe;e.m9_1=!0,e.n9_1=e.i9_1.create();var w,E=e.s9_1;null==E?w=null:(E.start(),w=Pe),h=w;break e}finally{d.t7_1.u1(d)}}r=h}return r}function B(e,t){var r,n=V().h9_1;if(_e.r7_1){var i=e.p9_1.s(t),o=null==i?null:i.t9_1,a=null==o?0:o,u=e.p9_1.s(t);if(null==u);else{var c=a-1|0;u.t9_1=Math.max(c,0)}var s=e,l=e.l9_1-1|0;s.l9_1=Math.max(l,0),r=Pe}else{e:{var f=n.s7_1;try{if(f.t7_1.n(f))throw Fe("runLocked: recursion lock error");f.t7_1.l(f);var h=e.p9_1.s(t),d=null==h?null:h.t9_1,p=null==d?0:d,y=e.p9_1.s(t);if(null==y);else{var v=p-1|0;y.t9_1=Math.max(v,0)}var m=e,g=e.l9_1-1|0;m.l9_1=Math.max(g,0);break e}finally{f.t7_1.u1(f)}}r=Pe}return r}function U(e){var t=e.n9_1,r=null==t?null:t.getDurationMs();return null==r?0:r}function G(e,t,r){e=e===Me?0:e,this.t9_1=e,this.u9_1=t,this.v9_1=r}function H(){Ee=this,this.h9_1=new te}function V(){return null==Ee&&new H,Ee}function W(e,t){V(),t=t===Me?null:t,this.i9_1=e,this.j9_1=t,this.k9_1=0,this.l9_1=0,this.m9_1=!1,this.n9_1=null,this.o9_1=new J,this.p9_1=xe();var r=this.j9_1,n=null==r?null:r.experimentalFlags;this.q9_1=null==n?null:n.experimentalEmitZeroProgressAfterTimeMs;var i=this.j9_1,o=null==i?null:i.experimentalFlags,a=null==o?null:o.experimentalCallProcessAfterLastResponseEnd;this.r9_1=null!=a&&a;var u,c,s,l,f=this.j9_1,h=null==f?null:f.experimentalFlags,d=null==h?null:h.experimentalProcessIntervalMs,p=null==d?100:d,y=this.j9_1,v=null==y?null:y.intervalTaskFactory;u=null==v?null:v.create((c=this,(s=function(){return c.process(),Pe}).callableName="process",s),p),l=null==u?null:new Q(u),this.s9_1=l}function Y(e,t,r){e=e===Me?null:e,t=t===Me?null:t,r=r===Me?null:r,this.experimentalEmitZeroProgressAfterTimeMs=e,this.experimentalProcessIntervalMs=t,this.experimentalCallProcessAfterLastResponseEnd=r}function q(e,t){e=e===Me?null:e,t=t===Me?null:t,this.intervalTaskFactory=e,this.experimentalFlags=t}function z(){this.ga_1=null,this.ha_1=null,this.ia_1=null}function K(e){e=e===Me?null:e,this.ja_1=e}function $(e){e=e===Me?null:e,this.ka_1=e}function X(e){e=e===Me?null:e,this.la_1=e}function J(){this.z9_1=Be()}function Q(e){this.w9_1=e,this.x9_1=!1}function Z(e){e=e===Me?null:e,this.o8_1=e,this.p8_1=Be()}function ee(){this.r7_1=!1}function te(){this.s7_1=new de}function re(){}function ne(e){this.watchedTimeProvider=e,this.platformRulesBuilder=null,this.defaultBufferGoalMs=3e4}function ie(){this.ua_1=3e4}function oe(e,t){this.va_1=e,this.wa_1=t}function ae(e,t){var r=new ne(e);return t(r),r.sa()}function ue(){}function ce(){return Oe}function se(){}function le(e,t){this.za_1=e,this.ab_1=t}function fe(e,t){this.cb_1=e,this.db_1=t}function he(e,t){e=e===Me?(ke||(ke=!0,Se=[new fe(0,5e3),new fe(15e3,15e3)]),Se):e,this.eb_1=e,this.fb_1=t}function de(){this.t7_1=Be()}function pe(){this.hb_1=0}var ye,ve,me,ge,be,we,Ee,_e,Oe,Se,ke,Te=t.$_$.z,Re=t.$_$.l,xe=t.$_$.d,Pe=t.$_$.h,Ae=t.$_$.w,Le=t.$_$.t,je=t.$_$.s,Ie=t.$_$.n,De=t.$_$.c,Ne=t.$_$.p,Me=t.$_$.a,Ce=t.$_$.u,Fe=t.$_$.g,Be=t.$_$.e,Ue=t.$_$.q,Ge=t.$_$.y,He=t.$_$.v,Ve=t.$_$.x,We=t.$_$.f,Ye=t.$_$.b,qe=t.$_$.i,ze=t.$_$.o,Ke=t.$_$.r,$e=t.$_$.k,Xe=t.$_$.j,Je=t.$_$.m;return Le(n),je(o,"BufferGoalManager"),je(a,"BufferGoalManagerFlags"),je(u,"BufferGoalManagerProps"),Ce(c,"BufferGoalRule"),je(s,"SkippableFragment"),je(l,"BufferGoalRuleProps"),je(f,"WatchedTime",f),je(h,"CurrentTime",h),je(d,"GetBufferGoalProps"),je(p,"Rules"),je(y,"SkippableFragmentsRule",y,Me,[c]),je(v,"WatchedTimeRule",v,Me,[c]),Le(g),je(w,"BandwidthEstimator",w),je(E,"BandwidthEstimatorParams",E),je(_,"EWMA"),Le(O),je(k,"EwmaBandwidthEstimatorV2",k),je(T,"HalfLife"),je(R,"Result",R),je(x,"TtfbEstimate"),Le(P),je(L,"TtfbEstimateSource",L),je(D,"TtfbEstimator",D),je(N,"TtfbEstimatorDebugInfo"),je(M,"BandwidthInfo"),je(G,"FetcherInfo"),Le(H),je(W,"FetcherProgressAccumulator"),je(Y,"FetcherProgressAccumulatorExperimentalFlags",Y),je(q,"FetcherProgressAccumulatorParams",q),je(z,"SingleListenerFetcher",z),je(K,"DefaultBuffer",K),je($,"DisableDynamicBuffer",$),je(X,"LowBufferBeforeStart",X),je(J,"EventEmitter",J),je(Q,"IntervalTaskWithState"),je(Z,"Signal",Z),Le(ee),je(te,"Mutex",te),Ce(re,"BufferGoalManager"),je(ne,"Builder"),Le(ie),je(oe,"BufferGoalManagerConfig"),Le(ue),je(se,"BufferGoalManagerFactory",se),je(le,"BufferGoalManagerImpl",Me,Me,[re]),je(fe,"Edge"),je(he,"WatchedTimeRule"),je(de,"PlatformMutex",de),je(pe,"WatchedTimeProviderImpl",pe),Ae(o).getBufferGoal=function(e){var t=this.s6_1,r=null==t?null:t.defaultBuffer,n=null==r?null:r.getValue(),o=null==n?i().v6_1:n,a=this.s6_1,u=null==a?null:a.disableDynamicBuffer;if(!0===(null==u?null:u.getValue()))return o;var c=null==e?null:e.watchedTime,s=null==c?null:c.getValue(),f=null==e?null:e.currentTime,h=new l(s,null==f?null:f.getValue(),this.s6_1),d=function(e,t){for(var r=Ie(e.t()).c();r.d();){var n,i=r.e(),o=e.s(i);if(null==o)n=null;else{for(var a=De(),u=0,c=o.length;u<c;){var s=o[u];u=u+1|0;var l=s.getBufferGoal(t);null==l||a.l(l)}n=a}var f,h=n;if(null==h)f=null;else{var d,p=h.c();if(p.d()){var y=p.e();if(p.d()){var v=y;do{var m=p.e(),g=m;Ne(v,g)>0&&(y=m,v=g)}while(p.d());d=y}else d=y}else d=null;f=d}var b=f;if(null!=b)return b}return null}(this.u6_1,h);return null==d?o:d},Ae(o).setSkippableFragments=function(e){this.t6_1.x6(e)},Ae(o).getSkippableFragments=function(){return this.t6_1.y6()},Ae(a).z6=function(){return this.disableDynamicBuffer},Ae(a).a7=function(){return this.lowBufferBeforeStart},Ae(a).b7=function(){return this.defaultBuffer},Ae(u).c7=function(){return this.skippableFragments},Ae(u).d7=function(){return this.flags},Ae(u).e7=function(){return this.rules},Ae(s).g7=function(){return this.startTime},Ae(s).h7=function(){return this.endTime},Ae(s).i7=function(){return this.autoSkip},Ae(l).j7=function(){return this.watchedTime},Ae(l).k7=function(){return this.currentTime},Ae(l).d7=function(){return this.flags},Ae(f).getValue=function(){return this.l7_1},Ae(h).getValue=function(){return this.m7_1},Ae(d).j7=function(){return this.watchedTime},Ae(d).k7=function(){return this.currentTime},Ae(p).n7=function(){return this.priority},Ae(p).e7=function(){return this.rules},Ae(y).f7=function(e){var t,r,n=null==e?null:e.currentTime,i=null==n?0:n,o=this.w6_1;if(null==o)return null;e:{for(var a=0,u=o.length;a<u;){var c=o[a];if(a=a+1|0,c.startTime<=i&&i<c.endTime){t=c;break e}}t=null}if(null!=t)return t.startTime,3;e:{for(var s=0,l=o.length;s<l;){var f=o[s];if(s=s+1|0,i<f.startTime){r=f;break e}}r=null}return null!=r?r.startTime-i+5:null},Ae(y).x6=function(e){this.w6_1=e},Ae(y).y6=function(){return this.w6_1},Ae(v).f7=function(e){var t=null==e?null:e.watchedTime,r=null==t?0:t,n=null==e?null:e.flags,i=null==n?null:n.lowBufferBeforeStart;return!0===(null==i?null:i.getValue())&&r<=0?5:r<15?15:null},Ae(g).q7=function(e,t){var r=this.o7_1;if(null!=r)return r;var n=this.p7_1;if(_e.r7_1){var i=b().o7_1;if(null!=i)return i;var o=new w(e,t);return b().o7_1=o,o}var a=n.s7_1;try{if(a.t7_1.n(a))throw Fe("runLocked: recursion lock error");a.t7_1.l(a);var u=b().o7_1;if(null!=u)return u;var c=new w(e,t);return b().o7_1=c,c}finally{a.t7_1.u1(a)}},Ae(g).getInstance=function(e,t,r){return e=e===Me?NaN:e,t=t===Me?null:t,this.q7(e,t)},Ae(w).appendFetcher=function(e){this.u7_1.l(e),e.addProgressListener(this.x7_1)},Ae(w).removeFetcher=function(e){this.u7_1.u1(e),e.removeProgressListener(this.x7_1)},Ae(w).sample=function(e,t){return this.w7_1.sample(e,t,!1,2e3,this.v7_1)},Ae(w).getBandwidthEstimate=function(){return this.w7_1.getBandwidthEstimate()},Ae(w).hasGoodEstimate=function(){return this.w7_1.hasGoodEstimate()},Ae(w).setDefaultEstimate=function(e){this.w7_1.setDefaultEstimate(e)},Ae(w).addListener=function(e){this.w7_1.addListener(e)},Ae(w).removeListener=function(e){this.w7_1.removeListener(e)},Ae(w).removeAllListeners=function(){this.w7_1.removeAllListeners()},Ae(w).destroy=function(){for(var e=this.u7_1.c();e.d();)e.e().removeProgressListener(this.x7_1)},Ae(E).y7=function(){return this.halfLife},Ae(_).d8=function(e,t){var r=function(e,t,r){var n=e.z7_1,i=Math.pow(n,t);return r*(1-i)+i*e.a8_1}(this,e,t);Ge(r)||(this.a8_1=r,this.b8_1=this.b8_1+e)},Ae(_).e8=function(){var e=this.z7_1,t=this.b8_1,r=1-Math.pow(e,t);return this.a8_1/r},Ae(_).c8=function(e){var t=Math.log(.5)/e;this.z7_1=Math.exp(t)},Ae(k).n8=function(e,t,r,n,i){if(e<=0)return new R(Me,"Sample ["+He(t).toString()+"]/["+He(e).toString()+"] not applied. Reason: durationMs <= 0");if(t<(r?2e3:n))return new R(Me,"Sample ["+He(t).toString()+"]/["+He(e).toString()+"] not applied. Reason: too small sample. Min length = "+He(r?2e3:n).toString());!function(e,t){e.j8_1.c8(t.fast),e.k8_1.c8(t.slow)}(this,null==i?r?S().g8_1:S().f8_1:i);var o=8*t/(e/1e3),a=this.i8_1?.1:e/1e3;return this.l8_1=this.l8_1+t,this.j8_1.d8(a,o),this.k8_1.d8(a,o),this.m8_1.q8(this.getBandwidthEstimate()),new R("ok")},Ae(k).sample=function(e,t,r,n,i,o){return r=r!==Me&&r,n=n===Me?16e3:n,i=i===Me?null:i,this.n8(e,t,r,n,i)},Ae(k).getBandwidthEstimate=function(){return this.hasGoodEstimate()?(t=(e=this).j8_1.e8(),r=e.k8_1.e8(),Math.min(t,r)):this.h8_1;var e,t,r},Ae(k).hasGoodEstimate=function(){return this.l8_1>=128e3},Ae(k).setDefaultEstimate=function(e){this.h8_1=e},Ae(k).addListener=function(e){this.m8_1.r8(e)},Ae(k).removeListener=function(e){this.m8_1.s8(e)},Ae(k).removeAllListeners=function(){this.m8_1.u3()},Ae(T).t8=function(){return this.slow},Ae(T).u8=function(){return this.fast},Ae(R).v8=function(){return this.okMessage},Ae(R).w8=function(){return this.errorMessage},Ae(x).q=function(){return this.value},Ae(x).x8=function(){return this.source},Ae(P).y8=function(){return this.MAX},Ae(P).z8=function(){return this.MIN},Ae(P).a9=function(){return this.DEFAULT},Ae(D).appendFetcher=function(e){var t,r;e.addRequestTtfbListener((t=this,(r=function(e){return j(t,e),Pe}).callableName="handleTtfb",r))},Ae(D).removeFetcher=function(e){var t,r;e.removeRequestTtfbListener((t=this,(r=function(e){return j(t,e),Pe}).callableName="handleTtfb",r))},Ae(D).getMinTtfbEstimate=function(e){if(!this.hasGoodEstimate())return e;var t=this.b9_1.c();if(!t.d())throw We();for(var r=t.e();t.d();){var n=t.e(),i=r;r=Math.min(i,n)}return new x(r,"min")},Ae(D).getTtfbEstimate=function(e){return this.hasGoodEstimate()?new x(I(this),"max"):e},Ae(D).hasGoodEstimate=function(){return this.b9_1.w5_1>1},Ae(D).getDebugInfo=function(){var e=this.hasGoodEstimate(),t=I(this),r=this.b9_1;return new N(e,t,qe(r))},Ae(N).c9=function(){return this.hasGoodEstimate},Ae(N).q=function(){return this.value},Ae(N).d9=function(){return this.history},Ae(M).e9=function(){return this.durationMs},Ae(M).f9=function(){return this.sizeBytes},Ae(M).g9=function(){return this.isLowLatency},Ae(W).appendFetcher=function(e){var t,r,n,i,o,a=V().h9_1;if(_e.r7_1){var u=(i=this,o=e,function(){return F(i,o),Pe}),c=new G(Me,u,function(e,t){return function(){return B(e,t),0===e.l9_1&&e.r9_1&&e.process(),Pe}}(this,e));this.p9_1.l2(e,c),e.addProgressListener((r=this,(n=function(e){return C(r,e),Pe}).callableName="handleProgress",n)),e.addResponseStartListener(c.u9_1),e.addResponseEndListener(c.v9_1),t=Pe}else{e:{var s=a.s7_1;try{if(s.t7_1.n(s))throw Fe("runLocked: recursion lock error");s.t7_1.l(s);var l=function(e,t){return function(){return F(e,t),Pe}}(this,e),f=new G(Me,l,function(e,t){return function(){return B(e,t),0===e.l9_1&&e.r9_1&&e.process(),Pe}}(this,e));this.p9_1.l2(e,f),e.addProgressListener(function(e){var t=function(t){return C(e,t),Pe};return t.callableName="handleProgress",t}(this)),e.addResponseStartListener(f.u9_1),e.addResponseEndListener(f.v9_1);break e}finally{s.t7_1.u1(s)}}t=Pe}return t},Ae(W).removeFetcher=function(e){var t,r,n,i=V().h9_1;if(_e.r7_1){var o=this.p9_1.m2(e);if(null==o);else{var a=this.l9_1-o.t9_1|0;this.l9_1=Math.max(a,0),e.removeProgressListener((r=this,(n=function(e){return C(r,e),Pe}).callableName="handleProgress",n)),e.removeResponseStartListener(o.u9_1),e.removeResponseEndListener(o.v9_1)}t=Pe}else{e:{var u=i.s7_1;try{if(u.t7_1.n(u))throw Fe("runLocked: recursion lock error");u.t7_1.l(u);var c=this.p9_1.m2(e);if(null==c);else{var s=this.l9_1-c.t9_1|0;this.l9_1=Math.max(s,0),e.removeProgressListener(function(e){var t=function(t){return C(e,t),Pe};return t.callableName="handleProgress",t}(this)),e.removeResponseStartListener(c.u9_1),e.removeResponseEndListener(c.v9_1)}break e}finally{u.t7_1.u1(u)}}t=Pe}return t},Ae(W).destroy=function(){var e,t=V().h9_1;if(_e.r7_1){var r=this.s9_1;null==r||r.stop();for(var n=ze(this.p9_1.t()).c();n.d();){var i=n.e();this.removeFetcher(i)}e=Pe}else{e:{var o=t.s7_1;try{if(o.t7_1.n(o))throw Fe("runLocked: recursion lock error");o.t7_1.l(o);var a=this.s9_1;null==a||a.stop();for(var u=ze(this.p9_1.t()).c();u.d();){var c=u.e();this.removeFetcher(c)}break e}finally{o.t7_1.u1(o)}}e=Pe}return e},Ae(W).process=function(){var e,t=V().h9_1;if(_e.r7_1){if(!this.m9_1)return Pe;if(0===this.l9_1&&0===this.k9_1){this.m9_1=!1,this.n9_1=null;var r=this.s9_1;return null==r||r.stop(),Pe}var n=this.k9_1;if(0===n&&(null==this.q9_1||this.q9_1>=U(this)))return Pe;this.k9_1=0;var i=U(this);this.n9_1=this.i9_1.create(),this.o9_1.aa(new M(i,n,!1)),e=Pe}else{e:{var o=t.s7_1;try{if(o.t7_1.n(o))throw Fe("runLocked: recursion lock error");if(o.t7_1.l(o),!this.m9_1)return Pe;if(0===this.l9_1&&0===this.k9_1){this.m9_1=!1,this.n9_1=null;var a=this.s9_1;return null==a||a.stop(),Pe}var u=this.k9_1;if(0===u&&(null==this.q9_1||this.q9_1>=U(this)))return Pe;this.k9_1=0;var c=U(this);this.n9_1=this.i9_1.create(),this.o9_1.aa(new M(c,u,!1));break e}finally{o.t7_1.u1(o)}}e=Pe}return e},Ae(W).addProgressListener=function(e){var t,r=V().h9_1;if(_e.r7_1)this.o9_1.r8(e),t=Pe;else{e:{var n=r.s7_1;try{if(n.t7_1.n(n))throw Fe("runLocked: recursion lock error");n.t7_1.l(n),this.o9_1.r8(e);break e}finally{n.t7_1.u1(n)}}t=Pe}return t},Ae(W).removeProgressListener=function(e){var t,r=V().h9_1;if(_e.r7_1)this.o9_1.s8(e),t=Pe;else{e:{var n=r.s7_1;try{if(n.t7_1.n(n))throw Fe("runLocked: recursion lock error");n.t7_1.l(n),this.o9_1.s8(e);break e}finally{n.t7_1.u1(n)}}t=Pe}return t},Ae(Y).ba=function(){return this.experimentalEmitZeroProgressAfterTimeMs},Ae(Y).ca=function(){return this.experimentalProcessIntervalMs},Ae(Y).da=function(){return this.experimentalCallProcessAfterLastResponseEnd},Ae(q).ea=function(){return this.intervalTaskFactory},Ae(q).fa=function(){return this.experimentalFlags},Ae(z).responseStart=function(){var e=this.ga_1;null==e||e()},Ae(z).responseEnd=function(){var e=this.ha_1;null==e||e()},Ae(z).responseProgress=function(e){var t=this.ia_1;null==t||t(e)},Ae(z).addResponseStartListener=function(e){null==this.ga_1&&(this.ga_1=e)},Ae(z).removeResponseStartListener=function(e){this.ga_1=null},Ae(z).addResponseEndListener=function(e){null==this.ha_1&&(this.ha_1=e)},Ae(z).removeResponseEndListener=function(e){this.ha_1=null},Ae(z).addProgressListener=function(e){null==this.ia_1&&(this.ia_1=e)},Ae(z).removeProgressListener=function(e){this.ia_1=null},Ae(K).getValue=function(){var e=this.ja_1;return null==e?30:e},Ae($).getValue=function(){var e=this.ka_1;return null!=e&&e},Ae(X).getValue=function(){var e=this.la_1;return null!=e&&e},Ae(J).r8=function(e){this.z9_1.l(e)},Ae(J).s8=function(e){this.z9_1.u1(e)},Ae(J).aa=function(e){for(var t=this.z9_1.c();t.d();)t.e()(e)},Ae(Q).start=function(){this.w9_1.start(),this.x9_1=!0},Ae(Q).stop=function(){this.w9_1.stop(),this.x9_1=!1},Ae(Q).y9=function(){return this.x9_1},Ae(Z).r8=function(e){this.p8_1.l(e)},Ae(Z).s8=function(e){this.p8_1.u1(e)},Ae(Z).u3=function(){this.p8_1.u3()},Ae(Z).q8=function(e){if(Ke(this.o8_1,e))return Pe;this.o8_1=e;for(var t=this.p8_1.c();t.d();)t.e()(e)},Ae(ne).ma=function(e){this.watchedTimeProvider=e},Ae(ne).na=function(){return this.watchedTimeProvider},Ae(ne).oa=function(e){this.platformRulesBuilder=e},Ae(ne).pa=function(){return this.platformRulesBuilder},Ae(ne).qa=function(e){this.defaultBufferGoalMs=e},Ae(ne).ra=function(){return this.defaultBufferGoalMs},Ae(ne).sa=function(){var e=$e(new he(Me,this.watchedTimeProvider)),t=this.platformRulesBuilder,r=null==t?null:t.ta(),n=null==r?Xe():r;return new oe(Je(e,n),this.defaultBufferGoalMs)},Ae(oe).xa=function(){return this.va_1},Ae(oe).ya=function(){return this.wa_1},Ae(ue).create=function(e){return new le(e.va_1,e.wa_1)},Ae(le).getBufferGoalMs=function(){for(var e,t=this.za_1,r=De(),n=t.c();n.d();){var i=n.e().bb();null==i||r.l(i)}var o=r.c();if(o.d()){var a=o.e();if(o.d()){var u=a;do{var c=o.e(),s=c;Ne(u,s)>0&&(a=c,u=s)}while(o.d());e=a}else e=a}else e=null;var l=e;return null==l?this.ab_1:l},Ae(he).bb=function(){var e;e:{for(var t=this.eb_1,r=0,n=t.length;r<n;){var i=t[r];if(r=r+1|0,this.fb_1.gb()<=i.cb_1){e=i;break e}}e=null}return null==e?null:e.db_1},Ae(pe).setWatchedTimeMs=function(e){this.hb_1=e},Ae(pe).gb=function(){return this.hb_1},Ae(y).getBufferGoal=r,Ae(v).getBufferGoal=r,we=new P,_e=new ee,new ie,Oe=new ue,function(e){var t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={});(y=r.bgm||(r.bgm={})).BufferGoalManager=o,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(y=r.bgm||(r.bgm={})).BufferGoalManagerFlags=a,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(y=r.bgm||(r.bgm={})).BufferGoalManagerProps=u;var n,i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),y=(r=c.multiplatform||(c.multiplatform={})).bgm||(r.bgm={});t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(y=r.bgm||(r.bgm={})).SkippableFragment=s,y.BufferGoalRuleProps=l,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(y=r.bgm||(r.bgm={})).WatchedTime=f,y.CurrentTime=h,y.GetBufferGoalProps=d,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(y=r.bgm||(r.bgm={})).Rules=p,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).BandwidthEstimator=w,Ue(n.BandwidthEstimator,"Companion",b),t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).BandwidthEstimatorParams=E,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).EwmaBandwidthEstimatorV2=k,n.HalfLife=T,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).Result=R,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).TtfbEstimate=x,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).TtfbEstimateSource=L,Ue(n.TtfbEstimateSource,"Companion",A),t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).TtfbEstimator=D,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).TtfbEstimatorDebugInfo=N,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(_=r.fetcher||(r.fetcher={})).BandwidthInfo=M,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(_=r.fetcher||(r.fetcher={})).FetcherProgressAccumulator=W,Ue(_.FetcherProgressAccumulator,"Companion",V),t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(_=r.fetcher||(r.fetcher={})).FetcherProgressAccumulatorExperimentalFlags=Y,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(_=r.fetcher||(r.fetcher={})).FetcherProgressAccumulatorParams=q,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(_=r.fetcher||(r.fetcher={})).SingleListenerFetcher=z,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),((r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={})).flags||(r.flags={})).DefaultBuffer=K,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),((r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={})).flags||(r.flags={})).DisableDynamicBuffer=$,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),((r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={})).flags||(r.flags={})).LowBufferBeforeStart=X,i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={});var v,m=(r=c.multiplatform||(c.multiplatform={})).v2||(r.v2={}),g=((g=m.bgm||(m.bgm={})).api||(g.api={}),t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(m=r.v2||(r.v2={})).bgm||(m.bgm={}));(v=g.export||(g.export={})).BufferGoalManagerConfig=oe,v.BufferGoalManagerConfig.Builder=ne,v.BufferGoalManagerConfigBuilder=ae,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),g=(m=r.v2||(r.v2={})).bgm||(m.bgm={}),(v=g.export||(g.export={})).BufferGoalManagerFactory=se,Ue(v.BufferGoalManagerFactory,"Companion",ce),i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={});var _=(r=c.multiplatform||(c.multiplatform={})).fetcher||(r.fetcher={}),O=(i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),_=(r=c.multiplatform||(c.multiplatform={})).fetcher||(r.fetcher={}),i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),_=(r=c.multiplatform||(c.multiplatform={})).fetcher||(r.fetcher={}),i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),(r=c.multiplatform||(c.multiplatform={})).utils||(r.utils={}),i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),(r=c.multiplatform||(c.multiplatform={})).utils||(r.utils={}),i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),(r=c.multiplatform||(c.multiplatform={})).utils||(r.utils={}),i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),(r=c.multiplatform||(c.multiplatform={})).utils||(r.utils={}),t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(m=r.v2||(r.v2={})).providers||(m.providers={}));(O.impl||(O.impl={})).WatchedTimeProviderImpl=pe}(e),e})?n.apply(t,i):n)||(e.exports=o)},47228:function(e){e.exports=Object[["has","Own"].join("")]||Object.call.bind(Object.hasOwnProperty)},72573:function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){for(;c.length;)c[0](),c.shift()}function n(e){this.a=s,this.b=void 0,this.f=[];var r=this;try{e((function(e){!function e(r,n){if(r.a==s){if(n==r)throw new TypeError;var i=!1;try{var u=n&&n.then;if(null!=n&&"object"===t(n)&&"function"===typeof u)return void u.call(n,(function(t){i||e(r,t),i=!0}),(function(e){i||o(r,e),i=!0}))}catch(c){return void(i||o(r,c))}r.a=0,r.b=n,a(r)}}(r,e)}),(function(e){o(r,e)}))}catch(n){o(r,n)}}function i(e){return new n((function(t){t(e)}))}function o(e,t){if(e.a==s){if(t==e)throw new TypeError;e.a=1,e.b=t,a(e)}}function a(e){!function(e){c.push(e),1==c.length&&u()}((function(){if(e.a!=s)for(;e.f.length;){var t=(i=e.f.shift())[0],r=i[1],n=i[2],i=i[3];try{0==e.a?n("function"===typeof t?t.call(void 0,e.b):e.b):1==e.a&&("function"===typeof r?n(r.call(void 0,e.b)):i(e.b))}catch(o){i(o)}}}))}var u,c=[];u=function(){setTimeout(r)};var s=2;n.prototype.g=function(e){return this.c(void 0,e)},n.prototype.c=function(e,t){var r=this;return new n((function(n,i){r.f.push([e,t,n,i]),a(r)}))},n.resolve=i,n.reject=function(e){return new n((function(t,r){r(e)}))},n.race=function(e){return new n((function(t,r){for(var n=0;n<e.length;n+=1)i(e[n]).c(t,r)}))},n.all=function(e){return new n((function(t,r){function n(r){return function(n){a[r]=n,(o+=1)==e.length&&t(a)}}var o=0,a=[];0==e.length&&t(a);for(var u=0;u<e.length;u+=1)i(e[u]).c(n(u),r)}))},n.prototype.then=n.prototype.c,n.prototype.catch=n.prototype.g;var l=("object"===("undefined"===typeof self?"undefined":t(self))?self.Promise:window.Promise)||n;"function"!==typeof l.prototype.finally&&(l.prototype.finally=function(e){return this.then((function(t){return l.resolve(e()).then((function(){return t}))}),(function(t){return l.resolve(e()).then((function(){throw t}))}))}),e.exports=l},67767:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="object"===("undefined"===typeof self?"undefined":n(self))?self.URL:window.URL,o=!1;try{var a=new i("b","http://a");a.pathname="c%20d",o="http://a/c%20d"===a.href}catch(c){}if(o)e.exports=i;else{var u=r(12756).J;u.createObjectURL=function(e){return i.createObjectURL(e)},u.revokeObjectURL=function(e){return i.revokeObjectURL(e)},e.exports=u}},9057:function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s={};try{new(function(e){function t(){return i(this,t),r.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(t,e);var r=a(t);return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}((new EventTarget).constructor)),s.EventTarget=(new EventTarget).constructor}catch(EventTarget){!function(e,t){function r(){t.set(this,o(null))}function n(e,t,r){a(e,t,{configurable:!0,writable:!0,value:r})}function i(e){var t=e.options;return t&&t.once&&e.target.removeEventListener(this.type,e.listener),"function"===typeof e.listener?e.listener.call(e.target,this):e.listener.handleEvent(this),this._stopImmediatePropagationFlag}var o=e.create,a=e.defineProperty,u=r.prototype;n(u,"addEventListener",(function(e,r,n){for(var i=t.get(this),o=i[e]||(i[e]=[]),a=0,u=o.length;a<u;a++)if(o[a].listener===r)return;o.push({target:this,listener:r,options:n})})),n(u,"dispatchEvent",(function(e){var r=t.get(this)[e.type];return r&&(n(e,"target",this),n(e,"currentTarget",this),r.slice(0).some(i,e),delete e.currentTarget,delete e.target),!0})),n(u,"removeEventListener",(function(e,r){for(var n=t.get(this),i=n[e]||(n[e]=[]),o=0,a=i.length;o<a;o++)if(i[o].listener===r)return void i.splice(o,1)})),s.EventTarget=r}(Object,new WeakMap)}t.Z=s.EventTarget},12756:function(e,t,r){"use strict";function n(e,t,r){throw(r=new TypeError(e)).code=t,r}function i(e){n("Invalid URL: "+e,"ERR_INVALID_URL")}function o(e,t,r,i){r='The "name" ',i="argument",e&&(r+='and "value" ',i+="s"),t<++e&&n(r+i+" must be specified","ERR_MISSING_ARGS")}function a(e,t){var r=0,n={next:function(){return{value:e[r++],done:r>e.length}}};return t&&(n[Symbol.iterator]=function(){return n}),n}function u(e,t){function r(e,t){for(o(1,arguments.length),t=String(t),f=!1,l=y.length;l--;)(d=y[l])[0]==e&&(f?y.splice(l,1):(d[1]=t,f=!0));f||y.push([e,t]),c()}function i(e,t){o(1,arguments.length),y.push([e,String(t)]),c()}function u(){for(d="",l=0;l<y.length;l++)d&&(d+="&"),d+=encodeURIComponent(y[l][0])+"="+encodeURIComponent(y[l][1]);return d.replace(/%20/g,"+")}function c(){t&&(t.search=y.length?"?"+u().replace(/=$/,""):"")}var s,l,f,h,d,p=this,y=[];try{h=!!Symbol.iterator}catch(v){h=!1}if(e)if(e.keys&&e.getAll)e.forEach((function(e,t){i(t,e)}));else if(e.pop)for(l=0;l<e.length;l++)i.apply(0,e[l]);else if("object"==typeof e)for(s in e)r(s,e[s]);else if("string"==typeof e)for("?"==e[0]&&(e=e.substring(1)),f=decodeURIComponent(e).split("&");s=f.shift();)~(l=s.indexOf("="))||(l=s.length),i(s.substring(0,l),s.substring(++l));return p.append=i,p.delete=function(e){for(o(0,arguments.length),l=y.length;l--;)y[l][0]==e&&y.splice(l,1);c()},p.entries=function(){return a(y,h)},p.forEach=function(e){for("function"!=typeof e&&n("Callback must be a function","ERR_INVALID_CALLBACK"),l=0;l<y.length;l++)e(y[l][1],y[l][0])},p.get=function(e){for(o(0,arguments.length),l=0;l<y.length;l++)if(y[l][0]==e)return y[l][1];return null},p.getAll=function(e){for(o(0,arguments.length),d=[],l=0;l<y.length;l++)y[l][0]==e&&d.push(y[l][1]);return d},p.has=function(e){for(o(0,arguments.length),l=0;l<y.length;l++)if(y[l][0]==e)return!0;return!1},p.keys=function(){for(d=[],l=0;l<y.length;l++)d.push(y[l][0]);return a(d,h)},p.set=r,p.sort=function(){for(f=[],d=[],l=0;l<y.length;f.push(y[l++][0]));for(f.sort();s=f.shift();)for(l=0;l<y.length;l++)if(y[l][0]==s){d.push(y.splice(l,1).shift());break}y=d,c()},p.toString=u,p.values=function(){for(d=[],l=0;l<y.length;l++)d.push(y[l][1]);return a(d,h)},h&&(p[Symbol.iterator]=p.entries),p}function c(e,t){function r(e,t,r,n){return n={enumerable:!0},t||(n.set=function(t){null!=t&&(c[e]=String(t),"href"!=e&&"search"!=e||(o=new u(c.search,c)))}),n.get=r||function(){return function(e){return a.href=c.href,a.protocol="http:","protocol"==e||"href"==e||f.test(c.protocol)?c[e]:"origin"==e?f.test(c.protocol)?c[e]:"null":a[e]}(e)},n}var n,o,a=document.createElement("a"),c=document.createElement("a"),s=document.createElement("input"),l=this,f=/(blob|ftp|wss?|https?):/;if(s.type="url",t=String(t||"").trim(),(s.value=t)&&!s.checkValidity())return i(t);if(e=String(e).trim(),s.value=e||0,s.checkValidity())c.href=e;else{if(!t)return i(e);c.href=t,e&&((o=e.match(/^\/+/))&&2==o[0].length?c.href=c.protocol+e:/[?#]/.test(e[0])?c.href+=e:"/"==e[0]||"/"==c.pathname?c.href=c.origin+"/"+e.replace(/^\/+/,""):(n=c.pathname.split("/"),t=e.replace(/^(\.\/)?/,"").split("../"),c.href=c.origin+n.slice(0,Math.max(1,n.length-t.length)).concat(t.pop()).join("/")))}return o=new u(c.search,c),l.toString=l.toJSON=c.toString.bind(c),Object.defineProperties(l,{href:r("href"),protocol:r("protocol"),username:r("username"),password:r("password"),hostname:r("hostname"),host:r("host"),port:r("port"),search:r("search"),hash:r("hash"),pathname:r("pathname"),origin:r("origin",1),searchParams:r("searchParams",1,(function(){return o}))})}r.d(t,{J:function(){return c}})}},n={};e.m=r,e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,{a:r}),r},e.d=function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.f={},e.e=function(t){return Promise.all(Object.keys(e.f).reduce((function(r,n){return e.f[n](t,r),r}),[]))},e.u=function(e){if(869===e)return"js/chunk.AesCbc.js"},e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t={},e.l=function(r,n,i,o){if(t[r])t[r].push(n);else{var a,u;if(void 0!==i)for(var c=document.getElementsByTagName("script"),s=0;s<c.length;s++){var l=c[s];if(l.getAttribute("src")==r||l.getAttribute("data-webpack")=="webpackStreamPlayerJsonp:"+i){a=l;break}}a||(u=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,e.nc&&a.setAttribute("nonce",e.nc),a.setAttribute("data-webpack","webpackStreamPlayerJsonp:"+i),a.src=r),t[r]=[n];var f=function(e,n){a.onerror=a.onload=null,clearTimeout(h);var i=t[r];if(delete t[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((function(e){return e(n)})),e)return e(n)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),u&&document.head.appendChild(a)}},e.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.p="https://yastatic.net/yandex-video-player-iframe-api-bundles/1.0-13090/",function(){var t={35:0};e.f.j=function(r,n){var i=e.o(t,r)?t[r]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new Promise((function(e,n){i=t[r]=[e,n]}));n.push(i[2]=o);var a=e.p+e.u(r),u=new Error;e.l(a,(function(n){if(e.o(t,r)&&(0!==(i=t[r])&&(t[r]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;u.message="Loading chunk "+r+" failed.\n("+o+": "+a+")",u.name="ChunkLoadError",u.type=o,u.request=a,i[1](u)}}),"chunk-"+r,r)}};var r=function(r,n){var i,o,a=n[0],u=n[1],c=n[2],s=0;if(a.some((function(e){return 0!==t[e]}))){for(i in u)e.o(u,i)&&(e.m[i]=u[i]);if(c)c(e)}for(r&&r(n);s<a.length;s++)o=a[s],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0},n=self.webpackChunkwebpackStreamPlayerJsonp=self.webpackChunkwebpackStreamPlayerJsonp||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))}();e(44165)}();